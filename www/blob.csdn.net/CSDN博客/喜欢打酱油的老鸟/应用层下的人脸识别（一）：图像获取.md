
# 应用层下的人脸识别（一）：图像获取 - 喜欢打酱油的老鸟 - CSDN博客


2019年04月04日 08:39:24[喜欢打酱油的老鸟](https://me.csdn.net/weixin_42137700)阅读数：317标签：[人脸识别																](https://so.csdn.net/so/search/s.do?q=人脸识别&t=blog)个人分类：[人工智能																](https://blog.csdn.net/weixin_42137700/article/category/7820233)


[http://www.woshipm.com/pd/1876389.html](http://www.woshipm.com/pd/1876389.html)

> 本文为大家总结了人脸识别技术在安防领域应用的完整流程，以及产品设计的细节。其中包括：如何获取最佳图像，如何进行设备对接等经验。
![](http://image.woshipm.com/wp-files/2019/01/lrHtz3WFRBGvaR3M3cfZ.jpg)
图像获取是人脸识别的第一步，人脸识别项目中图像来源主要依靠各类监控相机，图像质量很大程度会影响人脸识别的准确率。当算法无法短期内优化时，可以从提升采集图像的质量入手提高人脸识别的准确率。图像质量与采集设备和采集环境密不可分，本文围绕相机选择与架设、相机接入两个主题展开，撰写了图像获取的相关要点。
## 一、相机选择与架设
### 1. 选择合适的相机
**相机的性能决定了图片质量的上限**，因此相机的选择作为人脸识别的第一步至关重要。需要根据不同的使用场景来选择。
户外远距离人脸识别，建议选择具有逆光调节（宽动态）、200万像素以上的一体相机，需要考虑到相机的防雨、防雾、夜视能力。
如果项目对人脸抓拍图片质量要求较高，则可选择专业的人脸抓拍机。
### 2. 镜头的选择
相机镜头焦距决定了相机的成像距离，大多数项目型相机需要自配镜头，下图展示了焦距大小与识别范围之间的关系。注意焦距与识别范围成正相关。
![应用层下的人脸识别（一）：图像获取](http://image.woshipm.com/wp-files/2019/01/D733o1UwIYm9hmuT9MQC.jpg)
图1
### 3. 相机的架设
即使选择了效果最佳的相机和镜头，也需要架设得当才能发挥其最佳效果。于是我们需要事先计算出最合适的**架设高度**和**俯视角**。
![应用层下的人脸识别（一）：图像获取](http://image.woshipm.com/wp-files/2019/01/AXO8mNk2JH5fhXcWpnRe.jpg)
图2
从图2不同角度拍摄的人脸效果对比可知，不同的拍摄角度获取的人脸效果互有差异，而按照人脸采集的惯例，通常是采用水平拍摄的方式最大程度获取目标人员的正脸，如身份证照片的采集。
**俯仰角**
人脸摄像机在安装时要求水平面上位于通道中轴线上（水平无偏转），并垂直面上有一定的俯视角度以照顾不同高矮人员经过时能正常抓拍，**避免一前一后通过抓拍区域时后方人脸被遮挡，俯视角度α 要求保持在 10°±3°。**
**架设高度**
![应用层下的人脸识别（一）：图像获取](http://image.woshipm.com/wp-files/2019/01/36nk3RgxtGeUKEGksxCz.jpg)
图3
如图3所示，**推荐俯视角α为10°**，摄像机视角中轴线延伸到人脸下颌位置，保证人脸处于画面中心区域，取成年人下颌以下的平均高度为 1.5 m（头部长 0.2 m），可得:
L=tan(10°±3°)×D(4)·1
H=L+1.5=tan(10°±3°)×D+1.5 (5)
**例：**室内相机可视距离为6m，则算得H为2.5m，即相机应该架设的高度为2.5米，如图4所示。
![应用层下的人脸识别（一）：图像获取](http://image.woshipm.com/wp-files/2019/01/VD97Am9HuteFBR5AgvcC.jpg)
图4
**架设环境**
摄像机镜头至人员通道出入口中间空旷、无遮挡；
聚焦清晰，光照均匀，特别注意避免逆光、侧光，必要时进行补光；
人脸大小80像素以上(双眼距离大于40像素)；
人脸的俯仰角度在15度以内，左右角度在30度以内。
**调整镜头**
调整镜头的目是获得合适的观察宽度。摄像机像素的大小决定了设备可观察画面宽度的范围，观察宽度过大会导致人脸抓拍图片模糊，所以一个**合适的观察宽度十分重要**，人脸**宽度像素宜大于120，瞳距像素宜大于40**。
如表1，统计了不同像素的最佳观察宽度：
![](http://image.woshipm.com/wp-files/2019/01/INMO5Xt3Dymco2zXHD0S.png)
表1
**例：**按照人像识别要求，人脸横向像素点宜在 120 以上，1080P 摄像机全幅画面横向像素点为 1920，成年人脸的横向平均宽度为 0.16 m，场景宽度（V）计算公式为：
![应用层下的人脸识别（一）：图像获取](http://image.woshipm.com/wp-files/2019/01/Wcpl5zHHIeLd1FGHr2Ew.png)
![应用层下的人脸识别（一）：图像获取](http://image.woshipm.com/wp-files/2019/01/gvfjmSKL5mXrV2Mygv9d.png)
图5
## 二、相机接入
大部分人脸识别的场景，是建立在对实时视频流（图片流）的基础之上，例如你想检测一个摄像机实时画面中的人脸，平台就需要先获取相机的实时视频流（图片流），这就涉及到了**平台与相机等设备对接的问题。**
前端相机与平台之间是通过网络连接的，如果想实现对接，就需要**平台满足相应的网络协议。**
### 1. 什么是网络协议？
网络协议为计算机网络中进行**数据交换而建立的规则、标准或约定的集合**。
例如，网络中一个微机用户和一个大型主机的操作员进行通信，由于这两个数据终端所用字符集不同，因此操作员所输入的命令彼此不认识。
为了能进行通信，规定每个终端都要将各自字符集中的字符先变换为标准字符集的字符后，才进入网络传送，到达目的终端之后，再变换为该终端字符集的字符。
### 2. 网络协议的结构
网络协议分为很多种，例如TCP/IP协议、IPX/SPX协议、NetBEUI协议**等。相机对接用到**的是基于TCP/IP的四层网络，下三层由网卡、驱动、操作系统实现，**研发只需要依据设备的用途开发应用层的协议。**
![应用层下的人脸识别（一）：图像获取](http://image.woshipm.com/wp-files/2019/01/6CVzKAQJS53TXKwgqCfj.jpg)
图6
### 3. 通过协议接入相机
平台对接相机的目的是获取相机的实时视频流（普通相机）或图片流（人脸抓拍相机），所以需要开发相应的流媒体服务协议，常用的视频流媒体协议有RTP、RTSP、RTCP等，一般相机通用的协议为RTSP，人脸抓拍机一般支持FTP。
除此之外还需要在应用层设计添加相机的入口，需要用户手动填写相机的IP地址、端口、用户名称及密码等。
以上就是系列文章的开篇-图像获取的相关内容，后续文章还将会介绍建立人脸库、建立人脸识别任务、人脸比中联动、人脸数据管理相关内容，欢迎关注公众号“阳春白雪”与我交流图像识别相关内容。

