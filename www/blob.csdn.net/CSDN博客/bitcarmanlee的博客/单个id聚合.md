
# 单个id聚合 - bitcarmanlee的博客 - CSDN博客


2017年12月18日 10:01:07[bitcarmanlee](https://me.csdn.net/bitcarmanlee)阅读数：249



## 1.问题描述
最近项目中经常需要处理这样的case：
```python
{
```
```python
"a"
```
```python
,
```
```python
"b"
```
```python
,
```
```python
"c"
```
```python
,
```
```python
"d"
```
```python
,
```
```python
"e"
```
```python
,
```
```python
"f"
```
```python
,
```
```python
"g"
```
```python
}
{
```
```python
"a,b,c"
```
```python
,
```
```python
"d,e"
```
```python
,
```
```python
"f,h"
```
```python
,
```
```python
"k"
```
```python
}
```
上面两个集合，其中第一个集合全是单个id，第二个集合是多个id。现在需要将第一个集合中的id，按照第二个集合聚在一起。例如按上面两个集合，最终的输出为：
```python
de
abc
f
```
## 2.解决方案
这还算是一个比较复杂的问题。经过思考，给出了如下的解决方案：
```python
@Test
    public
```
```python
void
```
```python
mergetest() {
```
```python
String
```
```python
[] singlearr = {
```
```python
"a"
```
```python
,
```
```python
"b"
```
```python
,
```
```python
"c"
```
```python
,
```
```python
"d"
```
```python
,
```
```python
"e"
```
```python
,
```
```python
"f"
```
```python
,
```
```python
"g"
```
```python
};
```
```python
String
```
```python
[] mularr = {
```
```python
"a,b,c"
```
```python
,
```
```python
"d,e"
```
```python
,
```
```python
"f,h"
```
```python
,
```
```python
"k"
```
```python
};
```
```python
//单个id转为set,多个id转为map
```
```python
Set<
```
```python
String
```
```python
> singleset =
```
```python
new
```
```python
HashSet(Arrays.asList(singlearr));
        Map<
```
```python
String
```
```python
,
```
```python
String
```
```python
> map =
```
```python
new
```
```python
HashMap();
```
```python
//先将mularr里的key打散变为map
```
```python
for
```
```python
(
```
```python
String
```
```python
mulids: mularr) {
```
```python
String
```
```python
[] innerarr = mulids.split(
```
```python
","
```
```python
);
```
```python
for
```
```python
(
```
```python
String
```
```python
innerid: innerarr) {
                map.put(innerid, mulids);
            }
        }
        Set<
```
```python
String
```
```python
> resultSet =
```
```python
new
```
```python
HashSet<>();
```
```python
//遍历单个id
```
```python
for
```
```python
(
```
```python
String
```
```python
singleid: singlearr) {
```
```python
if
```
```python
(map.containsKey(singleid)) {
                StringBuilder sb =
```
```python
new
```
```python
StringBuilder();
```
```python
String
```
```python
mulids = map.get(singleid);
```
```python
String
```
```python
[] idlist = mulids.split(
```
```python
","
```
```python
);
```
```python
//查看多个id中的每一个是否在单个id的集合中
```
```python
for
```
```python
(
```
```python
String
```
```python
eachId: idlist) {
```
```python
if
```
```python
(singleset.contains(eachId)) {
                        sb.append(eachId);
                    }
                }
                resultSet.add(sb.toString());
            }
        }
```
```python
for
```
```python
(
```
```python
String
```
```python
each: resultSet) {
            System.out.println(each);
        }
    }
```
空间复杂度分析：
1.将原有的集合变为了一个HashSet与HashMap。假设原来集合的长度为n，则空间复杂度为O(n)。
2.有一个最终记录结果的HashSet。假设原来集合的长度为n，此部分的空间复杂度也为O(n)。
时间复杂度分析：
假设原来集合的长度为n，多id集合中，多id的平均长度为m，则时间复杂度为O(m*n)。

