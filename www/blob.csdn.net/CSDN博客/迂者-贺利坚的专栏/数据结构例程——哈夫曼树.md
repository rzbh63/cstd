
# 数据结构例程——哈夫曼树 - 迂者-贺利坚的专栏 - CSDN博客

2015年10月20日 05:48:16[迂者-贺利坚](https://me.csdn.net/sxhelijian)阅读数：3026


本文是[数据结构基础系列(6)：树和二叉树](http://edu.csdn.net/course/detail/1553)中第15课时[哈夫曼树](http://edu.csdn.net/course/detail/1553/24076)的例程。
![这里写图片描述](https://img-blog.csdn.net/20151020054727651)
```python
#include <stdio.h>
```
```python
#include <string.h>
```
```python
#define N 50
```
```python
//叶子结点数
```
```python
#define M 2*N-1
```
```python
//树中结点总数
```
```python
//哈夫曼树的节点结构类型
```
```python
typedef
```
```python
struct
```
```python
{
```
```python
char
```
```python
data;
```
```python
//结点值
```
```python
double
```
```python
weight;
```
```python
//权重
```
```python
int
```
```python
parent;
```
```python
//双亲结点
```
```python
int
```
```python
lchild;
```
```python
//左孩子结点
```
```python
int
```
```python
rchild;
```
```python
//右孩子结点
```
```python
} HTNode;
```
```python
//每个节点哈夫曼编码的结构类型
```
```python
typedef
```
```python
struct
```
```python
{
```
```python
char
```
```python
cd[N];
```
```python
//存放哈夫曼码
```
```python
int
```
```python
start;
} HCode;
```
```python
//构造哈夫曼树
```
```python
void
```
```python
CreateHT(HTNode ht[],
```
```python
int
```
```python
n)
{
```
```python
int
```
```python
i,k,lnode,rnode;
```
```python
double
```
```python
min1,min2;
```
```python
for
```
```python
(i=
```
```python
0
```
```python
; i<
```
```python
2
```
```python
*n-
```
```python
1
```
```python
; i++)
```
```python
//所有结点的相关域置初值-1
```
```python
ht[i].parent=ht[i].lchild=ht[i].rchild=-
```
```python
1
```
```python
;
```
```python
for
```
```python
(i=n; i<
```
```python
2
```
```python
*n-
```
```python
1
```
```python
; i++)
```
```python
//构造哈夫曼树
```
```python
{
        min1=min2=
```
```python
32767
```
```python
;
```
```python
//lnode和rnode为最小权重的两个结点位置
```
```python
lnode=rnode=-
```
```python
1
```
```python
;
```
```python
for
```
```python
(k=
```
```python
0
```
```python
; k<=i-
```
```python
1
```
```python
; k++)
```
```python
if
```
```python
(ht[k].parent==-
```
```python
1
```
```python
)
```
```python
//只在尚未构造二叉树的结点中查找
```
```python
{
```
```python
if
```
```python
(ht[k].weight<min1)
                {
                    min2=min1;
                    rnode=lnode;
                    min1=ht[k].weight;
                    lnode=k;
                }
```
```python
else
```
```python
if
```
```python
(ht[k].weight<min2)
                {
                    min2=ht[k].weight;
                    rnode=k;
                }
            }
        ht[i].weight=ht[lnode].weight+ht[rnode].weight;
        ht[i].lchild=lnode;
        ht[i].rchild=rnode;
        ht[lnode].parent=i;
        ht[rnode].parent=i;
    }
}
```
```python
//实现哈夫曼编码
```
```python
void
```
```python
CreateHCode(HTNode ht[],HCode hcd[],
```
```python
int
```
```python
n)
{
```
```python
int
```
```python
i,f,c;
    HCode hc;
```
```python
for
```
```python
(i=
```
```python
0
```
```python
; i<n; i++)
```
```python
//根据哈夫曼树求哈夫曼编码
```
```python
{
        hc.start=n;
        c=i;
        f=ht[i].parent;
```
```python
while
```
```python
(f!=-
```
```python
1
```
```python
)
```
```python
//循序直到树根结点
```
```python
{
```
```python
if
```
```python
(ht[f].lchild==c)
```
```python
//处理左孩子结点
```
```python
hc.cd[hc.start--]=
```
```python
'0'
```
```python
;
```
```python
else
```
```python
//处理右孩子结点
```
```python
hc.cd[hc.start--]=
```
```python
'1'
```
```python
;
            c=f;
            f=ht[f].parent;
        }
        hc.start++;
```
```python
//start指向哈夫曼编码最开始字符
```
```python
hcd[i]=hc;
    }
}
```
```python
//输出哈夫曼编码
```
```python
void
```
```python
DispHCode(HTNode ht[],HCode hcd[],
```
```python
int
```
```python
n)
{
```
```python
int
```
```python
i,k;
```
```python
double
```
```python
sum=
```
```python
0
```
```python
,m=
```
```python
0
```
```python
;
```
```python
int
```
```python
j;
```
```python
printf
```
```python
(
```
```python
"  输出哈夫曼编码:\n"
```
```python
);
```
```python
//输出哈夫曼编码
```
```python
for
```
```python
(i=
```
```python
0
```
```python
; i<n; i++)
    {
        j=
```
```python
0
```
```python
;
```
```python
printf
```
```python
(
```
```python
"      %c:\t"
```
```python
,ht[i].data);
```
```python
for
```
```python
(k=hcd[i].start; k<=n; k++)
        {
```
```python
printf
```
```python
(
```
```python
"%c"
```
```python
,hcd[i].cd[k]);
            j++;
        }
        m+=ht[i].weight;
        sum+=ht[i].weight*j;
```
```python
printf
```
```python
(
```
```python
"\n"
```
```python
);
    }
```
```python
printf
```
```python
(
```
```python
"\n  平均长度=%g\n"
```
```python
,
```
```python
1.0
```
```python
*sum/m);
}
```
```python
int
```
```python
main()
{
```
```python
int
```
```python
n=
```
```python
8
```
```python
,i;
```
```python
//n表示初始字符串的个数
```
```python
char
```
```python
str[]= {
```
```python
'a'
```
```python
,
```
```python
'b'
```
```python
,
```
```python
'c'
```
```python
,
```
```python
'd'
```
```python
,
```
```python
'e'
```
```python
,
```
```python
'f'
```
```python
,
```
```python
'g'
```
```python
,
```
```python
'h'
```
```python
};
```
```python
double
```
```python
fnum[]= {
```
```python
0.07
```
```python
,
```
```python
0.19
```
```python
,
```
```python
0.02
```
```python
,
```
```python
0.06
```
```python
,
```
```python
0.32
```
```python
,
```
```python
0.03
```
```python
,
```
```python
0.21
```
```python
,
```
```python
0.1
```
```python
};
    HTNode ht[M];
    HCode hcd[N];
```
```python
for
```
```python
(i=
```
```python
0
```
```python
; i<n; i++)
    {
        ht[i].data=str[i];
        ht[i].weight=fnum[i];
    }
```
```python
printf
```
```python
(
```
```python
"\n"
```
```python
);
    CreateHT(ht,n);
    CreateHCode(ht,hcd,n);
    DispHCode(ht,hcd,n);
```
```python
printf
```
```python
(
```
```python
"\n"
```
```python
);
```
```python
return
```
```python
0
```
```python
;
}
```

