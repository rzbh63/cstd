
# 数据的直接定址表(1603) - 迂者-贺利坚的专栏 - CSDN博客

2017年05月12日 21:54:40[迂者-贺利坚](https://me.csdn.net/sxhelijian)阅读数：623


本文为《汇编语言程序设计》1603小节例程。点击[链接…](http://blog.csdn.net/sxhelijian/article/details/56671827)进课程主页。
问题：以十六进制的形式在屏幕中间显示给定的byte 型数据。
分析：先将一个byte的高4位和低4 位分开，显示对应的数码字符
最简解决方案：最简方案：建立一张表，表中依次存储字符’0’~’F’，通过数值0~15直接查找到对应的字符。
程序：
```python
assume cs:code
code segment
start:  mov al,
```
```python
12
```
```python
h
        call showbyte
        mov ax,
```
```python
4
```
```python
c00h
```
```python
int
```
```python
21
```
```python
h
;子程序：
;用al传送要显示的数据
showbyte:
        jmp short show
        table db
```
```python
'0123456789ABCDEF'
```
```python
;字符表
show:
```
```python
push
```
```python
bx
```
```python
push
```
```python
es
```
```python
push
```
```python
cx
        mov ah,al
    mov cl,
```
```python
4
```
```python
shr ah,cl   ;右移
```
```python
4
```
```python
位，ah中得到高
```
```python
4
```
```python
位的值
```
```python
and
```
```python
al,
```
```python
00001111
```
```python
b        ;al中为低
```
```python
4
```
```python
位的值
        mov bl,ah
        mov bh,
```
```python
0
```
```python
mov ah,table[bx]        ;用高
```
```python
4
```
```python
位的值作为相对于table的偏移，取得对应的字符
        mov bx,0b800h
        mov es,bx
        mov es:[
```
```python
160
```
```python
*12
```
```python
+
```
```python
40
```
```python
*2
```
```python
],ah
        mov bl,al
        mov bh,
```
```python
0
```
```python
mov al,table[bx]        ;用低
```
```python
4
```
```python
位的值作为相对于table的偏移，取得对应的字符
        mov es:[
```
```python
160
```
```python
*12
```
```python
+
```
```python
40
```
```python
*2
```
```python
+
```
```python
2
```
```python
],al
```
```python
pop
```
```python
cx
```
```python
pop
```
```python
es
```
```python
pop
```
```python
bx
        ret
code ends
end start
```
应用示例：为加快运算速度而采用查表方法
问题：编写程序，计算sin(x)，x∈{0°,30°,60°,90°,120°,150°,180°}，并在屏幕中间显示计算结果。
空间换时间方案：将所要计算的sin(x) 的结果都存储到一张表中，然后用角度值来查表，找到对应的sin(x)的值。
具体方法：（1）用ax向子程序传递角度；（2）以 角度值/30 为table 表中的偏移，可以找到对应的字符串的首地址。
参考程序：
```python
assume cs:code
code segment
start:  mov al,
```
```python
60
```
```python
call showsin
        mov ax,
```
```python
4
```
```python
c00h
```
```python
int
```
```python
21
```
```python
h
showsin:
        jmp short show
        table dw ag
```
```python
0
```
```python
,ag3
```
```python
0
```
```python
,ag6
```
```python
0
```
```python
,ag9
```
```python
0
```
```python
,ag12
```
```python
0
```
```python
,ag15
```
```python
0
```
```python
,ag18
```
```python
0
```
```python
;字符串偏移地址表
        ag
```
```python
0
```
```python
db
```
```python
'0'
```
```python
,
```
```python
0
```
```python
;
```
```python
sin
```
```python
(
```
```python
0
```
```python
)对应的字符串“
```
```python
0
```
```python
”
        ag3
```
```python
0
```
```python
db
```
```python
'0.5'
```
```python
,
```
```python
0
```
```python
;
```
```python
sin
```
```python
(
```
```python
0
```
```python
)对应的字符串“
```
```python
0
```
```python
.
```
```python
5
```
```python
”
        ag6
```
```python
0
```
```python
db
```
```python
'0.866'
```
```python
,
```
```python
0
```
```python
;
```
```python
sin
```
```python
(
```
```python
0
```
```python
)对应的字符串“
```
```python
0
```
```python
.
```
```python
866
```
```python
”
        ag9
```
```python
0
```
```python
db
```
```python
'1'
```
```python
,
```
```python
0
```
```python
;
```
```python
sin
```
```python
(
```
```python
0
```
```python
)对应的字符串“
```
```python
1
```
```python
”
        ag12
```
```python
0
```
```python
db
```
```python
'0.866'
```
```python
,
```
```python
0
```
```python
;
```
```python
sin
```
```python
(
```
```python
0
```
```python
)对应的字符串“
```
```python
0
```
```python
.
```
```python
866
```
```python
”
        ag15
```
```python
0
```
```python
db
```
```python
'0.5'
```
```python
,
```
```python
0
```
```python
;
```
```python
sin
```
```python
(
```
```python
0
```
```python
)对应的字符串“
```
```python
0
```
```python
.
```
```python
5
```
```python
”
        ag18
```
```python
0
```
```python
db
```
```python
'0'
```
```python
,
```
```python
0
```
```python
;
```
```python
sin
```
```python
(
```
```python
0
```
```python
)对应的字符串“
```
```python
0
```
```python
”
show:
```
```python
push
```
```python
bx
```
```python
push
```
```python
es
```
```python
push
```
```python
si
        mov bx,0b800h
        mov es,bx
;以下用角度值/
```
```python
30
```
```python
作为相对于table的偏移量，取得对应的字符串的偏移地址，放在bx中
        mov ah,
```
```python
0
```
```python
mov bl,
```
```python
30
```
```python
div bl
        mov bl,al
        mov bh,
```
```python
0
```
```python
add bx,bx
        mov bx,table[bx]
;以下显示
```
```python
sin
```
```python
(
```
```python
x
```
```python
)对应的字符串
        mov si,
```
```python
160
```
```python
*12
```
```python
+
```
```python
40
```
```python
*2
```
```python
shows:  mov ah,cs:[bx]
        cmp ah,
```
```python
0
```
```python
je showret
        mov es:[si],ah
        inc bx
        add si,
```
```python
2
```
```python
jmp shows
showret:
```
```python
pop
```
```python
si
```
```python
pop
```
```python
es
```
```python
pop
```
```python
bx
        ret
code ends
end start
```

