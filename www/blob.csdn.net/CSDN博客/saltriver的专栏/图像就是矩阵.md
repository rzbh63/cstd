
# 图像就是矩阵 - saltriver的专栏 - CSDN博客


2017年12月23日 22:26:43[saltriver](https://me.csdn.net/saltriver)阅读数：6418


学过线性代数的对矩阵并不陌生。一般来说，图像是一个标准的矩形，有着宽度（width）和高度（height）。而矩阵有着行（row）和列（column），矩阵的操作在数学和计算机中的处理都很常见且成熟，于是很自然的就把图像作为一个矩阵，把对图像的操作转换成对矩阵的操作，实际上所有的图像处理工具都是这么做的。
我们看看下面这张图像：
![这里写图片描述](https://img-blog.csdn.net/20171223222204176?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2FsdHJpdmVy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
用opencv读取：
```python
import
```
```python
cv2
mountain = cv2.imread(
```
```python
'mountain.bmp'
```
```python
,
```
```python
0
```
```python
)
```
```python
# 读取为灰度图
```
```python
print(
```
```python
"shape="
```
```python
, mountain.shape)
print(
```
```python
"type="
```
```python
, type(mountain))
```
输出结果：
```python
type
```
```python
=
```
```python
<
```
```python
class
```
```python
'numpy.ndarray'
```
```python
>
shape= (
```
```python
480
```
```python
,
```
```python
640
```
```python
)
```
可以看出，图像在读取后，存在了一个ndarray中，这是numpy中的矩阵类型。
源图像的宽度是640，高度是480，我们一般习惯上依次用高度、宽度的顺序。在矩阵中，高度对应的是多少行（row），宽度对应的是多少列（column），而矩阵的顺序是（row，column），所以输出的shape是（480, 640）。
把图像作为矩阵，可以很方便的进行一些操作，例如取图像中某个区域的值，也就是所谓的crop（裁剪）操作。
```python
print
```
```python
(mountain[
```
```python
9
```
```python
:
```
```python
12
```
```python
,
```
```python
9
```
```python
:
```
```python
12
```
```python
])
```
输出结果：
```python
[[244 244 244]
 [244 236 244]
 [244 244 236]]
```
取大一些的区域，并显示出来。
```python
cv2
```
```python
.imshow
```
```python
(
```
```python
"crop"
```
```python
, mountain[
```
```python
200
```
```python
:
```
```python
400
```
```python
,
```
```python
200
```
```python
:
```
```python
600
```
```python
])
print(mountain[
```
```python
200
```
```python
:
```
```python
400
```
```python
,
```
```python
200
```
```python
:
```
```python
600
```
```python
]
```
```python
.shape
```
```python
)
cv2
```
```python
.waitKey
```
```python
()
```
输出结果：
![这里写图片描述](https://img-blog.csdn.net/20171223222409708?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2FsdHJpdmVy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
```python
(
```
```python
200
```
```python
,
```
```python
400
```
```python
)
```
对于如下的彩色图像：
![这里写图片描述](https://img-blog.csdn.net/20171223222440667?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2FsdHJpdmVy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
```python
fruits = cv2.imread(
```
```python
'fruits.bmp'
```
```python
)
```
```python
print
```
```python
(
```
```python
"type="
```
```python
,
```
```python
type
```
```python
(fruits))
```
```python
print
```
```python
(
```
```python
"shape="
```
```python
, fruits.shape)
```
```python
print
```
```python
(fruits[
```
```python
100
```
```python
,
```
```python
100
```
```python
])
```
输出结果：
```python
type
```
```python
=
```
```python
<
```
```python
class
```
```python
'numpy.ndarray'
```
```python
>
shape= (
```
```python
480
```
```python
,
```
```python
512
```
```python
,
```
```python
3
```
```python
)
[
```
```python
52
```
```python
96
```
```python
116
```
```python
]
```
可以看出，彩色图像同样是一个矩阵，只是矩阵中的每一个点不是一个值，而是包含3个值的数组，这3个值就是RGB值，下面的代码查看RGB3通道的图像（注意，opencv的顺序是BGR）。
```python
import matplotlib
```
```python
.pyplot
```
```python
as plt
fruits = cv2
```
```python
.cvtColor
```
```python
(fruits, cv2
```
```python
.COLOR
```
```python
_BGR2RGB)
fruits_all = [fruits, fruits[:, :,
```
```python
0
```
```python
], fruits[:, :,
```
```python
1
```
```python
], fruits[:, :,
```
```python
2
```
```python
]]
channels = [
```
```python
"RGB"
```
```python
,
```
```python
"red"
```
```python
,
```
```python
"green"
```
```python
,
```
```python
"blue"
```
```python
]
for i
```
```python
in
```
```python
range(
```
```python
4
```
```python
):
    plt
```
```python
.subplot
```
```python
(
```
```python
2
```
```python
,
```
```python
2
```
```python
, i +
```
```python
1
```
```python
)
    plt
```
```python
.imshow
```
```python
(fruits_all[i], cmap=plt
```
```python
.cm
```
```python
.gray
```
```python
)
    plt
```
```python
.title
```
```python
(channels[i])
plt
```
```python
.show
```
```python
()
for fruit
```
```python
in
```
```python
fruits_all:
    print(fruit
```
```python
.shape
```
```python
)
```
![这里写图片描述](https://img-blog.csdn.net/20171223222549352?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2FsdHJpdmVy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
```python
(
```
```python
480
```
```python
,
```
```python
512
```
```python
,
```
```python
3
```
```python
)
```
```python
(
```
```python
480
```
```python
,
```
```python
512
```
```python
)
```
```python
(
```
```python
480
```
```python
,
```
```python
512
```
```python
)
```
```python
(
```
```python
480
```
```python
,
```
```python
512
```
```python
)
```
可以看出，每一个RGB通道都是一个矩阵。这3个RGB通道叠在一起形成了彩色图像。
你还可以方便的得到某一行图像的值。
```python
fruit_red = fruits[:, :,
```
```python
0
```
```python
]
plt
```
```python
.plot
```
```python
(fruit_red[
```
```python
200
```
```python
, :])
plt
```
```python
.show
```
```python
()
```
输出结果：
![这里写图片描述](https://img-blog.csdn.net/20171223222629905?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2FsdHJpdmVy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
那么，到底是把图像看作函数，还是看作矩阵？都可以，看你要干什么了，2个不同的角度而已。

