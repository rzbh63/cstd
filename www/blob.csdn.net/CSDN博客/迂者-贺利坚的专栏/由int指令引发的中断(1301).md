
# 由int指令引发的中断(1301) - 迂者-贺利坚的专栏 - CSDN博客

2017年05月12日 22:20:18[迂者-贺利坚](https://me.csdn.net/sxhelijian)阅读数：574


本文为《汇编语言程序设计》1301小节例程。点击[链接…](http://blog.csdn.net/sxhelijian/article/details/56671827)进课程主页。
示例1：中断7ch的中断例程的编写和安装
任务：编写程序，写7ch的中断例程，完成特定任务
功能：求一个word型数据的平方
参数： (ax)=要计算的数据
返回值：dx, ax中存放结果的高、低16位
程序实现
```python
assume cs:code
code segment
```
```python
start:
```
```python
mov
```
```python
ax,cs
```
```python
mov
```
```python
ds,ax
```
```python
mov
```
```python
si,offset sqr
```
```python
mov
```
```python
ax,
```
```python
0
```
```python
mov
```
```python
es,ax
```
```python
mov
```
```python
di,
```
```python
200
```
```python
h
```
```python
mov
```
```python
cx,offset sqrend - offset sqr
        cld 
        rep movsb
```
```python
mov
```
```python
ax,
```
```python
0
```
```python
mov
```
```python
es,ax
```
```python
mov
```
```python
word ptr es:[
```
```python
7
```
```python
ch*
```
```python
4
```
```python
],
```
```python
200
```
```python
h
```
```python
mov
```
```python
word ptr es:[
```
```python
7
```
```python
ch*
```
```python
4
```
```python
+
```
```python
2
```
```python
],
```
```python
0
```
```python
mov
```
```python
ax,
```
```python
4
```
```python
c00h
        int
```
```python
21
```
```python
h
  sqr:
```
```python
mul
```
```python
ax
        iret
```
```python
sqrend:
```
```python
nop
```
```python
code ends
end start
```
测试说明：用下面的程序，通过调用中断求2*3456^2
```python
assume cs:code
 code segment
 start: mov ax,
```
```python
3456
```
```python
int
```
```python
7
```
```python
ch ; 计算(ax)^
```
```python
2
```
```python
add
```
```python
ax,ax
         adc dx, dx
         mov ax,
```
```python
4
```
```python
c00h
         int
```
```python
21
```
```python
h
 code
```
```python
ends
```
```python
end
```
```python
start
```
示例2 ：中断7ch的中断例程，7ch的中断例程的任务是——
功能：将以 0结尾的字符串转化为大写。
参数： ds:si指向字符串的首地址
程序：
```python
assume cs:code
code segment
```
```python
start:
```
```python
mov
```
```python
ax,cs
```
```python
mov
```
```python
ds,ax
```
```python
mov
```
```python
si,offset capital
```
```python
mov
```
```python
ax,
```
```python
0
```
```python
mov
```
```python
es,ax
```
```python
mov
```
```python
di,
```
```python
200
```
```python
h
```
```python
mov
```
```python
cx,offset capitalend - offset capital
        cld
        rep movsb
```
```python
mov
```
```python
ax,
```
```python
0
```
```python
mov
```
```python
es,ax
```
```python
mov
```
```python
word ptr es:[
```
```python
7
```
```python
ch*
```
```python
4
```
```python
],
```
```python
200
```
```python
h
```
```python
mov
```
```python
word ptr es:[
```
```python
7
```
```python
ch*
```
```python
4
```
```python
+
```
```python
2
```
```python
],
```
```python
0
```
```python
capital:
```
```python
push
```
```python
cx
```
```python
push
```
```python
si
```
```python
change:
```
```python
mov
```
```python
cl,[si]
```
```python
mov
```
```python
ch,
```
```python
0
```
```python
jcxz ok
```
```python
and
```
```python
byte ptr [si],
```
```python
11011111
```
```python
b
```
```python
inc
```
```python
si
```
```python
jmp
```
```python
short change
```
```python
ok:
```
```python
pop
```
```python
si
```
```python
pop
```
```python
cx
        iret
```
```python
capitalend:
```
```python
nop
```
```python
mov
```
```python
ax,
```
```python
4
```
```python
c00h
        int
```
```python
21
```
```python
h
code ends
end start
```
测试说明：用下面的程序调用中断7ch
```python
assume
```
```python
cs:code
```
```python
data
```
```python
segment
```
```python
db 'conversation',
```
```python
0
```
```python
data
```
```python
ends
```
```python
code
```
```python
segment
```
```python
start
```
```python
:  mov ax,
```
```python
data
```
```python
mov ds,ax
       mov si,
```
```python
0
```
```python
int
```
```python
7
```
```python
ch
       mov ax,
```
```python
4
```
```python
c00h
       int
```
```python
21
```
```python
h
```
```python
code
```
```python
ends
```
```python
end
```
```python
start
```

