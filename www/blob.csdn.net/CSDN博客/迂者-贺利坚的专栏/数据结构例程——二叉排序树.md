
# 数据结构例程——二叉排序树 - 迂者-贺利坚的专栏 - CSDN博客

2015年11月19日 19:18:01[迂者-贺利坚](https://me.csdn.net/sxhelijian)阅读数：2361


本文是[[数据结构基础系列(8)：查找](http://edu.csdn.net/course/detail/1669)]中第[6](http://edu.csdn.net/course/detail/1669/25730)、[7](http://edu.csdn.net/course/detail/1669/25731)课时[ 二叉排序树]的例程。
```python
#include <stdio.h>
```
```python
#include <malloc.h>
```
```python
typedef
```
```python
int
```
```python
KeyType;
```
```python
typedef
```
```python
char
```
```python
InfoType[
```
```python
10
```
```python
];
```
```python
typedef
```
```python
struct
```
```python
node
```
```python
//记录类型
```
```python
{
    KeyType key;
```
```python
//关键字项
```
```python
InfoType data;
```
```python
//其他数据域
```
```python
struct
```
```python
node *lchild,*rchild;
```
```python
//左右孩子指针
```
```python
} BSTNode;
```
```python
//在p所指向的二叉排序树中，插入值为k的节点
```
```python
int
```
```python
InsertBST(BSTNode *&p,KeyType k)
{
```
```python
if
```
```python
(p==
```
```python
NULL
```
```python
)
```
```python
//原树为空, 新插入的记录为根结点
```
```python
{
        p=(BSTNode *)malloc(
```
```python
sizeof
```
```python
(BSTNode));
        p->key=k;
        p->lchild=p->rchild=
```
```python
NULL
```
```python
;
```
```python
return
```
```python
1
```
```python
;
    }
```
```python
else
```
```python
if
```
```python
(k==p->key)
```
```python
//树中存在相同关键字的结点,返回0
```
```python
return
```
```python
0
```
```python
;
```
```python
else
```
```python
if
```
```python
(k<p->key)
```
```python
return
```
```python
InsertBST(p->lchild,k);
```
```python
//插入到*p的左子树中
```
```python
else
```
```python
return
```
```python
InsertBST(p->rchild,k);
```
```python
//插入到*p的右子树中
```
```python
}
```
```python
//由有n个元素的数组A，创建一个二叉排序树
```
```python
BSTNode *CreateBST(KeyType A[],
```
```python
int
```
```python
n)
```
```python
//返回BST树根结点指针
```
```python
{
    BSTNode *bt=
```
```python
NULL
```
```python
;
```
```python
//初始时bt为空树
```
```python
int
```
```python
i=
```
```python
0
```
```python
;
```
```python
while
```
```python
(i<n)
    {
        InsertBST(bt,A[i]);
```
```python
//将关键字A[i]插入二叉排序树T中
```
```python
i++;
    }
```
```python
return
```
```python
bt;
```
```python
//返回建立的二叉排序树的根指针
```
```python
}
```
```python
//输出一棵排序二叉树
```
```python
void
```
```python
DispBST(BSTNode *bt)
{
```
```python
if
```
```python
(bt!=
```
```python
NULL
```
```python
)
    {
        printf(
```
```python
"%d"
```
```python
,bt->key);
```
```python
if
```
```python
(bt->lchild!=
```
```python
NULL
```
```python
|| bt->rchild!=
```
```python
NULL
```
```python
)
        {
            printf(
```
```python
"("
```
```python
);
```
```python
//有孩子结点时才输出(
```
```python
DispBST(bt->lchild);
```
```python
//递归处理左子树
```
```python
if
```
```python
(bt->rchild!=
```
```python
NULL
```
```python
) printf(
```
```python
","
```
```python
);
```
```python
//有右孩子结点时才输出,
```
```python
DispBST(bt->rchild);
```
```python
//递归处理右子树
```
```python
printf(
```
```python
")"
```
```python
);
```
```python
//有孩子结点时才输出)
```
```python
}
    }
}
```
```python
//在bt指向的节点为根的排序二叉树中，查找值为k的节点。找不到返回NULL
```
```python
BSTNode *SearchBST(BSTNode *bt,KeyType k)
{
```
```python
if
```
```python
(bt==
```
```python
NULL
```
```python
|| bt->key==k)
```
```python
//递归终结条件
```
```python
return
```
```python
bt;
```
```python
if
```
```python
(k<bt->key)
```
```python
return
```
```python
SearchBST(bt->lchild,k);
```
```python
//在左子树中递归查找
```
```python
else
```
```python
return
```
```python
SearchBST(bt->rchild,k);
```
```python
//在右子树中递归查找
```
```python
}
```
```python
//二叉排序树中查找的非递归算法
```
```python
BSTNode *SearchBST1(BSTNode *bt,KeyType k)
{
```
```python
while
```
```python
(bt!=
```
```python
NULL
```
```python
)
    {
```
```python
if
```
```python
(k==bt->key)
```
```python
return
```
```python
bt;
```
```python
else
```
```python
if
```
```python
(k<bt->key)
            bt=bt->lchild;
```
```python
else
```
```python
bt=bt->rchild;
    }
```
```python
return
```
```python
NULL
```
```python
;
}
```
```python
void
```
```python
Delete1(BSTNode *p,BSTNode *&r)
```
```python
//当被删*p结点有左右子树时的删除过程
```
```python
{
    BSTNode *q;
```
```python
if
```
```python
(r->rchild!=
```
```python
NULL
```
```python
)
        Delete1(p,r->rchild);
```
```python
//递归找最右下结点
```
```python
else
```
```python
//找到了最右下结点*r
```
```python
{
        p->key=r->key;
```
```python
//将*r的关键字值赋给*p
```
```python
q=r;
        r=r->lchild;
```
```python
//直接将其左子树的根结点放在被删结点的位置上
```
```python
free(q);
```
```python
//释放原*r的空间
```
```python
}
}
```
```python
void
```
```python
Delete(BSTNode *&p)
```
```python
//从二叉排序树中删除*p结点
```
```python
{
    BSTNode *q;
```
```python
if
```
```python
(p->rchild==
```
```python
NULL
```
```python
)
```
```python
//*p结点没有右子树的情况
```
```python
{
        q=p;
        p=p->lchild;
```
```python
//直接将其右子树的根结点放在被删结点的位置上
```
```python
free(q);
    }
```
```python
else
```
```python
if
```
```python
(p->lchild==
```
```python
NULL
```
```python
)
```
```python
//*p结点没有左子树的情况
```
```python
{
        q=p;
        p=p->rchild;
```
```python
//将*p结点的右子树作为双亲结点的相应子树
```
```python
free(q);
    }
```
```python
else
```
```python
Delete1(p,p->lchild);
```
```python
//*p结点既没有左子树又没有右子树的情况
```
```python
}
```
```python
int
```
```python
DeleteBST(BSTNode *&bt, KeyType k)
```
```python
//在bt中删除关键字为k的结点
```
```python
{
```
```python
if
```
```python
(bt==
```
```python
NULL
```
```python
)
```
```python
return
```
```python
0
```
```python
;
```
```python
//空树删除失败
```
```python
else
```
```python
{
```
```python
if
```
```python
(k<bt->key)
```
```python
return
```
```python
DeleteBST(bt->lchild,k);
```
```python
//递归在左子树中删除为k的结点
```
```python
else
```
```python
if
```
```python
(k>bt->key)
```
```python
return
```
```python
DeleteBST(bt->rchild,k);
```
```python
//递归在右子树中删除为k的结点
```
```python
else
```
```python
{
            Delete(bt);
```
```python
//调用Delete(bt)函数删除*bt结点
```
```python
return
```
```python
1
```
```python
;
        }
    }
}
```
```python
int
```
```python
main()
{
    BSTNode *bt;
```
```python
int
```
```python
n=
```
```python
12
```
```python
,x=
```
```python
46
```
```python
;
    KeyType a[]= {
```
```python
25
```
```python
,
```
```python
18
```
```python
,
```
```python
46
```
```python
,
```
```python
2
```
```python
,
```
```python
53
```
```python
,
```
```python
39
```
```python
,
```
```python
32
```
```python
,
```
```python
4
```
```python
,
```
```python
74
```
```python
,
```
```python
67
```
```python
,
```
```python
60
```
```python
,
```
```python
11
```
```python
};
    bt=CreateBST(a,n);
    printf(
```
```python
"BST:"
```
```python
);
    DispBST(bt);
    printf(
```
```python
"\n"
```
```python
);
    printf(
```
```python
"删除%d结点\n"
```
```python
,x);
```
```python
if
```
```python
(SearchBST(bt,x)!=
```
```python
NULL
```
```python
)
    {
        DeleteBST(bt,x);
        printf(
```
```python
"BST:"
```
```python
);
        DispBST(bt);
        printf(
```
```python
"\n"
```
```python
);
    }
```
```python
return
```
```python
0
```
```python
;
}
```

