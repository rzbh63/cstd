# halcon边缘提取和赃物检测的常用方法

2015年07月07日 22:06:46 [龙舞天涯](https://me.csdn.net/u011135902) 阅读数：3248



## 一、边缘提取

1、设置ROI兴趣区域

2、快速二值化，并连接相邻区域。

这样做的目的是进一步减少目标区域，通过二值化将目标区域大概轮廓提取出来

3、提取最接近目标区域的轮廓

常用函数有boundary**，gen_contour_region_xld**

4、根据自己的需求提取需要的初步轮廓

5、将初步提取的初步轮廓进行膨胀操作

6、将膨胀后的区域和原图进行减操作（在这步之前有可能需要对原图进行高斯滤波）。这样就能得到只有边缘的真实图像

7、用canny或其他算子（根据需要）提取亚像素轮廓，一般使用edges_sub_pix函数

8、处理和计算

得到真实的边缘XLD后你可能需要进一步处理得到你想要的线、弧等。

你可能用到的函数segment_contours_xld（分割）  union_collinear_contours_xld（联合相邻或相同角度直线）select_contours_xld（提取想要的轮廓） union_cocircular_contours_xld（联合相同圆）等等

得到轮廓后如果你不知道怎么处理后得到你想要的东西（线、弧、圆、角、矩形）你都可以将轮廓转化为点，然后用点集合来拟合任何你想要的东西。



## 二、BLOB分析检测（前面一篇有详细讲解，本骗只讲思路）

  (1)应用ROI，可以使Blob分析加速。

（2）匹配ROI区域或图像，详将GUIDEIIB以形状为基础的匹配。

（3）校正图像<经常用来去除镜头畸变或把图像转换到参考点视角，如双目视觉时的图像校正>

（4）图像前处理

（5）引用分割参数

（6）分割图像

（7）区域处理

（8）特征提取

（9）把提取的结果转换到世界坐标中

（10）结果可视化。

​    相机的标定和矫正不在本篇的学习之中。直接讲提取BLOB

1、一般先使用均值滤波去噪

2、利用去噪图像与平滑图像的*OFFSET提取区域边缘，常见函数dyn_threshold* 

*3、提取连通域dyn_threshold* 

*4、根据形状或是灰度等特征来提取你想要的blob。*

​    另一种方法就是分水岭算法

*watersheds (ImageGauss, Basins, Watersheds)**/*

*1、对图像进行高斯滤波*



还有的图形更简单直接二值化就可以啦



*bin_threshold (Fin, Dark) //*分割图像，输出*Dark*区域，*Fin*已经被处理为区域*//*

*difference (Fin, Dark, Background) //*计算*Fin*与*Dark*两个区域的补集*//*

还有个函数应该说是让你高兴还是沮丧呢，以为一个函数就可以直接提取你想要的，但是参数很难调整

​    lines_gauss(Image, Lines, 6, 0.3, 0.5, 'light', 'true', 'gaussian', 'true')

三、赃物检测

1、得到两个不同高斯标准差的高斯积卷

2、对原始图像进行傅里叶变换'to_fre'

3、用之前的积卷对图像做积卷滤波

4、傅里叶反变换‘from_fre’



对于傅里叶变换还不是很熟悉