
# java读取properties文件详解 - bitcarmanlee的博客 - CSDN博客


2017年05月02日 17:25:16[bitcarmanlee](https://me.csdn.net/bitcarmanlee)阅读数：878


在日常开发中通常我们会存储配置参数信息到属性文件，这些属性文件最常见的就是键值对文件。对于配置文件来说，最常见的操作无非就这两种：读与写。以下针对这两种场景我们来做一个详细的示例。
## 1.读取properties文件中的键值对
假设我们在与src平级的路径中有一个conf文件夹，里面有个province.properties的属性文件，文件里的内容格式如下：
```python
北京市={
```
```python
"citycode"
```
```python
:
```
```python
"010"
```
```python
,
```
```python
"adcode"
```
```python
:
```
```python
"110100"
```
```python
,
```
```python
"name"
```
```python
:
```
```python
"北京市"
```
```python
,
```
```python
"center"
```
```python
:
```
```python
"116.405285,39.904989"
```
```python
,
```
```python
"level"
```
```python
:
```
```python
"city"
```
```python
,
```
```python
"districts"
```
```python
:
```
```python
[{
```
```python
"citycode"
```
```python
:
```
```python
"010"
```
```python
,
```
```python
"adcode"
```
```python
:
```
```python
"110101"
```
```python
,
```
```python
"name"
```
```python
:
```
```python
"东城区"
```
```python
,
```
```python
"center"
```
```python
:
```
```python
"116.418757,39.917544"
```
```python
,
```
```python
"level"
```
```python
:
```
```python
"district"
```
```python
,
```
```python
"districts"
```
```python
:[]
```
```python
},{
```
```python
"citycode"
```
```python
:
```
```python
"010"
```
```python
,
```
```python
"adcode"
```
```python
:
```
```python
"110102"
```
```python
,
```
```python
"name"
```
```python
:
```
```python
"西城区"
```
```python
,
```
```python
"center"
```
```python
:
```
```python
"116.366794,39.915309"
```
```python
,
```
```python
"level"
```
```python
:
```
```python
"district"
```
```python
,
```
```python
"districts"
```
```python
:[]
```
```python
},{
```
```python
"citycode"
```
```python
:
```
```python
"010"
```
```python
,
```
```python
"adcode"
```
```python
:
```
```python
"110105"
```
```python
,
```
```python
"name"
```
```python
:
```
```python
"朝阳区"
```
```python
,
```
```python
"center"
```
```python
:
```
```python
"116.486409,39.921489"
```
```python
,
```
```python
"level"
```
```python
:
```
```python
"district"
```
```python
,
```
```python
"districts"
```
```python
:[]
```
```python
},{
```
```python
"citycode"
```
```python
:
```
```python
"010"
```
```python
,
```
```python
"adcode"
```
```python
:
```
```python
"110106"
```
```python
,
```
```python
"name"
```
```python
:
```
```python
"丰台区"
```
```python
,
```
```python
"center"
```
```python
:
```
```python
"116.286968,39.863642"
```
```python
,
```
```python
"level"
```
```python
:
```
```python
"district"
```
```python
,
```
```python
"districts"
```
```python
:[]
```
```python
},{
```
```python
"citycode"
```
```python
:
```
```python
"010"
```
```python
,
```
```python
"adcode"
```
```python
:
```
```python
"110107"
```
```python
,
```
```python
"name"
```
```python
:
```
```python
"石景山区"
```
```python
,
```
```python
"center"
```
```python
:
```
```python
"116.195445,39.914601"
```
```python
,
```
```python
"level"
```
```python
:
```
```python
"district"
```
```python
,
```
```python
"districts"
```
```python
:[]
```
```python
},{
```
```python
"citycode"
```
```python
:
```
```python
"010"
```
```python
,
```
```python
"adcode"
```
```python
:
```
```python
"110108"
```
```python
,
```
```python
"name"
```
```python
:
```
```python
"海淀区"
```
```python
,
```
```python
"center"
```
```python
:
```
```python
"116.310316,39.956074"
```
```python
,
```
```python
"level"
```
```python
:
```
```python
"district"
```
```python
,
```
```python
"districts"
```
```python
:[]
```
```python
},{
```
```python
"citycode"
```
```python
:
```
```python
"010"
```
```python
,
```
```python
"adcode"
```
```python
:
```
```python
"110109"
```
```python
,
```
```python
"name"
```
```python
:
```
```python
"门头沟区"
```
```python
,
```
```python
"center"
```
```python
:
```
```python
"116.105381,39.937183"
```
```python
,
```
```python
"level"
```
```python
:
```
```python
"district"
```
```python
,
```
```python
"districts"
```
```python
:[]
```
```python
},{
```
```python
"citycode"
```
```python
:
```
```python
"010"
```
```python
,
```
```python
"adcode"
```
```python
:
```
```python
"110111"
```
```python
,
```
```python
"name"
```
```python
:
```
```python
"房山区"
```
```python
,
```
```python
"center"
```
```python
:
```
```python
"116.139157,39.735535"
```
```python
,
```
```python
"level"
```
```python
:
```
```python
"district"
```
```python
,
```
```python
"districts"
```
```python
:[]
```
```python
},{
```
```python
"citycode"
```
```python
:
```
```python
"010"
```
```python
,
```
```python
"adcode"
```
```python
:
```
```python
"110112"
```
```python
,
```
```python
"name"
```
```python
:
```
```python
"通州区"
```
```python
,
```
```python
"center"
```
```python
:
```
```python
"116.658603,39.902486"
```
```python
,
```
```python
"level"
```
```python
:
```
```python
"district"
```
```python
,
```
```python
"districts"
```
```python
:[]
```
```python
},{
```
```python
"citycode"
```
```python
:
```
```python
"010"
```
```python
,
```
```python
"adcode"
```
```python
:
```
```python
"110113"
```
```python
,
```
```python
"name"
```
```python
:
```
```python
"顺义区"
```
```python
,
```
```python
"center"
```
```python
:
```
```python
"116.653525,40.128936"
```
```python
,
```
```python
"level"
```
```python
:
```
```python
"district"
```
```python
,
```
```python
"districts"
```
```python
:[]
```
```python
},{
```
```python
"citycode"
```
```python
:
```
```python
"010"
```
```python
,
```
```python
"adcode"
```
```python
:
```
```python
"110114"
```
```python
,
```
```python
"name"
```
```python
:
```
```python
"昌平区"
```
```python
,
```
```python
"center"
```
```python
:
```
```python
"116.235906,40.218085"
```
```python
,
```
```python
"level"
```
```python
:
```
```python
"district"
```
```python
,
```
```python
"districts"
```
```python
:[]
```
```python
},{
```
```python
"citycode"
```
```python
:
```
```python
"010"
```
```python
,
```
```python
"adcode"
```
```python
:
```
```python
"110115"
```
```python
,
```
```python
"name"
```
```python
:
```
```python
"大兴区"
```
```python
,
```
```python
"center"
```
```python
:
```
```python
"116.338033,39.728908"
```
```python
,
```
```python
"level"
```
```python
:
```
```python
"district"
```
```python
,
```
```python
"districts"
```
```python
:[]
```
```python
},{
```
```python
"citycode"
```
```python
:
```
```python
"010"
```
```python
,
```
```python
"adcode"
```
```python
:
```
```python
"110116"
```
```python
,
```
```python
"name"
```
```python
:
```
```python
"怀柔区"
```
```python
,
```
```python
"center"
```
```python
:
```
```python
"116.637122,40.324272"
```
```python
,
```
```python
"level"
```
```python
:
```
```python
"district"
```
```python
,
```
```python
"districts"
```
```python
:[]
```
```python
},{
```
```python
"citycode"
```
```python
:
```
```python
"010"
```
```python
,
```
```python
"adcode"
```
```python
:
```
```python
"110117"
```
```python
,
```
```python
"name"
```
```python
:
```
```python
"平谷区"
```
```python
,
```
```python
"center"
```
```python
:
```
```python
"117.112335,40.144783"
```
```python
,
```
```python
"level"
```
```python
:
```
```python
"district"
```
```python
,
```
```python
"districts"
```
```python
:[]
```
```python
},{
```
```python
"citycode"
```
```python
:
```
```python
"010"
```
```python
,
```
```python
"adcode"
```
```python
:
```
```python
"110118"
```
```python
,
```
```python
"name"
```
```python
:
```
```python
"密云区"
```
```python
,
```
```python
"center"
```
```python
:
```
```python
"116.843352,40.377362"
```
```python
,
```
```python
"level"
```
```python
:
```
```python
"district"
```
```python
,
```
```python
"districts"
```
```python
:[]
```
```python
},{
```
```python
"citycode"
```
```python
:
```
```python
"010"
```
```python
,
```
```python
"adcode"
```
```python
:
```
```python
"110119"
```
```python
,
```
```python
"name"
```
```python
:
```
```python
"延庆区"
```
```python
,
```
```python
"center"
```
```python
:
```
```python
"115.985006,40.465325"
```
```python
,
```
```python
"level"
```
```python
:
```
```python
"district"
```
```python
,
```
```python
"districts"
```
```python
:[]
```
```python
}]}
```
现在我们想把里层的name解析出来，代码如下
```python
@Test
    public void test() throws IOException {
        Properties prop = new Properties()
```
```python
;
```
```python
String str = Demo1
```
```python
.class
```
```python
.getClassLoader
```
```python
()
```
```python
.getResource
```
```python
(
```
```python
""
```
```python
)
```
```python
.getPath
```
```python
()
```
```python
;
```
```python
String input = str +
```
```python
"/conf/province.properties"
```
```python
;
```
```python
InputStream is = new BufferedInputStream(new FileInputStream(
        prop
```
```python
.load
```
```python
(new InputStreamReader(is,
```
```python
"UTF-8"
```
```python
))
```
```python
;
```
```python
// 如下写法也可以：
        // InputStream is = XXXClass
```
```python
.class
```
```python
.getClassLoader
```
```python
()
```
```python
.getResourceAsStream
```
```python
(
```
```python
"province.properties"
```
```python
)
```
```python
;
```
```python
Set
```
```python
<Object> keySet = prop
```
```python
.keySet
```
```python
()
```
```python
;
```
```python
for(String key: keySet
```
```python
.toArray
```
```python
(new String[keySet
```
```python
.size
```
```python
()])) {
            String line = prop
```
```python
.getProperty
```
```python
(key)
```
```python
;
```
```python
JSONObject json = JSONObject
```
```python
.fromObject
```
```python
(line)
```
```python
;
```
```python
JSONArray jsonArray = json
```
```python
.getJSONArray
```
```python
(
```
```python
"districts"
```
```python
)
```
```python
;
```
```python
for(int i=
```
```python
0
```
```python
; i < jsonArray.size(); i++) {
```
```python
JSONObject jsonObject = jsonArray
```
```python
.getJSONObject
```
```python
(i)
```
```python
;
```
```python
String name = jsonObject
```
```python
.getString
```
```python
(
```
```python
"name"
```
```python
)
```
```python
;
```
```python
System
```
```python
.out
```
```python
.println
```
```python
(name)
```
```python
;
```
```python
}
        }
    }
```
api层面的使用方式很简单，使用Properties对象的getProperty方法就可以找到对应属性的值。如果没有找到相应属性，则返回null。
## 2.向内存或属性文件中写入键值对
上面的例子中我们演示了如何读取键值对，接下来我们再演示一下如何写入键值对。
```python
@Test
    public void test()  {
        try {
            OutputStream os = new FileOutputStream(
```
```python
"test.properties"
```
```python
)
```
```python
;
```
```python
Properties prop = new Properties()
```
```python
;
```
```python
prop
```
```python
.setProperty
```
```python
(
```
```python
"name"
```
```python
,
```
```python
"leilei"
```
```python
)
```
```python
;
```
```python
prop
```
```python
.setProperty
```
```python
(
```
```python
"age"
```
```python
,
```
```python
"18"
```
```python
)
```
```python
;
```
```python
prop
```
```python
.setProperty
```
```python
(
```
```python
"interest"
```
```python
,
```
```python
"algorithm"
```
```python
)
```
```python
; //将键值对写入内存
```
```python
//通过keySet遍历
```
```python
Set
```
```python
<Object> keys = prop
```
```python
.keySet
```
```python
()
```
```python
;
```
```python
for (String key : keys
```
```python
.toArray
```
```python
(new String[
```
```python
0
```
```python
])) {
                System
```
```python
.out
```
```python
.println
```
```python
(key +
```
```python
"\t"
```
```python
+ prop
```
```python
.get
```
```python
(key))
```
```python
;
```
```python
}
            //通过entrySet遍历
```
```python
Set
```
```python
<Map
```
```python
.Entry
```
```python
<Object,Object>> entrys = prop
```
```python
.entrySet
```
```python
()
```
```python
;
```
```python
for(Map
```
```python
.Entry
```
```python
<Object,Object> entry: entrys) {
                System
```
```python
.out
```
```python
.println
```
```python
(entry
```
```python
.getKey
```
```python
()
```
```python
.toString
```
```python
() +
```
```python
"\t"
```
```python
+ entry
```
```python
.getValue
```
```python
()
```
```python
.toString
```
```python
())
```
```python
;
```
```python
}
            //通过propertyNames遍历
            Enumeration<?> e = prop
```
```python
.propertyNames
```
```python
()
```
```python
;
```
```python
while(e
```
```python
.hasMoreElements
```
```python
()) {
                String key = (String) e
```
```python
.nextElement
```
```python
()
```
```python
;
```
```python
String value = prop
```
```python
.getProperty
```
```python
(key)
```
```python
;
```
```python
System
```
```python
.out
```
```python
.println
```
```python
(key +
```
```python
"\t"
```
```python
+ value)
```
```python
;
```
```python
}
            prop
```
```python
.store
```
```python
(os,
```
```python
"test properties "
```
```python
+ new Date()
```
```python
.toString
```
```python
())
```
```python
; //写入文件
```
```python
} catch (Exception ex) {
            ex
```
```python
.printStackTrace
```
```python
()
```
```python
;
```
```python
}
    }
```
Properties类可以通过setProperty方法将键值对保存到内存中，此时可以通过getProperty方法读取。如果我们想将键值对持久化到文件中，可以使用store()方法将键值对写入到属性文件中。

