
# 数据结构例程——稀疏矩阵的十字链表表示 - 迂者-贺利坚的专栏 - CSDN博客

2015年10月07日 21:16:46[迂者-贺利坚](https://me.csdn.net/sxhelijian)阅读数：7149


本文针对[数据结构基础系列网络课程(5)：数组与广义表](http://edu.csdn.net/course/detail/1512)中第4课时[稀疏矩阵的十字链表表示](http://edu.csdn.net/course/detail/1512/23605)。
![这里写图片描述](https://img-blog.csdn.net/20151007211229227)
下面的程序中，实现了创建并显示十字链表的算法。
```python
#include <stdio.h>
```
```python
#include <malloc.h>
```
```python
#define M 3
```
```python
//矩阵行
```
```python
#define N 3
```
```python
//矩阵列
```
```python
#define Max ((M)>(N)?(M):(N))
```
```python
//矩阵行列较大者
```
```python
typedef
```
```python
int
```
```python
ElemType;
```
```python
typedef
```
```python
struct
```
```python
mtxn
{
```
```python
int
```
```python
row;
```
```python
//行号
```
```python
int
```
```python
col;
```
```python
//列号
```
```python
struct
```
```python
mtxn *right,*down;
```
```python
//向右和向下的指针
```
```python
union
```
```python
{
        ElemType value;
```
```python
struct
```
```python
mtxn *link;
    } tag;
} MatNode;
```
```python
//十字链表类型定义
```
```python
void
```
```python
CreatMat(MatNode *&mh,ElemType a[][N])
{
```
```python
int
```
```python
i,j;
    MatNode *h[Max],*p,*q,*r;
    mh=(MatNode *)
```
```python
malloc
```
```python
(
```
```python
sizeof
```
```python
(MatNode));
```
```python
//创建十字链表的头节点
```
```python
mh->row=M;
    mh->col=N;
    r=mh;
```
```python
//r指向尾节点
```
```python
for
```
```python
(i=
```
```python
0
```
```python
; i<Max; i++)
```
```python
//采用尾插法创建头节点h1,h2,…循环链表
```
```python
{
        h[i]=(MatNode *)
```
```python
malloc
```
```python
(
```
```python
sizeof
```
```python
(MatNode));
        h[i]->down=h[i]->right=h[i];
```
```python
//将down和right方向置为循环的
```
```python
r->tag.link=h[i];
```
```python
//将h[i]加到链表中
```
```python
r=h[i];
    }
    r->tag.link=mh;
```
```python
//置为循环链表
```
```python
for
```
```python
(i=
```
```python
0
```
```python
; i<M; i++)
```
```python
//处理每一行
```
```python
{
```
```python
for
```
```python
(j=
```
```python
0
```
```python
; j<N; j++)
```
```python
//处理每一列
```
```python
{
```
```python
if
```
```python
(a[i][j]!=
```
```python
0
```
```python
)
```
```python
//处理非零元素
```
```python
{
                p=(MatNode *)
```
```python
malloc
```
```python
(
```
```python
sizeof
```
```python
(MatNode));
```
```python
//创建一个新节点
```
```python
p->row=i;
                p->col=j;
                p->tag.value=a[i][j];
                q=h[i];
```
```python
//查找在行表中的插入位置
```
```python
while
```
```python
(q->right!=h[i] && q->right->col<j)
                    q=q->right;
                p->right=q->right;
                q->right=p;
```
```python
//完成行表的插入
```
```python
q=h[j];
```
```python
//查找在列表中的插入位置
```
```python
while
```
```python
(q->down!=h[j] && q->down->row<i)
                    q=q->down;
                p->down=q->down;
                q->down=p;
```
```python
//完成列表的插入
```
```python
}
        }
    }
}
```
```python
void
```
```python
DispMat(MatNode *mh)
{
    MatNode *p,*q;
```
```python
printf
```
```python
(
```
```python
"行=%d  列=%d\n"
```
```python
, mh->row,mh->col);
    p=mh->tag.link;
```
```python
while
```
```python
(p!=mh)
    {
        q=p->right;
```
```python
while
```
```python
(p!=q)
```
```python
//输出一行非零元素
```
```python
{
```
```python
printf
```
```python
(
```
```python
"%d\t%d\t%d\n"
```
```python
, q->row,q->col,q->tag.value);
            q=q->right;
        }
        p=p->tag.link;
    }
}
```
```python
//本主程序用于调试
```
```python
int
```
```python
main()
{
    ElemType a[M][N]= {{
```
```python
1
```
```python
,
```
```python
0
```
```python
,
```
```python
3
```
```python
},{
```
```python
0
```
```python
,
```
```python
2
```
```python
,
```
```python
0
```
```python
},{
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
5
```
```python
}};
    ElemType b[M][N]= {{-
```
```python
1
```
```python
,
```
```python
0
```
```python
,
```
```python
2
```
```python
},{
```
```python
0
```
```python
,-
```
```python
2
```
```python
,
```
```python
0
```
```python
},{
```
```python
1
```
```python
,
```
```python
0
```
```python
,-
```
```python
5
```
```python
}};
    MatNode *mx,*my;
    CreatMat(mx,a);
    CreatMat(my,b);
```
```python
printf
```
```python
(
```
```python
"a的十字链表:\n"
```
```python
);
    DispMat(mx);
```
```python
printf
```
```python
(
```
```python
"b的十字链表:\n"
```
```python
);
    DispMat(my);
```
```python
return
```
```python
0
```
```python
;
}
```

