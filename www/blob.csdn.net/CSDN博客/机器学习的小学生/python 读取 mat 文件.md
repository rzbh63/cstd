
# python 读取 mat 文件 - 机器学习的小学生 - CSDN博客


2017年05月19日 16:18:14[机器学习的小学生](https://me.csdn.net/xuluhui123)阅读数：20988


详细参考：[https://docs.scipy.org/doc/scipy/reference/tutorial/io.html](https://docs.scipy.org/doc/scipy/reference/tutorial/io.html)
**(1) mat4py库：**
功能： 将Matlab 数据导入为基本的Python数据类型。矩阵是以行为组的存储方式(使用列表的列表)。 Matlab结构体Struct和元胞Cell 使用Python的词典表示。
Load data from MAT-file:
函数loadmat将存储在MAT-file中的变量加载为简单的Python数据结构，仅使用词典和列表对象。数值数组和cell数组 转换为以行为主的嵌套列表(lists)。压缩数组，消除只含有一个元素的数组。产生的数据结构由简单的类型组成，兼容JSON格式。
```python
data
```
```python
= loadmat
```
```python
('
```
```python
datafile
```
```python
.
```
```python
mat'
```
```python
)
```
Save Python data structure to a MAT-file:
```python
savemat(
```
```python
'datafile.mat'
```
```python
)
```
下面的数据结构不支持:
超过两维的数组
复数数组
稀疏数组
函数数组
对象类
匿名函数类
使用手册：[https://pypi.python.org/pypi/mat4py/0.4.0](https://pypi.python.org/pypi/mat4py/0.4.0)
**(2) 使用 import scipy.io as sio**
所有的元素都封装在ndarray 中。
```python
data
```
```python
= sio.loadmat
```
```python
('
```
```python
train_data
```
```python
.
```
```python
mat'
```
```python
)
```
```python
;
```
```python
data
```
```python
=
```
```python
data
```
```python
['
```
```python
data
```
```python
']
```
使用手册：[https://docs.scipy.org/doc/scipy/reference/tutorial/io.html](https://docs.scipy.org/doc/scipy/reference/tutorial/io.html)
测试：
结构体数组的生成。分析：list – cell, dict – struct
```python
% 用来测试 sio.loadmat 和 mat4py.loadmat
```
```python
student =
```
```python
repmat
```
```python
(struct(
```
```python
'name'
```
```python
,
```
```python
[]
```
```python
,
```
```python
'age'
```
```python
,
```
```python
[]
```
```python
,
```
```python
'sex'
```
```python
,
```
```python
[]
```
```python
,
```
```python
'score'
```
```python
,
```
```python
[]
```
```python
),
```
```python
2
```
```python
,
```
```python
1
```
```python
);
student(
```
```python
1
```
```python
).name =
```
```python
'xlh'
```
```python
;
student(
```
```python
1
```
```python
).age  =
```
```python
22
```
```python
;
student(
```
```python
1
```
```python
).sex  =
```
```python
'male'
```
```python
;
student(
```
```python
1
```
```python
).score =
```
```python
[
```
```python
120
```
```python
,
```
```python
1
```
```python
;
```
```python
130
```
```python
,
```
```python
0
```
```python
;
```
```python
100
```
```python
,
```
```python
1
```
```python
]
```
```python
;
student(
```
```python
2
```
```python
).name =
```
```python
'gyl'
```
```python
;
student(
```
```python
2
```
```python
).age  =
```
```python
20
```
```python
;
student(
```
```python
2
```
```python
).sex  =
```
```python
'female'
```
```python
;
student(
```
```python
2
```
```python
).score =
```
```python
[
```
```python
111
```
```python
,
```
```python
0
```
```python
;
```
```python
150
```
```python
,
```
```python
2
```
```python
;
```
```python
140
```
```python
,
```
```python
0
```
```python
]
```
```python
;
save(
```
```python
'student.mat'
```
```python
,
```
```python
'student'
```
```python
);
```
```python
disp
```
```python
(
```
```python
'save student.mat over ...'
```
```python
);
```
**方法1：利用 mat4.py访问.mat文件：**
```python
import
```
```python
mat4py
student1 = mat4py.loadmat(
```
```python
'student.mat'
```
```python
)
student1 = student1[
```
```python
'student'
```
```python
]
```
```python
print
```
```python
type(student1)
```
```python
#dict
```
```python
print
```
```python
','
```
```python
.join([
```
```python
'%s'
```
```python
% key
```
```python
for
```
```python
key,val
```
```python
in
```
```python
student1.iteritems()])
```
```python
# age,score,name,sex
```
```python
name  = student1[
```
```python
'name'
```
```python
] 
age   = student1[
```
```python
'age'
```
```python
]
sex   = student1[
```
```python
'sex'
```
```python
]
score = student1[
```
```python
'score'
```
```python
]
```
```python
print
```
```python
name
```
```python
# name list
```
控制台输出:
```python
<type
```
```python
'dict'
```
```python
>
age,score,name,sex
[
```
```python
u'xlh'
```
```python
,
```
```python
u'gyl'
```
```python
]
```
**方法2：利用sio访问.mat文件**
```python
import
```
```python
scipy.io
```
```python
as
```
```python
sio 
student2 = sio.loadmat(
```
```python
'student.mat'
```
```python
)
student2 = student2[
```
```python
'student'
```
```python
]
```
```python
print
```
```python
type(student2)
```
```python
#numpy.ndarray
```
```python
print
```
```python
student2.shape
```
```python
#(2,1)  将结构体的每一行看作是一个数组
```
```python
print
```
```python
'----------------'
```
```python
name  = []
age   = []
sex   = []
score = []
```
```python
for
```
```python
id1,va1
```
```python
in
```
```python
enumerate(student2):
    va2 = va1[
```
```python
0
```
```python
]
```
```python
print
```
```python
'type(va1)'
```
```python
,type(va1)
```
```python
print
```
```python
'type(va1[0])'
```
```python
,type(va1[
```
```python
0
```
```python
])
    name.append(va2[
```
```python
0
```
```python
])
    age.append(va2[
```
```python
1
```
```python
])
    sex.append(va2[
```
```python
2
```
```python
])
    score.append(va2[
```
```python
3
```
```python
])
```
```python
print
```
```python
'----------------'
```
```python
print
```
```python
name
```
```python
print
```
```python
'----------------'
```
```python
print
```
```python
student2
```
```python
print
```
```python
sex[
```
```python
0
```
```python
][
```
```python
0
```
```python
]
```
控制台输出：
```python
<type
```
```python
'numpy.ndarray'
```
```python
>
(
```
```python
2L
```
```python
,
```
```python
1L
```
```python
)
----------------
type(va1) <type
```
```python
'numpy.ndarray'
```
```python
>
type(va1[
```
```python
0
```
```python
]) <type
```
```python
'numpy.void'
```
```python
>
type(va1) <type
```
```python
'numpy.ndarray'
```
```python
>
type(va1[
```
```python
0
```
```python
]) <type
```
```python
'numpy.void'
```
```python
>
----------------
[array([
```
```python
u'xlh'
```
```python
], 
      dtype=
```
```python
'<U3'
```
```python
), array([
```
```python
u'gyl'
```
```python
], 
      dtype=
```
```python
'<U3'
```
```python
)]
----------------
[[ (array([
```
```python
u'xlh'
```
```python
], 
      dtype=
```
```python
'<U3'
```
```python
), array([[
```
```python
22
```
```python
]], dtype=uint8), array([
```
```python
u'male'
```
```python
], 
      dtype=
```
```python
'<U4'
```
```python
), array([[
```
```python
120
```
```python
,
```
```python
1
```
```python
],
       [
```
```python
130
```
```python
,
```
```python
0
```
```python
],
       [
```
```python
100
```
```python
,
```
```python
1
```
```python
]], dtype=uint8))]
 [ (array([
```
```python
u'gyl'
```
```python
], 
      dtype=
```
```python
'<U3'
```
```python
), array([[
```
```python
20
```
```python
]], dtype=uint8), array([
```
```python
u'female'
```
```python
], 
      dtype=
```
```python
'<U6'
```
```python
), array([[
```
```python
111
```
```python
,
```
```python
0
```
```python
],
       [
```
```python
150
```
```python
,
```
```python
2
```
```python
],
       [
```
```python
140
```
```python
,
```
```python
0
```
```python
]], dtype=uint8))]]
```
mat4.py 不能处理带有汉字的mat文件。例如将上面的性别’male’改成’男’，则会报错。sio 感觉用起来麻烦。

