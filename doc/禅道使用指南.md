# 禅道使用指南



# 1.禅道最简使用

## 1.1.使用禅道来进行项目任务管理

### 1.1.1. 创建项目

\1. 进入项目视图，点击右侧的”添加项目“链接。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809182947183-1657228602.png)

\2. 出现项目添加的页面

在这个页面设置项目名称、代号、起止时间、可用工作日、团队名称、和项目描述等字段。其中关联产品是可以为空的也可以多选。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809182954777-308075047.png)

 

### 1.1.2. 设置团队

\1. 点击保存按钮，会提示项目创建成功，然后可以选择设置团队。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809183029964-532616826.png)

\2. 或者从项目视图中的团队菜单，也可以进行项目的团队管理。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809183039495-540448202.png)

在维护项目团队的时候，需要选择都是哪些用户可以参与到这个项目中，同时需要设置这个用户在本项目中的角色（角色可以随便设置，比如风清扬，冬瓜一号等）。可用工作日和可用工时每天需要仔细设置。通常来讲，一个人不可能每天8小时投入，也不可能一星期七天连续投入。

\3. 设置完毕之后，系统会自动计算这个项目总得可用工时。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809183100417-390506918.png) 

### 1.1.3. 分解任务

设置了团队之后，下一步操作就是创建任务。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809183115136-1423551801.png)

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809183121136-2085124612.png)

- 在创建任务的时候，指派给是从项目团队成员中读取。
- 姓名列表中的首字母可以用来快速筛选用户。
- 任务的优先级、预计工时（单位小时）都需要进行设置。
- 如果需要设置任务必须在某一个时间点截止，可以设置截止日期。
- 可以上传附件。

### 1.1.4. 更新任务

任务分解完毕之后，每个人就非常清楚自己做什么事情。所以项目启动之后，对于项目团队的成员来讲，他要做的事情就是更新任务的状态。

\1. 任务的列表

在任务的列表页面，可以看到系统中所有的任务列表，可以通过各种标签方便的进行筛选。点击某一个任务的链接进入详情页面。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809183157839-591509577.png)

\2. 任务的详情页面

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809183205370-1141737084.png)

在任务的详情页面可以看到任务的详细信息，包括历次的修改记录等信息。同时也给出了各种操作的按钮。

\3. 开始任务

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809183212324-1053368367.png)

开始某一个任务的时候，可以设置已经消耗的时间和预计剩余的时间。单位都是工时。

\4. 完成任务

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809183220011-872397284.png)

完成任务的时候，需要设置下已经消耗的时间。

### 1.1.5. 验证关闭任务

任务完成之后，会自动指派给任务的创建者，这时候任务的创建者可以验证任务是否完成。如果完成，则可以将其关闭。这件任务就结束了。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809183239933-1286269373.png)

 

## 1.2.使用禅道来做bug管理

上篇文章讲述了禅道的简使用方法之一，只使用禅道来进行项目任务管理。禅道的测试功能也可以独立出来单独使用。这种方式很适合于测试团队使用。禅道里面的bug基本流程是：**测试人员提出****bug ->** **开发人员解决****bug ->** **测试人员验证关闭**。

下面我们来演示下具体的使用方法。

### 1.2.1. 创建产品

使用[bug管理](http://www.zentao.net/)功能之前，需要先创建产品。禅道里面设计的理念是bug主要附属在产品概念下面的，后面我们会详细讲述产品和项目之间的关系。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809183250355-130931699.png)

新增产品的时候，需要设置产品的名称、代码，几个负责人信息。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809183303183-1515718319.png)

### 1.2.2. 提出bug

有了产品之后，我们就可以来创建bug了。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809183317714-123452465.png)

 ![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809183323824-1976955071.png)

- 在创建bug的时候，必填的字段是影响版本，bug标题，重现步骤这些基本的信息。
- 所属项目，相关产品，需求可以忽略。
- 创建bug的时候，可以直接指派给某一个人员去处理。如果不清楚的话，可以保留为空。

### 1.2.3. 解决bug

当一个bug指派给某一位研发人员之后，他可以来验证解决这个bug。

\1. 通过各种标签和检索条件找到需要自己处理的bug

在对bug进行出来之前，需要先要找到需要自己处理的bug。禅道提供了各种各样的检索方式，比如指派给我，可以列出所有需要我处理的bug。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809183418558-1596832888.png)

\2. 解决bug

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809183430714-1123002951.png)

研发人员解决bug，选择解决方案，一般来讲有效的解决bug方案是”已解决“。详细的解决方案，我们在后续的文章中会详细加以讲述。

### 1.2.4. 关闭bug

当研发人员解决了bug之后，bug会重新指派到bug的创建者头上。这时候测试人员可以来验证这个bug是否已经修复。如果验证通过，则可以关闭该bug。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809183444527-1683913157.png)

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809183452652-869378319.png)

## 1.3.使用禅道来进行产品管理

前面两篇文章讲述的禅道的简流程，是分别站在研发团队、测试团队角度展开的。研发团队可以使用禅道来做基本的任务跟踪管理，测试团队可以使用禅道来进行缺陷的跟踪管理。那么如果您是一位产品经理，您肯定要问了，禅道能不能用来当作[需求管理工具](http://www.zentao.net/)呢？答案当然是Yes!

禅道系统中提供了完整的需求管理流程，这其中包括需求的创建，需求的变更，需求的评审等。下面让我们来看下。

### 1.3.1. 创建产品

创建需求的前提当然是要有产品，这和bug的处理是一样的。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809183511917-1431926219.png)

新增产品的时候，需要设置产品的名称、代码，几个负责人信息。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809183521542-799180981.png)

 

### 1.3.2. 创建需求

有了产品之后，就可以来创建需求了。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809183530636-1623903460.png)

**需求的创建页面**

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809183539589-1635559424.png)

- 创建需求的时候，可以选择需求的来源。
- 需求的标题、描述和验证标准是需求的主要的三个元素，应该认真清晰的进行填写。
- 在创建需求的时候，可以指定需求的优先级、预计工时等字段。
- 创建需求的时候可以选择由谁来进行评审，这样创建的需求状态是**草稿状态**。如果勾选了”不需要评审“，则是**激活状态**。

### 1.3.3. 变更需求

禅道专门提供了需求的变更流程。凡是对需求**标题、描述、验证标准和附件**的修改，都应该走变更流程。变更之后的需求状态为**变更中**。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809183552089-831782361.png)

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809183601027-1582034013.png)

 

### 1.3.4. 评审需求

\1. 通过需求的详情页面查看变更前后的变化

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809183620949-1594302292.png)

 \2. 评审需求，给出评审结果

 ![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809183629652-1756987952.png)

评审结果可以选择确认通过，撤销变更，有待明确或者拒绝。

## 1.4.个人使用禅道来做事务跟踪管理

禅道设计的目标是团队协作工具，但其实个人使用禅道也可以派上很大的用场。笔者在开发禅道过程中，从2009年10月开始，用禅道来管理禅道本身的项目管理，那时候禅道的开发团队只有笔者光杆司令一人，后来和朋友们聊起，戏称一个人的项目管理。

下面让我们来展示下如何使用禅道来进行个人的[事务管理](http://www.zentao.net/)。

### 1.4.1. 创建待办

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809183654792-1239800506.png)

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809183702339-1114869969.png)

- 新增待办的时候，可以设定起止时间。也可以选择暂时不设定。
- 如果是私人事务，可以勾选上。

### 1.4.2. 浏览待办

禅道提供了各种标签来检索待办信息。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809183713495-601072389.png)

其实个人使用禅道，还可以借鉴项目管理的概念，把自己要处理的事情放在项目里面进行跟踪管理，也是非常方便的。比如买房，考研，复习考试等等。

 









# 2.禅道基本使用

## 2.1.禅道使用的基本流程

禅道管理软件中，核心的三种角色：产品经理、研发团队和测试团队，这三者之间通过需求进行协作，实现了研发管理中的三权分立。其中产品经理整理需求，研发团队实现任务，测试团队则保障质量，其三者的关系如下图：

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809183726964-1408989478.png)

**基本流程如下：**

1. 产品经理创建产品
2. 产品经理创建需求
3. 项目经理创建项目
4. 项目经理确定项目要做的需求
5. 项目经理分解任务，指派到人。
6. 测试人员测试，提交bug。

## 2.2.敏捷开发及scrum简介

在正式讲述禅道的基本使用流程之前，先让我们来了解下敏捷开发和scrum。因为禅道的设计理念基础是基于[scrum](http://www.zentao.net/)的，因此了解scrum的基本概念有助于您了解和使用禅道。

### 2.2.1. 敏捷开发

我们比较熟知的软件项目管理方法是瀑布。其基本流程是需求-> 设计->开发->测试。基本假设只要把每一个环节都做正确，那么终得到的结果也是正确的。瀑布开发有非常成功的案例，比如微软。但从总体来讲，瀑布项目失败率比较高。国外的软件先行者们针对瀑布开发中暴露出来的问题进行了一系列的探索、思考和总结，终提出了Agile的概念，中文翻译为敏捷开发。敏捷开发有很多种方式，其中scrum是比较流行的一种。

### 2.2.2. scrum

\1. scrum里面的角色

scrum由product owner(产品经理)、scrum master和team(研发团队)组成。

- 其中product owner负责整理user story(用户故事)，定义其商业价值，对其进行排序，制定发布计划，对产品负责。
- scrum master 负责召开各种会议，协调项目，为研发团队服务。
- 研发团队则由不同技能的成员组成，通过紧密协同，完成每一次迭代的目标，交付产品。 

\2. 迭代开发

与瀑布不同，scrum将产品的开发分解为若干个小sprint(迭代)，其周期从1周到4周不等，但不会超过4周。参与的团队成员一般是5到9人。每期迭代要完成的user story是固定的。每次迭代会产生一定的交付。

\3. scrum的基本流程

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809183804011-1509940674.png)

scrum的基本流程如上图所示：

- 产品负责人负责整理user story，形成左侧的product backlog。
- 发布计划会议：product owner负责讲解user story，对其进行估算和排序，发布计划会议的产出就是制定出这一期迭代要完成的story列表，sprint backlog。
- 迭代计划会议：项目团队对每一个story进行任务分解，分解的标准是完成该story的所有任务，终每个任务都有明确的负责人，并完成工时的初估计。
- 每日例会：每天scrum master召集站立会议，团队成员回答昨天做了什么今天计划做什么，有什么问题。
- 演示会议：迭代结束之后，召开演示会议，相关人员都受邀参加，团队负责向大家展示本次迭代取得的成果。期间大家的反馈记录下来，由po整理，形成新的story。
- 回顾会议：项目团队对本期迭代进行总结，发现不足，制定改进计划，下一次迭代继续改进，已达到持续改进的效果。

上面所讲的就是scrum的基本流程，后面我们会陆续在相关地方再做进一步的阐述。禅道的基本框架是基于scrum的，因此您对scrum的流程有了基本了解之后，再来看禅道就会比较容易了解。

## 2.3.禅道和scrum的对应关系

简介：禅道在设计的时候，基础框架是基于scrum的，同时又补充完善了测试，文档，发布，计划等功能。肯定有同学会问，是不是我使用禅道，就必须是用敏捷。答案当然是否定的，您完全可以使用禅道来进行瀑布式管理，也可以使用的很好。正式基于这一点考虑，我们在设计禅道的时候，都是采用了比较中性的概念，而不是scrum里面特有的概念。

禅道在设计的时候，基础框架是基于scrum的，同时又补充完善了测试，文档，发布，计划等功能。肯定有同学会问，是不是我使用禅道，就必须是用敏捷。答案当然是否定的，您完全可以使用禅道来进行瀑布式管理，也可以使用的很好。正式基于这一点考虑，我们在设计禅道的时候，都是采用了比较中性的概念，而不是scrum里面特有的概念。下面让我们来看下[禅道和scrum](http://www.zentao.net/)的对应关系。

### 2.3.1. 概念的对应

| **scrum**      | **禅道** | **备注**                                                     |
| -------------- | -------- | ------------------------------------------------------------ |
| product        | 产品     | 禅道里面使用了产品的概念。                                   |
| user story     | 需求     | 其实标准的翻译应该为用户故事，不过禅道还是采用了比较中性的概念。 |
| sprint         | 项目     | 很多朋友对产品和项目的概念不是很清楚，其实有了这个对应关系就很容易理解了。 |
| task           | 任务     | 这两个概念是一致的。                                         |
| team           | 团队     |                                                              |
| burndown chart | 燃尽图   |                                                              |
| 潜在交付物     | 发布     |                                                              |

 

### 2.3.2. 角色的对应

| **scrum**     | **禅道** | **备注**                                 |
| ------------- | -------- | ---------------------------------------- |
| product owner | 产品经理 | 禅道使用的还是比较中性的产品经理的概念。 |
| scrum master  | 项目经理 |                                          |
| team          | 团队成员 |                                          |

 

### 2.3.3. 禅道新增的概念

除了scrum基本的概念外，禅道还补充完善了下面概念，以达到对软件生命周期的完整覆盖。

- 产品发布计划
- 产品路线图
- build
- bug
- 测试用例
- 测试任务
- 测试结果
- 文档
- todo

## 2.4.禅道的新手教程

禅道8.2beta版本开始，添加了禅道新手教程，以任务的形式教大家禅道的最简的使用操作。

首次登录使用禅道时，会提示是否进入禅道新手教程页面。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809183844589-1098609863.png)

点击确定后，页面会跳转到新手教程页面。

新手教程包含8个任务：创建帐号、创建产品、创建需求、创建项目、管理团队、关联需求、创建任务、分解任务、提Bug。

禅道页面右侧会显示具体任务，左侧的禅道页面有当前任务的操作提示。

按照教程流程具体操作即可，需要注意的是新手教程里8个任务填写的数据系统是不会保存的。

需要中途退出新手教程，点击右上角的“退出教程”按钮。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809183854683-427999567.png)

新手教程和禅道使用手册都已内置到禅道页面右上角的帮助栏里。

想重新打开新手教程或者使用期间有不清楚的地方，可以点击“帮助”获取。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809183904355-1231639780.png)

## 2.5.创建第一个产品

禅道的设计理念是围绕产品展开的，因此我们首先要做的就是创建一个产品。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809183916589-1831118962.png)

 

- 产品名称和产品代码是必填项。其中产品代号可以理解为团队内部约定俗称的一个称呼，比如我们禅道的代号是zentao，需要是英文字母和数字的组合。
- 产品负责人：负责整理需求，对需求进行解释负责，制定发布计划，验收需求。
- 测试负责人：可以为某一个产品指定测试负责人，这样当创建bug，而不知道由谁进行处理的时候，该产品的测试负责人会成为默认的负责人。
- 发布负责人：由这个角色负责创建发布。
- 访问控制：可以设置产品的访问权限，其中默认设置只要有产品视图的访问权限就可以访问。如果这个产品是私有产品，可以将其设置为私有项目，那么就只有项目团队成员才可以访问。或者还可以设置白名单，指定某些分组里面的用户可以访问该产品。

## 2.6.添加第一个需求

我们产品经理可能都习惯了写需求设计文档，或者规格说明书，通过一个非常完整的word文档将某一个产品的需求都定义出来。但在禅道里面，我们提倡按照功能点的方式来写需求。简单来讲，就是将原来需求设计文档中的每一个功能点摘出来，录在禅道里面，作为一个个独立的功能点。如果按照scrum标准走的话，我们可以称之为用户故事(user story)。所谓用户故事，就是来描述一件事情，作为什么用户，希望如何，这样做的目的或者价值何在，这样有用户角色，有行为，也有目的和价值所在，非常方便与团队成员进行沟通。

创建需求的步骤如下：

1. 使用产品经理角色登录系统。
2. 进入产品视图。
3. 在页面右侧，有“新增需求”菜单，点击菜单，出现新增需求的页

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809183927605-1795514636.png)

- 需求的标题是必填项。
- 所属计划和模块，可以暂时保留为空。
- 需求审核那块，我们选上不需要审核，这样新创建的需求状态就是激活的。只有激活状态的需求才能关联到项目中，进行开发。
- 需求可以设置抄送给字段，这样需求的变化都可以通过email的形式抄送给相关人员。
- 可以设置关键词，这样可以比较方便的通过关键词进行检索。

## 2.7.开始第一个项目

产品经理按照我们前面的操作创建需求之后，下面该[项目经理](http://www.zentao.net/book/zentaopmshelp/109.html)上场了。下面我们一起来看下如何在禅道中开始一个[项目](http://www.zentao.net/book/zentaopmshelp/109.html)。

### 2.7.1. 创建项目

\1. 进入项目视图，点击右侧的”新增项目“链接。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809183957011-958052533.png)

\2. 出现项目添加的页面

在这个页面设置项目名称、代号、起止时间、可用工作日、团队名称、项目目标和项目描述等字段。其中关联产品是可以为空的。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184016855-125974184.png)

- 和我们前面讲述的简使用流程有一点区别就是在添加项目的时候，需要关联下产品。可以多选。
- 项目可以控制它的访问权限，分为默认、私有和自定义白名单三种。

### 2.7.2. 设置团队

\1. 点击保存按钮，会提示项目创建成功，然后可以选择设置团队。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184036917-1663111056.png)

 \2. 或者从项目视图中的团队菜单，也可以进行项目的团队管理。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184045949-1295932799.png)

 在维护项目团队的时候，需要选择都是哪些用户可以参与到这个项目中，同时需要设置这个用户在本项目中的角色（角色可以随便设置，比如风清扬，冬瓜一号等）。可用工作日和可用工时每天需要仔细设置。通常来讲，一个人不可能每天8小时投入，也不可能一星期七天连续投入。

\3. 设置完毕之后，系统会自动计算这个项目总得可用工时。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184102745-1389478343.png)

 

## 2.8.确定项目要完成的需求列表

**简介**：迭代开发区别于瀑布式开发就是它将众多的需求分成若干个迭代来完成，每个迭代只完成当下优先级高的那部分需求。禅道软件中项目关联需求的过程，就是对需求进行排序筛选的过程。

迭代开发区别于瀑布式开发就是它将众多的需求分成若干个迭代来完成，每个迭代只完成当下优先级高的那部分需求。禅道软件中项目关联需求的过程，就是对需求进行排序筛选的过程。下面我们来看下如何关联需求。

### 2.8.1. 关联产品

如果在创建项目的时候，已经关联过产品，可以忽略这个步骤。

1.以项目经理身份登录。

2.进入项目视图。

3.点击“关联产品”按钮。然后点选该项目相关的产品即可。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184121652-1619210145.png)

### 2.8.2. 关联需求

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184133105-1231947407.png)

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184138917-1445939845.png)

1.在关联需求的时候，可以按照优先级进行排序。

2.关联的需求状态必须是激活的（评审通过，不能是草稿）

## 2.9.为需求分解任务

需求确定之后，项目中几个关键的因素都有了：周期确定、资源确定、需求确定。下面我们要做的事情就是为每一个需求做wbs任务分解，生成完成这个需求的所有的任务。

note：是完成需求的所有任务，这里面包括但不限于设计，开发，测试等。

### 2.9.1. 访问项目的需求列表页面

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184151964-299331892.png)

-  在项目的需求列表页面，可以很方便地对某一个需求进行任务分解。
- 同时还可以查看这个需求已经分解的任务数。

### 2.9.2. 分解任务

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184202964-1247950711.png)

- 这时候创建任务的时候，就可以选择需求了。
- 我们同时提供了需求查看的链接。
- 如果需求和任务的标题是一样的，可以通过”同需求“按钮快捷的复制需求的标题。

### 2.9.3. 任务分解的几个注意事项

1. 需要将所有的任务都分解出来。这里面包括设计，开发，测试，美工，甚至包括购买机器，部署测试环境等等。
2. 任务分解的粒度越小越好，比如几个小时就可以完成。
3. 如果一个任务需要多个人负责，继续考虑将其拆分。
4. 事务型的事务可以批量指派，比如需要让团队里面的每一个人都写个项目总结，可以选择类型是事务，然后批量指派给团队里面的所有人员。
5. 任务的类型请仔细设置，这个会涉及到需求研发阶段的自动计算。后面我们会有讲解。
6. 任务的分配好是自由领取，这样可以大程度上调动大家的积极性。

## 2.10.提交bug

项目进展到后期主要的工作就是测试。测试人员和开发通过bug进行互动，保证产品的质量。

### 2.10.1.    bug的基本处理流程

禅道里面缺陷处理的基本流程是：测试提交bug => 开发解决bug => 测试验证bug => 测试关闭bug。

如果bug验证没有通过，可以激活：测试提交bug => 开发解决bug => 测试验证bug => 测试激活bug => 开发解决bug => 测试验证 => 测试关闭。

还有一个流程就是bug关闭之后，又发生了。测试提交bug => 开发解决bug => 测试验证bug => 测试关闭bug => 测试激活bug => 开发解决bug => 测试验证 => 测试关闭。

### 2.10.2.    提出bug

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184236370-831480525.png)

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184242245-1570196889.png)

- 在创建bug的时候，必填的字段是影响版本，bug标题，重现步骤这些基本的信息。
- 所属项目，相关产品，需求可以忽略。
- 创建bug的时候，可以直接指派给某一个人员去处理。如果不清楚的话，可以保留为空。

### 2.10.3.    解决bug

当一个bug指派给某一位研发人员之后，他可以来验证解决这个bug。

\1. 通过各种标签和检索条件找到需要自己处理的bug

在对bug进行出来之前，需要先要找到需要自己处理的bug。禅道提供了各种各样的检索方式，比如指派给我，可以列出所有需要我处理的bug。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184303199-468596765.png)

 

\2. 解决bug

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184310339-668557652.png)

研发人员解决bug，选择解决方案，一般来讲有效的解决bug方案是”已解决“。详细的解决方案，我们在后续的文章中会详细加以讲述。

### 2.10.4.    关闭bug

当研发人员解决了bug之后，bug会重新指派到bug的创建者头上。这时候测试人员可以来验证这个bug是否已经修复。如果验证通过，则可以关闭该bug。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184324589-1781046250.png)

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184331886-1908004356.png)

 

## 2.11.维护联系人

禅道新版本把原组织--用户里的维护列表功能放到了我的地盘页面。

在联系人创建的列表，可以在需求、任务、bug抄送时，直接选择，不需要挨个的去选择要抄送的用户。这样抄送的用户，可以收到提醒邮件。当然，前提是你得成功的配置了发信。

下面介绍一下怎么创建联系人列表。选择用户时，会罗列出所有的用户名。用户添加在组织--用户里操作。需要添加到联系人列表的用户，直接点击一下即可。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184349636-1659250990.png)

 

已创建的联系人列表，可以增加和删除列表里的用户，操作后保存即可。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184357464-384378021.png)

 

创建好联系人列表后，在需求、任务、bug页面的抄送给项后，会显示联系人按钮，点击选择所要抄送的联系人列表名称。抄送给项就会自动显示该联系人列表里用户。以下截图以任务的抄送给为例。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184407574-810357379.png)

 

## 2.12.禅道的自定义功能

禅道8.2beta版本开始，增强了自定义功能。用户可以根据自己的使用需要个性化设置禅道页面所显示的功能模块和字段。可自定义的项如下：

- 导航菜单的自定义
- 我的地盘、产品主页、项目主页、测试主页的自定义
- 需求、任务、bug、用例列表页的简单表格与高级表格的切换
- 提需求、建任务、提bug、建用例页面的自定义
- 需求、任务、bug、用例导出数据时，导出字段的自定义
- 后台的自定义
- 模块名是否显示的自定义
- 水晶报表自定义查询条件

下面具体介绍禅道的自定义功能。

### 2.12.1.    导航菜单的自定义

可以隐藏掉导航菜单和二级、三级导航菜单。

1、 把鼠标放在导航栏任意菜单上，后面就会显示 **自定义导航** 的设置图标。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184428620-1829768374.png)

 

2、 点击图标即可进入自定义导航设置页面。

- 需要隐藏的导航菜单和二级导航菜单，直接点击即可。点击后，隐藏的导航和二级导航被虚线框起来。需要重新显示，直接再点击一下即可。
- 直接鼠标拖拽可以更改导航菜单显示的顺序。
- 还可以点击 **恢复默认** 按钮，还原为导航菜单的默认显示。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184436886-1038030110.png)

 

3、 产品需求、项目任务、测试bug、测试用例可以自定义三级菜单。

3.1  以产品需求页面为例，保存了搜索结果，并且勾选了 **显示在菜单栏** 项。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184453964-846795572.png)

3.2  本次的搜索查询结果就会显示在产品需求的菜单栏里。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184502714-1230595039.png)

3.3  如果菜单栏不再想显示该搜索查询结果，可以进入自定义导航页面进行隐藏。

3.4  如果是想删除掉这个搜索查询结果，可以到搜索页面右侧 我的查询 那选择需要删除掉的搜索查询名称，点击旁边的删除按钮即可。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184511355-1226275368.png)

 

### 2.12.2.    我的地盘、产品主页、项目主页、测试主页的自定义

1、 新版本禅道，在我的地盘首页添加了流程图区块。如果想更改首页显示的区块，可以点击区块右上角的图标对该区块进行编辑和删除等操作。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184520339-1386048628.png)

 

2、 点击编辑后，可以选择其他模块，修改区块名称以及外观设计。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184526636-1231234717.png)

 

3、 我的地盘首页右上角的蓝底白色加号图标，点击可以添加想显示的区块。

还可以根据自己的工作需要对添加的区块进行设置。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184537183-1142589136.png)

 

4、下面以产品主页的自定义来举例说明一下产品主页的自定义。项目主页、测试主页的自定义可以直接参考产品主页的设置。

- 新版本禅道新增了产品主页、项目主页和测试主页。
- 主页显示的都是相关的区块。产品主页默认显示的是未关闭的产品和指派给我的需求区块。
- 同样产品主页的右上角有蓝底白色加号的添加区块按钮，每个区块的右上角都有编辑操作的按钮。点击就可以进行编辑和添加区块的操作。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184609855-1690552627.png)

- 产品的需求页面右上角有 **设为模块首页** 提示。点击设置后，产品主页就直接显示需求列表页。
- 同理项目的任务列表页和测试的bug列表页都可以设置为该模块的首页。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184618620-407592938.png)

 

### 2.12.3.    需求、任务、bug、用例列表页的简单表格与高级表格的切换

需求、任务、bug、用例列表页切换到高级表格时，可以自定义显示的列字段。

下面以需求列表为例，介绍简单表格和高级表格的切换和自定义列字段。任务、bug、用例列表页的简单表格与高级表格的切换和自定义列参考需求列表页的操作。

1、 需求列表页默认的是简单表格显示，右上角有切换按钮，点击 **切换到高级表格** 即可。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184634105-65604953.png)

2、 成功切换到高级表格显示后，再点击一下切换按钮，会显示 **自定义列** 。

3、 点击就可以进入自定义列的页面，除了必选项不能自定义外，其他可以自定义的列字段右侧都有显示和隐藏按钮。还可以自由拖拽实现排序的更改。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184653214-94656744.png)

 

### 2.12.4.    提需求、建任务、提bug、建用例页面的自定义

1、 提需求页面的自定义。

点击右上角的设置按钮，进入自定义页面，不需要显示的直接不勾选即可。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184704339-686373557.png)

2、 建任务页面的自定义。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184713839-608395029.png)

3、 提bug页面的自定义。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184722464-910374515.png)

4、 bug的重现步骤也可以自定义。

自定义好具体步骤，点击保存模板，填写好模板名称，勾选公共的话，所有用户都可以使用该模板。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184731386-1007887321.png)

自定义保存成功的模板，点击 应用模板 时，会显示出来，需要使用哪个模板，直接点击一下即可。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184740964-1461040063.png)

5、 建用例页面的自定义。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184748980-96350563.png)

6、 需求、任务、bug、用例的批量添加页面和批量编辑页面也可以进行自定义设置。

- 需求批量添加页面的自定义字段设置。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184758042-1248901876.png)

- 需求批量编辑页面的自定义字段设置。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184815214-460527495.png)

 

### 2.12.5.    需求、任务、bug、用例导出字段的自定义

禅道最新版本，需求、任务、bug、用例导出数据时，导出的字段可以自定义。

下面以需求导出数据时，自定义导出的字段为例介绍导出数据时的自定义功能。任务、bug、用例的导出字段自定义直接参考需求的即可。

1、首先点击需求列表页面右上角的 **导出**，选择导出数据。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184827667-1795822025.png)

2、进入导出数据页面。

- 点击最右侧的 设置 按钮，会罗列出需求列表所有的字段。不需要的字段直接删除掉即可。
- 设置好后，填写好模版的名称，点击保存即可。
- 如果勾选了公共的话，那么你自定义的需求导出模块大家都可以使用。如果没有勾选公共，该导出模板只能自己使用。
- 如果已不需要已设置好的导出模板，直接点击“删除”按钮即可。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184837433-1762683572.png)

3、设置保存成功的模板，会直接显示在模板框里，然后点击 **导出** 即可。

- 点击字段框的空白处，可以通过下拉来查看到所有的字段。
- 灰色显示的字段表示已选择，黑色显示的字段是已被删除的字段。
- 右侧还有搜索按钮，可搜索字段名。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184850574-1541250794.png)

4、再次导出需求数据时，点击模板处的下拉按钮，会显示之前已设置保存成功的模板。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184911261-738030569.png)

 

### 2.12.6.    后台的自定义

1. 以上的5个自定义功能，是不需要分配权限的。
2. 而后台的自定义功能，需要到组织→权限里分配后台管理和自定义的权限。有权限才可以进行自定义配置的操作。
3. 后台可以对需求、任务、bug、用例、版本、待办、用户、流程相关项进行自定义。如果右侧有显示蓝色加号的，可以自定义添加值。
4. 自定义配置后，点击保存即可。需要恢复默认设置直接点击 **恢复默认** 按钮即可。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184922105-45485328.png)

 

### 2.12.7.    模块名是否显示的自定义

最新版本禅道，新增了列表页显示模块名的功能。（如果添加模块时有填写模块简称，那么就显示模块名简称。）

1、产品需求列表页面左侧的模块显示栏下有 **列表页是否显示模块名** 的编辑按钮。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184934058-928536266.png)

 2、禅道里默认列表页不显示模块名，点击进入选择框，选择**只显示一级模块**。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184941230-715955423.png)

 3、保存成功后，需求的列表页的显示如下。

需求名称前显示有该需求所属模块的名称。如果该需求不属于任何模块，就不显示模块名。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184949058-936001172.png)

 4、还可以选择 **只显示最后一级模块**，点击保存。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809184956199-1430212654.png)

 5、设置成功后，在需求列表页面需求的名称前即只显示最后一级模块的名称。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809185003792-984261688.png)

 

## 2.13.导入excel、csv参考文档

### 2.13.1.  导入excel

**导入****excel****是专业版功能**，可以导入“需求”、“任务”、“Bug”、“用例”，对他们添加或修改。

excel文件由系统导出的。可以导出xls格式或xlsx格式。有两种导出方式：

- 导出→导出模板，导出模板文件，在文件中填写数据，保存。
- 导出→导出数据，导出已有数据的excel文件。在此文件进行修改或添加数据，保存。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809185034402-2051787032.png)

 

**excel****和****csv****的区别：**

1、excel含有样式，相较csv好看。

2、excel中像“模块”、“优先级”等字段含有下拉菜单，方便数据填写。

 

**在填写数据时需要注意问题：**

\1. 必填字段必须填写，否则导入时会忽略这条记录。

- 需求：“需求名称”
- 任务：“任务类型”、“任务名称”
- Bug： “影响版本”、“Bug标题”
- l  用例：“用例类型”、“用例标题”

\2. 用例步骤的填写规则：

填写“步骤”和“预期”的时候，每步都要换行，前面是序号，与后面内容用"."、“、”、“ ”分割。例如：

\1. 测试步骤第一步         1. 测试预期第一步

\2. 测试步骤第二步         2.

\3. 测试步骤第三步         3. 测试预期第三步

如果没有前面的步骤，则后面的预期无效。

如果步骤中间没有预期，预期则要留空。

这样系统就可以获取用例的步骤以及相对应的预期

\3. 日期填写格式：yyyy-mm-dd

例：2014-03-01，单元格格式为“文本”格式。

\4. 导入可修改内容：

- 需求：需求名称、所属模块、所属计划、来源、优先级、预计工时、关键词、需求描述、验收标准
- 任务：任务名称、所属模块、相关需求、优先级、任务类型、初预计、预计开始、截止日期、任务描述
- Bug： Bug标题、所属模块、所属项目、相关需求、优先级、关键词、影响版本、重现步骤、类型/严重程度、系统/浏览器
- 用例：用例标题、所属模块、相关需求、优先级、用例类型、用例状态、执行频率、适用阶段、前置条件、步骤、预期

如果导入的是模板文件，导入的记录全是新增的。

如果不是使用的模板文件，而且条目的编号有值，那么该条目是编辑相应编号的记录。如果没有编号，则是新增一条记录。

如下图：

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809185220339-1207774580.png)

 

### 2.13.2.    导入csv

**导入****csv****是开源版功能**，目前只实现用例的导入。可以用来新增或修改用例。

csv文件是经过系统导出的。有两种方式：

- 测试→用例→导出→导出模板，导出模板文件，在文件中填写数据，保存。
- 测试→用例→导出→导出数据，导出已有数据的csv文件。在此文件进行修改或新增数据，保存。

 

**在填写数据时需要注意几个问题：**

\1. 像“模块”、“相关需求”这些系统数据，要在后面加(#ID)，此ID表示系统里的ID号。以便导入的时候获取该条目的ID。

​     像“优先级”、“用例类型”这些固定的数据，直接填写就可以了。

​     如果“适用阶段”有多个，则要换行写。

\2. 填写“步骤”和“预期”的时候，每步都要换行，前面是序号，与后面内容用"."、“、”、“ ”分割。例如：

\1. 测试步骤第一步         1. 测试预期第一步

\2. 测试步骤第二步         2.

\3. 测试步骤第三步         3. 测试预期第三步

如果没有前面的步骤，则后面的预期无效。

如果步骤中间没有预期，预期则要留空。

这样系统就可以获取用例的步骤以及相对应的预期

\3. 导入的内容包括：用例标题、所属模块、相关需求、优先级、用例类型、用例状态、执行频率、适用阶段、前置条件、步骤、预期。

\4. “用例类型”、“用例标题”字段是必填内容，如果没有填写系统会忽略这条记录。

请参考下图：

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809185311542-28834347.png)

用例导入的时候要选择正确的编码，否则会有错误提示。

如果不是使用的模板文件，如果条目的用例编号有值，那么该条目是编辑相应编号的用例。如果没有用例编号，这是新增一条用例。

上图示例是修改编号为215的用例。下图示例是增加一条用例。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809185323277-1845248508.png)













# 3.禅道进阶使用

## 3.1.使用流程

在禅道项目管理软件中，核心的角色有产品经理、项目经理、研发团队和测试团队四种角色。如果您现在的团队是采用敏捷开发的话，那么可以对应到product owner, scrum master和team(dev and tester)。这几种角色之间紧紧围绕产品的需求展开协作，取得成果。禅道核心的管理流程全图如下所示：

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809185455480-1744312638.png)

 

## 3.2.个人管理

### 3.2.1. 使用待办进行个人事务管理

禅道设计的目标是团队协作工具，但其实个人使用禅道也可以派上很大的用场。笔者在开发禅道过程中，从2009年10月开始，用禅道来管理禅道本身的项目管理，那时候禅道的开发团队只有笔者光杆司令一人，后来和朋友们聊起，戏称一个人的项目管理。

下面让我们来展示下如何使用禅道来进行个人的[事务管理](http://www.zentao.net/)。

#### 3.2.1.1.创建待办

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809185512152-733440511.png)

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809185518495-758795448.png)

 

- 新增待办的时候，可以设定起止时间。也可以选择暂时不设定。

- 如果是私人事务，可以勾选上。

#### 3.2.1.2.浏览待办

禅道提供了各种标签来检索待办信息。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809185528261-1985670663.png)

其实个人使用禅道，还可以借鉴项目管理的概念，把自己要处理的事情放在项目里面进行跟踪管理，也是非常方便的。比如买房，考研，复习考试等等。

 

### 3.2.2. 关注需要自己处理的任务、需求、bug

禅道在我的地盘中提供了指派给自己的需求，任务，bug等快捷操作。凡是指派给自己的这些事项，都是需要及时处理的。因此对于每一位使用禅道的朋友来讲，每天的工作其实也很简单，就是将我的地盘中指派给自己的任务、需求或者bug及时处理掉就可以了。

#### 3.2.2.1.我的任务

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809185544714-1667157134.png)

#### 3.2.2.2.我的bug

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809185550714-143366428.png)

#### 3.2.2.3.我的需求

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809185557527-675845648.png)

#### 3.2.2.4.我的测试

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809185603183-1831664613.png)

### 3.2.3. 通过我的档案查看或修改个人信息

在我的地盘中还有我的档案一个页面，在这个页面可以查看或者修改自己的个人信息，包括修改密码功能。

#### 3.2.3.1.查看个人信息

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809185631949-1729747484.png)

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809185637386-1395695366.png)

**备注：**

源代码提交帐号是该用户在subversion系统中的提交帐号，主要用来做对照使用。如果没有使用subversion集成功能，将这个字段保留为空即可。

#### 3.2.3.2.修改密码

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809185650105-215897386.png)

 

## 3.3.产品经理篇

### 3.3.1. 维护产品

产品管理对于公司来讲，至关重要。只有做出好的产品或者服务出来，才能赢得市场，谋求发展和生存。所以产品经理的这个位子对于公司来讲，是非常关键的，相当于公司的大脑，在决定着公司前进的方向。在禅道里面，产品和项目这两个概念被明确的区分开来。产品是需求方，决定做什么。项目是执行方，解决的是如何做的问题。而测试则是保障方，解决的是正确的做事情的问题。所以在禅道中，所有的一切都是围绕产品展开的。产品是整个项目管理活动的核心。

#### 3.3.1.1.创建产品

1. 用产品经理的角色登录禅道。
2. 进入产品视图，然后点击页面右侧的“添加产品”链接，即可出现新增产品的页面。
3. 如果系统中还没有添加产品，系统也会自动跳转到产品的添加页面。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809185702652-1613311779.png)

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809185709074-1804099726.png)

添加产品时需要注意的地方：

- 产品代号相当于大家对这个产品的一个隐喻，比如禅道[项目管理软件](http://www.zentao.net/)的代码是zentao。
- 产品负责人负责整理和解释整个产品的需求，制定相应的发布计划。
- 测试负责人，可以指定默认的测试负责人。这样可以适用于公司人比较多，提交bug不知道该给谁的情况。
- 发布负责人主要的职责是创建发布。
- 访问控制，则可以控制访问该产品的人员列表。比如可以将某一个产品设为私有，只有产品添加者、产品负责人、测试负责人、发布负责人以及该产品的项目团队才可以访问。

#### 3.3.1.2.产品多分支和多平台功能

禅道7.4.beta版本开始，产品新增多分支和多平台功能。多分支和多平台功能使得产品的管理开发更加的清晰明了，非常适合一个产品拥有多个平台和多个分支的管理，这样需求明确的划分到某个平台和分支上，项目关联开发是就一目了然。多分支可以用于某个产品有定制开发的需求，比如某个产品针对不同的行业或者不同的客户有做二次开发，可以用产品的多分支来做区别管理。

下面给大家具体介绍产品多平台功能。多分支的操作与多平台是一样的，可以直接参考。

新增产品时，可以在产品类型里选择多分支和多平台。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809185725511-1964825731.png)

产品创建成功后，产品页面下会显示多平台以及维护平台的菜单。

点击 平台 菜单，即可维护平台，右侧可以做添加平台。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809185744105-2010415991.png)

平台添加成功后，在提需求页面，所属产品后可以选择所属平台。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809185753386-1093601469.png)

需求创建成功后，在产品→需求页面，需求名称前就会显示所属平台的名称。

如果需求属于所有平台，那么需求名称前默认不显示所属平台名称。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809185802652-2086086193.png)

在项目→产品关联产品页面时，同时可以选择关联的产品以及所属平台。

选择了所属平台后，项目→需求关联需求时，可以关联该产品下所有平台和项目关联的产品平台下的需求。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809185820058-907251844.png)

 

### 3.3.2. 创建和评审需求

我们产品经理可能都习惯了写需求设计文档，或者规格说明书，通过一个非常完整的word文档将某一个产品的需求都定义出来。但在禅道里面，我们提倡 按照功能点的方式来写需求。简单来讲，就是将原来需求设计文档中的每一个功能点摘出来，录在禅道里面，作为一个个独立的功能点。如果按照scrum标准走 的话，我们可以称之为用户故事(user story)。所谓用户故事，就是来描述一件事情，作为什么用户，希望如何，这样做的目的或者价值何在，这样有用户角色，有行为，也有目的和价值所在，非常方便与团队成员进行沟通。 

#### 3.3.2.1.创建需求

1. 使用产品经理角色登录系统。
2. 进入产品视图。
3. 在页面右侧，有“提需求”菜单，点击菜单，出现新增需求的页面。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809190853386-2101272224.png)

 

1. - 需求的标题是必填项。
   - 所属计划和模块，可以暂时保留为空。
   - 需求审核那块，我们选上不需要审核，这样新创建的需求状态就是激活的。只有激活状态的需求才能关联到项目中，进行开发。
   - 需求可以设置抄送给字段，这样需求的变化都可以通过email的形式抄送给相关人员。
   - 可以设置关键词，这样可以比较方便的通过关键词进行检索。

#### 3.3.2.2.评审需求

在创建需求的时候，有一个“不需要评审”的复选框，如果选中该复选框的话，需求的创建是激活中的。但大部分情况下面，需求还是需要评审的。即使产品完全有一个人负责，也可以将一些不成熟的想法存为草稿，后续再进行处理。新增需求的评审流程如下：

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809190944792-386023870.png)

 

**下面我们来看下具体的需求评审页面：**

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809190951995-2005700702.png)

- 评审结果可以选择确认通过、有待明确、拒绝等操作。如果选择“确认通过”，则需求的状态改为“激活中”，然后就可以关联到项目中进行开发了。
- 如果选择“有待明确”，会保持需求的草稿状态，并将需求指派回需求的创建者头上，有其继续进行完善。
- 如果选择了“拒绝”，则需要给出相应的拒绝原因，拒绝原因可以有：

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809191023386-1318731585.png)

- 由谁评审是记录的参与评审的人员名单，可以输入用户名来自动筛选。一般来讲需求评审可以是一个线下的评审会议，在禅道里面记录下参与需求评审的人员即可。

### 3.3.3. 变更和评审需求

变更是需求管理必不可少的流程，禅道项目管理软件对需求的变更提供了全面的支持。其实需求的变更并不可怕，但不清楚影响范围的变更是很可怕的。在传统项目管理中，由于没有有力工具的支撑，产品经理在变更需求的时候，无法知晓该需求的影响范围，会有很大的随意性。禅道项目管理软件将需求、任务、bug和用例都纳入为一体管理，就可以很清楚的知晓变更的影响范围，从而给产品经理更好的指导。

**禅道里面需求变更的基本流程如下：**

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809191037089-1080060780.png)

 

下面我们来看下具体的操作：

#### 3.3.3.1.变更需求

禅道专门提供了需求的变更流程。凡是对需求**标题、描述、验证标准和附件**的修改，都应该走变更流程。变更之后的需求状态为**变更中**。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809191047886-296583047.png)

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809191057370-213389264.png)

- 编辑操作是无法修改需求的标题、描述、验收标准和附件的。
- 在变更需求的时候，如果选择了“不需要评审”，则需求状态自动变成激活，不需要再走评审流程。
- 在变更需求的时候，会列出该需求的影响范围：

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809191114683-627496187.png)

 

#### 3.3.3.2.评审需求

\1. 通过需求的详情页面查看变更前后的变化

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809191132511-1770621503.png)

\2. 评审需求，给出评审结果

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809191142464-776395467.png)

- 评审结果可以选择确认通过，撤销变更，有待明确或者拒绝。如果选择确认通过，则需求的状态从“已变更”变为“激活中”。
- 如果选择撤销变更，则取消当前的变更，并回退到之前的版本。
- 如果选择有待明确，需求被打回到需求的变更者，继续进行完善。
- 如果选择拒绝，则需要给出相应的拒绝原因。
- 同样在评审需求的时候，也会列出相应的影响范围，评审者可以参考。

#### 3.3.3.3.确认需求变更

当需求变更被确认之后，研发团队和测试人员需要确认需求的变更。

\1. 任务确认需求变动

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809191209636-65520110.png)

 \2. Bug确认需求变动

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809191215636-1006317488.png)

 \3. 用例确认需求变动

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809191241011-600799513.png)

 

### 3.3.4. 需求的状态和研发阶段

禅道软件设计的需求有两个字段来跟踪它的变化，一个是需求的状态字段，一个是需求的研发阶段字段，下面来看下这两个字段。

#### 3.3.4.1.需求的状态

需求状态(status)字段，总共有四种状态，分别是草稿(draft)、激活(active)、已变更(changed)和已关闭(closed)。对应为需求的流程操作共有：创建、变更、审核、关闭、激活，其状态流转图如下：

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809191850105-1998702028.png)

 

#### 3.3.4.2.需求的研发阶段

需求还有一个阶段(stage)字段，用来描述激活的需求在研发过程中所处的阶段。目前总共有未开始、已计划、已立项、开发中、开发完毕、测试中、测试完毕、已验收、已发布。

那么需求的研发阶段是如何变化的呢？一种方案是通过编辑操作，来修改研发阶段。但我们更提倡另外一种方案，就是在创建任务的时候，仔细设置任务的类型，比如开发，测试。禅道的程序会自动根据不同类型任务的变化来自动计算需求的研发阶段，其规则如下：

1. 如果需求没有关联到项目，也没有关联到计划，则需求的研发阶段是"未开始"。
2. 如果需求关联到了计划，还没有关联到项目中，则需求的研发阶段是"已计划"。
3. 如果需求关联到了项目中，但还没有分解任务，则需求的研发阶段是"已立项"。
4. 如果需求关联到了项目中，且进行了任务分解:
   如果有一个开发任务进行中，并且所有的测试任务还没有开始，需求的研发阶段为“研发中”。
   如果所有的开发任务已经完成，并且所有的测试任务还没有开始，则为“研发完毕”。
   如果有一个测试任务进行中，则视为“测试中”。
   如果所有的测试任务已经结束，但还有一些开发任务没有结束，则视为"测试中"。
   如果所有的测试任务已经结束，并且所有的开发任务已经结束，则视为"测试完毕"。
5. "验收"阶段是需要产品经理手工来进行确认的。
6. 产品→发布中关联的需求后，需求的研发阶段是“已发布”。

**需求所属产品为多分支或多平台类型的所处阶段说明：**

以多平台为例，该产品有安卓、ios两个平台。

（1）如果需求没有关联到项目，也没有关联到计划，则需求的研发阶段是“未开始”。

（2）如果需求属于所有平台，关联的计划也属于所有平台，则需求的阶段为“所有平台：已计划”。如果计划属于ios平台，则需求的阶段为“ios：已计划”。如果需求属于某个特定平台，阶段计算方式等同原来的普通产品的情况。

（3）如果项目关联的是产品的某个平台，假如关联了ios平台，同时关联了产品所有平台下和ios平台下的需求，没有分解任务。则ios平台下的需求此时阶段都是“已立项”，所有平台的需求则是“ios：已立项”。假如该需求所有平台还是“已计划”，则显示“所有平台：已计划”“ios：已立项”。

如果一个需求同时被两个项目关联，而两个项目，一个关联了产品的ios平台，一个关联了所有平台。同时都没有分解任务，那么这个需求的阶段就是“所有平台：已立项”“ios：已立项”。

**注：禅道****7.2.stable****版本开始，可以编辑需求手动更改需求的所处阶段。**

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809191906011-1990306243.png)

点击需求标题，进入需求详情页面，点击编辑需求，在页面的右侧显示需求的基本信息，需求所处阶段一栏点击下拉选中你要修改的需求所处阶段，保存即可。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809191918058-1326283780.png)

再回到产品---需求列表页面，就可以看到需求的所处阶段已经由已立项变为测试中了。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809191928027-1155482754.png)

 

### 3.3.5. 需求的注意事项

#### 3.3.5.1.禅道中需求的写法

在禅道中，我们默认给大家提供了一个需求的模板：作为一名<*某种类型的用户*>，我希望<*达成某些目的*>，这样可以<*开发的价值*>。这个模板是借鉴自scrum开发里面的用户故事(user story)的写法。只不过我们使用了相对比较中性的概念。

在这个模板中，总共有三个元素：角色，要做的事情，价值或者原因。我们平时在写需求的时候，往往会忽略角色和价值原因这两个元素，只关注了要做的事情。其实这有很多的问题。不进行用户角色的划分，会影响对产品功能的设计和定位，从而导致产品往往是给一个用户角色开发的，就是产品经理自己。:)而忽略开发的原因或者价值，会让开发人员感到困惑。他们可能并不理解你这样做的原因或者目的，不理解的需求实现起来自然会有问题。 

#### 3.3.5.2.需求的INVEST原则

除了上面基本的模板之外，在撰写用户故事的时候，可以参考**INVEST**原则：(摘自<http://duweizhong.blogbus.com/logs/112151436.html>)

- **I** **dependent(****独立的****):**一个用户故事对于另一个用户故事应该是独立的（尽可能的）。故事之间的依赖性使得增加了计划编制，确立有限级，故事估计这些工作非常困难。通常，可以通过组合用户故事或者分割用户故事来减少依赖性。
- **N** **egotiable(****便于沟通的****):**一个用户故事是便于沟通的。一个故事的卡片是包含故事详情的简短描述。这些详情是通过讨论阶段来完成的。一张还有很多详情的卡片实际上减少了和客户的会谈。
- **V** **aluable(****有价值的****):**每个故事必须对客户具有价值（无论是用户还是购买方）。一个让用户故事有价值的好方法是让客户来写下它们。一旦一个客户意识到一个用户故事并不是一个契约而且可以进行协商的时候，他们将非常乐意写下故事。
- **E** **stimable(****可估计的****):**开发者需要去估计一个用户故事以便确定有限级并对故事进行规划。但是让开发者难以估计故事的问题来自：对于领域知识的缺乏（这种情况下需要更多的沟通），或者故事太大了（这时需要把故事切分成小些的）。
- **S** **mall(****短小****):**一个好的故事应该在工作量上短小，描述具有代表性，而且不超过2-3人周的工作量。超过这个范围的用户故事，将会在划分范围和估计时出现很多错误。
- **T** **estable(****可测试的****) :**一个用户故事是可测试的来用于确认完成，记住，我们不开发不能测试的故事。如果你不能测试那么你永远不知道你什么时候是完成了。一个不可测试的用户故事例子：软件应该是易于使用的。

一个编写良好的用户故事是敏捷开发的基础。它们应该相互独立，详情应该便于开发者和用户进行沟通，应该对用户有价值，应该对于开发者来说尽可能的清晰以便进行估计，应该短小，通过预定义测试用例的使用确保它是可以测试的。

#### 3.3.5.3.禅道里面的需求和原型图、需求设计文档的区别

传统管理模式中，很多产品经理都在用原型图软件设计原型图或者非常完整的需求设计文档。设计完之后，交给设计人员进行页面设计，然后由开发人员合并代码。那么原型图和用户故事之间的关系和区别是什么呢？

- 和user story相比，原型图或者需求设计文档是一个整体，可以给人宏观的把握。这是原型图的优点。比较直观。
- 它是一个整体，所以就没有办法进行分解。你不可能分解成，做页面导航条，做页面的中间部分等。
- 没有分解，所以原型图也就没有办法进行优先级的排序。比如页面部分，有的很重要，有的不重要。但在原型图里面是体现不出来优先级的。
- 没有分解，自然也就无法进行跟踪。你没有办法得知原型图完成了多少。
- 过于死板，给设计人员和开发人员留下的发挥的空间太少，后演变成被动执行。
- 需求设计文档规定的比较细致，会让产品经理陷入太多的细节，对整体的把握会减弱。

虽然相比较于用户故事而言，传统的原型图或者需求设计文档有一些不足，但在实际的开发过程中，二者可以相辅相成。禅道从1.2版本中，已经增加了文档库管理。可以将原型图作为设计文档，上传到某一个产品相关的文档库中，和用户故事相互配合，是一个好的方案了。

### 3.3.6. 维护产品模块

添加完产品之后，就需要来设置产品的模块。模块相当于对产品需求的一个分类，通过组织模块，可以让大家对产品有一个宏观的把握和认识，也方便对需求进行分类和整理。

 

**设置模块的步骤：**

1. 使用产品经理角色进入产品视图。
2. 选择要维护的产品。
3. 点击菜单中的“模块”。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809191947870-1597038664.png)

- 维护模块的时候是一级级进行维护的。比如可以选择"我的地盘"，然后维护它的子模块。
- 右侧的数字是用来排序的，可以将通过调整模块的排序字段来调整它在模块树里面的位置。
- 可以选择某一个模块编辑，编辑的时候可以修改它所属的上级模块。

**产品模块同步显示的问题：**

禅道从5.2.1版本开始，产品的模块可以同步到项目任务、测试Bug和用例里。

项目任务、测试Bug和用例也可以单独维护自己的模块。需要注意的是产品模块同步到项目任务里是有条件的。

 

**项目****→****任务里显示模块的规则：**

1、项目中关联的需求在产品中的模块。比如产品模块A下面有4个需求，项目都没有关联，那么在项目中是不会显示模块A的，只要关联了4个需求中的任何一个及以上，项目模块就可以显示模块A。

2、创建任务的时候可以选择产品的某个模块（即使没有关联该模块下面的需求创建任务的时候也可以关联），创建任务后也会显示出该模块。

3、项目也可以维护自己的模块：项目→任务页面 左侧点击维护模块，可以添加维护项目自己的模块。

最新版本禅道，新增了列表页显示模块名的功能。（如果添加模块时有填写模块简称，那么就显示模块名简称。）

产品需求列表页面左侧的模块显示栏下有“列表页是否显示模块名”的编辑按钮。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809192008902-1580686976.png)

禅道里默认列表页不显示模块名，点击进入选择框，选择只显示一级模块。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809192019542-544466621.png)

保存成功后，需求的列表页的显示如下。

需求名称前显示有该需求所属模块的名称。如果该需求不属于任何模块，就不显示模块名。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809192029980-1445138583.png)

还可以选择 只显示最后一级模块，点击保存。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809192049714-449896234.png)

设置成功后，在需求列表页面需求的名称前即只显示最后一级模块的名称。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809192100480-292776092.png)

 

### 3.3.7. 建立发布计划

古人云，凡事预则立，不预则废。产品需要做规划，才能有轻重缓急，才能正确的做事。因此对于产品经理而言，计划是必需的。

- 对于产品经理自己而言，发布计划可以帮助他规划产品，制定发布的节奏，调整需求的优先级。
- 对于公司其他部门的同事以及外部的客户而言，发布计划可以让他们知晓产品的进展情况，以便做好相应的安排。
- 同时在项目关联需求的时候，计划可以帮助需求的关联。

#### 3.3.7.1.创建计划

1. 进入产品视图，选择某一个产品。
2. 点击“计划列表”
3. 出现计划列表页面，点击页面右侧的“创建计划”，即可出现计划增加页面。 

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809192113355-250605922.png)

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809192119292-554828486.png)

#### 3.3.7.2.关联需求

创建完计划之后，可以为计划关联需求

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809192145152-56516356.png)

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809192156683-2034423177.png)

也可以在添加需求的时候指定计划(已经过期的计划不会列出)

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809192205620-689541862.png)

 

#### 3.3.7.3.计划和项目之间的关系

禅道软件中计划和项目并没有非常强的对应关系。如果某一个开发团队的计划和执行都非常好，那么一个计划可以对应一个项目。但这是非常理想的状态。一般情况下面是这样，在项目关联需求的时候，大部分的需求都关联自一个计划，但同时也关联了其他计划的部分需求。

### 3.3.8. 建立发布

项目结束后产品人员的一个工作就是创建发布，通过创建发布，可以告诉公司其他相关的部门，他们可以在新版本产品的基础上开展工作。同时也是鼓舞团队士气非常好的一个手段。

#### 3.3.8.1.创建发布的前提

创建发布有两个前提：

1. 该产品有关联过项目。
2. 该项目有创建过版本。可以参考<http://www.zentao.net/help-read-79213.html>

#### 3.3.8.2.如何创建发布

1. 进入产品视图，选择发布列表。
2. 然后点击“创建发布”，即可出现创建发布的页面。
3. 如果产品是有多分支/多平台的，可以选择在哪个分支/平台下创建发布。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809192226355-1771071175.png)

如果是没有使用多分支/多平台的，可以忽略上面的操作，直接点击右上角的“创建发布”操作。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809192235214-36211398.png)

创建成功后，即可关联需求和Bug。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809192244324-2062610342.png)

- 选择了版本之后，系统会自动计算这个版本所对应的项目中完成的需求和解决的bug，可以进行关联选择。
- 如果系统自动计算的需求和bug不完整，可以在描述字段里面补充。

禅道7.4.beta版本开始，新增了发布的停止维护功能。

在产品--发布列表页面，右侧的操作按钮有停止维护按钮，点击操作即可。

停止维护的发布版本，在禅道系统里是默认不显示了的。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809192258292-640307244.png)

3.3.9. 路线图

禅道软件中，计划和发布组成了产品的路线图，通过路线图可以非常直观的了解产品过去发布过的版本和将来的计划。如下图，绿色的部分代表了发布过的版本，黄绿色的部分代表了将来的计划。点击某一个发布或者计划，可以查看其具体的需求信息。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809192315761-36426053.png)

### 3.3.10.    文档管理

禅道软件内置了基本的文档管理功能，这样禅道没有覆盖到的流程就可以通过文档管理功能来补充。禅道文档库共分为三种类型：产品文档库、项目文档库和自定义文档库。其中产品文档库用来存储产品层面产生的文档，项目文档库用来存储项目过程中产生的文档。自定义文档库则可以用来存储知识库、公司管理规范等文档。下面让我们来看下具体的操作。

#### 3.3.10.1.维护分类

1. 进入文档视图。
2. 选择产品文档库。
3. 然后选择页面下方的“维护分类”链接，即可出现维护分类的的页面。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809192331449-1135486047.png)

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809192338777-2116631396.png)

#### 3.3.10.2.添加文档

在产品视图，点击页面右侧的“创建文档”，即可进入文档的创建页面。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809192351120-1861229140.png)

- 文档共有文件、链接和网页三种类型。
- 文件类型的文档可以上传一个附件。
- 链接类型的文档可以是一个网页链接。
- 网页型的文档可以直接使用富文本编辑器撰写。

#### 3.3.10.3.浏览文档

文档添加之后，可以在文档库里面查看相应的文档列表。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809192404589-1313374294.png)

也可以在产品视图的文档库里面查看这个产品下面的所有文档。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809192412870-432813821.png)

### 3.3.11.    主持产品会议

按照scrum的管理流程，开发团队需要定期召开迭代计划会议。计划会议一般控制在一天之内结束，共分为两个部分。其中第一个部分主要由产品经理负责讲解需求，确定需求的优先级，决定本期项目要完成的需求列表。然后下午由研发团队对需求进行任务分解。

**产品计划会议的流程如下：**

1. 由项目经理提前准备，告诉大家会议的具体的时间和地点。
2. 产品经理可以事先对需求做一个划分，将本期项目计划要实现的需求事先关联到项目中。(如果需求太多，来不及一一讲解)
3. 然后由产品经理给大家做需求的讲解，与会的成员应当认真听讲，并提出自己的意见.
4. 每一个需求讲解完毕之后，大家对需求的工作量进行估计，并根据需求的工作量确定每一个需求的优先级。
5. 然后按照需求优先级的高低以及工作量的大小，对关联到项目中的需求做调整：将不需要实现的移除，关联新的需求。

**计划会议的产出：**这个计划会议我们需要拿到的结果就是项目视图的需求列表。

计划会议对应到禅道软件就是项目的关联需求操作：

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809192431620-1124804855.png)

 

### 3.3.12.    参与项目管理、演示和总结

很多公司的产品经理容易犯的一个错误就是项目开始之后，找不到产品经理了。就拿笔者之前所在的公司来讲，产品经理只是在计划会议上面给我们讲解下需求，然后项目开始之后，就消失了。其实这样很不好，会造成很多的问题：

1. 首先，单纯的靠文字描述和计划会议，不可能保证100%的人员100%的理解正确，很有可能会有理解偏差的情况。所以产品人员应该随时了解项目进展情况，随时发现问题，随时解决问题。
2. 其次，产品经理不参与项目过程，很容易造成产品经理和开发团队的对立，不利于团队的发展。而且很容易扯皮，大家互相推诿责任。

因此，产品经理在项目开始之后，应当随时了解项目的进展情况：参与团队的例会，在禅道里面通过项目视图了解任务进展，通过bug查看缺陷情况，需求完成之后及时检查确认等等。

在项目开发完成之后，产品人员应当对本期所作的需求进行确认，以保证是自己想要的东西。同时应当积极参加团队召开的演示会议，听取大家的意见和反馈，并整理成相应的需求，录入到禅道中。

产品经理还应当积极参加项目的总结会议，吸取经验教训，调整下一步的工作。

### 3.3.13.    需求的基本统计报表

针对一些公司需要对产品需求进行统计的情况，禅道项目管理软件从2.0版本开始，提供了需求的基本统计报表功能。在产品视图下的需求子栏目，点击“统计报表”链接，即可根据需要进行需求的统计，包括：

\1.  产品需求数量。

\2. 模块需求数量。

\3. 按照计划进行统计。

\4. 按照状态进行统计。

\5. 按照所处阶段进行统计。

\6. 按照优先级进行统计。

\7. 按照预计工时进行统计。

\8. 按照由谁创建来进行统计。

\9. 按照当前指派来进行统计。

\10. 按照关闭原因来进行统计。

\11. 按照变更次数来进行统计。(根据版本号来进行计算，版本号 - 1为变更次数)

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809192449699-350585772.png)

 

## 3.4.项目经理篇

### 3.4.1. 建立项目

很多朋友使用禅道之后经常问的一个问题就是产品和项目的关系。就像前面的[《禅道和scrum的对应关系》](http://www.zentao.net/help-read-79635.html)这篇文章所描述的那样，禅道里面的项目其实对应的是敏捷开发里面的迭代的概念。只不过我们为了大家更容易理解和接受，还是沿用了传统的项目的概念。

**创建项目**

\1. 进入项目视图，点击右侧的”添加项目“链接。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809192518589-622776279.png)

\2. 出现项目添加的页面

在这个页面设置项目名称、代号、起止时间、可用工作日、团队名称、项目目标和项目描述等字段。其中关联产品是可以为空的。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809192533558-1631792199.png)

注意事项：

1. 项目代号是一种隐喻，也就是团队内部可以互相了解和知晓，比如禅道项目曾经使用过“opensesame"来作为项目的代号。
2. 团队名称，可以自己定义，比如叫做“禅道开发团队”等等。
3. 在添加项目的时候，可以选择关联与之相关的产品，以便后续进行需求的关联。
4. 项目可以控制它的访问权限，分为默认、私有和自定义白名单三种。

### 3.4.2. 组建项目团队

项目组建之后要做的事情就是设置团队。很多朋友经常问，为什么我在创建任务的时候，只能指派给自己呢？其实原因很简单，是因为没有设置团队。

**当项目创建成功之后，可以根据提示设置团队。**

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809192544136-1522308208.png)

**或者从项目视图中的团队菜单，也可以进行项目的团队管理。**

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809192556636-573044656.png)

在维护项目团队的时候，需要选择都是哪些用户可以参与到这个项目中，同时需要设置这个用户在本项目中的角色（角色可以随便设置，比如风清扬，冬瓜一号等）。可用工作日和可用工时每天需要仔细设置。通常来讲，一个人不可能每天8小时投入，也不可能一星期七天连续投入。

**设置完毕之后，系统会自动计算这个项目总得可用工时。**

**![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809192605324-1335204851.png)**

  当团队设置完毕之后，整个项目的可用资源就已经确定了：起止时间确定了，参与的人员也确定了。下面就是来确定项目中要做的事情了。

### 3.4.3. 确定项目要完成的需求列表

项目团队组建完毕之后，接下来要做的一个工作就是确定这期项目要做的需求。这项任务其实是整个团队，包括产品在内，共同完成的。确定的过程应该是线下的产品计划会议，请参考：<http://www.zentao.net/book/zentaopmshelp/140.html>[
](http://www.zentao.net/%20http:/www.zentao.net/help-read-79202.html)

#### 3.4.3.1.关联产品

如果在创建项目的时候，已经关联过产品，可以忽略这个步骤。

1. 以项目经理身份登录。
2. 进入项目视图。
3. 点击“关联产品”按钮。然后点选该项目相关的产品即可。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809192619714-899825790.png)

#### 3.4.3.2.关联需求

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809192627964-258243743.png)

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809192634277-1902544097.png)

1. 在关联需求的时候，可以按照优先级进行排序。
2. 关联的需求状态必须是激活的（评审通过，不能是草稿）

### 3.4.4. 组织进行任务分解

需求确定之后，项目中几个关键的因素都有了：周期确定、资源确定、需求确定。下面我们要做的事情就是为每一个需求做wbs任务分解，生成完成这个需求的所有的任务。note:是完成需求的所有任务，这里面包括但不限于设计，开发，测试等。

#### 3.4.4.1.访问项目的需求列表页面：

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809192649120-938062090.png)

-  在项目的需求列表页面，可以很方便地对某一个需求进行任务分解。
- 同时还可以查看这个需求已经分解的任务数。

#### 3.4.4.2.分解任务

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809192659245-1977614244.png)

- 这时候创建任务的时候，就可以选择需求了。
- 我们同时提供了需求查看的链接。
- 如果需求和任务的标题是一样的，可以通过”同需求“按钮快捷的复制需求的标题。

#### 3.4.4.3.任务分解的几个注意事项

1. 需要将所有的任务都分解出来。这里面包括设计，开发，测试，美工，甚至包括购买机器，部署测试环境等等。
2. 任务分解的粒度越小越好，比如几个小时就可以完成。
3. 如果一个任务需要多个人负责，继续考虑将其拆分。
4. 事务型的事务可以批量指派，比如需要让团队里面的每一个人都写个项目总结，可以选择类型是事务，然后批量指派给团队里面的所有人员。
5. 任务的类型请仔细设置，这个会涉及到需求研发阶段的自动计算。后面我们会有讲解。
6. 任务的分配好是自由领取，这样可以大程度上调动大家的积极性。
7. 任务的分解好是由团队共同完成，不要由项目经理一人包办。

### 3.4.5. 召开每天的站立会议

项目任务分解完毕之后，整个项目要完成的任务也都已经确定，每个人负责的任务也确定。这时候就进入到每天的迭代过程。项目经理的一个职责就是每天负责召开站立会议。

**具体的形式如下：**

1. 每天固定时间召开。
2. 项目团队成员站立在一起开会。
3. 每个人讲述三件事情：昨天做了什么，今天计划做什么。有没有什么问题。
4. 会议控制在15分钟之内结束。

**注意事项：**

1. 不要坐着开会。
2. 站立会议不要试着解决问题，大家更多的是沟通互相的进度，而不是解决具体的问题。具体的问题，会后讨论。
3. 控制会议时间，不要超过15分钟。
4. 站立会议不是汇报会议，而是大家的沟通。及时发现问题。
5. 非项目团队成员可以参加，但不能发言。

### 3.4.6. 通过燃尽图了解项目的进展

项目团队成员除了每天的编码工作、参加站立会议之外，还有一个工作就是在禅道里面更新自己所负责任务的状态以及它的预计剩余时间。然后禅道系统会根据项目中所有任务预计剩余的时间累加起来，绘制成燃尽图。燃尽图的英文名字叫做 burn down chart，先来看一个例子：

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809192718620-550980590.png)

- 此图横轴为日期，纵轴为工时数。
- 工时数乃项目中所有任务剩余工时的总和，每天计算一下，形成坐标，然后把线连接起来，形成此燃尽图。
- 新版本的禅道，燃尽图可以设置是否显示周末，还可以修改项目首天工时。修改首天工时，需要到组织--权限里分配。
- 燃尽图的更新，需要配置定时任务，具体请参考<http://www.zentao.net/help-read-79063.html>

**燃尽图和甘特图的区别：**

禅道核心的管理理念是基于scrum的。所以它的主要工具是燃尽图，而不是甘特图。这也恰恰反映了两种截然不同的管理思路。甘特图需要严格的设置过 任务的起止时间和前置关系，是一种控制式的管理。而燃尽图则更关注于做完整体的项目还剩下多少时间。所以在我们开源版本里面我们更提倡大家用好燃尽图。

### 3.4.7. 通过各种列表的各种功能了解项目进展

其实做好项目管理也很简单，做到信息公开、透明，很多事情自然而然就会变得简单。除了每天召开站立会议，更新燃尽图之外，项目经理还可以通过项目的各种列表功能来掌握项目的进展情况：

#### 3.4.7.1.首页的项目进展列表

禅道软件在首页提供了进行中的项目的概况列表。通过这个列表，可以很方便的知道目前整个公司正在进行的项目的进展情况。这个图里面的进度是按照总消耗/(总消耗 + 总剩余)计算出来的一个工时的进度。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809192735886-169624299.png)

#### 3.4.7.2.项目视图的所有项目列表

首页的项目列表只是正在进行中的项目，我们在项目视图中，还提供了所有项目进展情况的列表。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809192746230-836042853.png)

 

#### 3.4.7.3.通过任务列表查看具体的任务的进展情况

\1. 可以通过各种检索标签来

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809192806855-588883325.png)

\2. 可以通过分组查看，来按照不同的字段进行分组

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809192817292-762134975.png)

#### 3.4.7.4.通过项目任务树状图，了解项目需求和任务的开发情况。

禅道开源版8.2beta版本新增了任务的树状图功能。可以清晰的显示项目所关联的需求，需求和任务的关联关系以及任务的开发情况。

鼠标放在任务标题上，会显示任务的状态，工时信息，以及操作按钮。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809192829355-1553972758.png)

 

### 3.4.8. 召开演示会议和总结会议

#### 3.4.8.1.演示会议

在项目结束之后，项目经理应该召开相关人员（团队，以及其他相关的部门，领导，或者合作伙伴等等）召开演示会议。演示会议的目的旨在向大家展示本期项目团队所取得的成果，这是一个提高团队士气、增加成就感的非常好的方式，也是听取反馈，调整下一步计划的方式。

演示会议不用特别正式，它不是汇报会议。不用准备精美的ppt，只需要有一个大屏幕，然后团队的成员分头介绍自己所负责的东西。在演示过程中，会有人提出很多的问题或者建议，产品经理应当将其记录下来，转换为后面的需求。

#### 3.4.8.2.总结会议

演示会议完之后，团队内部应该召开总结会议。这个会议的参与人员主要是团队成员了。该会议的注意议题是总结这次项目我们做的好的地方，做的不好的地方。要将其记录下来，存到文档管理中，比如叫做第几期项目总结。然后确定下一期项目要解决的问题，可以重点解决一个，比如开发环境的问题。

 

### 3.4.9. 项目任务基本的报表统计

禅道项目管理软件提供了基本的项目统计功能，项目经理可以通过这个功能来掌握一些宏观的信息：

- 按照所属项目进行统计。
- 按照指派给进行统计。
- 按照任务类型进行统计。
- 按照优先级进行统计。
- 按照截止日期进行统计。
- 按照初预计进行统计。
- 按照预计剩余进行统计。
- 按照已经消耗进行统计。
- 按照由谁完成进行统计。
- 按照关闭原因进行统计。
- 按照每天完成任务数进行统计。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809192840433-532093556.png)

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809192848011-651493933.png)

需要注意的是：禅道的统计报表是根据你当前的列表范围进行统计的。比如你现在查看的是进行中的任务，那么统计就是在所有进行中的任务列表中进行的。换言之，你可以通过切换不同的检索条件来获得你想要的统计报表。

 

## 3.5.开发团队篇

### 3.5.1. 参加项目计划会议，分解任务

按照scrum的流程，项目团队成员要参加产品的计划会议和项目的任务分解。

​       在参加产品计划会议的时候，应当充分理解需求，并发表自己的意见，以确保自己对每一个需求理解都是正确的。

项目计划会议的主要任务是对需求进行任务分解，团队成员应全力参与。分解任务之后，自愿领取自己喜欢的任务。

**注意：这个地方的团队成员，不仅仅是开发人员，也包括测试人员，****dba****，即所有的项目团队中的成员。**

 

### 3.5.2. 领取任务并每天更新任务

当项目的任务分解完毕之后，项目团队成员需要领取自己喜欢做的任务，开始每天的开发。除了日常的编码工作之外，还应当每天花点时间在禅道里面更新下任务的状态以及消耗情况。

#### 3.5.2.1.领取任务

按照scrum的原则，好是大家领取自己喜欢做的任务，这样才能更好的调动团队的积极性。有的朋友会问，如果没有人领取怎么办？大家都挑简单的怎么办？一个新手挑选了一个关键任务怎么办？每个人的任务量不太均衡怎么办？其实这些问题都不是问题。因为信息是公开透明的，一个个体不可能每一期都只挑简单的任务，做简单的事情。当然了，项目经理宏观层面的把握也必不可少，尤其是一些关键任务，需要平衡下。

领取任务可以通过两种方式，一种是通过“**指派**”操作，一种是通过“**编辑**”操作。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809192900105-872143231.png)

#### 3.5.2.2.更新任务状态

项目开始之后，每个人每天应当及时更新自己所负责的任务的状态。禅道提供了几个快捷的操作按钮：开始、完成、关闭、取消和激活。

开始、完成和取消没有什么歧义。解释下关闭和激活。

禅道有一个可选流程，就是当任务完成之后，会自动指派回任务的创建者头上，这时候任务的创建者可以验证任务是否完成。如果完成，则将任务关闭。如果任务没有完成，则激活任务。这个流程是可选的，不是必须的流程。适用于传统的命令-控制式的管理。如果对于敏捷开发团队来讲，忽略这个流程即可。

#### 3.5.2.3.更新任务的消耗

除了更新自己负责任务的状态之外，还应该及时更新任务的工时消耗情况：

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809192933949-2045165909.png)

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809192941902-1420604832.png)

- **初预计**，即创建任务的时候的初预计。该字段在任务开始之后，不应该再进行修改。这个字段当任务结束之后，可以和已经消耗字段进行对比，以纠正自己的估计。
- **已经消耗**，则是你在这个任务上所有花费的工时数。
- **预计剩余**，则是你预计这个任务完成大约还需要多少时间。如果预计剩余为0，则表示任务完成。

这里面需要特别强调的是，**初预计** **≠** **已经消耗** **+** **预计剩余。**

**一定要每天更新自己所负责的任务，因为燃尽图的绘制，就是通过预计剩余这个字段来计算的。**

 

### 3.5.3. 创建版本

当完成若干功能之后，就可以创建版本了。版本的概念在英文里面是build，可以对应到软件配置管理的范畴。这是一个可选流程，但还是建议团队能够实施版本管理。这个版本主要的作用在于明确测试的范畴，方便测试人员和开发人员的互动，以及解决不同版本的发布和bug修复等问题。

有的同学会问，既然是版本管理，那么禅道能不能管理源代码？禅道当然是无法管理源代码了，呵呵，这是非常专业的一个事情，已经有非常好的开源软件来解决这个问题。比如subversion和git。大家可以根据自己实际的需要部署安装。禅道里面的版本是做了一个记录。

**流程如下：**

1. 首先是团队经过开发，完成了若干需求，或者解决了一些bug。
2. 这时候某一位发布负责人在subversion或者git中创建了一个tag(标签)，比如禅道的tag目录如下：

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809193028292-9776346.png)

1. 创建了tag之后，这位发布负责人就可以在禅道里面创建一个版本了。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809193040933-39442538.png)

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809193048199-503393662.png)

注：新版本的禅道，先创建版本，保存成功后，在版本的详情页面再关联需求和Bug。

如果在版本详情页面没有看到关联按钮，那么联系管理员到组织→权限里分配相关权限。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809193059433-153024469.png)

**说明：**

1. 名称编号，团队应该有自己的配置管理规范。比如可以是产品名_版本号_状态(stble, beta之类)_日期
2. 不同开发语言其版本的存在形式也不同，有的需要编译，有的只需要源代码。请根据公司的实际情况来填写源代码地址，或者是存储地址。
3. 新版本的禅道，先创建版本，然后再关联需求和bug。关联需求和bug后提交给测试人员进行测试的时候，就可以明确这次测试的范畴，测试可以更加有针对性。
4. 描述字段可以填写一些测试的注意事项、重点内容等。

 

### 3.5.4. 申请测试

当版本创建完毕之后，就可以提交给测试人员进行测试了，提交测试会生成一个测试任务。在这儿需要和大家解释下这个测试任务的概念。其实英文里面里面比较合适的单位是testrun，但翻译到中文里面没有太贴切的词语，我们暂时用了测试任务的概念。但这个测试任务和项目里面创建的类型为“测试”的任务没有直接关联。请大家在使用的时候，注意这个细节。

一般来讲，我们在分解任务的时候，可以创建若干测试类型的任务，比如测试某某，测试某某，大概估计下测试需要的时间。然后具体的测试工作通过测试视图的测试任务来跟踪。

 

**申请测试的步骤：**

1. 进入项目视图，点击“测试”。
2. 然后选择“提交测试”，即可出现提交测试的页面。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809193128214-1418288101.png)

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809193116199-1635529827.png)

**说明：**

1. 负责人为本次测试的负责人。
2. 可以指定这次测试预计起止的时间。
3. 任务描述里面，可以注明此次测试需要注意的地方。
4. 还需要说明的一点是，目前测试任务还没有指派的功能，所以需要大家线下通知测试团队的负责人，由他来负责组织相应人员来进行测试。或者是在项目--任务里创建测试类型的任务，指派给相应的测试人员。

### 3.5.5. 解决bug

提交测试之后，测试人员展开测试，便会有bug产生。这时候研发团队的一个重要职责便是解决bug。禅道里面bug的处理流程比较简单：

​       测试人员提交bug => 开发人员解决bug => 测试人员验证关闭，这是比较正常的流程。还有一个流程是激活流程：

测试人员提交bug => 开发人员解决bug => 测试人员验证未通过 => 激活bug => 重新解决 =>验证关闭。

开发人员所需要做的事情便是处理自己负责bug，并在禅道中登记解决方案：

\1. 项目视图中的bug列表

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809193200386-442357889.png)

 \2. bug的详情页面也可以找到“解决”操作的按钮。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809193212855-1646652919.png)

 \3. 解决bug的时候，需要填写bug的解决方案。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170809193221605-950062957.png)

**附：bug****的解决方案**

禅道软件总共提供了其中解决方案：

- bydesign => 设计如此，无需改动。
- duplicate => 重复Bug，以前已经有同样的bug。
- external => 外部原因，非本系统原因。
- fixed => 已解决。
- notrepro => 无法重现，无法重现bug。
- postponed => 延期处理，确实是bug，但现在暂时不解决，放在以后处理。
- willnotfix => 不予解决。

这其中“已解决”和“延期处理”的bug视为有效bug。

 

### 3.5.6. 文档管理

见7.3.10文档管理

### 3.5.7. 确认bug

当测试人员提交了bug之后，如果开发人员来不及解决这个bug，这时候可选的一个操作是确认这个bug，给测试人员一个反馈。

1． bug列表页面会显示是否已经确认过。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170810085555449-1781285190.png)

2． bug详情页面有确认操作按钮。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170810085603370-574961789.png)

3． bug列表右侧也有确认操作按钮。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170810085610449-2101673017.png)

需要说明的是，如果一个bug被解决之后，也会自动变成已确认。

 

## 3.6.测试团队篇

### 3.6.1. 维护bug视图模块

在禅道软件中，bug也同样需要维护模块，以便更好的组织管理bug。

禅道5.2.1版本开始，产品的模块直接同步到bug、用例下，有条件的同步到项目中。同时，bug模块、用例模块和项目模块也可以单独维护。

**具体步骤：**

1. 进入测试视图，然后选择**Bug**。
2. 在页面的左侧，会出现该产品的Bug模块列表。
3. 模块列表的下部，有**模块维护**的连接，点击此链接，即可维护模块，详情的维护界面，

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170810085631902-2098481002.png)

- 维护模块的时候是一级级进行维护的。比如可以选择“我的地盘”，然后维护它的子模块。
- 左侧的数字是用来排序的，可以将通过调整模块的排序字段来调整它在模块树里面的位置。
- 可以选择某一个模块编辑，编辑的时候可以修改它所属的上级模块，以及这个模块的默认负责人(当创建bug的时候，会自动将这个用户作为默认的负责人)

 

### 3.6.2. 提交bug

直接来看步骤：

1. 进入测试视图的“Bug”
2. 点击页面右侧的"提Bug"，即可进入Bug创建页面。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170810085649292-1486584384.png)

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170810085655511-797480348.png)

**说明：**

1. 项目和任务，以及相关需求，应该认真填写，这样可以将Bug和项目，任务，需求关联起来，以便以后的统计分析。
2. 影响版本是必填的。而这里面的列表来源，则是项目中的版本。如果这个地方没有版本可选的话，则需要到与该产品关联的项目--版本中创建版本。
3. 重现步骤应该翔实准确，确保开发人员可以重现和解决Bug。

### 3.6.3. 验证bug，关闭

当开发人员解决bug之后，就需要来验证bug，如果没有问题，则将其关闭。已关闭的bug，默认是不再显示在bug列表的。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170810085712683-459912899.png)

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170810085721917-2033354829.png)

 

### 3.6.4. 激活bug

如果开发人员解决bug之后，验证无法通过，则可以将bug重新激活，交由后的解决者去重新解决。还有一种情况就是bug关闭之后，过了一段时间，bug又重现了，也需要重新激活。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170810085730808-13951551.png)

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170810085737808-860799660.png)

激活bug的时候，指派给会自动设置成为后的解决者头上。

### 3.6.5. 找到自己需要的bug

测试人员一个非常重要的工作就是筛选bug，禅道对此提供了各种方便的功能来进行筛选。

#### 3.6.5.1.我的地盘中的bug列表。

我的地盘中的bug列表，是所有当前指派给你进行处理的bug。如果该列表为空，那么恭喜你，没有你需要处理的bug。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170810085751527-450004231.png)

#### 3.6.5.2.项目视图中的bug列表

项目视图中的bug列表，是所有在这期项目中产生的bug，所以项目团队可以很方便的在这个页面查看到相应的bug。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170810085804636-2090003851.png)

#### 3.6.5.3.分类浏览

在测试视图的”Bug列表“页面，可以按照各种条件，非常方便的进行浏览。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170810085813261-444365383.png)

#### 3.6.5.4.搜索功能

禅道提供了强大的搜索功能，可以组合出非常复杂的条件。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170810085823089-973731779.png)

 

### 3.6.6. 维护测试用例视图

同7.6.1维护bug视图，测试用例视图也是需要单独维护的，方法与之相同，不再赘述。

### 3.6.7. 创建测试用例

禅道中的测试用例，彻底的将测试用例步骤分开，每一个测试用例都有若干个步骤组成，每一个步骤都可以设置自己的预期值。这样可以非常方便进行测试结果的管理和bug的创建。

直接来看创建用例的页面：

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170810085831683-1839768430.png)

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170810085837136-1979211870.png)

**说明：**

1. 用例的适用阶段，指在哪些个测试阶段，可以用上这个用例。可以进行多选。
2. 用例步骤可以非常方便在之后插入，之前插入，或者删除当前的步骤。
3. 不要把若干个测试用例作为步骤写到一个测试用例里面，因为这样不利于测试的管理和统计。

 

### 3.6.8. 管理测试任务

当开发人员申请测试之后，会生成相应的测试任务给测试人员。这时候测试人员要做的就是为这个测试任务关联相应的测试用例。如果这个测试任务需要多人来配合完成，则需要将相应的用例指派给相应的人员来进行完成，或者自己领取相应的测试用例。

#### 3.6.8.1.关联测试用例

1. 进入测试视图，
2. 选择“版本”，然后进入版本列表。
3. 选择某一个待测版本（即原来的测试任务），点击“关联”菜单，即可出现关联测试用例的页面。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170810085856136-1388345114.png)

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170810085901855-343003713.png)

几点说明：

1. 测试用例可以通过上面的搜索表单进行搜索。
2. 用例默认是关联新的版本，也可以点击下载框，选择之前的版本
3. 可以按照需求或者bug来进行检索。

#### 3.6.8.2.指派或领取用例

在版本（测试任务）的用例列表页面，可以点选用例，将其指派给某一个人来执行。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170810085917917-2117996874.png)

 

### 3.6.9. 执行用例并提交bug

在测试--版本的用例列表页面，用户可以按照模块来进行点选，或者选择所有指派给自己的用例，来查到需要自己执行的用例列表。

在用例列表页面，选择某一个用例，然后选择右侧的“执行”菜单，即可执行该用例。

测试人员在测试时，我们推荐在测试--版本页面，版本所关联的用例列表里执行用例，完成测试。

#### 1. **用例列表页面，点击执行**

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170810085927058-160290597.png)

#### **2.**    **执行用例**

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170810085935620-526821189.png)

#### **3.**    **创建****bug**

如果一个用例执行失败，那么可以直接由这个测试用例创建一个bug，而且其重现步骤会自动拼装。

 

### 3.6.10.    查看报表统计

测试管理的还有一个重要工作就是统计报表，直接来看步骤：

在bug列表页面，点击页面上部的统计报表，即可出现统计报表页面。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170810085949277-485959683.png)

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170810085954980-890847280.png)

说明：bug的统计报表是和当前的列表集合相关的。因此，你可以通过不同的搜索条件来查找自己要进行统计的bug列表，然后再按照不同的统计项进行统计。

 











# 4.维护配置

## 4.1.维护禅道

### 4.1.1. 初始化管理脚本

禅道底层的zentaoPHP框架提供了命令行的操作入口，通过这个功能，可以通过命令行实现对禅道的各种配置或者维护工作。在继续阅读下面文章之前，请大家了解这篇文档：<http://devel.cnezsoft.com/book/extension/34_cli.html>

命令行入口功能强大，但使用起来还是有一些繁琐，所以从4.0版本开始，我们对常见的操作进行了封装，提供了常见的管理脚本，比如备份数据库、更新燃尽图等等。下面我们要做的就是来初始化这些管理脚本。

安装禅道之后，在zentao/bin目录下面有两个脚本，init.bat和init.sh，分别适用于windows和linux平台。这两个基本是用来生成各个命令行工具的。为什么这样设置呢？原来的时候我们在bin目录下面提供了checkdb.php, backup.php等脚本，但这些脚本都需要进行配置之后才能正常使用。但下次版本升级之后，这些修改过之后的脚本就会被覆盖，不方便。所以从4.0版本开始我们提供了这两个init脚本来生成这些脚本。下面我们来看下如何生成吧。

#### 4.1.1.1.windows平台

windows平台下面，使用init.bat脚本，比如我们的程序是安装在i:\xampp目录下面。

```
cd i:\xampp\zentao\bin
init.bat
```

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170810090052120-175619606.png)

1. 这个脚本会提示你输入php可执行文件的路径，输入i:\xampp\php\php.exe，如果是其他的php环境，请按照实际的路径填写。

1. 还需要填写禅道的访问url路径，请根据实际的访问域名进行填写，比如pms.abc.com，如果端口号不是80，还需要把端口号写上。注：如果是windows一件安装包或者linux一件安装包，访问地址是 http://127.0.0.1:88/zentao (专业版是http://127.0.0.1:88/pro),一定要加上zentao(专业版加pro).
2. 设定了php可执行文件的路径之后，这个init.bat脚本就会自动生成backup.bat, computeburn.bat等这些脚本了。

#### 4.1.1.2.linux 平台

如果是在linux平台下面，则需要使用init.sh脚本，以linux一键安装包为例：

```
cd /opt/lampp/zentao/bin
sudo ./init.sh
```

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170810090106230-1653641449.png)

1. 这个脚本会提示你输入php可执行文件的路径，输入/opt/lampp/bin/php，如果是其他的php环境，请按照实际的路径填写。

1. 还需要填写禅道的访问url路径，请根据实际的访问域名进行填写，比如pms.abc.com，如果端口号不是80，还需要把端口号写上。
2. 设定了php可执行文件的路径之后，这个init.bat脚本就会自动生成backup.sh, computeburn.sh等这些脚本了。

#### 4.1.1.3.windows下面一键安装包通过控制面板生成

如果是使用的windows一键安装包，还可以通过控制面板来生成。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170810090123714-1436694208.png)

注意：通过控制面板生成的时候，禅道的访问路径是自动判断的，有可能是错误的，如果是错误的话，可以自己手工执行init.bat重新生成。

#### 4.1.1.4.linux下面一键安装包通过控制脚本生成

如果是使用的linux一键安装包，在执行start或者start88脚本来启动禅道环境的时候，会自动帮你生成，后续还可以通过上面的init.sh来手工重新生成。

注意：通过start或者start88脚本来生成的时候， 禅道的访问路径是自动判断的，有可能是错误的，如果是错误的话，可以自己手工执行init.sh重新生成。

### 4.1.2. 备份禅道

禅道系统管理员一个非常重要的职责就是定期备份禅道，以便在系统出现故障的时候能够及时恢复。这篇文章我们来看下如何备份禅道系统。

禅道的备份分为四个个部分：配置文件、修改过的代码、数据库和附件，下面我们分别来看不同环境下面的备份方法。

#### 4.1.2.1.一键安装包的备份

如果您使用的是禅道的一键安装包程序，简单的方法就是直接将整个一键安装包的目录进行备份。为了备份的完整，在备份之前需要将Apache和MySQL的服务停掉。

windows一键安装包是备份整个xampp目录，linux一键安装包备份整个/opt/lampp目录。

#### 4.1.2.2.手工备份

**1．** **配置文件、代码和附件的备份**

配置文件存放在zentao/config/my.php

附件存放在zentao/www/data/目录下面。

修改的代码也都放在zentao目录下面。

因此备份配置文件、代码和附件的方法就是将整个zentao目录备份即可。

**2．** **数据库的备份**

  **直接备份数据库原始文件。**

找到mysql的data目录，windows一般是在mysql安装目录下面。linux则一般是在/var/mysql或者/var/db类似的目录下面。在data目录下面，会有一个zentao的目录，这个zentao目录就是原始的数据库文件，直接复制这个也是可以的。linux下面可能需要注意权限的问题。

  **通过导出备份文件。**

可以使用mysql提供的管理工具，将数据库导出： mysqldump -u xxx -p zentao > zentao.sql，其中的user换成实际的用户。

#### 4.1.2.3.登录禅道后台进行备份

管理员登录禅道 后台-备份 页面点击备份按钮进行备份。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170810090155011-978206033.png)

#### 4.1.2.4.使用我们提供的备份脚本

从4.0版本开始，我们提供了init.bat和init.sh脚本来初始化各个命令行的维护脚本，其中有一个就是用来备份数据库和附件，名字叫做backup.bat(windows)或backup.sh(linux)。

首先参考[《 初始化管理脚本》](http://www.zentao.net/book/zentaopmshelp/35.html)这篇文章来初始化各个脚本。然后切换到zentao/bin/目录下面，执行backup.bat或者backup.sh

 

l  windows下面执行backup.bat

```
I:\xampp\zentao\bin>backup.bat
I:\xampp\zentao\bin>i:\xampp\php\php.exe I:\xampp\zentao\bin\php\backup.php
Backuping database, successfully saved to I:\xampp\zentao/backup/201304/db.20130402.zip
Backuping files, successfully saved to I:\xampp\zentao/backup/201304/file.20130402.zip
```

l  linux下面执行backup.sh

```
./backup.sh
Backuping database, successfully saved to /mnt/data/z/pms/backup/201304/db.20130402.zip
Backuping files, successfully saved to /mnt/data/z/pms/backup/201304/file.20130402.zip
```

备份成功之后，数据库文件和附件分别以日期为名，保存到zentao/backup目录下面。

注：如果mysql服务停止的话，mysql数据是无法备份的。

 

### 4.1.3. 恢复删除的资源

在禅道中，所有的删除操作都是逻辑删除的。换句话讲，都没有直接从数据库里面删除记录，而是做了删除标记。那么这些做了删除标记的资源，就在后台的回收站中列出。如果有人误删的话，可以由管理员将其恢复。

除了还原操作外，还可以把已删除的隐藏，在右上角的已隐藏里可以查看到。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170811154145773-1511531851.png)

 

### 4.1.4. 如何更新燃尽图

燃尽图数据是需要每天更新的，有下面几种方式：

#### 4.1.4.1.通过我们提供的更新脚本来（推荐）。

首先参考[《 初始化管理脚本](http://www.zentao.net/book/zentaopmshelp/35.html)》这篇文章来初始化各个脚本。然后切换到zentao/bin/目录下面，执行computburn.bat或者computburn.sh脚本。

- windows下面执行computburn.bat：

```
I:\xampp\zentao\bin>computeburn.bat
I:\xampp\zentao\bin>i:\xampp\php\php.exe I:\xampp\zentao\bin\ztcli "http://pms.5upm.com/project-computeburn"
1       测试项目 2013-04-29 1
```

- linux下面执行computeburn.sh：

```
z@colinux:/opt/lampp/zentao/bin$ ./computeburn.sh
2      测试项目  2013-04-29      0
```

当更新成功之后，可以将其放在计划任务中，每天更新。

#### 4.1.4.2.通过页面手工更新。

首先在组织视图中，通过权限管理给相应的用户分配更新燃尽图的权限。然后访问项目的燃尽图页面，会出现“更新燃尽图”的链接，点击该链接即可计算燃尽图数据。

#### 4.1.4.3.如何定时更新

很多朋友问，如何定时更新呢？windows下面可以使用计划任务，linux下面则可以使用crontab来设置。具体的大家查找相应的文档，不再赘述。建议一般是每天下班之后，比如晚上8点钟，或者晚上11点钟来执行定时任务。

 

## 4.2.配置禅道

### 4.2.1. 设置是否允许匿名访问

禅道是可以设置为匿名访问的，这样公司里面的其他用户或者是公司的客户可以不用登录到禅道就可以访问到禅道，及时了解项目的进展。下面我们来讲述下具体的步骤：

1. 进组织视图
2. 选择公司，进入公司编辑页面。
3. 匿名登录这一项，选择允许。
4. 在权限分组页面，创建一个guest分组，并为其分配权限即可，一般分配只读的权限即可。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170811154232976-1595397283.png)

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170811154307960-1898274747.png)

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170811154315992-1422634914.png)

 

### 4.2.2. 如何配置email发信

禅道支持邮件提醒，当需求、任务、bug等发生变化的时候，可以发邮件提醒。邮件的配置方法如下：

1. 使用管理员登录禅道。
2. 进入后台管理，点击“发信配置”。
3. 输入一个用来发信的邮箱，然后进入下一步，设置发信的密码。
4. 保存参数。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170811154330695-1770729455.png)

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170811154338320-805922949.png)

常见第三方smtp如下：

腾讯QQ邮箱（推荐）：smtp.qq.com  smtp/pop3开启：<http://service.mail.qq.com/cgi-bin/help?subtype=1&id=28&no=166> （注意腾讯邮箱要单独设置安全码 [点击查看说明](http://service.mail.qq.com/cgi-bin/help?subtype=1&&id=28&&no=1001256)）

网易163邮箱：smtp.163.net smtp/pop3开启：<http://help.163.com/10/0312/13/61J0LI3200752CLQ.html>（注意网易免费邮箱smtp密码要单独设置 [点击查看说明](http://help.mail.163.com/faqDetail.do?code=d7a5dc8471cd0c0e8b4b8f4f8e49998b374173cfe9171305fa1ce630d7f67ac2cda80145a1742516)）

新浪免费邮箱：smtp.sina.com  smtp/pop3开启：<http://mail.sina.com.cn/help2/client01.html>

腾讯企业邮箱：smtp.exmail.qq.com

网易126邮箱：smtp.126.com

搜狐免费邮箱：smtp.sohu.com

Gmail邮箱：smtp.gmail.com　（目前gmail在国内一般用不了）

#### 注意事项：

1. 禅道不会给当前操作者发信，因为当前的操作自己都清楚的，如果再发邮件，会造成很多的重复邮件。
2. 如果使用腾讯邮箱、网易邮箱这类的第三方的邮件服务，要通过它们提供的配置页面打开smtp服务。
3. 我们已经针对国内常用的邮件服务做了参数的智能检测，一般情况下面只需要您填写发信用的密码即可。
4. 如果发信提示数据无法接受，检查邮件服务商是否做了发信频率的限制或者其他安全方面的限制。
5. 如果提示无法连接到smtp服务器，一般是禅道的服务器无法连接到smtp服务器，这个时候需要检查域名可否正常解析，端口是否正确，是否有防火墙屏蔽了网络链接。

**注：禅道****7.3.stable****版本开始，集成了****SendCloud****发信功能。**

本功能集成的是SendCloud的notice服务，具体可以到其网站查[notice.sendcloud.net](http://notice.sendcloud.net/)。

1、同样的到后台--发信界面，里面可以选择是配置SMTP发信还是SendCloud发信。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170811154411835-1418179732.png)

2、选择了SendCloud发信后的界面：

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170811154423679-1070529545.png)

3、你可以登录[notice.sendcloud.net](http://notice.sendcloud.net/)，注册帐号登录，然后在设置里获取accessKey和secretKey，复制填写到发信配置里面里。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170811154432023-1181872421.png)

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170811154437554-959768469.png)

4、保存成功后，可以点击页面的同步联系人操作，把禅道里的用户同步到Notice SendCloud的联系人里。

禅道后台--SendCloud发信，同步联系人页面，显示未同步和已同步用户信息。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170811154444929-2022893618.png)

同步联系人后，Notice SendCloud里的联系人列表也会显示同步的用户信息。（目前SendCloud免费版本的使用人数上限是20人）

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170811154502179-341254235.png)

 

配置成功后，就可以使用Notice SendCloud的发信服务了。

注：SendCloud里可以绑定微信，但是禅道系统里目前没有调用它的微信接口，所以在禅道里使用SendCloud发信时，只有邮箱会收到提醒邮件。

 

### 4.2.3. 如何成为超级管理员

禅道系统里面的权限可以通过组织视图里面的权限分组来获得，但其实禅道系统中还有一个超级管理员，就是在你安装的时候设置的那个管理员。

超级管理员和拥有权限列表中所有权限的管理员有什么不同呢？回答这个问题，还需要透漏点禅道的小秘密。禅道里面有很多的页面，是没有列在权限相表里面的，换句话讲，普通的管理员也是无法访问的。但超级管理员就不受这些限制，可以访问禅道系统的任意一个页面。

那么如何成为超级管理员呢？来告诉你步骤：

1. 打开phpmyadmin，或者是mysql命令行。
2. 找到zt_company表，编辑其中的那条记录。
3. 修改其中的admins 字段，为“,username,”这样的形式。username前后的逗号是需要添加上的，username换成你实际的帐号。
4. 然后登录系统，就可以成为超级管理员了。:)

### 4.2.4. 配置禅道系统为静态访问

禅道支持两种访问方式，一种是GET方式，其访问地址为/?m=xx&f=xx的这样的形式。还有一种为静态访问方式，其访问地址形如/usr-login.html。静态访问的url地址比get方式要更加简洁，直观。本文来给大家介绍如何配置禅道通过静态访问。

#### 4.2.4.1.apache的配置

1. **首先，要加载****rewrite****模块。**
   找到apache的配置文件，一般是在apache的目录下面conf/httpd.conf。检查下rewrite模块是否加载。如果没有加载，则将其打开。然后重新启动apache服务器。
    windows下面的配置文件如下：LoadModule rewrite_module modules/mod_rewrite.so。如果前面有#，将其去掉就可以了。
   linux下面，根据实际的情况，来打开rewrite。
2. 检查.htaccess文件的覆盖选项
   打开apache的配置文件，检查 AllowOverride这样的选项，如果是None的话，将其改为All。(AllowOverride可能会有多个，挑选一个和禅道相关的目录，或者全部替换。)
3. **禅道的一键安装包默认已经打开了****rewrite****模块和****AllowOverride****选项，所以可以忽略上面两个步骤。**

#### 4.2.4.2.配置禅道

打开config/my.php，将其中的 RequestType改成PATH_INFO就可以了。

<?php

 $config->installed = true; //标志是否已经安装。

 $config->debug = true; //是否打开debug功能。如果系统运行不正常，可将其设为true。

$config->requestType = '**PATH_INFO**'; //如何获取当前请求的信息，可选值：PATH_INFO|GET。

#### 4.2.4.3.常见问题

1. iis我们没有配置过，从理论上来讲，应该也是支持静态访问的。不过可能比较麻烦。如果有配置成功的朋友，请告诉我们方案。
2. 如果配置了静态访问模式之后，禅道工作不正常，可以将其改为 GET方式。GET方式是通用的一种访问方式。

### 4.2.5. 去掉禅道访问地址中的zentao

按照我们的安装步骤部署禅道之后，访问路径中还会有zentao之类的路径，肯定有朋友问，怎样把其去掉呢？其实很简单，我们一起来配置下。

#### 4.2.5.1.一键安装包的配置

我们新版本的一键安装包已经提供好了相应的配置模板，您要做的只需要将相应的参数打开即可：

windows下面找到xampp\apache\config\httpd.conf 和 xampp\runner\res\apache\conf\httpd.conf文件(2个文件要做相同的修改)，linux一键安装包找到/opt/zbox/etc/apache/httpd.conf，linux下lampp安装包找到/opt/lampp/etc/httpd.conf文件。

找到virutalhost这段配置，将注释删掉，然后重启apache即可。

```
# If you want visit zentao like http://localhost/, uncomment these lines.
#<VirtualHost *:81>
#  ServerAdmin zentao@local.net
#  DocumentRoot "/xampp/zentao/www"
#  ServerName localhost:81
#  <Directory />
#    AllowOverride none
#    Require all granted
#  </Directory>
#  ErrorLog "logs/error_log"
#  CustomLog "logs/access_log" combind
#</VirtualHost>
```

#### 4.2.5.2.通用的配置方法

如果您是自己配置的apache服务器，可以参考下面的步骤来修改。 

1. 找到apache的配置文件，不同的系统，其配置文件位置不同。windows一般在apache/conf下面。linux一般在/etc/apache或者/etc/httpd下面。
2. 找到虚拟主机配置文件。有的apache是单独分出来的一个httpd-vhost.conf。有的则是直接写在httpd.conf中。
3. 找到虚拟主机配置文件之后，配置下面的代码： 

```
<VirtualHost *:80>
ServerName pms.zentao.net #换成你具体的域名。
DocumentRoot /home/www/zentaopms/www/ #换成具体的zentao下面的www目录。
<Directory />
Options FollowSymLinks
AllowOverride All
</Directory>  
</VirtualHost>
```

1. 找到zentao/config/my.php文件，如果里面的$config->webRoot = getWebRoot()，则忽略这个步骤。如果不是，则需要将其改为：

```
$config->webRoot = '/';  
```

1. 重新启动apache。

### 4.2.6. 集成禅道和svn

禅道于2.2版本内置了svn集成功能，把禅道和用户代码进行有效关联，方便用户查看。这篇文章将给大家讲述如何配置禅道集成svn。

#### 4.2.6.1.subversion集成机制说明

subversion集成的基本机制是：分析提交代码时的注释 => 得出相应的story, task, bugID => 写入到禅道的数据库。

实现上述功能有两个方案，一个方案是采用svn自带的钩子机制，当有代码提交的时候，触发一个钩子脚本，然后分析注释，得出相应的bug, story或者task的id号，然后调用禅道的api，将相关的记录写入数据库。还有一个方案是通过svn客户端软件的log命令，来获得所有的提交记录，然后分析，得出相应的id，写入数据库。

上述两个方案各有各自的优缺点，我们终是选择了第二个方案。因为第二个方案调试比较好调试，部署也相对方便，同时可以解析之前的所有记录，有比较好的灵活性。

#### 4.2.6.2.在禅道所在机器上面部署svn命令行客户端

svn命令行客户端是指subversion自带的svn命令。windows下面是svn.exe，linux下面是没有后缀的svn。

禅道所在的机器可以和subversion机器分开，不在一台机器上面。

1. 如果是linux机器，需要安装svn的客户端。rhel,centos可以用yum安装subversion, debian下面可以用apt-get install。
2. 如果新下载的windows一键安装包，里面已经内置了svn.exe的客户端。在\xampp\silksvn目录下面。
3. 如果在windows下面自己安装，可以考虑下载[slilksvn](http://www.sliksvn.com/en/download)的客户端软件，安装。

#### 4.2.6.3.配置禅道关于subversion的参数

**1.** **代码位置**

svn模块的配置文件位于zentao/module/svn/config.php。您可以直接修改这个文件，但建议您将改动保存到svn/ext/config/svn.php中。这样将来我们升级，就不会覆盖您的配置文件。

**2.**  **配置内容**

关于subversion参数的设置，一共有下面几个概念：

\1.  svn客户端命令的位置。

\2.  库(repo): 可以配置多个库。

\3.  库的用户名和参数。

 

下面让我们用实际的例子来说明。

a)      **如下图，找到图中红框标志的位置**

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170811154557242-291708250.png)

**b)**   **修改代码**

写法如下面例子所示

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170811154611835-128995845.png)

$config->svn->client 这个是用来存储svn客户端执行文件svn.exe路径。

$config->svn->repos[$i]['path'] 这个是用来存储svn代码路径的；

$config->svn->repos[$i]['username'] 这个是用来存储svn登录用户名的； 如果不需要登录，可以保持为空。

$config->svn->repos[$i]['password'] 这个是用来存储svn登录密码的。

 

**3.** **配置多个库**

**a)**   **同上，在同一个文件里找到如下代码**

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170811154633163-68319954.png)

**b)**   **修改代码**

①将代码中的“/*”和”*/“删除，其余修改同上，注意：$i ++ 不可修改。

②如果还有svn库，复制此段代码，进行同样的配置即可。

#### 4.2.6.4.代码提交注释格式

开发者在提交svn的时候，需要在备注里面注明此次修改相关的需求，或者任务，或者bug的id。比如下面的格式：bug#123,234, 1234，也可以是bug:123,234 1234，id列表之间，用逗号和空格都可以。story#123 task#123

bug, story, task是必须标注的。

#### 4.2.6.5.执行svn同步命令

\1. 参考[《初始化管理脚本》](http://www.zentao.net/book/zentaopmshelp/35.html)这篇文章初始化命令行的脚本。

\2. 进入到zentao/bin/目录下面，执行syncsvn.bat或者syncsvn.sh脚本。

\3. 程序运行的效果图:

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170811174053913-102045168.png)

\4. 查看相应的bug:

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170811174104757-1814731092.png)

 

#### 4.2.6.6.部署定时任务

上述命令部署好之后，将该命令加入定时任务就好了。比如可以5分钟执行一次。

windows下面使用计划任务，linux下面使用crontab。

#### 4.2.6.7.注意事项

建议不要使用https或者ssh协议来访问，因为牵扯到https和ssh证书的验证交互问题，操作起来会比较麻烦。

 

### 4.2.7. 集成禅道和git

禅道从5.0版本开始内置了git集成功能，把禅道的任务、Bug等与代码进行关联，方便用户查看。下面向大家讲解如何配置禅道集成git。

#### 4.2.7.1.git集成机制说明

git集成的基本机制是：分析提交代码时的注释 => 得出相应的story, task, bugID => 写入到禅道的数据库。

实现上述功能有两个方案，一个方案是采用git自带的钩子机制，当有代码提交的时候，触发一个钩子脚本，然后分析注释，得出相应的bug, story或者task的id号，然后调用禅道的api，将相关的记录写入数据库。还有一个方案是通过git客户端软件的log命令，来获得所有的提交记录，然后分析，得出相应的id，写入数据库。

上述两个方案各有各自的优缺点，我们终是选择了第二个方案。因为第二个方案调试比较好调试，部署也相对方便，同时可以解析之前的所有记录，有比较好的灵活性。

#### 4.2.7.2.在禅道所在机器上面部署git命令行客户端

git命令行客户端是指git自带的git命令。windows下面是git.exe，linux下面是没有后缀的git。

禅道所在的机器可以和git机器分开，不在一台机器上面。

如果是linux机器，需要安装git的客户端。rhel,centos可以用yum安装git, debian下面可以用apt-get install。

#### 4.2.7.3.配置禅道关于git的参数

**1.** **代码位置**

git模块的配置文件位于zentao/module/git/config.php。您可以直接修改这个文件，但建议您将改动保存到git/ext/config/git.php中。这样将来我们升级，就不会覆盖您的配置文件。

 

**2.** **配置内容**

\1.  git客户端命令的位置。

\2.  库(repo): 可以配置多个库。

 

下面让我们用实际的例子来说明。

a)      如下图，找到图中红框标志的位置

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170811174152085-369390061.png)

b)     修改代码

写法如下面例子所示

$config->git->client 填写git客户端路径；

$config->git->repos[$i]['path'] 填写git库的路径

 

**3.** **配置多个库**

a)    同上，在同一个文件里找到如下代码

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170811174204601-2063133457.png)

b)    修改代码

①将代码中的“/*”和”*/“删除，其余修改同上，注意：$i ++ 不可修改。

②如果还有git库，复制此段代码，进行同样的配置即可。

 

#### 4.2.7.4.代码提交注释格式

开发者在提交代码到git的时候，需要在备注里面注明此次修改相关的需求，或者任务，或者bug的id。比如下面的格式：bug#123,234, 1234，也可以是bug:123,234 1234，id列表之间，用逗号和空格都可以。story#123 task#123

bug, story, task是必须标注的。:)

 

#### 4.2.7.5.执行git同步命令

\1. 参考[《初始化管理脚本》](http://www.zentao.net/book/zentaopmshelp/35.html)这篇文章初始化命令行的脚本。

\2. 进入到zentao/bin/目录下面，执行syncgit.bat或者syncgit.sh脚本。

\3. 程序运行的效果图:

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170811174238038-903617579.png)

\4. 查看相应的bug

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170811174256929-53700062.png)

 

#### 4.2.7.6.部署定时任务

上述命令部署好之后，将该命令加入定时任务。比如可以5分钟执行一次。windows下面使用计划任务，linux下面使用crontab。配置的代码库也要使用定时任务同步更新，每隔5分钟git pull一下。

 

## 4.3.导入其他系统

### 4.3.1. 导入bugfree数据

本篇文章将讲述如何从BugFree升级到禅道。

#### 4.3.1.1.安装禅道的运行环境。

1. 检查一下BugFree原来的运行环境，如果PHP的版本是5.2以后的，那么可以在BugFree的运行环境下面直接安装禅道。

​        如果你不确定php的运行环境，你可以在BugFree所在的目录，建立一个phpinfo.php文件。里面写上下面的代码：

​        <?php phpinfo();?>

然后通过浏览器访问http://xxxx/BugFree/phpinfo.php，注意，phpinfo.php前面的，换成你BugFree的访问路径。页面会显示出PHP的版本。

​       如果环境允许，那么你可以下载zip格式的禅道包，然后将其解压到和BugFree同级的目录中，然后访问http://xxx/zentaopms/www/，就是把原来BugFree的访问路径中的BugFree换成zentaopms，系统会自动提示你进行安装。
​       

1. 如果PHP的环境低于5.2，那么需要额外安装PHP的运行环境。

windows下面的用户建议你下载我们的集成运行环境。

linux用户如果没有apache, php, mysql环境的，可以考虑我们的集成运行环境。windows下面安装我们的集成运行环境,需要你先把原来BugFree的环境停掉，否则禅道的运行环境启动不起来。详细的禅道安装文档，请访问：<http://www.zentao.net/help-book-zentaopmshelp-1083.html>

#### 4.3.1.2.转换BugFree

- **如果禅道和****BugFree****运行在一台机器上面**

如果禅道也是运行在BugFree的环境中，事情就比较简单，直接使用管理员登录，进入后台管理，然后选择从其他系统导入，然后选择 BugFree的版本，按照提示进行就可以了。如果禅道的运行环境和BugFree是分开的，我们建议你按照下面步骤进行操作：

先启动BugFree的运行环境，然后访问phpmyadmin，将BugFree的库导出为一个文件。

停掉BugFree的运行环境，启动禅道的运行环境，访问phpmyadmin，将BugFree的库导入到禅道的运行环境中的mysql中。

访问禅道，然后管理登录，进入后台管理，进行导入就可以了。这时BugFree的数据库和禅道的数据库就在一台服务器上了。

- **如果禅道和****BugFree****运行在两台机器上面**

​     如果禅道和BugFree是分开运行的，那么可以通过下面的方式来进行：

访问BugFree的运行环境，使用phpmyadmin，将BugFree的库导出为一个文件。

访问禅道的运行环境，访问phpmyadmin，将BugFree的库导入到禅道的运行环境中的mysql中。

将原来BugFree运行环境上面的BugFree整个目录拷贝到禅道所在的机器上面。

访问禅道，然后管理登录，进入后台管理，进行导入就可以了。这是BugFree和禅道都在一台环境上面了。正确填写拷贝过来之后的BugFree的路径，应该就可以导入了。

#### 4.3.1.3.转换之后

​     原来 Bugfree中的项目，转换成为禅道中的产品。原来的项目，其实是产品的概念，以前的概念不是很正确。需要进入组织视图，分派用户权限。了解学习禅道，开始快乐的项目管理吧!  











# 5.禅道定制开发

## 5.1.二次开发机制

禅道项目管理软件是使用我们自主开发的zentaoPHP框架开发的。zentaoPHP框架实现了功能强大的扩展机制、API调用机制和命令行机制。您可以使用不同的机制来实现对禅道功能的修改、扩展。也可以和其他的系统进行集成，也可以部署各种自动化脚本对禅道进行各种操作。

因此请您仔细阅读下面的文档，以充分了解zentaoPHP框架的二次开发机制：

\1. zentaoPHP框架基本使用手册：<http://devel.cnezsoft.com/book/zentaophphelp.html>

\2. zentaoPHP框架二次开发机制：<http://devel.cnezsoft.com/book/extension.html>

 

## 5.2.禅道的目录结构

了解了zentaoPHP框架的基本原理和二次开发机制之后，您对禅道项目管理软件的目录结构应该也比较熟悉了。

- 顶级目录结构

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170811174352648-877622979.png)

- www目录

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170811174404195-1432401889.png)

- module目录

module目录下面总共有30多个模块，分别对应了禅道里面的某一个功能模块。整个禅道的功能，就是由这些模块组合而成。让我们来看一个具体的模块。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170811174411007-694158837.png)

 

## 5.3.找到要修改的文件

要想对禅道进行修改，就必须知道对应的代码在什么地方。在了解了禅道的目录结构之后，我们来看下禅道的请求是如何对应到代码的。

**1.**    **control****方法的定位**

control方法是每一个页面的入口，顺藤摸瓜，让我们先来看个例子：**bug-browse-1.html** **或者是****/?m=bug&f=browse&productID=1&t=html****。**这里面有什么玄机呢？让我们来揭晓。

bug-browse-1.html，表示是访问**bug**这个模块的**browse**方法，传递的第一个参数为**1**，访问的页面类型是**html**。

同样,**/?m=bug&f=browse&productID=1&t=html,m**代表了模块名称，**f**代表了方法名称，后面的则是参数列表。

那么我们就可以对应到禅道的源代码，module/bug/control.php中的browse方法：

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170811174430101-120255599.png)

 

**2.**    **control****方法里面的调用**

ok，我们现在已经知道了入口的函数在什么地方，我们来跟到里面看看吧。

$this->bug，**表示的是调用****bug****模块的****model****对象**，那么它对应的文件在什么地方呢？聪明的你，应该已经猜到了吧。在**module/bug/model.php**

this->loadmoel('tree')->xxx，表示加载tree模块的model对象，它对应的文件在module/tree/model.php

$this->app->loadClass('pager'),表示加载一个lib类，它对应的文件则在lib/pager/pager.class.php

$this->lang->bug->xxx，它的定义在module/bug/lang/zh-cn.php。后面的zh-cn根据当前用户的语言而定。

后来看模块文件。$this->display()之后，调用的是view目录下面和当前方法同名的模板文件。比如bug的browse方法，它对应的模板文件是module/bug/view/browse.html.php

 

## 5.4.禅道的数据库结构

禅道的数据库命名都比较简明扼要，从字面意思应该都可以猜出来表的用途。如果还不是很清楚的话，可以到每个表对应的模块下面的语言文件里面查找。

**1.**    **产品相关的表**

- zt_product，则记录了产品相关的信息。
- zt_productPlan，则记录了产品的计划信息。
- zt_story，是非常重要的一张表，记录了系统中所有的需求记录。zt_storySpec表是记录了story的历史信息。
- zt_release，记录了产品的发布信息。这张表同时也和zt_build互相关联。

**2.**    **项目相关的表**

- zt_project，项目表。
- zt_projectProduct，记录了项目和产品之间的关联关系。
- zt_proejctStory，记录了项目中需要做的需求列表。
- zt_task，任务表。
- zt_burn,燃尽图数据表。燃尽图就是根据这张表的数据画出来的。
- zt_team，记录了项目中的团队成员。
- zt_build，记录了项目中产品的build列表。

**3.**    **测试相关的表**

- zt_bug，bug表，也是大家非常熟悉的一张表了。
- zt_case，用例表。记录了所有的测试用例。zt_caseStep，则是记录了用例相关的步骤，包括历史。
- zt_testTask，测试任务表，记录了历次的测试任务。
- zt_testRun，则记录了每个测试任务所对应的用例执行情况。
- zt_testResult，记录了每个用例历次执行的结果。

**4.**    **文档库相关的表**

- zt_docLib，记录了自定义文档库列表。
- zt_doc，则记录了所有的文档。

**5.**    **组织管理相关的表**

- zt_user，用户表。
- zt_group，分组表。
- zt_userGroup，用户和分组之间的对应关系。
- zt_groupPriv，分组的权限。
- zt_dept，部门结构表。
- zt_userQuery，用户自定义查询表。
- zt_userTPL，用户的自定义模板表。
- zt_todo，代办事宜表。

**6.**    **公共表**

- zt_company，这张表记录了当前公司的信息，也是顶级的一张表。
- zt_module，也是非常重要的一张表，它维护了禅道系统中的模块划分数据，比如需求的模块划分。
- zt_action，操作历史表，记录对任何一个对象的所有修改记录。
- zt_history，记录了操作过程中，前后值的变化。
- zt_file，附件表。记录了所有的附件。

## 5.5.公共模块common

common模块在禅道中是比较特殊的一个模块，禅道里面的众多公用功能都是由common来实现的。

- common/control.php里面，提供了其他模块都有可能用到的一些方法。比如权限检查，菜单打印等功能。
- common/view目录下面，则是提供了公用的模板。比如公用的header.html.php，footer.html.php等。还包含了各种jquery插件的初始化代码模板。比如colorbox.html.php。
- common/lang下面，则是设置了公用的语言项。

所以，后面如果大家需要修改一些语言项，或者修改公用的模板文件，可以到common模块下面寻找相应的代码。

## 5.6.如何登记菜单

扩展禅道遇到的一个问题就是如何将自己增加的功能登记到菜单中，本篇文章来讲述如何来实现这个功能。

**1.**    **菜单的组成**

禅道的导航菜单分为三个部分，顶部菜单、模块菜单、功能菜单。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170811174620413-1683247695.png)

**2.**    **菜单的定义**

菜单的代码定义是在zentao/module/common/lang/zh-cn语言文件中。我们来看下主菜单的定义。

**a)**     **主导航菜单的定义**

80 $lang->menu->my = ' 我的地盘|my|index';

81 $lang->menu->product = '产品视图|product|index';

82 $lang->menu->project = '项目视图|project|index';

83 $lang->menu->qa = '测试视图|qa|index';

 

我们来看下代码的含义：83 $lang->menu->qa = '测试视图|qa|index';

这行代码定义了测试视图的代码，其中的menu->qa定义的是菜单的键值，可以根据实际的模块定义。后面是使用竖线分开的三个参数，分别是菜单的文本，对应到模块和方法。这句话就表示要定义一个顶级菜单，文本是“测试视图”，链接到qa模块的index方法。

 

**b)**  **模块菜单的定义**

我们以产品视图的模块菜单为例：

144 $lang->product->menu->list = '%s';

145 $lang->product->menu->story = array('link' => '需求|product|browse|productID=%s', 'subModule' => 'story');

155 $lang->product->menu->create = array('link' => ' 新增产品|product|create', 'float' => 'right');

 158 $lang->productplan->menu = $lang->product->menu;

159 $lang->release->menu = $lang->product->menu;

 

这几行代码定义了产品视图模块的模块菜单，这里面出现了一些新的定义方法：

**i.** **使用数组来定义链接**

145 $lang->product->menu->story = array('link' => '需求|product|browse|productID=%s', 'subModule' => 'story'); 

这行代码对链接进行定义的时候，使用了数组，分别定义了两个元素，link和subModule。其中link多增加了一个参数字段：productID=%s，代表产品视图的“需求”菜单会链接到product模块的browse方法，传递的参数是productID=%s，其中的%s会被替换成当前的产品id。

**ii.**    **使用****subModuel****来定义子模块**

145 $lang->product->menu->story = array('link' => '需求|product|browse|productID=%s','subModule' => 'story');

subModule定义的是它的子模块，这个需要是用来保持菜单高亮使用。这样当访问到story模块的时候，还会保持“产品视图”这个定义菜单高亮。

**iii.**    **使用****alias****来定义方法别名**

151 $lang->product->menu->view = array('link' => '概况|product|view|productID=%s', 'alias' => 'edit');

这个地方的alias代表product的edit页面和product的view页面是相同的，这样当编辑产品的时候，“概况”菜单还是会保持高亮的。

**iv.** **定义菜单的位置**

所有的菜单默认都是显示在左侧的，如果需要将菜单显示在右侧，则需要定义它的float参数。

155 $lang->product->menu->create = array('link' => ' 新增产品|product|create', 'float' => 'right');

通过设置float参数，可以定义这个新增产品的链接显示在页面的右侧。

**c)**  **功能菜单的定义**

功能菜单是在每一个模块的视图文件里面打印的，其扩展方法和视图的扩展相同，后面会讲到这一点。

 

**3.**    **菜单顺序的定义**

前面讲述的是禅道菜单的定义，下面来讲下禅道菜单顺序的定义。在common/lang/下面有一个menuOrder.php的文件，在这个文件中定义了每个菜单的显示顺序。

/* Sort of main menu. */
$lang->menuOrder[5] = 'my';
$lang->menuOrder[10] = 'product';
$lang->menuOrder[15] = 'project';
$lang->menuOrder[20] = 'qa';
$lang->menuOrder[25] = 'doc';
$lang->menuOrder[30] = 'report';
$lang->menuOrder[35] = 'company';
$lang->menuOrder[40] = 'admin';
/* index menu order. */
$lang->index->menuOrder[5] = 'product';
$lang->index->menuOrder[10] = 'project';

**4.**    **如何将自己的页面登记到菜单中**

了解了禅道的菜单机制之后，做扩展就非常容易了。我们来说下步骤：

1. 在module/common/ext/lang/zh-cn/下面创建一个文件，比如叫做abc.php(文件名可以任意定义)
2. 在这个文件中加上自己的菜单就好了，比如禅道专业版本中的版本库菜单：

$lang->menu->repo = '版本库|repo|browse';

$lang->menuOrder[21] = 'repo';

$lang->repo->menu->list = '%s' . $lang->arrow;

$lang->repo->menu->browse = array('link' =>'浏览|repo|browse|repoID=%s', 'alias' => 'diff, log, view, revision, showsynccomment');

$lang->repo->menu->settings = '设置|repo|settings|repoID=%s';

$lang->repo->menu->delete = array('link' => '删除|repo|delete|repoID=%s', 'target' => 'hiddenwin');

$lang->repo->menu->create = array('link' => '新增版本库|repo|create|', 'float' => 'right');

## 5.7.如何修改禅道的语言提示

下面来看具体的例子吧，以修改bug的优先级列表提示为例：

\1. 在module/bug/下面创建**ext/lang/zh-cn/**目录，这里面的zh-cn，可以根据实际情况换成相应的语言，比如en, zh-tw。

\2. 在这个目录下面创建一个abc.php，注意，**abc**的名字是可以随便定义的。

\3. 打开这个文件，重新定义优先级的提示： 

**unset($lang->bug->priList);**

**$lang->bug->priList[0] = '';**

**$lang->bug->priList[3] = '3';**

**$lang->bug->priList[1] = '1';**

**$lang->bug->priList[2] = '2';**

**$lang->bug->priList[4] = '4';**

**注意：**

\1. 如果你定义的是一个列表格式的数据，需要加上unset这一句。这样可以保证列表是完全按照你的定义。

\2. 请一定按照我们的扩展机制来存放文件，这样可以保证我们后面升级，不会覆盖你自己的修改的代码。

\3. windows下面编辑，建议使用ultraedit，保存的时候，保存成utf-8编码，nobom格式。否则会造成系统不正常。

 

## 5.8.创建bug时可以设置优先级字段

这个例子用来向大家展示如何使用禅道的扩展机制来对禅道进行各种定制，而不用担心后续升级之后被覆盖。

**目标：在创建****bug****的时候，可以直接设置优先级字段。**

- **创建目录**

\1. 在module/bug/目录下面建立**ext/view**目录。
\2. 将module/bug/view/create.html.php拷贝到ext/view/目录下面，仍然是create.html.php
\3. 修改ext/view/create.html.php

- **修改程序**

把模板复制过去之后，需要修改头文件和footer文件的包含路径。然后再修改模板文件，在相应的地方加入bug优先级字段即可。

然后访问bug创建页面，就会出现优先级字段了。

- **下载插件**

我们为大家提供了插件，可以下载：<http://www.zentao.net/extension-viewExt-10.html>

## 5.9.使用在线扩展编辑器

禅道还提供了web方式的代码扩展编辑器，可以使用超级管理员登录禅道，对禅道进行二次扩展：

  **访问入口**

禅道扩展编辑就是后台模块下的扩展里。位置如图：

点击进入编辑器&API，首先看到的是可扩展的模块列表。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170811174801413-1125343500.png)

点击想要扩展的模块链接，右侧就会出现该模块所有可扩展的文件，包括control.php和model.php的方法。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170811174813242-2100600400.png)

这些文件是有排列顺序的，自上而下依次是：

model.php和该文件的方法、

control.php和该文件的方法、

view文件夹下的模板文件、

语言文件、

配置文件config.php

JS

CSS

扩展文件。

扩展文件中的排列顺序与上述的排列顺序是一致的，这样可以方便快速的找到要扩展的文件。在每个文件后面，有相应的操作链接，点击这些链接，就可以在线编辑扩展了。

 

  **在线编辑**

**1．** **model.php****的扩展**

可以对model.php的现有方法进行扩展，编辑器可以自动生成简单代码。当然也可以对model.php新增方法。

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170811174828445-425683727.png)

**2．** **control.php****的扩展**

对control.php的现有方法进行扩展时，会有是否重用代码的提示

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170811174837679-1431123983.png)

如果选择“确定”的话则会生成一个继承了该模块control.php的类，扩展后的方法可以继承该模块的control.php的方法。否则的话，则对该方法进行重新定义。

同样的也可以对control.php新增方法。

 

**3．** **模板文件的扩展**

对模板文件的扩展也有两种方式，可以重写一个模板文件覆盖原来的。也可以写一个钩子脚本，对原来页面做一下局部修改。

 

**4．** **其他文件的扩展**

对其他文件扩展时，将会显示源文件的内容，可以当做扩展的参考。

 

**5．** **对扩展文件的编辑**

可以对ext目录下的扩展文件进行编辑和删除。

 

  **保存扩展文件**

\1. 不必输入文件名

对control.php的方法进行扩展和覆盖模板文件时，文件名是一定的不必输入文件名。

\2. 可以输入文件名

像对model.php的方法扩展、对语言文件、配置文件等的扩展，如果不输入文件名，则会以默认文件名保存，如果输入文件名，则会以输入文件名保存。

\3. 必须输入文件名

像新增方法、新增页面、新增钩子、新增扩展等，则必须输入文件名才能保存。

**备注：**

1、保存文件时，要保证程序有读写的权限。

2、如果文件名冲突，则不能保存，你可以更改保存的文件名或者勾选覆盖重复文件选项。

\3. 该编辑器还很简陋，只是为方便扩展而建。可能还有很多问题，希望大家提出。

## 5.10.禅道项目管理软件打包规范1.1版本

大家在二次开发过程中，好的功能也可以打包成插件和大家进行分享。我们整理了禅道项目管理软件打包规范。

**1.**    **可以扩展的元素**

**![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170811174952242-1235033644.png)**

**2.**    **doc****目录应当包含的文档**

doc目录下面包含了插件的配置信息，按照语言进行存储，比如英文版本的，存为en.yaml，中文zh-cn.yaml

插件的配置文件采用yaml格式，里面包含了插件的基本信息以及历次版本的发布信息。共分为下面的信息：

![img](https://images2017.cnblogs.com/blog/1205757/201708/1205757-20170811175002601-1597753231.png)

可以参考：<http://www.zentao.net/extension-viewExt-1-info-front.html>

**3.**    **db****目录下面包含的文件**

db目录下面可以包含install.sql和uninstall.sql。顾名思义,install.sql是当安装插件的时候执行的sql语句，而uninstall.sql则是当卸载插件的时候需要执行的sql语句。这样如果你的插件涉及到数据库的改动，可以将相应的sql语句放在这两个文件中，禅道的插件管理程序会自动来执行。

**4.**    **module****下面的文件：**

module目录下面的文件，就按照我们的[插件扩展机制](http://www.zentao.net/help-read-78847.html) 部署相应的目录结构就可以了。

**5.**    **主配置文件的扩展**

在实际过程中，可能会需要对全局的配置文件进行扩展，这种情况将扩展的配置文件放在zentao/config/ext/下面就可以了。

**6.**    **安装和删除的钩子脚本**

如果在安装之前，安装之后，卸载之前，卸载之后需要执行一些操作，可以建立一个hook目录，然后分别在里面创建preinstall.php, postinstall.php, preuninstall.php, postuninstall.php，里面放上你所需要的代码即可。

**7.**    **小结：创建自己的插件**

**8.**    **查看示例**

1. 确定插件的英文名，比如叫做hello。
2. 创建hello目录。
3. 在hello目录下面创建doc目录。
4. 在doc目录下面创建配置文件yaml文件：
5. 如果有涉及到数据库的改动，在hello目录下面创建db目录，分别写好install.sql和uninstall.sql
6. 如果需要钩子脚本，创建hook目录，创建 preinstall.php, postinstall.php, preuninstall.php, postuninstall.php。
7. 然后部署相应的扩展代码。在hello目录下面创建一个module目录，然后将相应的模块扩展代码放在module下面。
8. 打包，使用zip格式将整个hello目录打包成hello.zip，就可以了。

请看我们示例：<http://www.zentao.net/extension-viewExt-1.html>



















