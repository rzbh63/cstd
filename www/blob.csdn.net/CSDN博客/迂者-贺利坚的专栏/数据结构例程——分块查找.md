
# 数据结构例程——分块查找 - 迂者-贺利坚的专栏 - CSDN博客

2015年11月19日 19:14:00[迂者-贺利坚](https://me.csdn.net/sxhelijian)阅读数：4484


本文是[[数据结构基础系列(8)：查找](http://edu.csdn.net/course/detail/1669)]中第5课时[[分块查找](http://edu.csdn.net/course/detail/1669/25729)]的例程。
分块查找
```python
#include <stdio.h>
```
```python
#define MAXL 100
```
```python
//数据表的最大长度
```
```python
#define MAXI 20
```
```python
//索引表的最大长度
```
```python
typedef
```
```python
int
```
```python
KeyType;
```
```python
typedef
```
```python
char
```
```python
InfoType[
```
```python
10
```
```python
];
```
```python
typedef
```
```python
struct
```
```python
{
    KeyType key;
```
```python
//KeyType为关键字的数据类型
```
```python
InfoType data;
```
```python
//其他数据
```
```python
} NodeType;
```
```python
typedef
```
```python
NodeType SeqList[MAXL];
```
```python
//顺序表类型
```
```python
typedef
```
```python
struct
```
```python
{
    KeyType key;
```
```python
//KeyType为关键字的类型
```
```python
int
```
```python
link;
```
```python
//指向对应块的起始下标
```
```python
} IdxType;
```
```python
typedef
```
```python
IdxType IDX[MAXI];
```
```python
//索引表类型
```
```python
int
```
```python
IdxSearch(IDX I,
```
```python
int
```
```python
m,SeqList R,
```
```python
int
```
```python
n,KeyType k)
{
```
```python
int
```
```python
low=
```
```python
0
```
```python
,high=m-
```
```python
1
```
```python
,mid,i;
```
```python
int
```
```python
b=n/m;
```
```python
//b为每块的记录个数
```
```python
while
```
```python
(low<=high)
```
```python
//在索引表中进行二分查找,找到的位置存放在low中
```
```python
{
        mid=(low+high)/
```
```python
2
```
```python
;
```
```python
if
```
```python
(I[mid].key>=k)
            high=mid-
```
```python
1
```
```python
;
```
```python
else
```
```python
low=mid+
```
```python
1
```
```python
;
    }
```
```python
//应在索引表的high+1块中,再在线性表中进行顺序查找
```
```python
i=I[high+
```
```python
1
```
```python
].link;
```
```python
while
```
```python
(i<=I[high+
```
```python
1
```
```python
].link+b-
```
```python
1
```
```python
&& R[i].key!=k) i++;
```
```python
if
```
```python
(i<=I[high+
```
```python
1
```
```python
].link+b-
```
```python
1
```
```python
)
```
```python
return
```
```python
i+
```
```python
1
```
```python
;
```
```python
else
```
```python
return
```
```python
0
```
```python
;
}
```
```python
int
```
```python
main()
{
```
```python
int
```
```python
i,n=
```
```python
25
```
```python
,m=
```
```python
5
```
```python
,j;
    SeqList R;
    IDX I= {{
```
```python
14
```
```python
,
```
```python
0
```
```python
},{
```
```python
34
```
```python
,
```
```python
5
```
```python
},{
```
```python
66
```
```python
,
```
```python
10
```
```python
},{
```
```python
85
```
```python
,
```
```python
15
```
```python
},{
```
```python
100
```
```python
,
```
```python
20
```
```python
}};
    KeyType a[]= {
```
```python
8
```
```python
,
```
```python
14
```
```python
,
```
```python
6
```
```python
,
```
```python
9
```
```python
,
```
```python
10
```
```python
,
```
```python
22
```
```python
,
```
```python
34
```
```python
,
```
```python
18
```
```python
,
```
```python
19
```
```python
,
```
```python
31
```
```python
,
```
```python
40
```
```python
,
```
```python
38
```
```python
,
```
```python
54
```
```python
,
```
```python
66
```
```python
,
```
```python
46
```
```python
,
```
```python
71
```
```python
,
```
```python
78
```
```python
,
```
```python
68
```
```python
,
```
```python
80
```
```python
,
```
```python
85
```
```python
,
```
```python
100
```
```python
,
```
```python
94
```
```python
,
```
```python
88
```
```python
,
```
```python
96
```
```python
,
```
```python
87
```
```python
};
    KeyType x=
```
```python
85
```
```python
;
```
```python
for
```
```python
(i=
```
```python
0
```
```python
; i<n; i++)
        R[i].key=a[i];
    j=IdxSearch(I,m,R,n,x);
```
```python
if
```
```python
(j!=
```
```python
0
```
```python
)
```
```python
printf
```
```python
(
```
```python
"%d是第%d个数据\n"
```
```python
,x,j);
```
```python
else
```
```python
printf
```
```python
(
```
```python
"未找到%d\n"
```
```python
,x);
```
```python
return
```
```python
0
```
```python
;
}
```

