
# 汇编程序：用宏指令计算 - 迂者-贺利坚的专栏 - CSDN博客

2017年06月12日 17:50:49[迂者-贺利坚](https://me.csdn.net/sxhelijian)阅读数：1012标签：[汇编																](https://so.csdn.net/so/search/s.do?q=汇编&t=blog)个人分类：[汇编语言																](https://blog.csdn.net/sxhelijian/article/category/6698546)



【任务】
编程序宏定义和宏调用计算数组中所有元素之和。
编写的宏定义SUMMING，功能为求出字数组中所有元素之和，并把结果保存下来。该宏定义的哑元为数组首址ARRAY、数组长度COUNT和结果存放单元RESULT。
数据已经如下给出：
```python
.data
```
```python
A1 dw
```
```python
2345
```
```python
,
```
```python
7865
```
```python
,
```
```python
3219
```
```python
,
```
```python
849
```
```python
,
```
```python
876
```
```python
R1
```
```python
dw ?
A2
```
```python
1
```
```python
,
```
```python
2
```
```python
,
```
```python
3
```
```python
,
```
```python
4
```
```python
,
```
```python
5
```
```python
,
```
```python
6
```
```python
,
```
```python
7
```
```python
,
```
```python
8
```
```python
,
```
```python
9
```
```python
R2
```
```python
dw
```
```python
2
```
要求求出A1数组中5个元素之和，存储在R1中，求出A2数组中9个元素之和，存储在R2中。
【参考解答】
```python
.8086
```
```python
.MODEL
```
```python
small
```
```python
.data
```
```python
.data
```
```python
A1 dw
```
```python
2345
```
```python
,
```
```python
7865
```
```python
,
```
```python
3219
```
```python
,
```
```python
849
```
```python
,
```
```python
876
```
```python
R1
```
```python
dw ?
   A2 dw
```
```python
1
```
```python
,
```
```python
2
```
```python
,
```
```python
3
```
```python
,
```
```python
4
```
```python
,
```
```python
5
```
```python
,
```
```python
6
```
```python
,
```
```python
7
```
```python
,
```
```python
8
```
```python
,
```
```python
9
```
```python
R2
```
```python
dw
```
```python
2
```
```python
.stack
```
```python
100
```
```python
H
```
```python
.code
```
```python
cal macro array, count, result
```
```python
;宏定义
```
```python
local beg
```
```python
mov
```
```python
ax,
```
```python
0
```
```python
lea si, array
```
```python
mov
```
```python
cx, count
```
```python
beg:
```
```python
add
```
```python
ax, [si]
```
```python
inc
```
```python
si
```
```python
inc
```
```python
si
  loop beg
```
```python
mov
```
```python
result, ax
endm
```
```python
start:
```
```python
mov
```
```python
ax,@data
```
```python
mov
```
```python
ds,ax
   cal A1,
```
```python
5
```
```python
,
```
```python
R1
```
```python
;宏调用
```
```python
cal A2,
```
```python
9
```
```python
,
```
```python
R2
```
```python
stop:
```
```python
mov
```
```python
ax,
```
```python
4
```
```python
c00h
       int
```
```python
21
```
```python
h
end start
```

