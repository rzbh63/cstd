
# 汇编语言的模块化程序设计(1004) - 迂者-贺利坚的专栏 - CSDN博客

2017年03月31日 21:03:43[迂者-贺利坚](https://me.csdn.net/sxhelijian)阅读数：1387


本文为《汇编语言程序设计》1004小节例程。点击[链接…](http://blog.csdn.net/sxhelijian/article/details/56671827)进课程主页。
模块化程序结构
```python
assume cs:code
code segment
main:
```
```python
...
```
```python
call sub1     ;调用子程序sub1
```
```python
...
```
```python
mov ax, 4c00h
      int 21h
sub1:
```
```python
...
```
```python
;子程序sub1开始
      call sub2     ;调用子程序sub1
```
```python
...
```
```python
ret           ;子程序返回
sub2:
```
```python
...
```
```python
;子程序sub2开始
```
```python
...
```
```python
ret           ;子程序返回
code ends
end main
```
用寄存器来存储参数和结果
```python
;计算data段中第一组数据的 3 次方，结果保存在后面一组dword单元中。
```
```python
assume cs:code
data segment
dw
```
```python
1
```
```python
,
```
```python
2
```
```python
,
```
```python
3
```
```python
,
```
```python
4
```
```python
,
```
```python
5
```
```python
,
```
```python
6
```
```python
,
```
```python
7
```
```python
,
```
```python
8
```
```python
dd
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
data ends
code segment
```
```python
start:
```
```python
mov
```
```python
ax,data
```
```python
mov
```
```python
ds,ax
```
```python
mov
```
```python
si,
```
```python
0
```
```python
;ds:si指向第一组word单元
```
```python
mov
```
```python
di,
```
```python
16
```
```python
;ds:di指向第二组dword单元
```
```python
mov
```
```python
cx,
```
```python
8
```
```python
s:
```
```python
mov
```
```python
bx,[si]
```
```python
call
```
```python
cube
```
```python
mov
```
```python
[di],ax
```
```python
mov
```
```python
[di]
```
```python
.2
```
```python
,dx
```
```python
add
```
```python
si,
```
```python
2
```
```python
;ds:si指向下一个word单元
```
```python
add
```
```python
di,
```
```python
4
```
```python
;ds:di指向下一个dword单元
```
```python
loop s
```
```python
mov
```
```python
ax,
```
```python
4
```
```python
c00h
      int
```
```python
21
```
```python
h
 cube:
```
```python
mov
```
```python
ax,bx
```
```python
mul
```
```python
bx
```
```python
mul
```
```python
bx
```
```python
ret
```
```python
code ends
end start
```
用内存单元批量传递数据
```python
;将
```
```python
data
```
```python
段中的字符串转化为大写
```
```python
assume
```
```python
cs:code
```
```python
data
```
```python
segment
```
```python
db 'conversation'
```
```python
data
```
```python
ends
```
```python
code
```
```python
segment
```
```python
start
```
```python
:  mov ax,
```
```python
data
```
```python
mov ds,ax
         mov si,
```
```python
0
```
```python
mov cx,
```
```python
12
```
```python
call capital
         mov ax,
```
```python
4
```
```python
c00h
         int
```
```python
21
```
```python
h
```
```python
capital
```
```python
: and byte ptr [si],
```
```python
11011111
```
```python
b
         inc si
         loop capital
         ret
```
```python
code
```
```python
ends
```
```python
end
```
```python
start
```
用栈传递参数
```python
;设 a = 3 、b = 1 ，计算：( a – b ) ^ 3
```
```python
assume cs:code
code segment
```
```python
start:
```
```python
mov
```
```python
ax ,
```
```python
1
```
```python
push
```
```python
ax
```
```python
mov
```
```python
ax ,
```
```python
3
```
```python
push
```
```python
ax
```
```python
;注意参数压栈的顺序
```
```python
call
```
```python
difcube
```
```python
mov
```
```python
ax,
```
```python
4
```
```python
c00h
         int
```
```python
21
```
```python
h
difcube :
```
```python
push
```
```python
bp
```
```python
mov
```
```python
bp , sp
```
```python
mov
```
```python
ax , [ bp +
```
```python
4
```
```python
]
```
```python
; 将栈中a的值送入ax 中
```
```python
sub
```
```python
ax , [ bp +
```
```python
6
```
```python
]
```
```python
; 减栈中b的值
```
```python
mov
```
```python
bp , ax
```
```python
mul
```
```python
bp
```
```python
mul
```
```python
bp
```
```python
pop
```
```python
bp
```
```python
ret
```
```python
4
```
```python
code ends
end start
```

