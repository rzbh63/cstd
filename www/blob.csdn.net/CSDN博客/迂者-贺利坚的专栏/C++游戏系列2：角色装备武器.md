
# C++游戏系列2：角色装备武器 - 迂者-贺利坚的专栏 - CSDN博客

2016年04月02日 22:29:52[迂者-贺利坚](https://me.csdn.net/sxhelijian)阅读数：3386


**更多见：****[C++游戏系列目录](http://blog.csdn.net/sxhelijian/article/details/51148381)**
知识点：类的组合，A类的数据成员，是B类的对象，或B类的对象，做A类的数据成员
【项目-带武器的游戏角色】
设计一个武器类，其数据成员至少要有武器名、威力，还可以加上你想描述武器的其他数据。想一想要对武器实施什么处理，设计其成员函数。
在[上周的游戏角色类Role](http://blog.csdn.net/sxhelijian/article/details/50993545)基础上扩充，为每个角色创建一个武器，并在攻击(attack)行为发生时，武器在其中起作用。制定游戏规则，使之接近于真实的游戏场景，并利用成员函数实现游戏规则，最后在main函数中通过调用相应的成员函数，模拟游戏过程。
参考解答：
```python
/*
仅设计了一个非常简单的使用武器的规则
当攻击对方时，自己涨血数等于自己武器的威力，同时对方失去等量血
对方失血变为0或负后，死去
欢迎游戏者，按你的想像扩充
*/
```
```python
#include <iostream>
```
```python
using
```
```python
namespace
```
```python
std
```
```python
;
```
```python
class
```
```python
Weapon
{
```
```python
public
```
```python
:
    Weapon(
```
```python
string
```
```python
wnam,
```
```python
int
```
```python
f);
```
```python
int
```
```python
getForce();
```
```python
private
```
```python
:
```
```python
string
```
```python
wname;
```
```python
//名称
```
```python
int
```
```python
force;
```
```python
//威力
```
```python
};
Weapon::Weapon(
```
```python
string
```
```python
wnam,
```
```python
int
```
```python
f):wname(wnam),force(f) {}
```
```python
int
```
```python
Weapon::getForce()
{
```
```python
return
```
```python
force;
}
```
```python
class
```
```python
Role
{
```
```python
public
```
```python
:
    Role(
```
```python
string
```
```python
nam,
```
```python
int
```
```python
b,
```
```python
string
```
```python
wnam,
```
```python
int
```
```python
f);
```
```python
//构造函数
```
```python
~Role();
```
```python
//析构函数
```
```python
void
```
```python
eat(
```
```python
int
```
```python
d);
```
```python
//吃东西，涨d血
```
```python
void
```
```python
attack(Role &r);
```
```python
//攻击别人，自己涨血，同时失血
```
```python
bool
```
```python
isAlived();
```
```python
//是否活着
```
```python
void
```
```python
show();
```
```python
//显示
```
```python
private
```
```python
:
```
```python
string
```
```python
name;
```
```python
int
```
```python
blood;
    Weapon weapon;
```
```python
bool
```
```python
life;
};
Role::Role(
```
```python
string
```
```python
nam,
```
```python
int
```
```python
b,
```
```python
string
```
```python
wnam,
```
```python
int
```
```python
f):name(nam),blood(b),weapon(wnam,f)
{
```
```python
if
```
```python
(blood>
```
```python
0
```
```python
)
        life=
```
```python
true
```
```python
;
```
```python
else
```
```python
life=
```
```python
false
```
```python
;
}
Role::~Role()
{
```
```python
cout
```
```python
<<name<<
```
```python
"退出江湖..."
```
```python
<<endl;
}
```
```python
void
```
```python
Role::eat(
```
```python
int
```
```python
d)
```
```python
//吃东西，涨d血
```
```python
{
```
```python
if
```
```python
(isAlived())
        blood+=d;
}
```
```python
void
```
```python
Role::attack(Role &r)
```
```python
//攻击别人，涨1血
```
```python
{
```
```python
if
```
```python
(isAlived())
    {
        blood+=weapon.getForce();
        r.blood-=weapon.getForce();
```
```python
if
```
```python
(r.blood<=
```
```python
0
```
```python
)
            r.life=
```
```python
false
```
```python
;
    }
}
```
```python
bool
```
```python
Role::isAlived()
```
```python
//是否活着
```
```python
{
```
```python
return
```
```python
life;
}
```
```python
void
```
```python
Role::show()
```
```python
//显示
```
```python
{
```
```python
cout
```
```python
<<name<<
```
```python
" has "
```
```python
<<blood<<
```
```python
" blood, it is "
```
```python
;
```
```python
if
```
```python
(isAlived())
```
```python
cout
```
```python
<<
```
```python
"alived."
```
```python
;
```
```python
else
```
```python
cout
```
```python
<<
```
```python
"dead."
```
```python
;
```
```python
cout
```
```python
<<endl;
}
```
```python
int
```
```python
main( )
{
    Role mary(
```
```python
"Mary"
```
```python
,
```
```python
500
```
```python
,
```
```python
"TuLong"
```
```python
,
```
```python
200
```
```python
);
    Role jack(
```
```python
"Jack"
```
```python
,
```
```python
10
```
```python
,
```
```python
"YiTian"
```
```python
,
```
```python
180
```
```python
);
```
```python
cout
```
```python
<<
```
```python
"---begin---"
```
```python
<<endl;
    mary.show();
    jack.show();
```
```python
cout
```
```python
<<
```
```python
"---1st round---"
```
```python
<<endl;
    jack.attack(mary);
    mary.show();
    jack.show();
```
```python
cout
```
```python
<<
```
```python
"---2nd round---"
```
```python
<<endl;
    mary.attack(jack);
    mary.show();
    jack.show();
```
```python
cout
```
```python
<<
```
```python
"---end---"
```
```python
<<endl;
```
```python
return
```
```python
0
```
```python
;
}
```

