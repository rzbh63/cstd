
# C++实践参考——Time类中的运算符重载 - 迂者-贺利坚的专栏 - CSDN博客

2016年05月10日 15:13:58[迂者-贺利坚](https://me.csdn.net/sxhelijian)阅读数：3078


【项目-Time类中的运算符重载】
实现Time类中的运算符重载。
```python
class
```
```python
CTime
{
```
```python
private
```
```python
:
```
```python
unsigned
```
```python
short
```
```python
int
```
```python
hour;
```
```python
// 时
```
```python
unsigned
```
```python
short
```
```python
int
```
```python
minute;
```
```python
// 分
```
```python
unsigned
```
```python
short
```
```python
int
```
```python
second;
```
```python
// 秒
```
```python
public
```
```python
:
    CTime(
```
```python
int
```
```python
h=
```
```python
0
```
```python
,
```
```python
int
```
```python
m=
```
```python
0
```
```python
,
```
```python
int
```
```python
s=
```
```python
0
```
```python
);
```
```python
void
```
```python
setTime(
```
```python
int
```
```python
h,
```
```python
int
```
```python
m,
```
```python
int
```
```python
s);
```
```python
void
```
```python
display();
```
```python
//二目的比较运算符重载
```
```python
bool
```
```python
operator
```
```python
> (CTime &t);
```
```python
bool
```
```python
operator
```
```python
< (CTime &t);
```
```python
bool
```
```python
operator
```
```python
>= (CTime &t);
```
```python
bool
```
```python
operator
```
```python
<= (CTime &t);
```
```python
bool
```
```python
operator
```
```python
== (CTime &t);
```
```python
bool
```
```python
operator
```
```python
!= (CTime &t);
```
```python
//二目的加减运算符的重载
```
```python
//返回t规定的时、分、秒后的时间
```
```python
//例t1(8,20,25),t2(11,20,50)，t1+t2为19:41:15
```
```python
CTime
```
```python
operator
```
```python
+(CTime &t);
    CTime
```
```python
operator
```
```python
-(CTime &t);
```
```python
//对照+理解
```
```python
CTime
```
```python
operator
```
```python
+(
```
```python
int
```
```python
s);
```
```python
//返回s秒后的时间
```
```python
CTime
```
```python
operator
```
```python
-(
```
```python
int
```
```python
s);
```
```python
//返回s秒前的时间
```
```python
//二目赋值运算符的重载
```
```python
CTime &
```
```python
operator
```
```python
+=(CTime &c);
    CTime &
```
```python
operator
```
```python
-=(CTime &c);
    CTime &
```
```python
operator
```
```python
+=(
```
```python
int
```
```python
s);
```
```python
//返回s秒后的时间
```
```python
CTime &
```
```python
operator
```
```python
-=(
```
```python
int
```
```python
s);
```
```python
//返回s秒前的时间
```
```python
//一目运算符的重载
```
```python
CTime
```
```python
operator
```
```python
++(
```
```python
int
```
```python
);
```
```python
//后置++，下一秒
```
```python
CTime &
```
```python
operator
```
```python
++();
```
```python
//前置++，下一秒
```
```python
CTime
```
```python
operator
```
```python
--(
```
```python
int
```
```python
);
```
```python
//后置--，前一秒
```
```python
CTime &
```
```python
operator
```
```python
--();
```
```python
//前置--，前一秒
```
```python
};
```
提示1：并不是所有比较运算重载函数都很复杂
```python
//比较运算返回的是比较结果，是bool型的true或false
```
```python
//可以直接使用已经重载了的运算实现新运算，例如果已经实现了 > ，则实现 <= 就可以很方便了……
```
```python
bool
```
```python
CTime::
```
```python
operator
```
```python
<= (CTime &t)
```
```python
// 判断时间t1<=t2
```
```python
{
```
```python
if
```
```python
(*
```
```python
this
```
```python
> t)
```
```python
return
```
```python
false
```
```python
;
```
```python
return
```
```python
true
```
```python
;
}
```
甚至可以如下面的代码般简练：
```python
bool
```
```python
CTime::
```
```python
operator
```
```python
<= (CTime &t){
```
```python
return
```
```python
!(*
```
```python
this
```
```python
> t)}
```
提示2：并不是所有复合赋值运算重载函数都需要很复杂
```python
//可以直接使用已经重载了的加减运算实现
```
```python
//这种赋值, 例如 t1+=20，直接改变当前对象的值，所以在运算完成后，将*this作为返回值
```
```python
CTime &CTime::
```
```python
operator
```
```python
+=(CTime &c)
{
    *
```
```python
this
```
```python
=*
```
```python
this
```
```python
+c;
```
```python
return
```
```python
*
```
```python
this
```
```python
;
}
```
提示3：请自行编制用于测试的main()函数，有些结果不必依赖display()函数，提倡用单步执行查看结果
[参考解答]
```python
#include <iostream>
```
```python
using
```
```python
namespace
```
```python
std
```
```python
;
```
```python
class
```
```python
CTime
{
```
```python
private
```
```python
:
```
```python
unsigned
```
```python
short
```
```python
int
```
```python
hour;
```
```python
// 时
```
```python
unsigned
```
```python
short
```
```python
int
```
```python
minute;
```
```python
// 分
```
```python
unsigned
```
```python
short
```
```python
int
```
```python
second;
```
```python
// 秒
```
```python
public
```
```python
:
    CTime(
```
```python
int
```
```python
h=
```
```python
0
```
```python
,
```
```python
int
```
```python
m=
```
```python
0
```
```python
,
```
```python
int
```
```python
s=
```
```python
0
```
```python
);
```
```python
void
```
```python
setTime(
```
```python
int
```
```python
h,
```
```python
int
```
```python
m,
```
```python
int
```
```python
s);
```
```python
//输入输出运算的重载
```
```python
friend
```
```python
istream &
```
```python
operator
```
```python
>>(istream &in,CTime &t);
```
```python
friend
```
```python
ostream &
```
```python
operator
```
```python
<<(ostream &out,CTime t);
```
```python
//比较运算符(二目)的重载
```
```python
bool
```
```python
operator
```
```python
> (CTime &t);
```
```python
bool
```
```python
operator
```
```python
< (CTime &t);
```
```python
bool
```
```python
operator
```
```python
>= (CTime &t);
```
```python
bool
```
```python
operator
```
```python
<= (CTime &t);
```
```python
bool
```
```python
operator
```
```python
== (CTime &t);
```
```python
bool
```
```python
operator
```
```python
!= (CTime &t);
```
```python
//二目运算符的重载
```
```python
CTime
```
```python
operator
```
```python
+(CTime &c);
```
```python
//返回c所规定的时、分、秒后的时间，例t1(8,20,25),t2(11,20,50)，t1+t2为:41:15
```
```python
CTime
```
```python
operator
```
```python
-(CTime &c);
```
```python
//对照+理解
```
```python
CTime
```
```python
operator
```
```python
+(
```
```python
int
```
```python
s);
```
```python
//返回s秒后的时间
```
```python
CTime
```
```python
operator
```
```python
-(
```
```python
int
```
```python
s);
```
```python
//返回s秒前的时间
```
```python
//一目运算符的重载
```
```python
CTime
```
```python
operator
```
```python
++(
```
```python
int
```
```python
);
```
```python
//后置++，下一秒
```
```python
CTime &
```
```python
operator
```
```python
++();
```
```python
//前置++，下一秒
```
```python
CTime
```
```python
operator
```
```python
--(
```
```python
int
```
```python
);
```
```python
//后置--，前一秒
```
```python
CTime &
```
```python
operator
```
```python
--();
```
```python
//前置--，前一秒
```
```python
//赋值运算符的重载
```
```python
CTime &
```
```python
operator
```
```python
+=(CTime &c);
    CTime &
```
```python
operator
```
```python
-=(CTime &c);
    CTime &
```
```python
operator
```
```python
+=(
```
```python
int
```
```python
s);
```
```python
//返回s秒后的时间
```
```python
CTime &
```
```python
operator
```
```python
-=(
```
```python
int
```
```python
s);
```
```python
//返回s秒前的时间
```
```python
};
```
```python
//构造函数
```
```python
CTime::CTime(
```
```python
int
```
```python
h,
```
```python
int
```
```python
m,
```
```python
int
```
```python
s)
{
    hour=h;
    minute=m;
    second=s;
}
```
```python
// 设置时间
```
```python
void
```
```python
CTime::setTime(
```
```python
int
```
```python
h,
```
```python
int
```
```python
m,
```
```python
int
```
```python
s)
{
    hour=h;
    minute=m;
    second=s;
}
```
```python
// 重载输入运算符>>
```
```python
istream &
```
```python
operator
```
```python
>>(istream &in,CTime &t)
{
```
```python
char
```
```python
ch1,ch2;
```
```python
while
```
```python
(
```
```python
1
```
```python
)
    {
```
```python
cout
```
```python
<<
```
```python
"请输入时间(hh:mm:ss) "
```
```python
;
```
```python
cin
```
```python
>>t.hour>>ch1>>t.minute>>ch2>>t.second;
```
```python
if
```
```python
(ch1==
```
```python
':'
```
```python
&& ch2==
```
```python
':'
```
```python
)
```
```python
if
```
```python
(t.hour>-
```
```python
1
```
```python
&& t.hour<
```
```python
24
```
```python
&& t.minute>-
```
```python
1
```
```python
&& t.minute<
```
```python
60
```
```python
&& t.second>-
```
```python
1
```
```python
&& t.second<
```
```python
60
```
```python
)
```
```python
break
```
```python
;
```
```python
cerr
```
```python
<<
```
```python
"时间格式不正确! 请重新输入\n"
```
```python
;
    }
```
```python
return
```
```python
cin
```
```python
;
}
```
```python
// 重载输出运算符<<
```
```python
ostream &
```
```python
operator
```
```python
<<(ostream &out,CTime t)
{
    out<<t.hour<<
```
```python
':'
```
```python
<<t.minute<<
```
```python
':'
```
```python
<<t.second;
```
```python
return
```
```python
out;
}
```
```python
//比较运算符的重载
```
```python
bool
```
```python
CTime::
```
```python
operator
```
```python
> (CTime &t)
```
```python
// 判断时间t1>t2
```
```python
{
```
```python
if
```
```python
(hour>t.hour)
```
```python
return
```
```python
true
```
```python
;
```
```python
if
```
```python
(hour<t.hour)
```
```python
return
```
```python
false
```
```python
;
```
```python
if
```
```python
(minute>t.minute)
```
```python
return
```
```python
true
```
```python
;
```
```python
if
```
```python
(minute<t.minute)
```
```python
return
```
```python
false
```
```python
;
```
```python
if
```
```python
(second>t.second)
```
```python
return
```
```python
true
```
```python
;
```
```python
return
```
```python
false
```
```python
;
}
```
```python
bool
```
```python
CTime::
```
```python
operator
```
```python
< (CTime &t)
```
```python
// 判断时间t1<t2
```
```python
{
```
```python
if
```
```python
(hour<t.hour)
```
```python
return
```
```python
true
```
```python
;
```
```python
if
```
```python
(hour>t.hour)
```
```python
return
```
```python
false
```
```python
;
```
```python
if
```
```python
(minute<t.minute)
```
```python
return
```
```python
true
```
```python
;
```
```python
if
```
```python
(minute>t.minute)
```
```python
return
```
```python
false
```
```python
;
```
```python
if
```
```python
(second<t.second)
```
```python
return
```
```python
true
```
```python
;
```
```python
return
```
```python
false
```
```python
;
}
```
```python
bool
```
```python
CTime::
```
```python
operator
```
```python
== (CTime &t)
```
```python
// 判断时间t1==t2
```
```python
{
```
```python
if
```
```python
(*
```
```python
this
```
```python
<t || *
```
```python
this
```
```python
>t)
```
```python
return
```
```python
false
```
```python
;
```
```python
return
```
```python
true
```
```python
;
}
```
```python
bool
```
```python
CTime::
```
```python
operator
```
```python
!= (CTime &t)
```
```python
// 判断时间t1!=t2
```
```python
{
```
```python
if
```
```python
(*
```
```python
this
```
```python
==t)
```
```python
return
```
```python
false
```
```python
;
```
```python
return
```
```python
true
```
```python
;
}
```
```python
bool
```
```python
CTime::
```
```python
operator
```
```python
>= (CTime &t)
```
```python
// 判断时间t1>=t2
```
```python
{
```
```python
if
```
```python
(*
```
```python
this
```
```python
<t)
```
```python
return
```
```python
false
```
```python
;
```
```python
return
```
```python
true
```
```python
;
}
```
```python
bool
```
```python
CTime::
```
```python
operator
```
```python
<= (CTime &t)
```
```python
// 判断时间t1<=t2
```
```python
{
```
```python
if
```
```python
(*
```
```python
this
```
```python
>t)
```
```python
return
```
```python
false
```
```python
;
```
```python
return
```
```python
true
```
```python
;
}
```
```python
//二目运算符的重载
```
```python
// 计算时间之和, 返回c所规定的时、分、秒后的时间，例t1(8,20,25),t2(11,20,50)，t1+t2为:41:15
```
```python
CTime CTime::
```
```python
operator
```
```python
+ (CTime &t)
{
```
```python
int
```
```python
h,m,s;
    s=second+t.second;
    m=minute+t.minute;
    h=hour+t.hour;
```
```python
if
```
```python
(s>
```
```python
59
```
```python
)
    {
        s-=
```
```python
60
```
```python
;
        m++;
    }
```
```python
if
```
```python
(m>
```
```python
59
```
```python
)
    {
        m-=
```
```python
60
```
```python
;
        h++;
    }
```
```python
while
```
```python
(h>
```
```python
23
```
```python
) h-=
```
```python
24
```
```python
;
    CTime t0(h,m,s);
```
```python
return
```
```python
t0;
}
```
```python
//返回s秒后的时间
```
```python
CTime CTime::
```
```python
operator
```
```python
+(
```
```python
int
```
```python
s)
{
```
```python
int
```
```python
ss=s%
```
```python
60
```
```python
;
```
```python
int
```
```python
mm=(s/
```
```python
60
```
```python
)%
```
```python
60
```
```python
;
```
```python
int
```
```python
hh=s/
```
```python
3600
```
```python
;
    CTime t0(hh,mm,ss);
```
```python
return
```
```python
*
```
```python
this
```
```python
+t0;
}
```
```python
// 计算时间之差
```
```python
CTime CTime::
```
```python
operator
```
```python
- (CTime &t)
{
```
```python
int
```
```python
h,m,s;
    s=second-t.second;
    m=minute-t.minute;
    h=hour-t.hour;
```
```python
if
```
```python
(s<
```
```python
0
```
```python
)
    {
        s+=
```
```python
60
```
```python
;
        m--;
    }
```
```python
if
```
```python
(m<
```
```python
0
```
```python
)
    {
        m+=
```
```python
60
```
```python
;
        h--;
    }
```
```python
while
```
```python
(h<
```
```python
0
```
```python
) h+=
```
```python
24
```
```python
;
    CTime t0(h,m,s);
```
```python
return
```
```python
t0;
}
```
```python
//返回s秒前的时间
```
```python
CTime CTime::
```
```python
operator
```
```python
-(
```
```python
int
```
```python
s)
{
```
```python
int
```
```python
ss=s%
```
```python
60
```
```python
;
```
```python
int
```
```python
mm=(s/
```
```python
60
```
```python
)%
```
```python
60
```
```python
;
```
```python
int
```
```python
hh=s/
```
```python
3600
```
```python
;
    CTime t0(hh,mm,ss);
```
```python
return
```
```python
*
```
```python
this
```
```python
-t0;
}
```
```python
//一目运算符的重载
```
```python
CTime CTime::
```
```python
operator
```
```python
++(
```
```python
int
```
```python
)
```
```python
//后置++，下一秒
```
```python
{
    CTime t=*
```
```python
this
```
```python
;
    *
```
```python
this
```
```python
=*
```
```python
this
```
```python
+
```
```python
1
```
```python
;
```
```python
return
```
```python
t;
}
CTime &CTime::
```
```python
operator
```
```python
++()
```
```python
//前置++，下一秒
```
```python
{
    *
```
```python
this
```
```python
=*
```
```python
this
```
```python
+
```
```python
1
```
```python
;
```
```python
return
```
```python
*
```
```python
this
```
```python
;
}
CTime CTime::
```
```python
operator
```
```python
--(
```
```python
int
```
```python
)
```
```python
//后置--，前一秒
```
```python
{
    CTime t=*
```
```python
this
```
```python
;
    *
```
```python
this
```
```python
=*
```
```python
this
```
```python
-
```
```python
1
```
```python
;
```
```python
return
```
```python
t;
}
CTime &CTime::
```
```python
operator
```
```python
--()
```
```python
//前置--，前一秒
```
```python
{
    *
```
```python
this
```
```python
=*
```
```python
this
```
```python
-
```
```python
1
```
```python
;
```
```python
return
```
```python
*
```
```python
this
```
```python
;
}
```
```python
//赋值运算符的重载
```
```python
CTime &CTime::
```
```python
operator
```
```python
+=(CTime &c)
{
    *
```
```python
this
```
```python
=*
```
```python
this
```
```python
+c;
```
```python
return
```
```python
*
```
```python
this
```
```python
;
}
CTime &CTime::
```
```python
operator
```
```python
-=(CTime &c)
{
    *
```
```python
this
```
```python
=*
```
```python
this
```
```python
-c;
```
```python
return
```
```python
*
```
```python
this
```
```python
;
}
CTime &CTime::
```
```python
operator
```
```python
+=(
```
```python
int
```
```python
s)
```
```python
//返回s秒后的时间
```
```python
{
    *
```
```python
this
```
```python
=*
```
```python
this
```
```python
+s;
```
```python
return
```
```python
*
```
```python
this
```
```python
;
}
CTime &CTime::
```
```python
operator
```
```python
-=(
```
```python
int
```
```python
s)
```
```python
//返回s秒前的时间
```
```python
{
    *
```
```python
this
```
```python
=*
```
```python
this
```
```python
-s;
```
```python
return
```
```python
*
```
```python
this
```
```python
;
}
```
```python
int
```
```python
main()
{
    CTime t1,t2,t;
```
```python
cout
```
```python
<<
```
```python
"t1为："
```
```python
;
```
```python
cin
```
```python
>>t1;
```
```python
cout
```
```python
<<
```
```python
"t2为："
```
```python
;
```
```python
cin
```
```python
>>t2;
```
```python
cout
```
```python
<<
```
```python
"下面比较两个时间大小：\n"
```
```python
;
```
```python
if
```
```python
(t1>t2)
```
```python
cout
```
```python
<<
```
```python
"t1>t2"
```
```python
<<endl;
```
```python
if
```
```python
(t1<t2)
```
```python
cout
```
```python
<<
```
```python
"t1<t2"
```
```python
<<endl;
```
```python
if
```
```python
(t1==t2)
```
```python
cout
```
```python
<<
```
```python
"t1＝t2"
```
```python
<<endl;
```
```python
if
```
```python
(t1!=t2)
```
```python
cout
```
```python
<<
```
```python
"t1≠t2"
```
```python
<<endl;
```
```python
if
```
```python
(t1>=t2)
```
```python
cout
```
```python
<<
```
```python
"t1≥t2"
```
```python
<<endl;
```
```python
if
```
```python
(t1<=t2)
```
```python
cout
```
```python
<<
```
```python
"t1≤t2"
```
```python
<<endl;
```
```python
cout
```
```python
<<endl;
```
```python
cout
```
```python
<<
```
```python
"t1= "
```
```python
<<t1<<endl;
```
```python
cout
```
```python
<<
```
```python
"t2= "
```
```python
<<t2<<endl;
```
```python
cout
```
```python
<<
```
```python
"t=t1++"
```
```python
<<endl;
    t=t1++;
```
```python
cout
```
```python
<<
```
```python
"t= "
```
```python
<<t<<
```
```python
"    t1= "
```
```python
<<t1<<endl;
```
```python
cout
```
```python
<<
```
```python
"t=++t1"
```
```python
<<endl;
    t=++t1;
```
```python
cout
```
```python
<<
```
```python
"t= "
```
```python
<<t<<
```
```python
"    t1= "
```
```python
<<t1<<endl;
```
```python
cout
```
```python
<<
```
```python
"t1+t2= "
```
```python
<<t1+t2<<endl;
```
```python
cout
```
```python
<<
```
```python
"t1-t2= "
```
```python
<<t1-t2<<endl;
```
```python
cout
```
```python
<<
```
```python
"t1+2000= "
```
```python
<<t1+
```
```python
2000
```
```python
<<endl;
```
```python
cout
```
```python
<<
```
```python
"t1-5000= "
```
```python
<<t1-
```
```python
5000
```
```python
<<endl;
```
```python
return
```
```python
0
```
```python
;
}
```

