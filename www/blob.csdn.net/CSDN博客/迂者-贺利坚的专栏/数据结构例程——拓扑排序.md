
# 数据结构例程——拓扑排序 - 迂者-贺利坚的专栏 - CSDN博客

2015年11月15日 09:50:21[迂者-贺利坚](https://me.csdn.net/sxhelijian)阅读数：2201个人分类：[数据结构																](https://blog.csdn.net/sxhelijian/article/category/5757113)



本文是[[数据结构基础系列(7)：图](http://edu.csdn.net/course/detail/1595)]中第11课时[[拓扑排序](http://edu.csdn.net/course/detail/1595/24605)]的例程。
![这里写图片描述](https://img-blog.csdn.net/20151115094831223)
（程序中graph.h是图存储结构的“算法库”中的头文件，详情请[单击链接…](http://blog.csdn.net/sxhelijian/article/details/49591419)）
[代码]
```python
#include <stdio.h>
```
```python
#include <malloc.h>
```
```python
#include "graph.h"
```
```python
void
```
```python
TopSort(ALGraph *G)
{
```
```python
int
```
```python
i,j;
```
```python
int
```
```python
St[MAXV],top=-
```
```python
1
```
```python
;
```
```python
//栈St的指针为top
```
```python
ArcNode *p;
```
```python
for
```
```python
(i=
```
```python
0
```
```python
; i<G->n; i++)
```
```python
//入度置初值0
```
```python
G->adjlist[i].count=
```
```python
0
```
```python
;
```
```python
for
```
```python
(i=
```
```python
0
```
```python
; i<G->n; i++)
```
```python
//求所有顶点的入度
```
```python
{
        p=G->adjlist[i].firstarc;
```
```python
while
```
```python
(p!=NULL)
        {
            G->adjlist[p->adjvex].count++;
            p=p->nextarc;
        }
    }
```
```python
for
```
```python
(i=
```
```python
0
```
```python
; i<G->n; i++)
```
```python
if
```
```python
(G->adjlist[i].count==
```
```python
0
```
```python
)
```
```python
//入度为0的顶点进栈
```
```python
{
            top++;
            St[top]=i;
        }
```
```python
while
```
```python
(top>-
```
```python
1
```
```python
)
```
```python
//栈不为空时循环
```
```python
{
        i=St[top];
        top--;
```
```python
//出栈
```
```python
printf
```
```python
(
```
```python
"%d "
```
```python
,i);
```
```python
//输出顶点
```
```python
p=G->adjlist[i].firstarc;
```
```python
//找第一个相邻顶点
```
```python
while
```
```python
(p!=NULL)
        {
            j=p->adjvex;
            G->adjlist[j].count--;
```
```python
if
```
```python
(G->adjlist[j].count==
```
```python
0
```
```python
)
```
```python
//入度为0的相邻顶点进栈
```
```python
{
                top++;
                St[top]=j;
            }
            p=p->nextarc;
```
```python
//找下一个相邻顶点
```
```python
}
    }
}
```
```python
int
```
```python
main()
{
    ALGraph *G;
```
```python
int
```
```python
A[
```
```python
7
```
```python
][
```
```python
7
```
```python
]=
    {
        {
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
1
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
},
        {
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
1
```
```python
,
```
```python
1
```
```python
,
```
```python
0
```
```python
,
```
```python
1
```
```python
},
        {
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
1
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
},
        {
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
1
```
```python
,
```
```python
1
```
```python
,
```
```python
0
```
```python
},
        {
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
},
        {
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
},
        {
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
1
```
```python
,
```
```python
0
```
```python
}
    };
    ArrayToList(A[
```
```python
0
```
```python
],
```
```python
7
```
```python
, G);
    DispAdj(G);
```
```python
printf
```
```python
(
```
```python
"\n"
```
```python
);
```
```python
printf
```
```python
(
```
```python
"拓扑序列:"
```
```python
);
    TopSort(G);
```
```python
printf
```
```python
(
```
```python
"\n"
```
```python
);
```
```python
return
```
```python
0
```
```python
;
}
```

