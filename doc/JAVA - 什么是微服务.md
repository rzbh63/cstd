# JAVA - 什么是微服务

2018年12月01日 01:18:32

 

一个优秀的废人

 

阅读数：226

 

标签： [SpringCloud](http://so.csdn.net/so/search/s.do?q=SpringCloud&t=blog)[微服务](http://so.csdn.net/so/search/s.do?q=%E5%BE%AE%E6%9C%8D%E5%8A%A1&t=blog)[Java](http://so.csdn.net/so/search/s.do?q=Java&t=blog) 更多

个人分类： [SpringCloud](https://blog.csdn.net/turodog/article/category/8467896)



版权声明：本文为博主原创文章，未经博主允许不得转载。	https://blog.csdn.net/turodog/article/details/84670250

> 微信公众号：一个优秀的废人
> 如有问题或建议，请后台留言，我会尽力解决你的问题。

![微服务](https://upload-images.jianshu.io/upload_images/3282134-b5a4138ce555496c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

#### 前言

最近公司某个项目的架构越来越庞大，维护起来非常难受。领导提出要把这个项目重构，在工作中需要把原来的项目重构成微服务架构，因此学习微服务相关知识，在这里记录下来，权当笔记的同时也希望能对你有启发。今天就来聊聊什么是微服务？

#### 单体应用

在聊微服务之前，我先给你们梳理下什么是单体应用。如果你不知道单体应用的痛，那也不会深刻理解微服务的价值。

![img](https://upload-images.jianshu.io/upload_images/3282134-d2ba9f2f1bba6bfc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

上图为我司某项目架构，包含了四个模块。可以看出我司此项目的架构完完全全属于传统的 MVC 架构，所有的子系统都集成在一个很繁杂的 JVM 进程中。

**优点**

这种单体架构的优点在于方便管理，所有代码在同一项目中，但是当需求越来越多，项目规模越来越大，其坏处也很明显。

**缺点**

1. 项目过于臃肿，部署效率低下

当大大小小的功能模块都集中在同一项目的时候，整个项目必然会变得臃肿，让开发者难以维护。单体应用的代码越来越多，依赖的资源越来越多时，应用编译打包、部署测试一次非常耗时。

1. 系统高可用性差，资源无法隔离

整个单体系统的各个功能模块都依赖于同样的数据库、内存等资源，一旦某个功能模块对资源使用不当，整个系统都会被拖垮。

1. 开发成本高

早期在团队开发人员只有两三个人的时候，协作修改代码，打包部署，更新发布这完全可以控制。但是团队一旦扩张，还是按照早期的方法去开发，那如果测试阶段只要有一块功能有问题，就得重新编译打包部署。所有的开发人员又都得参与其中，效率低下，开发成本极高。

1. 无法灵活拓展

当系统的访问量越来越大的时候，单体系统固然可以进行水平扩展，部署在多台机器上组成集群：

![img](https://upload-images.jianshu.io/upload_images/3282134-bdbf4ebb2b1bfffa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

但是这种扩展并非灵活的扩展。比如我们现在的性能瓶颈是支付模块，希望只针对支付模块做水平扩展，这一点在单体系统是做不到的。因此，急需一种方法将应用的不同模块进行解耦，从而降低开发和部署成本。

要解决上面单体应用的问题，就必须引入服务化的概念。

#### 什么是服务化？

用通俗的语言来说，服务化就是把传统单体应用中通过 JAR 包依赖产生的本地方法调用，改造成 RPC 接口产生的远程方法调用。这些服务是围绕业务功能构建的，可以通过全自动部署机制独立部署。 这些服务的集中管理最少，可以用不同的编程语言编写，并使用不同的数据存储技术。

以我司项目为例，这个项目包含的四个模块都是相互依赖的，当这些模块的代码耦合到一起时，需要去加载每个模块的代码以及连接资源，任何一个出了问题，整个应用都会受到影响。

为此，可以把耦合度较高的模块，独立数据源，独立成一个服务部署，以 RPC 接口的形式对外提供服务。例如订单模块和用户模块：

![img](https://upload-images.jianshu.io/upload_images/3282134-b02989f72a257c0a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

可见通过服务化，可以解决单体应用膨胀、团队开发耦合度高、协作效率底下的问题。

#### 什么是微服务？

简而言之，微服务架构风格是一种将单个应用程序作为一套小型服务开发的方法，每种应用程序都在自己的进程中运行，并与轻量级机制（通常是HTTP资源API）进行通信。得益于以 Docker 为代表的容器化技术的成熟以及 DevOps 文化的的兴起，服务化的思想进一步演化，演变成我们今天所熟知的微服务。

说了这么多概念，微服务有什么样的具体特点呢？

1. 服务拆分粒度更细

微服务可以说是更细维度的服务化，小到一个子模块，只要该模块依赖的资源与其他模块都没有关系，那么就可以拆分为一个微服务。

1. 服务独立部署

传统的单体架构是以整个系统为单位进行部署，而微服务则是以每一个独立组件（例如用户服务，商品服务）为单位进行部署。

用一张经典的图来表现，就是下面这个样子：

![左边是单体架构的集群，右边是微服务集群](https://upload-images.jianshu.io/upload_images/3282134-45eb5935c85509d6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

什么意思呢？比如根据每个服务的吞吐量不同，支付服务需要部署100台机器，用户服务需要部署30台机器，而商品服务只需要部署10台机器。这种灵活部署只有微服务架构才能实现。

1. 服务独立维护，分工明确

每个微服务都可以交由一个小团队进行开发，测试维护部署，并对整个生命周期负责。比如在单体应用时期，我们的研发团队是如下图这样传统的水平架构：

![水平团队组织架构](https://upload-images.jianshu.io/upload_images/3282134-29601c5a6cc3c246.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

而微服务时期，我们可以根据其思想把团队划分成垂直组织架构：

![img](https://upload-images.jianshu.io/upload_images/3282134-04c158e009f18d1c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

当然，这种垂直划分只是一个理想的架构，实际在企业中并不会把团队组织架构拆分得这么绝对。

#### 后语

文章介绍了微服务的发展由来,它是由单体应用进化到服务化拆分部署,后期随着移动互联网规模的不断扩大,敏捷开发、持续交付、DevOps 理论的发展和实践,以及基于 Docker 容器化技术的成熟,微服务架构开始流行,逐渐成为应用架构的未来演进方向。

以上就是我对微服务的理解，希望对你们有帮助。最后，对 Python 、Java 感兴趣请长按二维码关注一波，我会努力带给你们价值，如果觉得本文对你哪怕有一丁点帮助，请帮忙点个赞。