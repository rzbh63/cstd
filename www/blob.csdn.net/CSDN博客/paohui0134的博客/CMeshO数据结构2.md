
# CMeshO数据结构2 - paohui0134的博客 - CSDN博客


2016年11月20日 20:07:54[paohui0134](https://me.csdn.net/paohui0134)阅读数：273


# CVertexO数据结构
## 容器
```python
vcg::vertex::vector_ocf<CVertexO>
```
```python
template
```
```python
<
```
```python
class
```
```python
VALUE_TYPE>
```
```python
class
```
```python
vector_ocf:
```
```python
public
```
```python
std
```
```python
::
```
```python
vector
```
```python
<VALUE_TYPE>
```
继承自std::vector，内部定义了一些vector用来存放相关联的数据，比如颜色等
## CVertexO
```python
class
```
```python
CVertexO
```
```python
:
```
```python
public
```
```python
vcg
```
```python
::Vertex
```
```python
<
```
```python
CUsedTypesO
```
```python
,
```
```python
vcg
```
```python
::vertex
```
```python
::InfoOcf
```
```python
,
```
```python
/*  4b */
```
```python
vcg
```
```python
::vertex
```
```python
::Coord3f
```
```python
,
```
```python
/* 12b */
```
```python
vcg
```
```python
::vertex
```
```python
::BitFlags
```
```python
,
```
```python
/*  4b */
```
```python
vcg
```
```python
::vertex
```
```python
::Normal3f
```
```python
,
```
```python
/* 12b */
```
```python
vcg
```
```python
::vertex
```
```python
::Qualityf
```
```python
,
```
```python
/*  4b */
```
```python
vcg
```
```python
::vertex
```
```python
::Color4b
```
```python
,
```
```python
/*  4b */
```
```python
vcg
```
```python
::vertex
```
```python
::VFAdjOcf
```
```python
,
```
```python
/*  0b */
```
```python
vcg
```
```python
::vertex
```
```python
::MarkOcf
```
```python
,
```
```python
/*  0b */
```
```python
vcg
```
```python
::vertex
```
```python
::TexCoordfOcf
```
```python
,
```
```python
/*  0b */
```
```python
vcg
```
```python
::vertex
```
```python
::CurvaturefOcf
```
```python
,
```
```python
/*  0b */
```
```python
vcg
```
```python
::vertex
```
```python
::CurvatureDirfOcf
```
```python
,
```
```python
/*  0b */
```
```python
vcg
```
```python
::vertex
```
```python
::RadiusfOcf
```
```python
/*  0b */
```
```python
>
```
```python
{
```
```python
}
```
```python
;
```
继承自vcg::Vertex，继承关系大致如下
```python
令T=EmptyCore<CUsedTypesO>
Vertex<T,A,B,
```
```python
C
```
```python
,
```
```python
D
```
```python
,
```
```python
E
```
```python
,F,G,H,
```
```python
I
```
```python
,J,
```
```python
K
```
```python
,L>
VertexArityMax<T, A, B,
```
```python
C
```
```python
,
```
```python
D
```
```python
,
```
```python
E
```
```python
, F, G, H,
```
```python
I
```
```python
, J,
```
```python
K
```
```python
, L>
//以下忽略Arity
RadiusfOcf<Arity11<T, A, B,
```
```python
C
```
```python
,
```
```python
D
```
```python
,
```
```python
E
```
```python
, F, G, H,
```
```python
I
```
```python
, J,
```
```python
K
```
```python
>>
CurvatureDirfOcf<Arity10<T, A, B,
```
```python
C
```
```python
,
```
```python
D
```
```python
,
```
```python
E
```
```python
, F, G, H,
```
```python
I
```
```python
, J>>
CurvaturefOcf<Arity9<T, A, B,
```
```python
C
```
```python
,
```
```python
D
```
```python
,
```
```python
E
```
```python
, F, G, H,
```
```python
I
```
```python
>>
TexCoordfOcf<Arity8<T, A, B,
```
```python
C
```
```python
,
```
```python
D
```
```python
,
```
```python
E
```
```python
, F, G, H>>
MarkOcf<Arity7<T, A, B,
```
```python
C
```
```python
,
```
```python
D
```
```python
,
```
```python
E
```
```python
, F, G>>
VFAdjOcf<Arity6<T, A, B,
```
```python
C
```
```python
,
```
```python
D
```
```python
,
```
```python
E
```
```python
, F>>
Color4b<Arity5<T, A, B,
```
```python
C
```
```python
,
```
```python
D
```
```python
,
```
```python
E
```
```python
>>
Qualityf<Arity4<T, A, B,
```
```python
C
```
```python
,
```
```python
D
```
```python
>>
Normal3f<Arity3<T, A, B,
```
```python
C
```
```python
>>
BitFlags<Arity2<T, A, B>>
Coord3f<Arity1<T, A>>
InfoOcf<T>
EmptyCore<CUsedTypesO>
CUsedTypesO
```
### CUsedTypesO定义如下：
```python
class
```
```python
CUsedTypesO
```
```python
:
```
```python
public
```
```python
vcg::UsedTypes
```
```python
<
```
```python
vcg::Use
```
```python
<
```
```python
CVertexO
```
```python
>::
```
```python
AsVertexType
```
```python
,
```
```python
vcg:
```
```python
:Use<CEdgeO
```
```python
>
```
```python
::AsEdgeType
```
```python
,
```
```python
vcg:
```
```python
:Use<CFaceO
```
```python
>
```
```python
::AsFaceType
```
```python
>{};
```
主要是定义了各种数据相关的类型，之前有简单分析过UsedTypes，这里不再展开。
简单的说就是CUsedTypesO通过typedef定义了一些数据相关的类型。
### 接着是EmptyCore
```python
template
```
```python
<
```
```python
class
```
```python
TT>
```
```python
class
```
```python
EmptyCore:
```
```python
public
```
```python
TT
与名字相对的，该类主要定义了基本的方法(接口)，没什么实质性的实现。
```
### InfoOcf
```python
template
```
```python
<
```
```python
class
```
```python
T>
```
```python
class
```
```python
InfoOcf:
```
```python
public
```
```python
T 
定义了容器相关的一些方法
```
```python
inline
```
```python
InfoOcf &
```
```python
operator
```
```python
=(
```
```python
const
```
```python
InfoOcf &
```
```python
/*other*/
```
```python
)
vector_ocf<
```
```python
typename
```
```python
T::VertexType> &Base()
```
```python
inline
```
```python
int
```
```python
Index()
```
```python
const
```
### Coord3f
```python
template
```
```python
<
```
```python
class
```
```python
T>
```
```python
class
```
```python
Coord3f:
```
```python
public
```
```python
Coord<vcg::Point3f, T>
```
```python
public
```
```python
:
```
```python
static
```
```python
void
```
```python
Name(
```
```python
std
```
```python
::
```
```python
vector
```
```python
<
```
```python
std
```
```python
::
```
```python
string
```
```python
>
```
```python
& name){name.push_back(
```
```python
std
```
```python
::
```
```python
string
```
```python
(
```
```python
"Coord3f"
```
```python
));T::Name(name);}
将类名放入容器，并调用基类的Name函数
```
```python
template
```
```python
<
```
```python
class
```
```python
A,
```
```python
class
```
```python
T>
```
```python
class
```
```python
Coord:
```
```python
public
```
```python
T
```
```python
template
```
```python
<
```
```python
class
```
```python
RightValueType>
实现了
ImportData
HasCoord
Name
该类主要是封装坐标点的信息  CoordType _coord;
定义
```
```python
float
```
```python
为ScalarType，Point3f为CoordType
```
### BitFlags
```python
template
```
```python
<
```
```python
class
```
```python
T>
```
```python
class
```
```python
BitFlags:
```
```python
public
```
```python
T
实现了
ImportData
HasFlags
Name
封装了标记值
```
```python
int
```
```python
_flags;
```
### Normal3f
```python
template <class T> class Normal3f:
```
```python
public
```
```python
Normal<vcg::Point3f, T>
实现了
Name
template <
```
```python
class
```
```python
Point3f,
```
```python
class
```
```python
T>
```
```python
class
```
```python
Normal:
```
```python
public
```
```python
T 
定义：
typedef Point3f NormalType;
封装：
NormalType _norm
实现：
ImportData
HasNormal
Name
```
### Qualityf
```python
template <class TT> class Qualityf:
```
```python
public
```
```python
Quality<
```
```python
float
```
```python
, TT>
实现：
Name
template <
```
```python
class
```
```python
float
```
```python
,
```
```python
class
```
```python
TT>
```
```python
class
```
```python
Quality:
```
```python
public
```
```python
TT
定义：
 typedef
```
```python
float
```
```python
QualityType;
封装：
QualityType _quality
实现：
ImportData
HasQuality
Name
```
### Color4b
```python
template
```
```python
<
```
```python
class
```
```python
TT>
```
```python
class
```
```python
Color4b:
```
```python
public
```
```python
Color<vcg::Color4b, TT>
实现：
Name
定义：
```
```python
typedef
```
```python
A ColorType;
封装：
ColorType _color;
实现
ImportData
HasColor
Name
```
### VFAdjOcf
```python
template
```
```python
<
```
```python
class
```
```python
T>
```
```python
class
```
```python
VFAdjOcf:
```
```python
public
```
```python
T
封装点面关系的一些函数
其中VFAdjType是存在vector_ocf之中的
```
```python
std
```
```python
::
```
```python
vector
```
```python
<
```
```python
struct
```
```python
VFAdjType>
```
```python
AV;
```
### MarkOcf
```python
template
```
```python
<
```
```python
class
```
```python
T>
```
```python
class
```
```python
MarkOcf:
```
```python
public
```
```python
T
封装对标记位的一些操作
操作对象存在vector_ocf之中的
```
```python
std
```
```python
::
```
```python
vector
```
```python
<
```
```python
int
```
```python
>
```
```python
MV;
```
### TexCoordfOcf
```python
template
```
```python
<
```
```python
class
```
```python
T>
```
```python
class
```
```python
TexCoordfOcf
实现Name
TexCoordOcf<TexCoord2<
```
```python
float
```
```python
,
```
```python
1
```
```python
>, T>
定义：
```
```python
typedef
```
```python
TexCoord2<
```
```python
float
```
```python
,
```
```python
1
```
```python
> TexCoordType;
操作对象存在vector_ocf之中的
```
```python
std
```
```python
::
```
```python
vector
```
```python
<TexCoord2<
```
```python
float
```
```python
,1>
```
```python
> TV;
```
### CurvaturefOcf
```python
template
```
```python
<
```
```python
class
```
```python
T>
```
```python
class
```
```python
CurvaturefOcf:
```
```python
public
```
```python
CurvatureOcf<
```
```python
float
```
```python
, T>
实现Name
CurvatureOcf<
```
```python
float
```
```python
, T>
定义：
```
```python
typedef
```
```python
Point2<
```
```python
float
```
```python
> CurvatureType;
```
```python
typedef
```
```python
float
```
```python
ScalarTypeCur;
实现了对于Curvature的一些方法
操作对象在vector_ocf之中的
```
```python
std
```
```python
::
```
```python
vector
```
```python
<Point2<
```
```python
float
```
```python
>
```
```python
> CuV;
```
### CurvatureDirfOcf
```python
template
```
```python
<
```
```python
class
```
```python
T>
```
```python
class
```
```python
CurvatureDirfOcf:
```
```python
public
```
```python
CurvatureDirOcf<CurvatureDirTypeOcf<
```
```python
float
```
```python
>, T>
CurvatureDirOcf<CurvatureDirTypeOcf<
```
```python
float
```
```python
>, T>
定义：
```
```python
typedef
```
```python
CurvatureDirTypeOcf<
```
```python
float
```
```python
> CurvatureDirType;
```
```python
typedef
```
```python
CurvatureDirTypeOcf<
```
```python
float
```
```python
>::CurVecType CurVecType;
```
```python
typedef
```
```python
CurvatureDirTypeOcf<
```
```python
float
```
```python
>::CurScalarType CurScalarType;
操作对象在vector_ocf之中的
```
```python
std
```
```python
::
```
```python
vector
```
```python
<CurvatureDirTypeOcf<
```
```python
float
```
```python
>
```
```python
> CuDV;
CurvatureDirTypeOcf为一个结构体，这里不再展开
```
### RadiusfOcf
```python
template
```
```python
<
```
```python
class
```
```python
T>
```
```python
class
```
```python
RadiusfOcf:
```
```python
public
```
```python
RadiusOcf<
```
```python
float
```
```python
, T> {}
```
```python
template
```
```python
<
```
```python
class
```
```python
A,
```
```python
class
```
```python
TT>
```
```python
class
```
```python
RadiusOcf:
```
```python
public
```
```python
TT
定义：
```
```python
typedef
```
```python
float
```
```python
RadiusType;
操作对象vector_ocf之中的
```
```python
std
```
```python
::
```
```python
vector
```
```python
<
```
```python
float
```
```python
>
```
```python
RadiusV;
```
## 总结
1.容器信息类
InfoOcf类实现了两个很重要的函数：
Index() //返回当前对象在容器中的序号
Base()  //返回容器本身的指针  vector_ocf *
之后所有的xxxocf类都会用到这两个函数
2.带有ocf后缀的类
这些类与容器相关，处infoocf之外，其它的带有ocf后缀的类一方面定义了某一信息的类型，另一方面实现了对于这些信息的一些方法，然而信息本身是存储在vector_ocf之中的
3.所有的类都会覆盖积累的对于该类操作的信息的开关函数（比如HasColor），以及ImportData函数
4.没有ocf后缀的类，基本上都是自己内部维护了数据，比如Coord3f内部有vcg::Point3f来保存颜色信息

