
# C++游戏系列3：用多文件组织角色类 - 迂者-贺利坚的专栏 - CSDN博客

2016年04月10日 20:25:51[迂者-贺利坚](https://me.csdn.net/sxhelijian)阅读数：2709


**更多见：****[C++游戏系列目录](http://blog.csdn.net/sxhelijian/article/details/51148381)**
知识点：项目的多文件组织。一个项目，由多个源文件及相应的头文件构成，将声明与定义分开。
【项目-用多文件组织多个类的程序】
将上一周“[项目2-带武器的游戏角色](http://blog.csdn.net/sxhelijian/article/details/51045853)”用“一个项目多个文件”的方式实现，其中两个类的声明放在一个.h文件中，每个类的成员函数分别放一个文件，main()函数用一个文件。体会这样安排的优点。
参考解答：
1.game.h：类声明
```python
#ifndef GAME_H_INCLUDED
```
```python
#
```
```python
define
```
```python
GAME_H_INCLUDED
```
```python
using
```
```python
namespace std;
class Weapon
{
```
```python
public
```
```python
:
```
```python
Weapon
```
```python
(
```
```python
string
```
```python
wnam,
```
```python
int
```
```python
f);
```
```python
int
```
```python
getForce();
```
```python
private
```
```python
:
```
```python
string
```
```python
wname;
```
```python
//名称
```
```python
int
```
```python
force;
```
```python
//威力
```
```python
};
class Role
{
```
```python
public
```
```python
:
```
```python
Role
```
```python
(
```
```python
string
```
```python
nam,
```
```python
int
```
```python
b,
```
```python
string
```
```python
wnam,
```
```python
int
```
```python
f);
```
```python
//构造函数
```
```python
~Role();
```
```python
//析构函数
```
```python
void
```
```python
eat(
```
```python
int
```
```python
d);
```
```python
//吃东西，涨d血
```
```python
void
```
```python
attack(Role &r);
```
```python
//攻击别人，自己涨血，同时失血
```
```python
bool
```
```python
isAlived();
```
```python
//是否活着
```
```python
void
```
```python
show();
```
```python
//显示
```
```python
private
```
```python
:
```
```python
string
```
```python
name;
```
```python
int
```
```python
blood;
    Weapon weapon;
```
```python
bool
```
```python
life;
};
```
```python
#
```
```python
endif
```
```python
// GAME_H_INCLUDED
```
2.role.cpp：定义角色类的成员函数
```python
#include <iostream>
```
```python
#include "game.h"
```
```python
using
```
```python
namespace
```
```python
std
```
```python
;
Role::Role(
```
```python
string
```
```python
nam,
```
```python
int
```
```python
b,
```
```python
string
```
```python
wnam,
```
```python
int
```
```python
f):name(nam),blood(b),weapon(wnam,f)
{
```
```python
if
```
```python
(blood>
```
```python
0
```
```python
)
        life=
```
```python
true
```
```python
;
```
```python
else
```
```python
life=
```
```python
false
```
```python
;
}
Role::~Role()
{
```
```python
cout
```
```python
<<name<<
```
```python
"退出江湖..."
```
```python
<<endl;
}
```
```python
void
```
```python
Role::eat(
```
```python
int
```
```python
d)
```
```python
//吃东西，涨d血
```
```python
{
```
```python
if
```
```python
(isAlived())
        blood+=d;
}
```
```python
void
```
```python
Role::attack(Role &r)
```
```python
//攻击别人，涨1血
```
```python
{
```
```python
if
```
```python
(isAlived())
    {
        blood+=weapon.getForce();
        r.blood-=weapon.getForce();
```
```python
if
```
```python
(r.blood<=
```
```python
0
```
```python
)
            r.life=
```
```python
false
```
```python
;
    }
}
```
```python
bool
```
```python
Role::isAlived()
```
```python
//是否活着
```
```python
{
```
```python
return
```
```python
life;
}
```
```python
void
```
```python
Role::show()
```
```python
//显示
```
```python
{
```
```python
cout
```
```python
<<name<<
```
```python
" has "
```
```python
<<blood<<
```
```python
" blood, it is "
```
```python
;
```
```python
if
```
```python
(isAlived())
```
```python
cout
```
```python
<<
```
```python
"alived."
```
```python
;
```
```python
else
```
```python
cout
```
```python
<<
```
```python
"dead."
```
```python
;
```
```python
cout
```
```python
<<endl;
}
```
3.weapon.cpp：武器类的成员函数的实现
```python
#include <iostream>
```
```python
#include "game.h"
```
```python
using
```
```python
namespace
```
```python
std
```
```python
;
Weapon::Weapon(
```
```python
string
```
```python
wnam,
```
```python
int
```
```python
f):wname(wnam),force(f) {}
```
```python
int
```
```python
Weapon::getForce()
{
```
```python
return
```
```python
force;
}
```
4.main.cpp：测试函数
```python
#include <iostream>
```
```python
#include "game.h"
```
```python
using
```
```python
namespace
```
```python
std
```
```python
;
```
```python
int
```
```python
main( )
{
    Role mary(
```
```python
"Mary"
```
```python
,
```
```python
500
```
```python
,
```
```python
"TuLong"
```
```python
,
```
```python
200
```
```python
);
    Role jack(
```
```python
"Jack"
```
```python
,
```
```python
10
```
```python
,
```
```python
"YiTian"
```
```python
,
```
```python
180
```
```python
);
```
```python
cout
```
```python
<<
```
```python
"---begin---"
```
```python
<<endl;
    mary.show();
    jack.show();
```
```python
cout
```
```python
<<
```
```python
"---1st round---"
```
```python
<<endl;
    jack.attack(mary);
    mary.show();
    jack.show();
```
```python
cout
```
```python
<<
```
```python
"---2nd round---"
```
```python
<<endl;
    mary.attack(jack);
    mary.show();
    jack.show();
```
```python
cout
```
```python
<<
```
```python
"---end---"
```
```python
<<endl;
```
```python
return
```
```python
0
```
```python
;
}
```

