
# 2015级C++第10、11周程序阅读（补充） 继承和派生 - 迂者-贺利坚的专栏 - CSDN博客

2016年04月27日 15:31:44[迂者-贺利坚](https://me.csdn.net/sxhelijian)阅读数：2756


（1）
```python
#include<iostream>
```
```python
using
```
```python
namespace
```
```python
std
```
```python
;
```
```python
class
```
```python
G
{
```
```python
public
```
```python
:
```
```python
static
```
```python
int
```
```python
m;
    G( ){
```
```python
//构造函数
```
```python
m++;
```
```python
cout
```
```python
<<
```
```python
"G begins\n"
```
```python
;
    }
    ~G( ) {
```
```python
cout
```
```python
<<
```
```python
"G ends\n"
```
```python
;
        m--;
    }
};
```
```python
int
```
```python
G::m=
```
```python
0
```
```python
;
```
```python
class
```
```python
D:
```
```python
public
```
```python
G
{
```
```python
public
```
```python
:
    D( ){
```
```python
//构造函数
```
```python
m++;
```
```python
cout
```
```python
<<
```
```python
"D begins\n"
```
```python
;
    }
    ~D( ){
```
```python
cout
```
```python
<<
```
```python
"D ends\n"
```
```python
;
        m-- ;
    }
};
```
```python
int
```
```python
main( )
{
    D objg;
```
```python
cout
```
```python
<<G::m<<endl;
```
```python
return
```
```python
0
```
```python
;
}
```
（2）
```python
#include<iostream>
```
```python
using
```
```python
namespace
```
```python
std
```
```python
;
```
```python
class
```
```python
A
{
```
```python
private
```
```python
:
```
```python
int
```
```python
x;
```
```python
protected
```
```python
:
```
```python
int
```
```python
y;
```
```python
public
```
```python
:
```
```python
int
```
```python
z;
    A(
```
```python
int
```
```python
a,
```
```python
int
```
```python
b,
```
```python
int
```
```python
c)
    {
        x=a;    
        y=b;
        z=c;
    }
```
```python
int
```
```python
Getx() {
```
```python
return
```
```python
x; }
```
```python
int
```
```python
Gety() {
```
```python
return
```
```python
y; }
```
```python
void
```
```python
ShowA() {
```
```python
cout
```
```python
<<
```
```python
"x="
```
```python
<<x<<
```
```python
'\t'
```
```python
;
```
```python
cout
```
```python
<<
```
```python
"y="
```
```python
<<y<<
```
```python
'\t'
```
```python
;
```
```python
cout
```
```python
<<
```
```python
"z="
```
```python
<<z<<
```
```python
'\n'
```
```python
;
    }
};
```
```python
class
```
```python
B:
```
```python
public
```
```python
A
```
```python
//修改点（见后面阅读要求）
```
```python
{
```
```python
private
```
```python
:
```
```python
int
```
```python
m,n;
```
```python
public
```
```python
:
    B(
```
```python
int
```
```python
a,
```
```python
int
```
```python
b,
```
```python
int
```
```python
c,
```
```python
int
```
```python
d,
```
```python
int
```
```python
e):A(a,b,c)
    {
        m=d;
        n=e;
    }
```
```python
void
```
```python
Show(){
```
```python
cout
```
```python
<<
```
```python
"m="
```
```python
<<m<<
```
```python
'\t'
```
```python
<<
```
```python
"n="
```
```python
<<n<<
```
```python
'\n'
```
```python
;
```
```python
cout
```
```python
<<
```
```python
"x="
```
```python
<<Getx()<<
```
```python
'\t'
```
```python
;
```
```python
cout
```
```python
<<
```
```python
"y="
```
```python
<<y<<
```
```python
'\t'
```
```python
<<
```
```python
"z="
```
```python
<<z<<
```
```python
'\n'
```
```python
;
    }
```
```python
int
```
```python
Sum()
    {
```
```python
return
```
```python
(Getx()+y+z+m+n);
    }
};
```
```python
int
```
```python
main(){
    B b1(
```
```python
1
```
```python
,
```
```python
2
```
```python
,
```
```python
3
```
```python
,
```
```python
4
```
```python
,
```
```python
5
```
```python
);  
    b1.ShowA();
    b1.Show();
```
```python
cout
```
```python
<<
```
```python
"Sum="
```
```python
<<b1.Sum()<<
```
```python
'\n'
```
```python
;
```
```python
cout
```
```python
<<
```
```python
"x="
```
```python
<<b1.Getx()<<
```
```python
'\t'
```
```python
;
```
```python
cout
```
```python
<<
```
```python
"y="
```
```python
<<b1.Gety()<<
```
```python
'\t'
```
```python
;
```
```python
cout
```
```python
<<
```
```python
"z="
```
```python
<<b1.z<<
```
```python
'\n'
```
```python
;
```
```python
return
```
```python
0
```
```python
;
}
```
先阅读程序，写出你预想的运行结果，再记录运行结果，如果两者有差异，再读程序给出解释。
观察基类A中成员的访问权限制以及派生类B中对这些成员的访问方法。
请将class B:public A 中的public改为protected或者删除，对程序进行编译，解释出现的情况。
（3）
```python
#include <iostream>
```
```python
using
```
```python
namespace
```
```python
std
```
```python
;
```
```python
class
```
```python
Part
```
```python
//部件类
```
```python
{
```
```python
public
```
```python
:
    Part();
    Part(
```
```python
int
```
```python
i);
    ~Part();
```
```python
private
```
```python
:
```
```python
int
```
```python
val;
};
Part::Part(){
    val=
```
```python
0
```
```python
;
```
```python
cout
```
```python
<<
```
```python
"调用Part的默认构造函数:"
```
```python
<<val<<endl;
}
Part::Part(
```
```python
int
```
```python
i){
    val=i;
```
```python
cout
```
```python
<<
```
```python
"调用Part的构造函数: "
```
```python
<<val<<endl;
}
Part::~Part(){
```
```python
cout
```
```python
<<
```
```python
"调用Part的析构函数: "
```
```python
<<val<<endl;
}
```
```python
class
```
```python
Whole:
```
```python
public
```
```python
Part{
```
```python
public
```
```python
:
    Whole();
    Whole(
```
```python
int
```
```python
,
```
```python
int
```
```python
,
```
```python
int
```
```python
,
```
```python
int
```
```python
);
    ~Whole();
```
```python
private
```
```python
:
    Part one;
    Part two;
```
```python
int
```
```python
data;
};
Whole::Whole(){
    data=
```
```python
0
```
```python
;
```
```python
cout
```
```python
<<
```
```python
"调用whole的默认构造函数: "
```
```python
<<data<<endl;
}
Whole::Whole(
```
```python
int
```
```python
p,
```
```python
int
```
```python
i,
```
```python
int
```
```python
j,
```
```python
int
```
```python
k): 
    Part(p),one(j),two(i),data(k)
```
```python
//问题2
```
```python
{
```
```python
cout
```
```python
<<
```
```python
"调用whole的构造函数: "
```
```python
<<data<<endl;
}
Whole::~Whole(){
```
```python
cout
```
```python
<<
```
```python
"调用whole的析构函数: "
```
```python
<<data<<endl;
}
```
```python
void
```
```python
f(){
    Whole w1;
    Whole w2(
```
```python
1
```
```python
,
```
```python
2
```
```python
,
```
```python
3
```
```python
,
```
```python
4
```
```python
);
}
```
```python
int
```
```python
main(){
    f();
```
```python
return
```
```python
0
```
```python
;
}
```
 先分析程序的执行结果，在上机时运行程序进行对照，再通过单步执行跟踪程序的运行，达到理解基类、派生类中构造函数、析构函数执行过程的目的。
 将Whole类的构造函数（见注释//问题2）改为下面形式，请解释出现的警告信息。
```python
Whole::Whole(
```
```python
int
```
```python
p,
```
```python
int
```
```python
i,
```
```python
int
```
```python
j,
```
```python
int
```
```python
k):  Part(p),two(i),one(j),data(k)
```
```python
//问题2
```
（4）阅读程序，写出执行结果，并回答问题
```python
#include<iostream>
```
```python
using
```
```python
namespace
```
```python
std
```
```python
;
```
```python
class
```
```python
A  
{
```
```python
public
```
```python
:
```
```python
int
```
```python
n;  
};
```
```python
class
```
```python
B:
```
```python
public
```
```python
A {};
```
```python
// class B:virtual public A{};
```
```python
class
```
```python
C:
```
```python
public
```
```python
A {};
```
```python
// class C:virtual public A{};
```
```python
class
```
```python
D:
```
```python
public
```
```python
B,
```
```python
public
```
```python
C  
{
```
```python
public
```
```python
:
```
```python
int
```
```python
getn() {
```
```python
return
```
```python
B::n;}  
};
```
```python
int
```
```python
main()  
{  
   D d;  
   d.B::n=
```
```python
10
```
```python
;  
   d.C::n=
```
```python
20
```
```python
;
```
```python
cout
```
```python
<<d.getn()<<endl;
```
```python
return
```
```python
0
```
```python
;
}
```
程序执行后，运行结果是多少？
将程序中有注释的两条语句修改为注释的内容，程序的运行结果又是多少？

