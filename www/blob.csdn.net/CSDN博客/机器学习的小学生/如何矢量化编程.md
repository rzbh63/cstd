
# 如何矢量化编程 - 机器学习的小学生 - CSDN博客


2017年09月12日 18:50:34[机器学习的小学生](https://me.csdn.net/xuluhui123)阅读数：392



```python
% 定义含有三个样本的符号运算
```
```python
% d : nsample * nlabel
```
```python
% lnd : nsample * nlabel
```
```python
nlabel =
```
```python
5
```
```python
;
nsample =
```
```python
3
```
```python
;
feat_len =
```
```python
4
```
```python
;
```
```python
% lambda ： nlabel nlabel
```
```python
for
```
```python
i
```
```python
=
```
```python
1
```
```python
:nlabel
```
```python
for
```
```python
j
```
```python
=
```
```python
1
```
```python
:nlabel
        lambda(
```
```python
i
```
```python
,
```
```python
j
```
```python
) = sym(
```
```python
[
```
```python
'lambda'
```
```python
num2str(i) num2str(j)]
```
```python
,
```
```python
'real'
```
```python
);
```
```python
end
```
```python
end
```
```python
% d: nsample * nlabel
```
```python
for
```
```python
i
```
```python
=
```
```python
1
```
```python
:nsample
```
```python
for
```
```python
j
```
```python
=
```
```python
1
```
```python
:nlabel
        d(
```
```python
i
```
```python
,
```
```python
j
```
```python
) = sym(
```
```python
[
```
```python
'd'
```
```python
num2str(i) num2str(j)]
```
```python
,
```
```python
'real'
```
```python
);
```
```python
end
```
```python
end
```
```python
% lnd : nsample * nlabel
```
```python
for
```
```python
i
```
```python
=
```
```python
1
```
```python
:nsample
```
```python
for
```
```python
j
```
```python
=
```
```python
1
```
```python
:nlabel
        lnd(
```
```python
i
```
```python
,
```
```python
j
```
```python
) = sym(
```
```python
[
```
```python
'lnd'
```
```python
num2str(i) num2str(j)]
```
```python
,
```
```python
'real'
```
```python
);
```
```python
end
```
```python
end
```
```python
for
```
```python
i
```
```python
=
```
```python
1
```
```python
:nsample
```
```python
for
```
```python
j
```
```python
=
```
```python
1
```
```python
:nlabel
        lnp(
```
```python
i
```
```python
,
```
```python
j
```
```python
) = sym(
```
```python
[
```
```python
'lnp'
```
```python
num2str(i) num2str(j)]
```
```python
,
```
```python
'real'
```
```python
);
```
```python
end
```
```python
end
```
```python
for
```
```python
i
```
```python
=
```
```python
1
```
```python
:nsample
```
```python
for
```
```python
j
```
```python
=
```
```python
1
```
```python
:nlabel
        p(
```
```python
i
```
```python
,
```
```python
j
```
```python
) = sym(
```
```python
[
```
```python
'p'
```
```python
num2str(i) num2str(j)]
```
```python
,
```
```python
'real'
```
```python
);
```
```python
end
```
```python
end
```
```python
%  d .* lnd: nsample * nlabel
```
```python
%  (d.*lnd) *lambda : [nsample * nlabel] [nlabel * nlabel] ==> nample *
```
```python
%  nlabel
```
```python
%%%%%%%%%%%%%%%%%%%%%%%%%  第一项 %%%%%%%%%%%%%%%%%%%%%%%%%%
```
```python
standard_result =
```
```python
0
```
```python
;
```
```python
for
```
```python
i
```
```python
=
```
```python
1
```
```python
:nsample
```
```python
for
```
```python
j
```
```python
=
```
```python
1
```
```python
:nlabel
```
```python
for
```
```python
m =
```
```python
1
```
```python
:nlabel
            standard_result = standard_result + lambda(
```
```python
j
```
```python
,m)* d(
```
```python
i
```
```python
,
```
```python
j
```
```python
)* lnd(
```
```python
i
```
```python
,
```
```python
j
```
```python
);
```
```python
end
```
```python
end
```
```python
end
```
```python
% 版本1
```
```python
sum_lambda = sum(lambda,
```
```python
2
```
```python
);
result1 = sum(
```
```python
sum_lambda'
```
```python
*(
```
```python
d.
```
```python
*lnd)
```
```python
');
disp(simplify(result1 - standard_result));
% 版本2，版本1和版本2得到同样的结果
result1 = sum(sum(lambda'
```
```python
*(
```
```python
lnd'
```
```python
.*
```
```python
d'
```
```python
)));
```
```python
disp
```
```python
(simplify(result1 - standard_result));
```
```python
%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 第二项 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%
```
```python
standard_result =
```
```python
0
```
```python
;
```
```python
for
```
```python
i
```
```python
=
```
```python
1
```
```python
:nsample
```
```python
for
```
```python
j
```
```python
=
```
```python
1
```
```python
:nlabel
```
```python
for
```
```python
m =
```
```python
1
```
```python
:nlabel
            standard_result = standard_result + lambda(
```
```python
j
```
```python
,m)*d(
```
```python
i
```
```python
,
```
```python
j
```
```python
)* lnp(
```
```python
i
```
```python
,m);
```
```python
end
```
```python
end
```
```python
end
```
```python
result2 = lambda*
```
```python
lnp'.
```
```python
*
```
```python
d'
```
```python
;
result2 = sum(sum(result2));
```
```python
disp
```
```python
(simplify(result2 - standard_result));
```
```python
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 第三项 %%%%%%%%%%%%%%%%%%%%%%%%
```
```python
result3 = lambda*
```
```python
p'.
```
```python
*
```
```python
lnd'
```
```python
;
result3 = sum(sum(result3));
```
```python
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 第四项 %%%%%%%%%%%%%%%%%%%%%%%%
```
```python
standard_result =
```
```python
0
```
```python
;
```
```python
for
```
```python
i
```
```python
=
```
```python
1
```
```python
:nsample
```
```python
for
```
```python
j
```
```python
=
```
```python
1
```
```python
:nlabel
```
```python
for
```
```python
m =
```
```python
1
```
```python
:nlabel
            standard_result = standard_result + lambda(
```
```python
j
```
```python
,m)*p(
```
```python
i
```
```python
,m)*lnp(
```
```python
i
```
```python
,m);
```
```python
end
```
```python
end
```
```python
end
```
```python
result4 = sum(sum(lambda*(
```
```python
p.
```
```python
*lnp)
```
```python
'));
disp(simplify(result4 - standard_result));
% 四个表达式为：
result1 = sum(sum(lambda'
```
```python
*(
```
```python
lnd'
```
```python
.*
```
```python
d'
```
```python
)));
```
```python
% sum_lambda = sum(lambda,2);
```
```python
result2 = -sum(sum(lambda*
```
```python
lnp'.
```
```python
*
```
```python
d'
```
```python
));
```
```python
% nlabel * nsample
```
```python
result3 = -sum(sum(lambda*
```
```python
p'.
```
```python
*
```
```python
lnd'
```
```python
));
```
```python
% nlabel * nsample ,注意！点乘和叉乘不能交换位置。
```
```python
result4 = sum(sum(lambda*(
```
```python
p.
```
```python
*lnp)
```
```python
'));  % nlabel * nsample
result_all1 = sum(sum(lambda'
```
```python
*(
```
```python
lnd'
```
```python
.*
```
```python
d'
```
```python
) -lambda*
```
```python
lnp'.
```
```python
*
```
```python
d'
```
```python
- lambda*
```
```python
p'.
```
```python
*
```
```python
lnd'
```
```python
+ lambda*(
```
```python
p.
```
```python
*lnp)
```
```python
' ));
tresult = result1 + result2 + result3 + result4;
% 总的表达式
standard_result = 0;
for i = 1:nsample
    for j = 1:nlabel
        for m = 1:nlabel
            standard_result = standard_result + lambda(j,m) * ( (d(i,j) - p(i,m))   * (lnd(i,j) - lnp(i,m)) );
        end
    end
end
disp('
```
```python
-----------------------
```
```python
');
disp(simplify(tresult - standard_result));
disp(simplify(result_all1 - standard_result));
```

