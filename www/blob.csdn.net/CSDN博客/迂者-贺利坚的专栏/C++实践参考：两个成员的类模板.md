
# C++实践参考：两个成员的类模板 - 迂者-贺利坚的专栏 - CSDN博客

2016年05月26日 15:17:42[迂者-贺利坚](https://me.csdn.net/sxhelijian)阅读数：2744


【项目-两个成员的类模板】
设有如下的类声明：
```python
class  Test{
```
```python
public
```
```python
:
```
```python
void
```
```python
SetData1
```
```python
(
```
```python
int
```
```python
val) { data1=val; }
```
```python
void
```
```python
SetData2(
```
```python
double
```
```python
val) {data2=val: }
```
```python
int
```
```python
GetData1()  {
```
```python
return
```
```python
data1; }
```
```python
double
```
```python
GetData2() {
```
```python
return
```
```python
data2; }
```
```python
private
```
```python
:
```
```python
int
```
```python
data1;
```
```python
double
```
```python
data2;
}
```
（1）试将此类声明改为类模板声明，使得数据成员data1和data2可以是任何类型。
（2）请为该类增默认构造函数、带两个参数分别对应两个数据成员初值的构造函数，以及复制构造函数。
参考解答：
（1）试将此类声明改为类模板声明，使得数据成员data1和data2可以是任何类型。
```python
#include <iostream>
```
```python
#include <string>
```
```python
using
```
```python
namespace
```
```python
std
```
```python
;
```
```python
template
```
```python
<
```
```python
class
```
```python
T1,
```
```python
class
```
```python
T2>
```
```python
class
```
```python
Test
{
```
```python
public
```
```python
:
```
```python
void
```
```python
SetData1(T1 val)
    {
        data1=val;
    }
```
```python
void
```
```python
SetData2(T2 val)
    {
        data2=val;
    }
    T1 GetData1()
    {
```
```python
return
```
```python
data1;
    }
    T2 GetData2()
    {
```
```python
return
```
```python
data2;
    }
```
```python
private
```
```python
:
    T1 data1;
    T2 data2;
};
```
```python
int
```
```python
main()
{
    Test <
```
```python
int
```
```python
,
```
```python
double
```
```python
> t1;
    t1.SetData1(
```
```python
10
```
```python
);
    t1.SetData2(
```
```python
5.4
```
```python
);
```
```python
cout
```
```python
<<t1.GetData1()<<
```
```python
"   "
```
```python
<<t1.GetData2()<<endl;
    Test <
```
```python
char
```
```python
,
```
```python
string
```
```python
> t2;
    t2.SetData1(
```
```python
'a'
```
```python
);
    t2.SetData2(
```
```python
"China!"
```
```python
);
```
```python
cout
```
```python
<<t2.GetData1()<<
```
```python
"   "
```
```python
<<t2.GetData2()<<endl;
```
```python
return
```
```python
0
```
```python
;
}
```
（2）请为该类增默认构造函数、带两个参数分别对应两个数据成员初值的构造函数，以及复制构造函数。
```python
#include <iostream>
```
```python
#include <string>
```
```python
using
```
```python
namespace std;
```
```python
template
```
```python
<
```
```python
class
```
```python
T1
```
```python
,
```
```python
class
```
```python
T2
```
```python
>
```
```python
class
```
```python
Test
```
```python
{
public:
```
```python
Test
```
```python
()
```
```python
;
```
```python
Test
```
```python
(
```
```python
T1
```
```python
d1
```
```python
,
```
```python
T2
```
```python
d2
```
```python
)
```
```python
;
    template <
```
```python
class
```
```python
U
```
```python
,
```
```python
class
```
```python
V
```
```python
>
```
```python
Test
```
```python
(
```
```python
const
```
```python
Test
```
```python
<
```
```python
U
```
```python
,
```
```python
V
```
```python
> &
```
```python
t
```
```python
)
```
```python
;
    void
```
```python
SetData1
```
```python
(
```
```python
T1
```
```python
val
```
```python
)
```
```python
{
        data1=val;
    }
    void
```
```python
SetData2
```
```python
(
```
```python
T2
```
```python
val
```
```python
)
```
```python
{
        data2=val;
    }
```
```python
T1
```
```python
GetData1
```
```python
()
```
```python
{
        return data1;
    }
```
```python
T2
```
```python
GetData2
```
```python
()
```
```python
{
        return data2;
    }
private:
```
```python
T1
```
```python
data1;
```
```python
T2
```
```python
data2;
};
template <
```
```python
class
```
```python
T1
```
```python
,
```
```python
class
```
```python
T2
```
```python
>
```
```python
Test
```
```python
<
```
```python
T1
```
```python
,
```
```python
T2
```
```python
>::
```
```python
Test
```
```python
()
```
```python
{}
template <
```
```python
class
```
```python
T1
```
```python
,
```
```python
class
```
```python
T2
```
```python
>
```
```python
Test
```
```python
<
```
```python
T1
```
```python
,
```
```python
T2
```
```python
>::
```
```python
Test
```
```python
(
```
```python
T1
```
```python
d1
```
```python
,
```
```python
T2
```
```python
d2
```
```python
)
```
```python
:
    data1
```
```python
(
```
```python
d1
```
```python
)
```
```python
,data2
```
```python
(
```
```python
d2
```
```python
)
```
```python
{}
template <
```
```python
class
```
```python
T1
```
```python
,
```
```python
class
```
```python
T2
```
```python
> template <
```
```python
class
```
```python
U
```
```python
,
```
```python
class
```
```python
V
```
```python
>
```
```python
Test
```
```python
<
```
```python
T1
```
```python
,
```
```python
T2
```
```python
>::
```
```python
Test
```
```python
(
```
```python
const
```
```python
Test
```
```python
<
```
```python
U
```
```python
,
```
```python
V
```
```python
> &
```
```python
t
```
```python
)
```
```python
:
    data1
```
```python
(
```
```python
t
```
```python
.
```
```python
data1
```
```python
)
```
```python
,data2
```
```python
(
```
```python
t
```
```python
.
```
```python
data2
```
```python
)
```
```python
{};
int main
```
```python
()
```
```python
{
```
```python
Test
```
```python
<int,double> t1
```
```python
(10, 5.4)
```
```python
;
    cout<<t1.
```
```python
GetData1
```
```python
()
```
```python
<<"   "<<t1.
```
```python
GetData2
```
```python
()
```
```python
<<endl;
```
```python
Test
```
```python
<int,double> t2
```
```python
(
```
```python
t1
```
```python
)
```
```python
;
    cout<<t2.
```
```python
GetData1
```
```python
()
```
```python
<<"   "<<t2.
```
```python
GetData2
```
```python
()
```
```python
<<endl;
    return 0;
}
```
对于（2），我的一位学生的main函数部分如下：
```python
int
```
```python
main()
{
    Test<
```
```python
int
```
```python
,
```
```python
double
```
```python
> d(
```
```python
1
```
```python
,
```
```python
2.2
```
```python
);
    Test<
```
```python
double
```
```python
,
```
```python
int
```
```python
> dd(d);
```
```python
cout
```
```python
<<d.get_d1()<<d.get_d2();
```
```python
return
```
```python
0
```
```python
;
}
```
会在`Test<double,int> dd(d);`一句发生错误。原因是正在建立的dd，与为其初始化的d并不是同一个类型的对象（实际成员类型不同）。提示的错误是data1和data2是私有的。
将出错的这一句改为`Test<int, double> dd(d);`一切正常。想一想，是有道理的。

