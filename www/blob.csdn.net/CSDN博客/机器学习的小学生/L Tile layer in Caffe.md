
# L.Tile layer in Caffe - 机器学习的小学生 - CSDN博客


2018年11月13日 20:31:02[机器学习的小学生](https://me.csdn.net/xuluhui123)阅读数：123


test_tile_layer.py
```python
#coding=gbk
```
```python
import
```
```python
numpy
```
```python
as
```
```python
np
```
```python
import
```
```python
caffe
```
```python
# weight_file can be any prtrained models
```
```python
weight_file
```
```python
=
```
```python
'../attention_network/snapshots_aflw_vgg16_klLoss_finetune_attention1/cross1/vgg_iter_10000.caffemodel'
```
```python
deploy_file
```
```python
=
```
```python
'deploy.prototxt'
```
```python
net
```
```python
=
```
```python
caffe
```
```python
.
```
```python
Net
```
```python
(
```
```python
deploy_file
```
```python
,
```
```python
weight_file
```
```python
,
```
```python
caffe
```
```python
.
```
```python
TEST
```
```python
)
```
```python
arr0
```
```python
=
```
```python
np
```
```python
.
```
```python
array
```
```python
(
```
```python
[
```
```python
[
```
```python
11
```
```python
,
```
```python
12
```
```python
,
```
```python
13
```
```python
]
```
```python
,
```
```python
[
```
```python
21
```
```python
,
```
```python
22
```
```python
,
```
```python
23
```
```python
]
```
```python
]
```
```python
)
```
```python
# w11 w12 w13 for sample1, w21 w22 w23 for sample2
```
```python
print
```
```python
(
```
```python
arr0
```
```python
.
```
```python
shape
```
```python
)
```
```python
# (2,3),2 stand for sample, 3 stand for channel
```
```python
print
```
```python
(
```
```python
arr0
```
```python
)
```
```python
arr
```
```python
=
```
```python
np
```
```python
.
```
```python
reshape
```
```python
(
```
```python
arr0
```
```python
,
```
```python
(
```
```python
arr0
```
```python
.
```
```python
shape
```
```python
[
```
```python
0
```
```python
]
```
```python
,
```
```python
arr0
```
```python
.
```
```python
shape
```
```python
[
```
```python
1
```
```python
]
```
```python
,
```
```python
1
```
```python
,
```
```python
1
```
```python
)
```
```python
)
```
```python
net
```
```python
.
```
```python
blobs
```
```python
[
```
```python
'Features'
```
```python
]
```
```python
.
```
```python
data
```
```python
[
```
```python
.
```
```python
.
```
```python
.
```
```python
]
```
```python
=
```
```python
arr 
net
```
```python
.
```
```python
forward
```
```python
(
```
```python
)
```
```python
feat
```
```python
=
```
```python
net
```
```python
.
```
```python
blobs
```
```python
[
```
```python
'Features'
```
```python
]
```
```python
.
```
```python
data
tile1
```
```python
=
```
```python
net
```
```python
.
```
```python
blobs
```
```python
[
```
```python
'tile1'
```
```python
]
```
```python
.
```
```python
data
tile2
```
```python
=
```
```python
net
```
```python
.
```
```python
blobs
```
```python
[
```
```python
'tile2'
```
```python
]
```
```python
.
```
```python
data
```
```python
print
```
```python
(
```
```python
'feat: '
```
```python
,
```
```python
feat
```
```python
.
```
```python
shape
```
```python
)
```
```python
print
```
```python
(
```
```python
'tile1: '
```
```python
,
```
```python
tile1
```
```python
.
```
```python
shape
```
```python
)
```
```python
print
```
```python
(
```
```python
'tile2: '
```
```python
,
```
```python
tile2
```
```python
.
```
```python
shape
```
```python
)
```
```python
# check values, check tiles
```
```python
print
```
```python
(
```
```python
tile2
```
```python
[
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
:
```
```python
,
```
```python
:
```
```python
]
```
```python
)
```
```python
# all same values with arr0[0,0]
```
deploy.prototxt
```python
layer
```
```python
{
```
```python
name
```
```python
:
```
```python
"data"
```
```python
type
```
```python
:
```
```python
"Input"
```
```python
top
```
```python
:
```
```python
"Features"
```
```python
input_param
```
```python
{
```
```python
shape
```
```python
{
```
```python
dim
```
```python
:
```
```python
2
```
```python
dim
```
```python
:
```
```python
3
```
```python
dim
```
```python
:
```
```python
1
```
```python
dim
```
```python
:
```
```python
1
```
```python
}
```
```python
}
```
```python
}
```
```python
layer
```
```python
{
```
```python
name
```
```python
:
```
```python
"tile1"
```
```python
type
```
```python
:
```
```python
"Tile"
```
```python
bottom
```
```python
:
```
```python
"Features"
```
```python
top
```
```python
:
```
```python
"tile1"
```
```python
tile_param
```
```python
{
```
```python
axis
```
```python
:
```
```python
2
```
```python
tiles
```
```python
:
```
```python
2
```
```python
}
```
```python
}
```
```python
layer
```
```python
{
```
```python
name
```
```python
:
```
```python
"tile1"
```
```python
type
```
```python
:
```
```python
"Tile"
```
```python
bottom
```
```python
:
```
```python
"tile1"
```
```python
top
```
```python
:
```
```python
"tile2"
```
```python
tile_param
```
```python
{
```
```python
axis
```
```python
:
```
```python
3
```
```python
tiles
```
```python
:
```
```python
2
```
```python
}
```
```python
}
```

