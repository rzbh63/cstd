
# SQL语句关联查询，UNION ALL用法，结果中查询 - jerrygaoling的博客 - CSDN博客


2018年05月09日 14:42:53[jerrygaoling](https://me.csdn.net/jerrygaoling)阅读数：736


# SQL语句的关联查询
从多个关联性的表中查询数据
例如有三个表格，表结构相同：`rls`,`mlx`,`yjx`三个表。
![这里写图片描述](https://img-blog.csdn.net/20180509143934322?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2plcnJ5Z2FvbGluZw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)
![这里写图片描述](https://img-blog.csdn.net/20180509143947980?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2plcnJ5Z2FvbGluZw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)
在单一的查询语句之后加上`UNION ALL`
## SQL UNION ALL 语法
```python
SELECT
```
```python
column_name(s)
```
```python
FROM
```
```python
table_name1
```
```python
UNION
```
```python
ALL
```
```python
SELECT
```
```python
column_name(s)
```
```python
FROM
```
```python
table_name2
```
UNION 内部的 SELECT 语句必须拥有相同数量的列。列也必须拥有相似的数据类型。同时，每条 SELECT 语句中的列的顺序必须相同。
另外，UNION 结果集中的列名总是等于 UNION 中第一个 SELECT 语句中的列名。
```python
SELECT
```
```python
*
```
```python
FROM
```
```python
rls
```
```python
WHERE
```
```python
lei
```
```python
LIKE
```
```python
'%医疗机构%'
```
```python
UNION
```
```python
ALL
```
```python
SELECT
```
```python
*
```
```python
FROM
```
```python
mlx
```
```python
WHERE
```
```python
lei
```
```python
LIKE
```
```python
'%医疗机构%'
```
```python
UNION
```
```python
ALL
```
```python
SELECT
```
```python
*
```
```python
FROM
```
```python
yjx
```
```python
WHERE
```
```python
lei
```
```python
LIKE
```
```python
'%医疗机构%'
```
如上，将查询出三张表中的符合条件的数据。
![这里写图片描述](https://img-blog.csdn.net/20180509144020524?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2plcnJ5Z2FvbGluZw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)
## 查询结果中继续查询
在实际的使用过程中，会遇到查询出粗略的结果后，需要进一步的查询结果。
可以使用括号`（select 加 初始查询语句）`套嵌一个查询结果。
语法格式：
```python
select
```
```python
columnlist...
```
```python
from
```
```python
(
```
```python
select
```
```python
子句) table_name
```
```python
where
```
```python
...
```
注意：`）`后面需要给查询结果指定一个名称 table_name，名称不要与其他列名称相同，增加SQL语句的可读性。
```python
SELECT
```
```python
*
```
```python
FROM
```
```python
(
```
```python
SELECT
```
```python
*
```
```python
FROM
```
```python
rls
```
```python
WHERE
```
```python
lei
```
```python
LIKE
```
```python
'%医疗机构%'
```
```python
UNION
```
```python
ALL
```
```python
SELECT
```
```python
*
```
```python
FROM
```
```python
mlx
```
```python
WHERE
```
```python
lei
```
```python
LIKE
```
```python
'%医疗机构%'
```
```python
UNION
```
```python
ALL
```
```python
SELECT
```
```python
*
```
```python
FROM
```
```python
yjx
```
```python
WHERE
```
```python
lei
```
```python
LIKE
```
```python
'%医疗机构%'
```
```python
) temp_a
```
```python
WHERE
```
```python
Unit
```
```python
LIKE
```
```python
'%盈江县%'
```
此时，将在以上的查询结果中，继续查询符合条件的结果。
![这里写图片描述](https://img-blog.csdn.net/20180509144042110?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2plcnJ5Z2FvbGluZw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

