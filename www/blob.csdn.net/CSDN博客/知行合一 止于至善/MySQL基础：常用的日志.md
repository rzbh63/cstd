
# MySQL基础：常用的日志 - 知行合一 止于至善 - CSDN博客

2019年03月13日 19:58:54[liumiaocn](https://me.csdn.net/liumiaocn)阅读数：56标签：[mysql																](https://so.csdn.net/so/search/s.do?q=mysql&t=blog)[日志																](https://so.csdn.net/so/search/s.do?q=日志&t=blog)[慢查询																](https://so.csdn.net/so/search/s.do?q=慢查询&t=blog)[错误日志																](https://so.csdn.net/so/search/s.do?q=错误日志&t=blog)[
							](https://so.csdn.net/so/search/s.do?q=慢查询&t=blog)[
																					](https://so.csdn.net/so/search/s.do?q=日志&t=blog)个人分类：[数据库																](https://blog.csdn.net/liumiaocn/article/category/6328292)
[
																								](https://so.csdn.net/so/search/s.do?q=日志&t=blog)
[
				](https://so.csdn.net/so/search/s.do?q=mysql&t=blog)
[
			](https://so.csdn.net/so/search/s.do?q=mysql&t=blog)

![在这里插入图片描述](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
本文对MySQL常用日志进行整理，通过有效利用这些日志信息，在实际的使用时能够提高效率。
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
# 错误日志
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)错误日志记录了Mysql运行过程中的相关错误信息以及启动和关闭的详细信息。默认情况下设定是关闭的。错误信息输出到标准错误，开启的开关是：–log-error选项，设定方法如下所示：
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
> 设定方法：–log-error=错误日志文件FULL PATH
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)结合flush logs命令来生成新的日志文件，同时旧的日志信息会进行备份
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
# 更新日志
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)类似binlog的功能，在MySQL5后不再支持，此处不再介绍。
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
# 查询日志
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)查询日志用于记录所有的查询。默认的查询日志文件名称为：hostname.log. 开启的开关是：–log选项，设定方法如下所示：
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
> 设定方法：–log=查询日志文件FULL PATH
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)注意事项：记录所有的查询，量较大，开启后对性能会产生影响，一般只在确认或者跟踪时暂时打开。需要注意关闭。
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
# 慢查询日志
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)MySQL提供查询执行时间较长的日志信息，默认为关闭状态，默认的慢查询日志文件为hostname-slow.log，默认的目录为数据目录。开启的开关是：–log-slow-queries选项，设定方法如下所示：
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
> 设定方法：log-slow-queries=慢查询日志FULL PATH
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)另外可以结合慢查询日志分析工具：mysqldumpslow以确认可能存在的性能问题。实际上你仔细确认就会发现此工具无非就是一个perl脚本，对日志信息进行统计和展示而已。
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
## 慢日志使用示例：打开
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
```python
mysql
```
```python
>
```
```python
set
```
```python
global
```
```python
slow_query_log
```
```python
=
```
```python
1
```
```python
;
```
```python
Query OK
```
```python
,
```
```python
0
```
```python
rows
```
```python
affected
```
```python
(
```
```python
0.05
```
```python
sec
```
```python
)
```
```python
mysql
```
```python
>
```
```python
show
```
```python
variables
```
```python
like
```
```python
'slow_query_log'
```
```python
;
```
```python
+
```
```python
----------------+-------+
```
```python
|
```
```python
Variable_name
```
```python
|
```
```python
Value
```
```python
|
```
```python
+
```
```python
----------------+-------+
```
```python
|
```
```python
slow_query_log
```
```python
|
```
```python
ON
```
```python
|
```
```python
+
```
```python
----------------+-------+
```
```python
1
```
```python
row
```
```python
in
```
```python
set
```
```python
(
```
```python
0.00
```
```python
sec
```
```python
)
```
```python
mysql
```
```python
>
```
```python
show
```
```python
variables
```
```python
like
```
```python
'slow_query_log%'
```
```python
;
```
```python
+
```
```python
---------------------+--------------------------------------+
```
```python
|
```
```python
Variable_name
```
```python
|
```
```python
Value
```
```python
|
```
```python
+
```
```python
---------------------+--------------------------------------+
```
```python
|
```
```python
slow_query_log
```
```python
|
```
```python
ON
```
```python
|
```
```python
|
```
```python
slow_query_log_file
```
```python
|
```
```python
/
```
```python
var
```
```python
/
```
```python
lib
```
```python
/
```
```python
mysql
```
```python
/
```
```python
0174
```
```python
af5bd765
```
```python
-
```
```python
slow
```
```python
.
```
```python
log
```
```python
|
```
```python
+
```
```python
---------------------+--------------------------------------+
```
```python
2
```
```python
rows
```
```python
in
```
```python
set
```
```python
(
```
```python
0.00
```
```python
sec
```
```python
)
```
```python
mysql
```
```python
>
```
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
## 慢日志使用示例：设定阈值
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
```python
mysql
```
```python
>
```
```python
set
```
```python
global
```
```python
long_query_time
```
```python
=
```
```python
0.1
```
```python
;
```
```python
Query OK
```
```python
,
```
```python
0
```
```python
rows
```
```python
affected
```
```python
(
```
```python
0.00
```
```python
sec
```
```python
)
```
```python
mysql
```
```python
>
```
```python
show
```
```python
variables
```
```python
like
```
```python
'long_query_time'
```
```python
;
```
```python
+
```
```python
-----------------+-----------+
```
```python
|
```
```python
Variable_name
```
```python
|
```
```python
Value
```
```python
|
```
```python
+
```
```python
-----------------+-----------+
```
```python
|
```
```python
long_query_time
```
```python
|
```
```python
10.000000
```
```python
|
```
```python
+
```
```python
-----------------+-----------+
```
```python
1
```
```python
row
```
```python
in
```
```python
set
```
```python
(
```
```python
0.01
```
```python
sec
```
```python
)
```
```python
mysql
```
```python
>
```
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)但是不用担心，只是在当前session的显示的问题，退出此mysql的控制台，然后重新进入，再次确认会发现实际已经设定了
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
```python
mysql
```
```python
>
```
```python
show
```
```python
variables
```
```python
like
```
```python
'long_query_time'
```
```python
;
```
```python
+
```
```python
-----------------+----------+
```
```python
|
```
```python
Variable_name
```
```python
|
```
```python
Value
```
```python
|
```
```python
+
```
```python
-----------------+----------+
```
```python
|
```
```python
long_query_time
```
```python
|
```
```python
0.100000
```
```python
|
```
```python
+
```
```python
-----------------+----------+
```
```python
1
```
```python
row
```
```python
in
```
```python
set
```
```python
(
```
```python
0.00
```
```python
sec
```
```python
)
```
```python
mysql
```
```python
>
```
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
## 慢日志使用示例：关闭
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
```python
mysql
```
```python
>
```
```python
set
```
```python
global
```
```python
slow_query_log
```
```python
=
```
```python
0
```
```python
;
```
```python
Query OK
```
```python
,
```
```python
0
```
```python
rows
```
```python
affected
```
```python
(
```
```python
0.00
```
```python
sec
```
```python
)
```
```python
mysql
```
```python
>
```
```python
show
```
```python
variables
```
```python
like
```
```python
'slow_query_log%'
```
```python
;
```
```python
+
```
```python
---------------------+--------------------------------------+
```
```python
|
```
```python
Variable_name
```
```python
|
```
```python
Value
```
```python
|
```
```python
+
```
```python
---------------------+--------------------------------------+
```
```python
|
```
```python
slow_query_log
```
```python
|
```
```python
OFF
```
```python
|
```
```python
|
```
```python
slow_query_log_file
```
```python
|
```
```python
/
```
```python
var
```
```python
/
```
```python
lib
```
```python
/
```
```python
mysql
```
```python
/
```
```python
0174
```
```python
af5bd765
```
```python
-
```
```python
slow
```
```python
.
```
```python
log
```
```python
|
```
```python
+
```
```python
---------------------+--------------------------------------+
```
```python
2
```
```python
rows
```
```python
in
```
```python
set
```
```python
(
```
```python
0.01
```
```python
sec
```
```python
)
```
```python
mysql
```
```python
>
```
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
## log_queries_not_using_indexes
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)log_queries_not_using_indexes设定为ON表示没有使用索引进行查询的都会被记录下来。
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
```python
mysql
```
```python
>
```
```python
show
```
```python
variables
```
```python
like
```
```python
'log_queries_not_using_indexes'
```
```python
;
```
```python
+
```
```python
-------------------------------+-------+
```
```python
|
```
```python
Variable_name
```
```python
|
```
```python
Value
```
```python
|
```
```python
+
```
```python
-------------------------------+-------+
```
```python
|
```
```python
log_queries_not_using_indexes
```
```python
|
```
```python
OFF
```
```python
|
```
```python
+
```
```python
-------------------------------+-------+
```
```python
1
```
```python
row
```
```python
in
```
```python
set
```
```python
(
```
```python
0.01
```
```python
sec
```
```python
)
```
```python
mysql
```
```python
>
```
[
            ](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)

