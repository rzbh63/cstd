
# IPv6 地址数量有多少，能够分配到地球上的每一粒尘埃吗 - 阳光岛主 - CSDN博客

2018年06月30日 08:57:55[阳光岛主](https://me.csdn.net/sunboy_2050)阅读数：2960


人工智能、大数据、云计算、物联网，其实都是和我们未来的生活息息相关，但是，这一切的基础设施都需要一个位置身份标识符：IPv4 或 IPv6
有了身份标识符 IPv4 或 IPv6，才能构建我们想象中的下一个时代。然而IPv6的中国之路却异常尴尬，近20的发展，IPv6被人们反复提及，但又不断地被淹没和遗忘。
本文原文转自米扑博客：[IPv6 地址数量有多少，能够分配到地球上的每一粒尘埃吗](https://blog.mimvp.com/article/24704.html)
近日，中共中央办公厅、国务院办公厅印发了《[推进互联网协议第六版（IPv6）规模部署行动计划](http://www.gov.cn/zhengce/2017-11/26/content_5242389.htm)》正式终结了IPv6的尴尬。
20年的“原地踏步”到“全球领先”，中国的IPv6要想加速跑，必须拥有“魔鬼的步伐”，当然绝非“摩擦，摩擦”这么简单，而是一个循序渐进式的飞跃。
为了让“魔鬼的步伐”更有力，下一代互联网国家工程中心双剑出鞘，在中国首次架设IPv6根服务器，并面向公众免费提供DNS服务。
**IPv6**
地址长度：128位
地址数量：2^128（约3.4×10^38）
**IPv4**
地址长度：32位
地址数量：2^32（约4×10^9）
**往事不堪：我国IPv6“起大早，赶晚集”**
TCP/IP协议是互联网发展的基石，其中IP是网络层协议，规范互联网中分组信息的交换和选路。目前采用的IPV4协议地址长度为32位，总数约43亿个IPv4地址已分配殆尽。
在当时，“40亿空间已经大得不得了。没想到互联网急剧发展，人们开始意识到，这个数量级并不能满足互联网飞速发展的需求”。中国工程院院士、清华大学教授吴建平说。
为了修正IPv4的不足，IPv6被寄予厚望。“**IPv6的地址空间扩大到2的128次方（****[米扑博客](https://blog.mimvp.com/)****注：3.4*10^38****）。这个空间大到无法想象，也就是说，地球上每一平方米，都可以有10的26次方的地址，甚至可以分配地址到空中的尘埃**。”吴建平说。
对于以“万物互联”为目标的物联网建设来说,这意味着所有想要连上网的物体都能被分配到IP地址。可以说，IPv6将成为下一代人类智能生活的枢纽工程。
TCP/IP协议共同开发者、被誉为“互联网之父”之一的文顿·瑟夫博士表示：“IPv4是实验网络，IPv6网络是未来发展的必由之路。”
然而，IPv6这条通往未来的必由之路在中国竟是“起了大早，赶了晚集”！
数据显示，在IPv6用户比例上，美国是第三名，比利时是第一名，两者这一比例都达到了30%到50%，日本也有15%的用户，基础设施比较落后的印度也有11%的用户，而中国排第52名，只有7%的用户。
“截至2017年6月底，我们固网的网民数是7.51亿，移动互联网用户7.24亿，但我国的IPv4地址只有3.3845亿，平均每个固网网民人均IPv4地址是0.45个，半个都不到。”中国工程院院士邬贺铨表示。
邬贺铨指出，“实际上，中国是最需要IPv6的国家，也是全球最早开展Ipv6及下一代互联网技术研究、标准制定、应用研发和规模商用的国家之一，首创以纯IPv6建成了当时全球最大的IPv6网络。但是截至今年7月数据显示，IPv6用户占网络用户之比到56%左右了，美国也到了30%多，中国是最需要IPv6的，但中国的IPv6占比还不到0.3%。”
谈到我国IPv6发展为何起了大早，赶了晚集，邬贺铨分析有5大原因：
1）落入了私有地址的陷阱难以自拔；
2）缺乏明确的市场导向和政府应用先行意识；
3）应用和网站向IPv6迁移严重滞后拖后腿；
4）一些误解和干扰影响了国家发展IPv6战略的执行；
5）将IPv6与网络安全对立，过分担心IPv6的内容过渡困难，举棋不定。
**加速的现在：需要“魔鬼步伐”**
1998年，CERNET（中国教育和科研计算机网）首次在中国引进IPv6。实际上，IPv6在中国的发展，已经接近20个年头。这期间，IPv6被人们反复提及，但是又不断地被淹没和遗忘。
近日，中共中央办公厅、国务院办公厅近日印发了《[推进互联网协议第六版（IPv6）规模部署行动计划](http://www.gov.cn/zhengce/2017-11/26/content_5242389.htm)》（下称计划），政府的一纸公文正式终结了IPv6的尴尬状态。
计划提出要用5到10年时间，形成下一代互联网自主技术体系和产业生态，建成全球最大规模的IPv6商业应用网络，实现下一代互联网在经济社会各领域深度融合应用，并成为全球下一代互联网发展的重要主导力量。
同时，计划提出，到2018年末，中国IPv6活跃用户数将达到2亿，在互联网用户中的占比不低于20%，国内用户量排名前50位的商业网站全面支持IPv6；到2020年末，IPv6活跃用户数超过5亿；到2025年末，网络、应用、终端全面支持IPv6。
从“赶晚集”到“全面领跑”，中国的IPv6要想加速跑，必须拥有“魔鬼的步伐”，当然绝非“摩擦，摩擦”这么简单，而是一个循序渐进式的飞跃。
“明年年底，要形成良性的思想驱动环境，IPv6的活跃用户数要达到2个亿，在互联网用户的占比不低于20%；到2020年底，IPv6的活跃用户数要超过5个亿，占比要超过50%，新增的网络地址不允许再使用私有的IPv4地址。到2025年底，我们国家IPv6的网络规模、用户规模、流量规模位居世界第一位，网络应用终端全面支持IPv6，全面完成向下一代的互联网的平滑演进升级，形成全球领先的下一代互联网技术产业体系。”
下一代互联网国家工程中心主任刘东在接受采访时指出，国家政策对于IPv6的统筹部署已经明确，最关键的是产业各界要停止“观望”。“IPv6对于企业来说不是成本，而应该是投资，会带来效益，IPv6与大数据、物联网、云计算等的应用更是息息相关。企业如果现在还不顺势而为，很可能丧失发展先机。”
在2017年至2018年的重点工作中，计划明确提出要开展LTE网络端到端IPv6业务承载能力建设，推动LTE网络、业务及终端全面支持IPv6，移动互联网IPv6用户规模不少于5000万户。此外，还涉及骨干网IPv6互联互通、城域网和接入网改造、内容分发网络和云服务平台IPv6升级等方面。
**针对IPv6发展的原则，邬贺铨提出了四点建议：**
第一是统筹规划、重点突破，着力弥补IPv6应用的短板，实现技术产业网络应用的协同推进。
第二是政府引导、企业主导，加强政府的统筹协调、扶持和应用引领，优化发展环境，强调发挥企业在IPv6里的主体作用，激发市场需求和企业的内生动力。
第三是创新发展保障安全，把发展跟安全同时推动。
第四是注重市场、汇聚民生，让互联网发展汇集亿万人民。
**未来已来：“双剑”已出鞘**
人工智能、大数据、云计算、物联网，其实都是和我们未来的生活息息相关，但是，这一切的基础设施就是IPv6。
有了它，才能构建我们想象中的下一个时代，同样的，要想实现这些，我们必须成为共建者，而不是单纯的使用者。
IPv6的规模化部署首先需要网络设备和软件的支持，包括路由器、交换机、服务器等；
其次是基础设施改造，包括数据中心（IDC）、内容分发网络（CDN）等；
最后是互联网内容服务商包括APP等也需要支持IPv6。
其中，除了实力雄厚的BAT等互联网巨头外，一些中小互联网公司也需要第三方解决方案公司来提供IPv6转化的解决方案，蕴含大量的商机。
此前，在下一代互联网示范工程（CNGI）中，运营商、设备商、应用服务提供商大规模参与，对IPv4到IPv6的演进起到了比较好的验证作用。
为了促进IPv6的发展，下一代互联网国家工程中心双剑出鞘，在中国首次架设IPv6根服务器，并面向公众免费提供DNS服务。
在互联网发展中，根服务器即根域名服务器地位重要，主要用来管理互联网的主目录，被称为互联网的“中枢神经”。
由下一代互联网国家工程中心牵头发起“雪人计划”，已在全球完成25台IPv6根服务器架设，其中1台主根服务器和3台辅根服务器设在中国，打破了我国过去没有根服务器的境况。
最新统计数据显示，截至2017年8月，25台IPv6根服务器在全球范围内已累计收到2391个递归服务器的查询，主要分布在欧洲、北美和亚太地区，一定程度上反映出全球IPv6网络部署和用户发展情况。从流量看，IPv6根服务器每日收到查询近1.2亿次。
作为网络基础设施的重要组成部分，域名系统（DNS）因其“特殊性”，在过去30年间频繁被攻击，顶级域故障、DNS劫持、大规模DNS攻击等事件时有发生，给全球互联网产业带来严重影响。而当前，提升用户体验、保障网络安全的大部分公共DNS均仅面向IPv4，这也是IPv6用户不断诟病的问题之一。
此外，为全面助力IPv6的发展，下一代互联网工程中心依托自主研发的高性能IPv6 DNS系统，面向公众免费提供DNS服务，首选DNS：240c::6666，备用DNS：240c::6644
本次推出的IPv6公共DNS以精准快速、安全稳定、DNS64三大特性来保障IPv6网络的高效和稳定。
据介绍，工程中心在北京、广州、兰州、武汉、芝加哥、弗里蒙特、伦敦、法兰克福等全球众多地区部署递归节点。基于IPv6 BGP Anycast方式部署，让用户可以实现就近访问，使得域名在解析到根服务器的访问时延明显缩小，在速度上可以得到重要保障。不仅如此，IPv6公共DNS将通过主动同步com/net域名、缓存热点域名等举措，减少递归过程，以最大程度实现快速应答。
在安全性方面，IPv6公共DNS支持单IP解析限速，通过安全限速可有效拦截恶意攻击等，用户的访问安全将受到实时保护。同时，IPv6公共DNS支持DNSSEC安全解析验证，用户在访问过程中无任何劫持，既不会出现恶意跳转，也不会有强制性广告出现。
同时为方便IPv6用户访问IPv4相关服务的切实需求，IPv6公共DNS特别推出DNS64解析服务，即通过该解析系统同样可以响应纯IPv6用户对纯IPv4网络资源的解析请求，这也在一定程度上避免了IPv4至IPv6过渡期所带来的内容尚未完全改造升级的困扰。
刘东表示，“早发展、快发展IPv6网络是我国争取全球互联网主动权的关键举措。而公共基础设施的建设和提升，是IPv6大规模部署的先决条件。本次IPv6公共DNS面向全球免费服务，不仅为全球IPv6用户提供了一个可以速度更快安全性更高的选择，也希望可以对我国全面推进IPv6下一代互联网部署起到促进作用。”
**IPv6 头结构**
![](https://blog.mimvp.com/wp-content/uploads/2018/06/ipv6-li-jie-de-shi-ge-wu-qu-01.png)
|版本号|表示协议版本．值为6|
|流量等级|主要用于QoS|
|流标签|用来标识同一个流里面的报文|
|载荷长度|表明该IPv6包头部后包含的字节数，包含扩展头部|
|下一报头|该字段用来指明报头后接的报文头部的类型，若存在扩展头，表示第一个扩展头的类型，否则表示其上层协议的类型，它是IPv6各种功能的核心实现方法|
|跳数限制|该字段类似于IPv4中的TTL，每次转发跳数减一，该字段达到0时包将会被丢弃|
|源地址|标识该报文的来源地址|
|目的地址|标识该报文的目的地址|
**IPv6 扩展头部**
IPv6报文中不再有“选项”字段，而是通过“下一报头”字段配合IPv6扩展报头来实现选项的功能。
使用扩展头时，将在IPv6报文下一报头字段表明首个扩展报头的类型，再根据该类型对扩展报头进行读取与处理。
每个扩展报头同样包含下一报头字段，若接下来有其他扩展报头，即在该字段中继续标明接下来的扩展报头的类型，从而达到添加连续多个扩展报头的目的。
在最后一个扩展报头的下一报头字段中，则标明该报文上层协议的类型，用以读取上层协议数据![](https://blog.mimvp.com/wp-content/uploads/2018/06/ipv6-li-jie-de-shi-ge-wu-qu-02.png)
**IPv6 表示方法**
IPv6的地址长度为128bit，是IPv4地址长度的4倍。
于是IPv4点分十进制格式不再适用，采用十六进制表示。
IPv6有3种表示方法：
**一、冒分十六进制表示法**
格式为X:X:X:X:X:X:X:X，其中每个X表示地址中的16b，以十六进制表示，例如：
ABCD:EF01:2345:6789:ABCD:EF01:2345:6789
这种表示法中，每个X的前导0是可以省略的，例如：
2001:0DB8:0000:0023:0008:0800:200C:417A→ 2001:DB8:0:23:8:800:200C:417A
**二、0位压缩表示法**
在某些情况下，一个IPv6地址中问可能包含很长的一段0，可以把连续的一段0压缩为“::”
但为保证地址解析的唯一性，地址中”::”只能出现一次，例如：
FF01:0:0:0:0:0:0:1101 → FF01::1101
0:0:0:0:0:0:0:1 →::1
0:0:0:0:0:0:0:0 →::
**三、内嵌IPv4地址表示法**
为了实现IPv4-IPv6互通，IPv4地址会嵌入IPv6地址中，此时地址常表示为：
X:X:X:X:X:X:d.d.d.d
前96b采用冒分十六进制表示，而最后32b地址则使用IPv4的点分十进制表示，
例如
::192.168.0.1
::FFFF:192.168.0.1
就是两个典型的例子，注意在前96b中，压缩0位的方法依旧适用

**IPv4**
IPv4，IP地址分成了A类、B类、C类、C类、E类，如下图所示：
![](https://blog.mimvp.com/wp-content/uploads/2016/05/ip-address-and-subnet-mask-01.png)
**IP地址数量**
截至2017年12月，我国IPv6地址数量为23430块/32，年增长10.6%
全球 IPv4 地址数已于2011年2月分配完毕，全球IPv4总地址 2^32 大约40亿个，
其中，需除去一些保留A、B、C段，如 10.0.0.0、172.16.0.0-172.31.0.0、172.168.0.0 、 192.168.0.0
自2011年开始我国IPv4地址总数基本维持不变，截至2017年12月，共计有33870万个，全球占比 3.387/40 = 8.468%
数据来自于：[2018年中国互联网络发展状况统计报告](https://blog.mimvp.com/article/23938.html)
IP个数查询：[https://neo.quadranet.com/utilities/ip](https://neo.quadranet.com/utilities/ip)
IPv6测试：[http://test-ipv6.com](http://test-ipv6.com/)
米扑代理：[https://proxy.mimvp.com](https://proxy.mimvp.com/)


