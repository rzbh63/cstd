
# 商用无人机的飞行感知技术 - 雷锋网 - CSDN博客


2016年11月28日 17:59:27[leiphone](https://me.csdn.net/leiphone)阅读数：1881


导语：本文内容来自领航高科（LHUAS）研发部工程师周鹏跃在雷锋网硬创公开课的分享，由雷锋网旗下栏目“新智造”整理。

编者按：本文内容来自领航高科（LHUAS）研发部工程师周鹏跃在雷锋网(公众号：雷锋网)硬创公开课的分享，由雷锋网旗下栏目“新智造”整理。
![商用无人机的飞行感知技术丨硬创公开课](http://static.leiphone.com/uploads/new/article/740_740/201611/583567e2375d4.jpg?imageMogr2/format/jpg/quality/90)
周鹏跃
[无人机](http://www.leiphone.com/news/201504/Bhh5ttIauUCQeICm.html)的飞行感知技术主要用作两个用途，其一是提供给飞行控制系统，由于飞行控制系统的主要功能是控制飞机达到期望姿态和空间位置，所以这部分的感知技术主要测量飞机运动状态相关的物理量，涉及的模块包括陀螺仪、加速度计、磁罗盘、气压计、GNSS模块以及光流模块等。另一个用途是提供给无人机的自主导航系统，也就是路径和避障规划系统，所以需要感知周围环境状态，比如障碍物的位置，相关的模块包括测距模块以及物体检测、追踪模块等。
## 机体运动状态感知
**陀螺仪**
目前商用无人机普遍使用的是MEMS技术的陀螺仪，因为它的体积小，价格便宜，可以封装为IC的形式。MEMS式陀螺仪常用来测量机体绕自身轴旋转的角速率，常用的型号有6050A（Invensense），ADXRS290（ADI），衡量陀螺仪性能的指标包括测量范围(量程)、灵敏度、稳定性（漂移）以及信噪比等。
![商用无人机的飞行感知技术丨硬创公开课](http://static.leiphone.com/uploads/new/article/740_740/201611/58356c4ce1981.png?imageMogr2/format/jpg/quality/90)
上面是一个陀螺仪温度漂移测试结果图，测试的环境是从25℃升温至50℃，整个过程保持陀螺仪静止不动，陀螺仪的准确输出应该是一个固定的数值。但从结果来看，两款传感器的实际输出都受到温度变化影响。相比而言，ADXRS290（ADI）的输出数值变化幅度较小，基本上在0.5左右。
**加速度计**
加速度计测量的是机体运动的线加速度，但由于地球引力，测量值中还会包含重力加速度分量，在某些使用情况下需要把这部分减去。常用的MEMS加速度计传感器型号有6050A（Invensense）和ADXL350（ADI）。部分传感器生产商为了提高芯片集成度，会将陀螺仪和加速度计封装在一起，称为六轴传感器，例如6050A（Invensense）。
**磁罗盘**
磁罗盘测量的物理量是地球磁场强度沿机体轴的分量，并依此计算出机体的航向角。常用的MEMS磁罗盘传感器型号有HMC5983L（Honeywell）和QMC5883L（矽睿），两者性能相近，其中前者目前已经停产。磁罗盘主要的性能参数包括灵敏度、稳定性（漂移）等。
**气压计**
气压计测量的物理量是大气压值，根据该数值可计算出绝对海拔高度。常用的气压计传感器型号包括MS5611（MEAS）、MS5607（MEAS）以及BMP180（Bosch）。气压计在使用过程中存在的问题是，在近地面飞行时，“地面效应”的存在会导致飞机周围气体的气压分布与静止状态下的大气不同，使得无法用气压计来测算出高度。通常的解决办法是在起飞或降落时使用其他传感器，比如超声波传感器或激光测距仪。
**GNSS模块**
GNSS模块测量的物理量相对比较丰富，主要包括地理坐标(经纬度)、海拔高度、线速度以及航向角(RTK系统)。常用的GNSS模块生产商包括瑞士的U-BLOX和加拿大的NOVATEL。在使用GNSS模块时，卫星信号接收天线的放置需要要注意电磁干扰的屏蔽，部分有实力的整机生产厂商会根据飞机型号专门定制卫星信号接收天线。
**光流模块**
光流模块是一个比较特殊的模块，既可以用来感知机体的运动状态，如测量水平方向的位移速度，也可以用来感知周围的环境，用作避障的用途。比较常见的光流模块是开源的PX4FLOW。光流模块通常在室内使用，主要是为了解决室内卫星信号不佳的问题，另外对于拍摄的地面需要有一定纹理图案。
## 周围环境状态感知
**测距模块**
这里列举五个常用的测距模块：超声波、红外TOF、激光、毫米波雷达、深度感知摄像头。
![商用无人机的飞行感知技术丨硬创公开课](http://static.leiphone.com/uploads/new/article/740_740/201611/5836785520aa2.png?imageMogr2/format/jpg/quality/90)
超声波和红外TOF各方面性能比较相似，比如测量距离都比较近，像超声波测量的距离一般在4米左右。另外这两种传感器的使用范围都容易受到实际环境的限制，比如红外TOF是向被测物体表面发射红光并反射，如果遇到红光反射率不高的物体像玻璃就会失效。但这两种传感器有一个最大的优势就是成本低，另外模块体积也比较小，所以在消费类无人机上得到了广泛使用。
激光雷达测距一般都比较远，大多数产品都可以达到100米以上，但是大雨大雾的天气环境会影响其测量结果。另外的劣势在于成本比较高: 在激光雷达行业实力最强的是Velodyne，它的一款适用于无人机使用的小型化产品VLP-16价格也达到了1000美元以上，对于商用无人机来说成本还是比较高。
深度感知摄像头根据测量技术可以分为三种，立体摄像头，也叫双目视觉技术，代表产品就是大疆的精灵4；结构光技术，代表产品有微软的Kinect；时差测距技术（TOF），由于生产厂家较少而且成本较高，因此在无人机上的应用很少。深度感知摄像头在使用时也存在局限性，双目视觉技术的缺点是在低光环境下无法正常工作，而结构光技术则与之相反，在强光下无法正常工作。因此有的厂家把两种技术进行组合，弥补彼此的缺陷，扩大其适用的环境范围。
## 提高测量精度的方法
**传感器校准**
传感器校准，包括精校准和粗校准。精校准效果比较好，但需要昂贵的标定设备；粗校准则不需要借助外部设备，只对传感器本身进行操作即可。
以磁罗盘的粗校准为例，由于地球上任意位置的地磁场强度在较长时间跨度内都可视为是恒定的，当转动磁罗盘时，根据相对运动可假设磁罗盘固定不动，而地磁场矢量随之在转动，其矢量端点在空间的轨迹应为一个标准的球体，但由于传感器存在误差，实际测出的数据并不严格都在球体的表面，这时候就需要根据测量出来的数值以及已知的准确值来计算两者之间的换算关系，也就是该款磁罗盘的误差模型。在以后使用该款磁罗盘时就可以根据粗校准得出的误差模型来处理测量值，使得测量值的误差减小。
![商用无人机的飞行感知技术丨硬创公开课](http://static.leiphone.com/uploads/new/article/740_740/201611/5836526103dd9.png?imageMogr2/format/jpg/quality/90)
磁罗盘校准（SGB sbgcenter）
**多种传感器数据融合**
不同类型的传感器数据融合方法有多种，在业内用的比较普遍而且效果也比较好的是EKF，也就是扩展卡尔曼滤波。
以计算飞机姿态角的融合方法为例，EKF更新过程主要分为两个部分，预测更新和量测更新。预测更新主要利用陀螺仪更新预测状态量，同时计算该状态量的协方差矩阵。在量测更新中先会计算滤波增益，然后使用滤波增益融合预测状态量、加速度计以及磁罗盘的数据，成为一个融合状态量，同时计算融合状态量的协方差矩阵，在下一次更新周期的计算中使用。
![商用无人机的飞行感知技术丨硬创公开课](http://static.leiphone.com/uploads/new/article/740_740/201611/5836b4edc53a2.png?imageMogr2/format/jpg/quality/90)
计算姿态角的融合方法流程
**传感器冗余设计**
传感器冗余设计主要是将多个同种传感器进行组合，处理方法是首先会剔除数据异常的传感器，然后再进行传感器的融合。冗余设计不仅可以提高测量精度也可以提高整套系统的可靠性，在某一个传感器失效的情况发生时，让整个系统能够继续正常工作。
雷锋网原创文章，未经授权禁止转载。详情见转载须知。



