
# 汇编程序：求平均成绩(用汇编玩结构体) - 迂者-贺利坚的专栏 - CSDN博客

2017年04月08日 22:11:48[迂者-贺利坚](https://me.csdn.net/sxhelijian)阅读数：2010



### 求平均成绩
在下面的数据段中，给出了全班3名同学OS、AL、SE、DB课程的成绩，请编程计算出平均成绩，写在 ? 处。
```python
datasg segment
  db
```
```python
'201558501111'
```
```python
,
```
```python
'MMTJAB  '
```
```python
,
```
```python
90
```
```python
,
```
```python
100
```
```python
,
```
```python
76
```
```python
,
```
```python
89
```
```python
,?
  db
```
```python
'201558501112'
```
```python
,
```
```python
'ZhangAP '
```
```python
,
```
```python
97
```
```python
,
```
```python
82
```
```python
,
```
```python
79
```
```python
,
```
```python
88
```
```python
,?
  db
```
```python
'201558501113'
```
```python
,
```
```python
'ShaoXL  '
```
```python
,
```
```python
77
```
```python
,
```
```python
98
```
```python
,
```
```python
89
```
```python
,
```
```python
91
```
```python
,?
  db
```
```python
4
```
```python
;这是课程门数，将要用于作除数，偏移量为
```
```python
75
```
```python
datasg
```
```python
ends
```
参考解答：
```python
assume cs:codesg,ds:datasg, ss:stacksg
datasg segment
  db
```
```python
'201558501111'
```
```python
,
```
```python
'MMTJAB  '
```
```python
,
```
```python
90
```
```python
,
```
```python
100
```
```python
,
```
```python
76
```
```python
,
```
```python
89
```
```python
,?
  db
```
```python
'201558501112'
```
```python
,
```
```python
'ZhangAP '
```
```python
,
```
```python
97
```
```python
,
```
```python
82
```
```python
,
```
```python
79
```
```python
,
```
```python
88
```
```python
,?
  db
```
```python
'201558501113'
```
```python
,
```
```python
'ShaoXL  '
```
```python
,
```
```python
77
```
```python
,
```
```python
98
```
```python
,
```
```python
89
```
```python
,
```
```python
91
```
```python
,?
  db
```
```python
4
```
```python
;这是课程门数，将要用于作除数，偏移量为
```
```python
75
```
```python
datasg
```
```python
ends
```
```python
stacksg segment stack
      dw
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
stacksg
```
```python
ends
```
```python
codesg segment
start: mov ax, stacksg
       mov ss, ax
       mov sp,
```
```python
16
```
```python
mov ax, datasg
       mov ds, ax
       mov bp,
```
```python
0
```
```python
;基址，bx想用于数据处理了
       mov cx,
```
```python
4
```
```python
;外层循环次数
   s0: push cx      ;保存外层循环数
       mov si,
```
```python
0
```
```python
;ds:[bp+si+
```
```python
20
```
```python
]将是要处理的数值，第一科成绩前有
```
```python
20
```
```python
个字节是学号、姓名
       mov cx,
```
```python
4
```
```python
;设置内层循环次数
       mov ax,
```
```python
0
```
```python
;用于存储累加和，因为
```
```python
4
```
```python
门课总成绩可能会大于
```
```python
256
```
```python
，故用字
    s: mov bl, ds:[bp+si+
```
```python
20
```
```python
]  ;取成绩，
```
```python
100
```
```python
以内，用字节数据
       mov bh,
```
```python
0
```
```python
;为下面一步用字进行加法准备
```
```python
add
```
```python
ax, bx    ;累加总分
```
```python
add
```
```python
si,
```
```python
1
```
```python
;取下一字节
       loop s
```
```python
div
```
```python
byte
```
```python
ptr ds:[
```
```python
75
```
```python
] ;求均分
       mov ds:[bp+si+
```
```python
20
```
```python
], al  ;保存均分
```
```python
add
```
```python
bp,
```
```python
25
```
```python
;下一位同学成绩的基址
       pop cx           ;恢复外层循环
       loop s0
       mov ax,
```
```python
4
```
```python
c00h
       int
```
```python
21
```
```python
h
codesg
```
```python
ends
```
```python
end
```
```python
start
```
注：在这个程序里，数据存储相当于C语言的结构体（由此体会汇编语言其实也是很强大的！）
```python
struct Student{
```
```python
char
```
```python
num
```
```python
[12]
```
```python
;
```
```python
char
```
```python
name
```
```python
[8]
```
```python
;
```
```python
char
```
```python
OS;
```
```python
char
```
```python
AL;
```
```python
char
```
```python
SE;
```
```python
char
```
```python
DB;
```
```python
char
```
```python
aver;   
｝;
struct Student stu
```
```python
[77]
```
```python
;
```

