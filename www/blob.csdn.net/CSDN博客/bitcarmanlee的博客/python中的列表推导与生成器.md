
# python中的列表推导与生成器 - bitcarmanlee的博客 - CSDN博客


2017年10月25日 22:48:14[bitcarmanlee](https://me.csdn.net/bitcarmanlee)阅读数：493



## 1.先看两个列表推导式
```python
def
```
```python
t1
```
```python
()
```
```python
:
```
```python
func1 = [
```
```python
lambda
```
```python
x: x*i
```
```python
for
```
```python
i
```
```python
in
```
```python
range(
```
```python
10
```
```python
)]
    result1 = [f1(
```
```python
2
```
```python
)
```
```python
for
```
```python
f1
```
```python
in
```
```python
func1]
```
```python
print
```
```python
result1
```
```python
def
```
```python
t2
```
```python
()
```
```python
:
```
```python
func2 = [
```
```python
lambda
```
```python
x, i=i: x*i
```
```python
for
```
```python
i
```
```python
in
```
```python
range(
```
```python
10
```
```python
)]
    result2 = [f2(
```
```python
2
```
```python
)
```
```python
for
```
```python
f2
```
```python
in
```
```python
func2]
```
```python
print
```
```python
result2
```
上面是两个列表推导式，里面包含有lambda表达式。输出结果分别为：
```python
[
```
```python
18
```
```python
,
```
```python
18
```
```python
,
```
```python
18
```
```python
,
```
```python
18
```
```python
,
```
```python
18
```
```python
,
```
```python
18
```
```python
,
```
```python
18
```
```python
,
```
```python
18
```
```python
,
```
```python
18
```
```python
,
```
```python
18
```
```python
]
[
```
```python
0
```
```python
,
```
```python
2
```
```python
,
```
```python
4
```
```python
,
```
```python
6
```
```python
,
```
```python
8
```
```python
,
```
```python
10
```
```python
,
```
```python
12
```
```python
,
```
```python
14
```
```python
,
```
```python
16
```
```python
,
```
```python
18
```
```python
]
```
## 2.为什么结果会不同
在上面的例子中，列表解析会生成一系列的函数对象。例如
```python
def
```
```python
func
```
```python
()
```
```python
:
```
```python
pass
```
会产生一个名为func的函数对象。注意不同于func()，加上小括号以后，此时变为了调用函数对象。
函数对象只有在调用的时候才开始对内部的变量进行引用。在t1()方法中，对i来说, 当函数对它引用的时候, 它已经变为9, 所以10个函数都引用了i=9。
而对于t2()方法来说，lambda函数相当于变成接受两个参数了，所以返回了不一样的结果。
## 3.另外的方式
```python
def
```
```python
t3
```
```python
()
```
```python
:
```
```python
func3 = (
```
```python
lambda
```
```python
x: x*i
```
```python
for
```
```python
i
```
```python
in
```
```python
range(
```
```python
10
```
```python
))
    result3 = [f3(
```
```python
2
```
```python
)
```
```python
for
```
```python
f3
```
```python
in
```
```python
func3]
```
```python
print
```
```python
result3
```
上面的代码，输出的结果为：
```python
[
```
```python
0
```
```python
,
```
```python
2
```
```python
,
```
```python
4
```
```python
,
```
```python
6
```
```python
,
```
```python
8
```
```python
,
```
```python
10
```
```python
,
```
```python
12
```
```python
,
```
```python
14
```
```python
,
```
```python
16
```
```python
,
```
```python
18
```
```python
]
```
此时，相当于把列表推导式变成了生成器，结果又不一样了！
对于生成器, 只有你需要的时候它才会求值, 这也是和列表解析式的区别, 列表解析式只要你运行, 马上就把i变为了9, 可是生成器不会, 当你调用第一个函数的时候, 他把相应的i求出来, 然后停止, 等你下一次调用, 这个就完美符合我们的预期了.

