
# 网关服务器 . - 高科的专栏 - CSDN博客

2013年01月08日 00:14:35[高科](https://me.csdn.net/pbymw8iwm)阅读数：6161个人分类：[C/C++																](https://blog.csdn.net/pbymw8iwm/article/category/910215)[架构管理																](https://blog.csdn.net/pbymw8iwm/article/category/1219853)[游戏																](https://blog.csdn.net/pbymw8iwm/article/category/1252249)[
							](https://blog.csdn.net/pbymw8iwm/article/category/1219853)
[
																								](https://blog.csdn.net/pbymw8iwm/article/category/910215)


之前想着要把什么什么给写一下，每次都太懒了，都是想起了才来写一下。今天只讨论游戏服务器的网关服务器。1.转发
转发客户端和服务器间的消息，网关将场景、会话、数据、名字、平台等服务器的数据转发给客户端，接收客户端的数据，把消息转发给相应的服务器。很多时候，我们需要将消息发给所有的用户，如果让会话服务器来执行这个功能，如果这个时候服务器很负载很大，有2万人在线，那么就得发两万条消息给客户端，这个肯定是不允许的，所有我们将需要转发的消息给网关，如果每个 网关挂了4000人，那么网关就将这条消息发给每个用户了。当然了，在游戏设计时，特别是策划在活动制作时，必须尽量避免群发消息的功能。即使要发，我们将这2万人分组，然后分时分组发送。一般情况下，网关与场景是多对多的关系，和其他服务器都是1对多的关系
2.心跳
网关定时发送心跳给连接在这个网关上的所有客户端，保证客户端与网关的连接，如果某个客户端掉线了，那么网关就通知各个服务器去做玩家的下线处理
3.负载均衡
多网关来支持平衡游戏负载，当然负责负载均衡的模块可以放在一个管理所有服务器的Super服务器，
4.账号管理
玩家删除账号，更改名字等操作，只需要登录到网关，然后与数据服务器交互就行了，然后还有一个处理就是，对玩家的名字/聊天的消息进行关键词过滤
5.维护玩家登陆信息
玩家发来登陆操作时，去数据库服务器寻找账号，匹配密码，然后连接到场景服务器上。很多公司都使用了统一的账号平台来管理所有的游戏账号，这时，玩家登陆游戏时，发一条登陆消息，先登陆到平台，平台验证账号的正确性，然后去相应的游戏服务器，分配一个网关，把这个网关的ip/端口这些发给客户端，客户端去连接这个网关，当然中间的规则，就自己设定了。
现在做的是端游，等这边结束了，希望能尝试做一个页游。
明天来写会话服务器。

