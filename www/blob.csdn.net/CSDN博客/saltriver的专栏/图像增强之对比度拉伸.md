
# 图像增强之对比度拉伸 - saltriver的专栏 - CSDN博客


2018年03月24日 13:39:59[saltriver](https://me.csdn.net/saltriver)阅读数：3667


我们前面提到过图像二值化，图像反转，本质上是对图像的所有像素点的灰度进行操作，属于灰度变换的内容。灰度变换的主要目的是用于**图像增强**。
而对比度拉伸是图像增强的一种方法，也属于灰度变换操作。我们看如下图像：
![这里写图片描述](https://img-blog.csdn.net/20180324133416412?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NhbHRyaXZlcg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)[ ](https://img-blog.csdn.net/20180324133416412?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NhbHRyaXZlcg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)
可以看到，这张图片非常灰暗。我们查看下其直方图。
[

](https://img-blog.csdn.net/20180324133416412?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NhbHRyaXZlcg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)
```python
import cv2
import matplotlib
```
```python
.pyplot
```
```python
as plt
farina = cv2
```
```python
.imread
```
```python
(
```
```python
"farina.png"
```
```python
,
```
```python
0
```
```python
)
hist_full = cv2
```
```python
.calcHist
```
```python
([farina], [
```
```python
0
```
```python
], None, [
```
```python
256
```
```python
], [
```
```python
0
```
```python
,
```
```python
256
```
```python
])
plt
```
```python
.plot
```
```python
(hist_full)
plt
```
```python
.show
```
```python
()
```
[
](https://img-blog.csdn.net/20180324133416412?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NhbHRyaXZlcg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)![这里写图片描述](https://img-blog.csdn.net/20180324133433369?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NhbHRyaXZlcg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)[ ](https://img-blog.csdn.net/20180324133433369?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NhbHRyaXZlcg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)
可以看到所有像素的灰度值大部分集中在20-50之间，这使得整个图像很暗淡。也就是说对比度不高。如果我们通过灰度变换，将灰度值拉伸到整个0-255的区间，那么其对比度显然是大幅增强的。可以用如下的公式来将某个像素的灰度值映射到更大的灰度空间：
[
](https://img-blog.csdn.net/20180324133433369?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NhbHRyaXZlcg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)
$$
I(x, y）=\frac {I(x,y)-Imin}{Imax-Imin}(MAX-MIN)+MIN
$$
[
](https://img-blog.csdn.net/20180324133433369?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NhbHRyaXZlcg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)其中Imin，Imax是原始图像的最小灰度值和最大灰度值，MIN和MAX是要拉伸到的灰度空间的灰度最小值和最大值。
[

](https://img-blog.csdn.net/20180324133433369?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NhbHRyaXZlcg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)
```python
Imax
```
```python
=
```
```python
np
```
```python
.
```
```python
max
```
```python
(farina)
Imin
```
```python
=
```
```python
np
```
```python
.
```
```python
min
```
```python
(farina)
```
```python
MAX
```
```python
=
```
```python
255
```
```python
MIN
```
```python
=
```
```python
0
```
```python
farina_cs
```
```python
=
```
```python
(farina
```
```python
-
```
```python
Imin)
```
```python
/
```
```python
(Imax
```
```python
-
```
```python
Imin)
```
```python
*
```
```python
(
```
```python
MAX
```
```python
-
```
```python
MIN
```
```python
)
```
```python
+
```
```python
MIN
```
```python
cv2
```
```python
.
```
```python
imshow(
```
```python
"farina_cs"
```
```python
, farina_cs
```
```python
.
```
```python
astype(
```
```python
"uint8"
```
```python
))
cv2
```
```python
.
```
```python
waitKey()
```
[
](https://img-blog.csdn.net/20180324133433369?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NhbHRyaXZlcg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)![这里写图片描述](https://img-blog.csdn.net/20180324133811663?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NhbHRyaXZlcg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)
可以看出，对比度提升了很多。我们再看看其直方图，可以看到已经充满了整个灰度空间。
![这里写图片描述](https://img-blog.csdn.net/20180324133818751?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NhbHRyaXZlcg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)
除了上述方法，对比度拉伸还有其它方法吗？当然是有的。例如直方图位移法（Histogram shifting）。公式如下：，

$$
I(x,y)=I(x,y)+offset
$$
在每个像素位置的灰度值增加一个偏移量offset。注意，这个offset可以是正数，也可以是负数。正的话，整体亮度变亮，负的话，整体亮度变暗。需要注意的是控制offset的值大小，不要越界。
```python
farina_cs = farina +
```
```python
100
```
```python
cv2
```
```python
.imshow
```
```python
(
```
```python
"farina_offset"
```
```python
, farina_cs
```
```python
.astype
```
```python
(
```
```python
"uint8"
```
```python
))
cv2
```
```python
.waitKey
```
```python
()
hist_full = cv2
```
```python
.calcHist
```
```python
([farina_cs
```
```python
.astype
```
```python
(
```
```python
"uint8"
```
```python
)], [
```
```python
0
```
```python
], None, [
```
```python
256
```
```python
], [
```
```python
0
```
```python
,
```
```python
256
```
```python
])
plt
```
```python
.plot
```
```python
(hist_full)
plt
```
```python
.show
```
```python
()
```
下面分别是使用直方图位移方法后的图像和其直方图。
![这里写图片描述](https://img-blog.csdn.net/20180324133915766?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NhbHRyaXZlcg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)[ ](https://img-blog.csdn.net/20180324133915766?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NhbHRyaXZlcg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)
![这里写图片描述](https://img-blog.csdn.net/20180324133932760?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NhbHRyaXZlcg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)
可以看出直方图与原始直方图形状一模一样，只是在横轴上有所偏移。这种方法的图像增强效果并没有上一种方法好。
[
						](https://img-blog.csdn.net/20180324133915766?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NhbHRyaXZlcg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)
[
	](https://img-blog.csdn.net/20180324133915766?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NhbHRyaXZlcg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)
