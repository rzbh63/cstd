
# 数据结构例程——线索化二叉树(中序) - 迂者-贺利坚的专栏 - CSDN博客

2015年10月20日 05:36:43[迂者-贺利坚](https://me.csdn.net/sxhelijian)阅读数：5704


本文是[数据结构基础系列(6)：树和二叉树](http://edu.csdn.net/course/detail/1553)中第14课时[线索二叉树](http://edu.csdn.net/course/detail/1553/24079)的例程。
![这里写图片描述](https://img-blog.csdn.net/20151020053443842)
```python
#include <stdio.h>
```
```python
#include <malloc.h>
```
```python
#define MaxSize 100
```
```python
typedef
```
```python
char
```
```python
ElemType;
```
```python
typedef
```
```python
struct
```
```python
node
{
    ElemType data;
```
```python
int
```
```python
ltag,rtag;
```
```python
//增加的线索标记
```
```python
struct
```
```python
node *lchild;
```
```python
struct
```
```python
node *rchild;
} TBTNode;
```
```python
void
```
```python
CreateTBTNode(TBTNode * &b,
```
```python
char
```
```python
*str)
{
    TBTNode *St[MaxSize],*p=NULL;
```
```python
int
```
```python
top=-
```
```python
1
```
```python
,k,j=
```
```python
0
```
```python
;
```
```python
char
```
```python
ch;
    b=NULL;
```
```python
//建立的二叉树初始时为空
```
```python
ch=str[j];
```
```python
while
```
```python
(ch!=
```
```python
'\0'
```
```python
)
```
```python
//str未扫描完时循环
```
```python
{
```
```python
switch
```
```python
(ch)
        {
```
```python
case
```
```python
'('
```
```python
:
            top++;
            St[top]=p;
            k=
```
```python
1
```
```python
;
```
```python
break
```
```python
;
```
```python
//为左结点
```
```python
case
```
```python
')'
```
```python
:
            top--;
```
```python
break
```
```python
;
```
```python
case
```
```python
','
```
```python
:
            k=
```
```python
2
```
```python
;
```
```python
break
```
```python
;
```
```python
//为右结点
```
```python
default
```
```python
:
            p=(TBTNode *)
```
```python
malloc
```
```python
(
```
```python
sizeof
```
```python
(TBTNode));
            p->data=ch;
            p->lchild=p->rchild=NULL;
```
```python
if
```
```python
(b==NULL)
```
```python
//*p为二叉树的根结点
```
```python
b=p;
```
```python
else
```
```python
//已建立二叉树根结点
```
```python
{
```
```python
switch
```
```python
(k)
                {
```
```python
case
```
```python
1
```
```python
:
                    St[top]->lchild=p;
```
```python
break
```
```python
;
```
```python
case
```
```python
2
```
```python
:
                    St[top]->rchild=p;
```
```python
break
```
```python
;
                }
            }
        }
        j++;
        ch=str[j];
    }
}
```
```python
void
```
```python
DispTBTNode(TBTNode *b)
{
```
```python
if
```
```python
(b!=NULL)
    {
```
```python
printf
```
```python
(
```
```python
"%c"
```
```python
,b->data);
```
```python
if
```
```python
(b->lchild!=NULL || b->rchild!=NULL)
        {
```
```python
printf
```
```python
(
```
```python
"("
```
```python
);
            DispTBTNode(b->lchild);
```
```python
if
```
```python
(b->rchild!=NULL)
```
```python
printf
```
```python
(
```
```python
","
```
```python
);
            DispTBTNode(b->rchild);
```
```python
printf
```
```python
(
```
```python
")"
```
```python
);
        }
    }
}
TBTNode *pre;
```
```python
//全局变量
```
```python
void
```
```python
Thread(TBTNode *&p)
{
```
```python
if
```
```python
(p!=NULL)
    {
        Thread(p->lchild);
```
```python
//左子树线索化
```
```python
if
```
```python
(p->lchild==NULL)
```
```python
//前驱线索
```
```python
{
            p->lchild=pre;
```
```python
//建立当前结点的前驱线索
```
```python
p->ltag=
```
```python
1
```
```python
;
        }
```
```python
else
```
```python
p->ltag=
```
```python
0
```
```python
;
```
```python
if
```
```python
(pre->rchild==NULL)
```
```python
//后继线索
```
```python
{
            pre->rchild=p;
```
```python
//建立前驱结点的后继线索
```
```python
pre->rtag=
```
```python
1
```
```python
;
        }
```
```python
else
```
```python
pre->rtag=
```
```python
0
```
```python
;
        pre=p;
        Thread(p->rchild);
```
```python
//右子树线索化
```
```python
}
}
TBTNode *CreaThread(TBTNode *b)
```
```python
//中序线索化二叉树
```
```python
{
    TBTNode *root;
    root=(TBTNode *)
```
```python
malloc
```
```python
(
```
```python
sizeof
```
```python
(TBTNode));
```
```python
//创建根结点
```
```python
root->ltag=
```
```python
0
```
```python
;
    root->rtag=
```
```python
1
```
```python
;
    root->rchild=b;
```
```python
if
```
```python
(b==NULL)
```
```python
//空二叉树
```
```python
root->lchild=root;
```
```python
else
```
```python
{
        root->lchild=b;
        pre=root;
```
```python
//pre是*p的前驱结点,供加线索用
```
```python
Thread(b);
```
```python
//中序遍历线索化二叉树
```
```python
pre->rchild=root;
```
```python
//最后处理,加入指向根结点的线索
```
```python
pre->rtag=
```
```python
1
```
```python
;
        root->rchild=pre;
```
```python
//根结点右线索化
```
```python
}
```
```python
return
```
```python
root;
}
```
```python
void
```
```python
ThInOrder(TBTNode *tb)
{
    TBTNode *p=tb->lchild;
```
```python
//指向根结点
```
```python
while
```
```python
(p!=tb)
    {
```
```python
while
```
```python
(p->ltag==
```
```python
0
```
```python
) p=p->lchild;
```
```python
printf
```
```python
(
```
```python
"%c "
```
```python
,p->data);
```
```python
while
```
```python
(p->rtag==
```
```python
1
```
```python
&& p->rchild!=tb)
        {
            p=p->rchild;
```
```python
printf
```
```python
(
```
```python
"%c "
```
```python
,p->data);
        }
        p=p->rchild;
    }
}
```
```python
int
```
```python
main()
{
    TBTNode *b,*tb;
    CreateTBTNode(b,
```
```python
"A(B(D(,G)),C(E,F))"
```
```python
);
```
```python
printf
```
```python
(
```
```python
" 二叉树:"
```
```python
);
    DispTBTNode(b);
```
```python
printf
```
```python
(
```
```python
"\n"
```
```python
);
    tb=CreaThread(b);
```
```python
printf
```
```python
(
```
```python
" 线索中序序列:"
```
```python
);
    ThInOrder(tb);
```
```python
printf
```
```python
(
```
```python
"\n"
```
```python
);
```
```python
return
```
```python
0
```
```python
;
}
```

