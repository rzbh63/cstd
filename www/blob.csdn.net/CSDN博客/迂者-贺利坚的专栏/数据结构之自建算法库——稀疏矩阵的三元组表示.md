
# 数据结构之自建算法库——稀疏矩阵的三元组表示 - 迂者-贺利坚的专栏 - CSDN博客

2015年10月07日 16:36:14[迂者-贺利坚](https://me.csdn.net/sxhelijian)阅读数：9257


本文针对[数据结构基础系列网络课程(5)：数组与广义表]()中第3课时[稀疏矩阵的三元组表示]()。
![这里写图片描述](https://img-blog.csdn.net/20151007163356521)
稀疏矩阵的三元组表示相关的算法库采用程序的多文件组织形式，包括两个文件：
1.头文件：tup.h，包含定义稀疏矩阵的三元组表示数据结构的代码、宏定义、要实现算法的函数的声明；
```python
#ifndef TUP_H_INCLUDED
```
```python
#define TUP_H_INCLUDED
```
```python
#define M 6
```
```python
#define N 7
```
```python
#define MaxSize  100         //矩阵中非零元素最多个数
```
```python
typedef
```
```python
int
```
```python
ElemType;
typedef
```
```python
struct
```
```python
{
```
```python
int
```
```python
r;
```
```python
//行号
```
```python
int
```
```python
c;
```
```python
//列号
```
```python
ElemType d;
```
```python
//元素值
```
```python
} TupNode;
```
```python
//三元组定义
```
```python
typedef
```
```python
struct
```
```python
{
```
```python
int
```
```python
rows;
```
```python
//行数
```
```python
int
```
```python
cols;
```
```python
//列数
```
```python
int
```
```python
nums;
```
```python
//非零元素个数
```
```python
TupNode data[MaxSize];
} TSMatrix;
```
```python
//三元组顺序表定义
```
```python
void
```
```python
CreatMat(TSMatrix &t,ElemType A[M][N]);
```
```python
//从一个二维稀疏矩阵创建其三元组表示
```
```python
bool
```
```python
Value(TSMatrix &t,ElemType x,
```
```python
int
```
```python
i,
```
```python
int
```
```python
j);
```
```python
//三元组元素赋值
```
```python
bool
```
```python
Assign(TSMatrix t,ElemType &x,
```
```python
int
```
```python
i,
```
```python
int
```
```python
j);
```
```python
//将指定位置的元素值赋给变量
```
```python
void
```
```python
DispMat(TSMatrix t);
```
```python
//输出三元组
```
```python
void
```
```python
TranTat(TSMatrix t,TSMatrix &tb);
```
```python
//矩阵转置
```
```python
#endif // TUP_H_INCLUDED
```
2.源文件：tup.cpp，包含实现各种算法的函数的定义
```python
#include "stdio.h"
```
```python
#include "tup.h"
```
```python
void CreatMat(TSMatrix &t,ElemType A[M][N])  //从一个二维稀疏矩阵创建其三元组表示
{
    int i,j
```
```python
;
```
```python
t
```
```python
.rows
```
```python
=M
```
```python
;
```
```python
t
```
```python
.cols
```
```python
=N
```
```python
;
```
```python
t
```
```python
.nums
```
```python
=
```
```python
0
```
```python
;
```
```python
for (i=
```
```python
0
```
```python
; i<M; i++)
```
```python
{
        for (j=
```
```python
0
```
```python
; j<N; j++)
```
```python
if (A[i][j]!=
```
```python
0
```
```python
)     //只存储非零元素
            {
                t
```
```python
.data
```
```python
[t
```
```python
.nums
```
```python
]
```
```python
.r
```
```python
=i
```
```python
;
```
```python
t
```
```python
.data
```
```python
[t
```
```python
.nums
```
```python
]
```
```python
.c
```
```python
=j
```
```python
;
```
```python
t
```
```python
.data
```
```python
[t
```
```python
.nums
```
```python
]
```
```python
.d
```
```python
=A[i][j]
```
```python
;
```
```python
t
```
```python
.nums
```
```python
++
```
```python
;
```
```python
}
    }
}
bool Value(TSMatrix &t,ElemType
```
```python
x
```
```python
,int i,int j)  //三元组元素赋值
{
    int k=
```
```python
0
```
```python
,k1
```
```python
;
```
```python
if (i>=t
```
```python
.rows
```
```python
|| j>=t
```
```python
.cols
```
```python
)
        return false
```
```python
;               //失败时返回false
```
```python
while (k<t
```
```python
.nums
```
```python
&& i>t
```
```python
.data
```
```python
[k]
```
```python
.r
```
```python
) k++
```
```python
;                  //查找行
```
```python
while (k<t
```
```python
.nums
```
```python
&& i==t
```
```python
.data
```
```python
[k]
```
```python
.r
```
```python
&& j>t
```
```python
.data
```
```python
[k]
```
```python
.c
```
```python
) k++
```
```python
;//查找列
```
```python
if (t
```
```python
.data
```
```python
[k]
```
```python
.r
```
```python
==i && t
```
```python
.data
```
```python
[k]
```
```python
.c
```
```python
==j)   //存在这样的元素
        t
```
```python
.data
```
```python
[k]
```
```python
.d
```
```python
=
```
```python
x
```
```python
;
```
```python
else                                    //不存在这样的元素时插入一个元素
    {
        for (k1=t
```
```python
.nums
```
```python
-
```
```python
1
```
```python
; k1>=k; k1--)
```
```python
{
            t
```
```python
.data
```
```python
[k1+
```
```python
1
```
```python
]
```
```python
.r
```
```python
=t
```
```python
.data
```
```python
[k1]
```
```python
.r
```
```python
;
```
```python
t
```
```python
.data
```
```python
[k1+
```
```python
1
```
```python
]
```
```python
.c
```
```python
=t
```
```python
.data
```
```python
[k1]
```
```python
.c
```
```python
;
```
```python
t
```
```python
.data
```
```python
[k1+
```
```python
1
```
```python
]
```
```python
.d
```
```python
=t
```
```python
.data
```
```python
[k1]
```
```python
.d
```
```python
;
```
```python
}
        t
```
```python
.data
```
```python
[k]
```
```python
.r
```
```python
=i
```
```python
;
```
```python
t
```
```python
.data
```
```python
[k]
```
```python
.c
```
```python
=j
```
```python
;
```
```python
t
```
```python
.data
```
```python
[k]
```
```python
.d
```
```python
=
```
```python
x
```
```python
;
```
```python
t
```
```python
.nums
```
```python
++
```
```python
;
```
```python
}
    return true
```
```python
;                        //成功时返回true
```
```python
}
bool Assign(TSMatrix t,ElemType &
```
```python
x
```
```python
,int i,int j)  //将指定位置的元素值赋给变量
{
    int k=
```
```python
0
```
```python
;
```
```python
if (i>=t
```
```python
.rows
```
```python
|| j>=t
```
```python
.cols
```
```python
)
        return false
```
```python
;           //失败时返回false
```
```python
while (k<t
```
```python
.nums
```
```python
&& i>t
```
```python
.data
```
```python
[k]
```
```python
.r
```
```python
) k++
```
```python
;                  //查找行
```
```python
while (k<t
```
```python
.nums
```
```python
&& i==t
```
```python
.data
```
```python
[k]
```
```python
.r
```
```python
&& j>t
```
```python
.data
```
```python
[k]
```
```python
.c
```
```python
) k++
```
```python
;//查找列
```
```python
if (t
```
```python
.data
```
```python
[k]
```
```python
.r
```
```python
==i && t
```
```python
.data
```
```python
[k]
```
```python
.c
```
```python
==j)
```
```python
x
```
```python
=t
```
```python
.data
```
```python
[k]
```
```python
.d
```
```python
;
```
```python
else
```
```python
x
```
```python
=
```
```python
0
```
```python
;                //在三元组中没有找到表示是零元素
```
```python
return true
```
```python
;            //成功时返回true
```
```python
}
void DispMat(TSMatrix t)        //输出三元组
{
    int i
```
```python
;
```
```python
if (t
```
```python
.nums
```
```python
<=
```
```python
0
```
```python
)          //没有非零元素时返回
        return
```
```python
;
```
```python
printf(
```
```python
"\t%d\t%d\t%d\n"
```
```python
,t
```
```python
.rows
```
```python
,t
```
```python
.cols
```
```python
,t
```
```python
.nums
```
```python
)
```
```python
;
```
```python
printf(
```
```python
"\t------------------\n"
```
```python
)
```
```python
;
```
```python
for (i=
```
```python
0
```
```python
; i<t.nums; i++)
```
```python
printf(
```
```python
"\t%d\t%d\t%d\n"
```
```python
,t
```
```python
.data
```
```python
[i]
```
```python
.r
```
```python
,t
```
```python
.data
```
```python
[i]
```
```python
.c
```
```python
,t
```
```python
.data
```
```python
[i]
```
```python
.d
```
```python
)
```
```python
;
```
```python
}
void TranTat(TSMatrix t,TSMatrix &tb)       //矩阵转置
{
    int p,q=
```
```python
0
```
```python
,v
```
```python
;                    //q为tb.data的下标
```
```python
tb
```
```python
.rows
```
```python
=t
```
```python
.cols
```
```python
;
```
```python
tb
```
```python
.cols
```
```python
=t
```
```python
.rows
```
```python
;
```
```python
tb
```
```python
.nums
```
```python
=t
```
```python
.nums
```
```python
;
```
```python
if (t
```
```python
.nums
```
```python
!=
```
```python
0
```
```python
)                  //当存在非零元素时执行转置
    {
        for (v=
```
```python
0
```
```python
; v<t.cols; v++)        //tb.data[q]中的记录以c域的次序排列
```
```python
for (p=
```
```python
0
```
```python
; p<t.nums; p++)    //p为t.data的下标
```
```python
if (t
```
```python
.data
```
```python
[p]
```
```python
.c
```
```python
==v)
                {
                    tb
```
```python
.data
```
```python
[q]
```
```python
.r
```
```python
=t
```
```python
.data
```
```python
[p]
```
```python
.c
```
```python
;
```
```python
tb
```
```python
.data
```
```python
[q]
```
```python
.c
```
```python
=t
```
```python
.data
```
```python
[p]
```
```python
.r
```
```python
;
```
```python
tb
```
```python
.data
```
```python
[q]
```
```python
.d
```
```python
=t
```
```python
.data
```
```python
[p]
```
```python
.d
```
```python
;
```
```python
q++
```
```python
;
```
```python
}
    }
}
```
3.在同一项目（project）中建立一个源文件(如main.cpp)，编制main函数，完成相关的测试工作。 例：
```python
#include <stdio.h>
```
```python
#include "tup.h"
```
```python
int main()
{
    TSMatrix t,tb;
    int x,y=
```
```python
10
```
```python
;
    int A[
```
```python
6
```
```python
][
```
```python
7
```
```python
]=
    {
        {
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
1
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
},
        {
```
```python
0
```
```python
,
```
```python
2
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
},
        {
```
```python
3
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
},
        {
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
5
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
},
        {
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
6
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
},
        {
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
7
```
```python
,
```
```python
4
```
```python
}
    };
    CreatMat(t,A);
    printf(
```
```python
"b:\n"
```
```python
);
    DispMat(t);
```
```python
if
```
```python
(Assign(t,x,
```
```python
2
```
```python
,
```
```python
5
```
```python
)==
```
```python
true
```
```python
)
```
```python
//
```
```python
调用时返回
```
```python
true
```
```python
printf
```
```python
(
```
```python
"Assign(t,x,2,5)=>x=%d\n"
```
```python
,x)
```
```python
;
```
```python
else
```
```python
//调用时返回
```
```python
false
```
```python
printf
```
```python
(
```
```python
"Assign(t,x,2,5)=>参数错误\n"
```
```python
)
```
```python
;
```
```python
Value
```
```python
(t,y,
```
```python
2
```
```python
,
```
```python
5
```
```python
)
```
```python
;
```
```python
printf
```
```python
(
```
```python
"执行Value(t,10,2,5)\n"
```
```python
)
```
```python
;
```
```python
if
```
```python
(Assign(t,x,
```
```python
2
```
```python
,
```
```python
5
```
```python
)==
```
```python
true
```
```python
)
```
```python
//调用时返回
```
```python
true
```
```python
printf
```
```python
(
```
```python
"Assign(t,x,2,5)=>x=%d\n"
```
```python
,x)
```
```python
;
```
```python
else
```
```python
//调用时返回
```
```python
false
```
```python
printf
```
```python
(
```
```python
"Assign(t,x,2,5)=>参数错误\n"
```
```python
)
```
```python
;
```
```python
printf
```
```python
(
```
```python
"b:\n"
```
```python
)
```
```python
;
```
```python
DispMat
```
```python
(t)
```
```python
;
```
```python
TranTat
```
```python
(t,tb)
```
```python
;
```
```python
printf
```
```python
(
```
```python
"矩阵转置tb:\n"
```
```python
)
```
```python
;
```
```python
DispMat
```
```python
(tb)
```
```python
;
```
```python
return
```
```python
0;
}
```

