# 文字识别



简介

Hi，您好，欢迎使用百度文字识别（OCR）服务。

本文档主要针对API开发者，描述百度OCR文字识别接口服务的相关技术内容。如果您对文档内容有任何疑问，可以通过以下几种方式联系我们：

- 在百度云控制台内[提交工单](http://ticket.bce.baidu.com/#/ticket/create)，咨询问题类型请选择**人工智能-文字识别**；
- 关注公众号“百度OCR文字识别”（同时能及时获取接口升级等信息）
- 百度AI社区--文字识别官方版块：http://ai.baidu.com/forum/topic/list/164
- 具有免费调用额度的接口，超过每天的免费额度后会返回错误码：17，错误信息：Open api daily request limit reached（每天流量超限额）；
- **所有图片均需要base64编码、去掉编码头后再进行urlencode。**
- 请注意：上传的图片使用JPG格式可以一定程度上提高识别准确率！
- 强烈建议：如果您使用OCR的服务，请从文字识别的控制台进入并创建应用

**注意！请拒绝使用任何第三方插件使用百度OCR服务**

**使用第三方非法插件会导致您的AK SK泄露，导致别人可以盗用您的账户进行任意消费！ 切勿使用任何第三方插件！ 因此导致的账号泄露、恶意消费，请用户自行承担责任。如果您已经使用了相关的插件，建议您立即删除对应appid、更换账户密码、更新所有appid的token，或更换账号！**

## 接口能力

| 接口名称                       | 接口能力简要描述                                             |
| :----------------------------- | :----------------------------------------------------------- |
| **通用场景文字识别**           | **对各类通用场景、文件的识别接口，按行返回识别结果**         |
| 通用文字识别                   | 识别图片中的文字信息                                         |
| 通用文字识别（高精度版）       | 更高精度地识别图片中的文字信息                               |
| 通用文字识别（含位置信息版）   | 识别图片中的文字信息（包含文字区域的坐标信息）               |
| 通用文字识别（高精度含位置版） | 更高精度地识别图片中的文字信息（包含文字区域的坐标信息）     |
| 通用文字识别（含生僻字版）     | 识别图片中的文字信息（包含对常见字和生僻字的识别）           |
| **卡证文字识别**               | **对各类卡片、证照进行结构化识别，按字段返回识别结果**       |
| 身份证识别                     | 对二代居民身份证正反面所有8个字段进行结构化识别              |
| 银行卡识别                     | 对银行卡的卡号、有效期、发卡行、卡片类型进行结构化识别       |
| 营业执照识别                   | 对营业执照进行识别                                           |
| 护照识别                       | 支持对中国大陆居民护照的资料页进行结构化识别，包含国家码、姓名、性别、护照号、出生日期、签发日期、有效期至、签发地点 |
| 港澳通行证识别                 | 【请点击[申请邀测](https://cloud.baidu.com/survey/AICooperativeConsultingApply.html)提交需求申请开通该接口使用权限】对港澳通行证证号、姓名、姓名拼音、性别、有效期限、签发地点、出生日期字段进行识别 |
| 台湾通行证识别                 | 【请点击[申请邀测](https://cloud.baidu.com/survey/AICooperativeConsultingApply.html)提交需求申请开通该接口使用权限】 对台湾通行证证号、签发地、出生日期、姓名、姓名拼音、性别、有效期字段进行识别 |
| 户口本识别                     | 【请点击[申请邀测](https://cloud.baidu.com/survey/AICooperativeConsultingApply.html)提交需求申请开通该接口使用权限】对出生地、出生日期、姓名、民族、与户主关系、性别、身份证号码字段进行识别 |
| 名片识别                       | 【请点击[申请邀测](https://cloud.baidu.com/survey/AICooperativeConsultingApply.html)提交需求申请开通该接口使用权限】提供对各类名片的结构化识别功能，提取姓名、邮编、邮箱、电话、网址、地址、手机号字段 |
| 出生医学证明识别               | 【请点击[申请邀测](https://cloud.baidu.com/survey/AICooperativeConsultingApply.html)提交需求申请开通该接口使用权限】对出生时间、姓名、性别、出生证编号、父亲姓名、母亲姓名字段进行识别 |
| **票据文字识别**               | **对各类票据进行结构化识别，按字段返回识别结果（通用票据识别除外）** |
| 增值税发票识别                 | 对增值税发票进行文字识别，并结构化返回字段信息，支持增值税专票、普票、电子发票 |
| 定额发票识别                   | 对各类定额发票、过路过桥费专用发票代码、号码、金额进行识别   |
| 税务局通用机打发票识别         | 【请点击[申请邀测](https://cloud.baidu.com/survey/AICooperativeConsultingApply.html)提交需求申请开通该接口使用权限】对国家/地方税务局发行的横/竖版通用机打发票的号码、代码、日期、合计金额、类型、商品名称字段进行结构化识别 |
| 火车票识别                     | 支持对大陆火车票的车票号、始发站、目的站、车次、日期、票价、席别、姓名进行结构化识别 |
| 出租车票识别                   | 针对出租车票（现支持北京、上海、深圳）的发票号码、发票代码、车号、日期、时间、金额进行结构化识别 |
| 行程单识别                     | 【请点击[申请邀测](https://cloud.baidu.com/survey/AICooperativeConsultingApply.html)提交需求申请开通该接口使用权限】对飞机行程单中的姓名、始发站、目的站、航班号、日期、票价字段进行结构化识别 |
| 彩票识别                       | 【请点击[申请邀测](https://cloud.baidu.com/survey/AICooperativeConsultingApply.html)提交需求申请开通该接口使用权限】对大乐透、双色球彩票进行识别，并按行返回识别结果 |
| 保单识别                       | 【请点击[申请邀测](https://cloud.baidu.com/survey/AICooperativeConsultingApply.html)提交需求申请开通该接口使用权限】对各类保单中投保人、受益人的各项信息、保费、保险名称等字段进行结构化识别 |
| 通用票据识别                   | 对各类票据图片进行文字识别，并按行（半结构化）返回文字在图片中的位置信息 |
| **汽车场景文字识别**           | **针对汽车相关场景的各类证件、票据结构化识别**               |
| 车牌识别                       | 对机动车蓝牌、绿牌、单/双行黄牌的车牌号码进行识别，并能同时识别图像中的多张车牌 |
| VIN码识别                      | 对车辆车架、挡风玻璃上的VIN码进行识别                        |
| 驾驶证识别                     | 对机动车驾驶证正本所有9个字段进行结构化识别                  |
| 行驶证识别                     | 对机动车行驶证主页及副页所有21个字段进行结构化识别           |
| 机动车销售发票                 | 【请点击[申请邀测](https://cloud.baidu.com/survey/AICooperativeConsultingApply.html)提交需求申请开通该接口使用权限】对机动车销售发票的号码、代码、日期、价税合计等14个关键字段进行结构化识别 |
| 车辆合格证识别                 | 【请点击[申请邀测](https://cloud.baidu.com/survey/AICooperativeConsultingApply.html)提交需求申请开通该接口使用权限】对车辆合格证的编号、车架号、排放标准、发动机编号等12个关键字段进行结构化识别 |
| **其它文字识别**               | **对一些特殊场景所涉及图片中的文字内容进行识别**             |
| 表格文字识别                   | 对单据或报表中的表格内容进行结构化识别，并以JSON或Excel形式返回 |
| 手写文字识别                   | 对手写汉字或手写数字进行识别                                 |
| 网络图片文字识别               | 针对网络图片进行专项优化，对艺术字体或背景复杂的文字内容具有更优的识别效果 |
| 数字识别                       | 识别图片中的数字，适用于手机号提取、快递单号提取、充值号码提取等场景 |
| 二维码识别                     | 【请点击[申请邀测](https://cloud.baidu.com/survey/AICooperativeConsultingApply.html)提交需求申请开通该接口使用权限】对二维码、条形码中对应的文字内容进行识别 |
| 自定义模板文字识别             | 自定义模板文字识别可以通过自助的模板制作，建立起键值的对应关系，一步完成非结构化到结构化的转换，实现自动化的数据录入 |

## 请求格式

POST方式调用

**注意**：Content-Type为`application/x-www-form-urlencoded`，然后通过`urlencode`格式化请求体。

## 返回格式

JSON格式

## 请求限制

请求图片需经过`base64编码`：图片的base64编码指将一副图片数据编码成一串字符串，使用该字符串代替图像地址。您可以首先得到图片的二进制，然后再进行urlencode。

**注意**：图片的base64编码是不包含图片头的，如`（data:image/jpg;base64,）`

**请求格式支持**：PNG、JPG、JPEG、BMP

| 接口名称                               | 图片编码后大小限额                                           |
| :------------------------------------- | :----------------------------------------------------------- |
| **百度文字识别所有接口的图像大小限制** | base64编码urlencode后大小不超过4M，最短边至少15px，最长边最大4096px |

# 调用方式

调用AI服务相关的API接口有两种调用方式，两种不同的调用方式采用相同的接口URL。

区别在于**请求方式**和**鉴权方法**不一样，请求参数和返回结果一致。

【如果您对于使用API调用的方式很陌生，您可以参见：[【只要10分钟 快速掌握文字识别】 教程](http://ai.baidu.com/forum/topic/show/867951)

## 调用方式一

**请求URL数据格式**

向API服务地址使用POST发送请求，必须在URL中带上参数：

**access_token:** 必须参数，参考“[Access Token获取](http://ai.baidu.com/docs#/Auth)”。

> 注意：`access_token`的有效期为30天，需要每30天进行定期更换；

POST中参数按照API接口说明调用即可。

例如文字识别API，使用HTTPS POST发送：

```
https://aip.baidubce.com/rest/2.0/ocr/v1/general?access_token=24.f9ba9c5241b67688bb4adbed8bc91dec.2592000.1485570332.282335-8574074
```

**获取access_token示例代码**

bash

PHP

Java

Python

C++

C#

Node

```
#!/bin/bash
curl -i -k 'https://aip.baidubce.com/oauth/2.0/token?grant_type=client_credentials&client_id=【百度云应用的AK】&client_secret=【百度云应用的SK】'
```

> **说明**：方式一鉴权使用的Access_token必须通过API Key和Secret Key获取。

## 调用方式二

**请求头域内容**

在请求的HTTP头域中包含以下信息：

- host（必填）
- x-bce-date （必填）
- x-bce-request-id（选填）
- authorization（必填）
- content-type（必填）
- content-length（选填）

作为示例，以下是一个标准的人脸识别的请求头域内容:

```
POST /rest/2.0/face/v1/detect HTTP/1.1
accept-encoding: gzip, deflate
x-bce-date: 2015-03-24T13:02:00Z
connection: keep-alive
accept: */*
host: aip.baidubce.com
x-bce-request-id: 73c4e74c-3101-4a00-bf44-fe246959c05e
content-type: application/x-www-form-urlencoded
authorization: bce-auth-v1/46bd9968a6194b4bbdf0341f2286ccce/2015-03-24T13:02:00Z/1800/host;x-bce-date/994014d96b0eb26578e039fa053a4f9003425da4bfedf33f4790882fb4c54903
```

> **说明**：方式二鉴权使用的[API认证机制](https://cloud.baidu.com/doc/Reference/AuthenticationMechanism.html)authorization必须通过百度云的[AK/SK](https://cloud.baidu.com/doc/Reference/GetAKSK.html)生成。

# 通用文字识别

## 接口描述

用户向服务请求识别某张图中的所有文字。

## 请求说明

**请求示例**

HTTP 方法：`POST`

请求URL： `https://aip.baidubce.com/rest/2.0/ocr/v1/general_basic`

URL参数：

| 参数         | 值                                                           |
| :----------- | :----------------------------------------------------------- |
| access_token | 通过API Key和Secret Key获取的access_token,参考“[Access Token获取](http://ai.baidu.com/docs#/Auth)” |

Header如下：

| 参数         | 值                                |
| :----------- | :-------------------------------- |
| Content-Type | application/x-www-form-urlencoded |

Body中放置请求参数，参数详情如下：

**请求参数**

| 参数             | 是否必选      | 类型   | 可选值范围                                               | 说明                                                         |
| :--------------- | :------------ | :----- | :------------------------------------------------------- | :----------------------------------------------------------- |
| image            | 和url二选一   | string | -                                                        | 图像数据，base64编码后进行urlencode，要求base64编码和urlencode后大小不超过4M，最短边至少15px，最长边最大4096px,支持jpg/png/bmp格式，当image字段存在时url字段失效 |
| url              | 和image二选一 | string | -                                                        | 图片完整URL，URL长度不超过1024字节，URL对应的图片base64编码后大小不超过4M，最短边至少15px，最长边最大4096px,支持jpg/png/bmp格式，当image字段存在时url字段失效，不支持https的图片链接 |
| language_type    | false         | string | CHN_ENG、ENG、 POR、FRE、 GER、ITA、 SPA、RUS、 JAP、KOR | 识别语言类型，默认为CHN_ENG。可选值包括： - CHN_ENG：中英文混合； - ENG：英文； - POR：葡萄牙语； - FRE：法语； - GER：德语； - ITA：意大利语； - SPA：西班牙语； - RUS：俄语； - JAP：日语； - KOR：韩语 |
| detect_direction | false         | string | true、false                                              | 是否检测图像朝向，默认不检测，即：false。朝向是指输入图像是正常方向、逆时针旋转90/180/270度。可选值包括: - true：检测朝向； - false：不检测朝向。 |
| detect_language  | false         | string | true、false                                              | 是否检测语言，默认不检测。当前支持（中文、英语、日语、韩语） |
| probability      | false         | string | true、false                                              | 是否返回识别结果中每一行的置信度                             |

**请求代码示例**

请参考通用文字识别（含位置信息版）的代码内容，并更换请求地址。

## 返回说明

**返回参数**

| 字段             | 是否必选 | 类型    | 说明                                                         |
| :--------------- | :------- | :------ | :----------------------------------------------------------- |
| direction        | 否       | int32   | 图像方向，当detect_direction=true时存在。 - -1:未定义， - 0:正向， - 1: 逆时针90度， - 2:逆时针180度， - 3:逆时针270度 |
| log_id           | 是       | uint64  | 唯一的log id，用于问题定位                                   |
| words_result     | 是       | array() | 识别结果数组                                                 |
| words_result_num | 是       | uint32  | 识别结果数，表示words_result的元素个数                       |
| +words           | 否       | string  | 识别结果字符串                                               |
| probability      | 否       | object  | 识别结果中每一行的置信度值，包含average：行置信度平均值，variance：行置信度方差，min：行置信度最小值 |
| language         | false    | int32   | 当detect_language=true时存在                                 |

**返回示例**

```
HTTP/1.1 200 OK
x-bce-request-id: 73c4e74c-3101-4a00-bf44-fe246959c05e
Cache-Control: no-cache
Server: BWS
Date: Tue, 18 Oct 2016 02:21:01 GMT
Content-Type: application/json;charset=UTF-8
{
"log_id": 2471272194, 
"words_result_num": 2,
"words_result": 
	[
		{"words": " TSINGTAO"}, 
		{"words": "青島睥酒"}
	]
}
```

# 通用文字识别（高精度版）

## 接口描述

用户向服务请求识别某张图中的所有文字，相对于通用文字识别该产品精度更高，但是识别耗时会稍长。

## 请求说明

**请求示例**

HTTP 方法：`POST`

请求URL： `https://aip.baidubce.com/rest/2.0/ocr/v1/accurate_basic`

URL参数：

| 参数         | 值                                                           |
| :----------- | :----------------------------------------------------------- |
| access_token | 通过API Key和Secret Key获取的access_token,参考“[Access Token获取](http://ai.baidu.com/docs#/Auth)” |

Header如下：

| 参数         | 值                                |
| :----------- | :-------------------------------- |
| Content-Type | application/x-www-form-urlencoded |

Body中放置请求参数，参数详情如下：

**请求参数**

| 参数             | 是否必选 | 类型   | 可选值范围  | 说明                                                         |
| :--------------- | :------- | :----- | :---------- | :----------------------------------------------------------- |
| image            | true     | string | -           | 图像数据，base64编码后进行urlencode，要求base64编码和urlencode后大小不超过4M，最短边至少15px，最长边最大4096px,支持jpg/png/bmp格式 |
| detect_direction | false    | string | true、false | 是否检测图像朝向，默认不检测，即：false。朝向是指输入图像是正常方向、逆时针旋转90/180/270度。可选值包括: - true：检测朝向； - false：不检测朝向。 |
| probability      | false    | string | true、false | 是否返回识别结果中每一行的置信度                             |

**请求代码示例**

请参考通用文字识别（含位置信息版）的代码内容，并更换请求地址。

## 返回说明

**返回参数**

| 字段             | 是否必选 | 类型    | 说明                                                         |
| :--------------- | :------- | :------ | :----------------------------------------------------------- |
| log_id           | 是       | uint64  | 唯一的log id，用于问题定位                                   |
| direction        | 否       | int32   | 图像方向，当detect_direction=true时存在。 - -1:未定义， - 0:正向， - 1: 逆时针90度， - 2:逆时针180度， - 3:逆时针270度 |
| words_result     | 是       | array() | 识别结果数组                                                 |
| words_result_num | 是       | uint32  | 识别结果数，表示words_result的元素个数                       |
| +words           | 否       | string  | 识别结果字符串                                               |
| probability      | 否       | object  | 识别结果中每一行的置信度值，包含average：行置信度平均值，variance：行置信度方差，min：行置信度最小值 |

**返回示例** **参考通用文字识别返回示例**

# 通用文字识别（含位置信息版）

## 接口描述

用户向服务请求识别某张图中的所有文字，并返回文字在图中的位置信息。

## 请求说明

**请求示例**

HTTP 方法：`POST`

请求URL： `https://aip.baidubce.com/rest/2.0/ocr/v1/general`

URL参数：

| 参数         | 值                                                           |
| :----------- | :----------------------------------------------------------- |
| access_token | 通过API Key和Secret Key获取的access_token,参考“[Access Token获取](http://ai.baidu.com/docs#/Auth)” |

Header如下：

| 参数         | 值                                |
| :----------- | :-------------------------------- |
| Content-Type | application/x-www-form-urlencoded |

Body中放置请求参数，参数详情如下：

**请求参数**

| 参数                  | 是否必选      | 类型   | 可选值范围                                               | 说明                                                         |
| :-------------------- | :------------ | :----- | :------------------------------------------------------- | :----------------------------------------------------------- |
| image                 | 和url二选一   | string | -                                                        | 图像数据，base64编码后进行urlencode，要求base64编码和urlencode后大小不超过4M，最短边至少15px，最长边最大4096px,支持jpg/png/bmp格式，当image字段存在时url字段失效 |
| url                   | 和image二选一 | string | -                                                        | 图片完整URL，URL长度不超过1024字节，URL对应的图片base64编码后大小不超过4M，最短边至少15px，最长边最大4096px,支持jpg/png/bmp格式，当image字段存在时url字段失效，不支持https的图片链接 |
| recognize_granularity | false         | string | big、small                                               | 是否定位单字符位置，big：不定位单字符位置，默认值；small：定位单字符位置 |
| language_type         | false         | string | CHN_ENG、ENG、 POR、FRE、 GER、ITA、 SPA、RUS、 JAP、KOR | 识别语言类型，默认为CHN_ENG。可选值包括： - CHN_ENG：中英文混合； - ENG：英文； - POR：葡萄牙语； - FRE：法语； - GER：德语； - ITA：意大利语； - SPA：西班牙语； - RUS：俄语； - JAP：日语； - KOR：韩语 |
| detect_direction      | false         | string | true、false                                              | 是否检测图像朝向，默认不检测，即：false。朝向是指输入图像是正常方向、逆时针旋转90/180/270度。可选值包括: - true：检测朝向； - false：不检测朝向。 |
| detect_language       | FALSE         | string | true、false                                              | 是否检测语言，默认不检测。当前支持（中文、英语、日语、韩语） |
| vertexes_location     | FALSE         | string | true、false                                              | 是否返回文字外接多边形顶点位置，不支持单字位置。默认为false  |
| probability           | false         | string | true、false                                              | 是否返回识别结果中每一行的置信度                             |

**请求代码示例**

**提示一**：使用示例代码前，请记得替换其中的示例Token、图片地址或Base64信息。

**提示二**：部分语言依赖的类或库，请在代码注释中查看下载地址。

bash

PHP

Java

Python

C++

C#

```
通用文字识别
curl -i -k 'https://aip.baidubce.com/rest/2.0/ocr/v1/general?access_token=【调用鉴权接口获取的token】' --data 'image=【图片Base64编码，需UrlEncode】' -H 'Content-Type:application/x-www-form-urlencoded'
```

## 返回说明

**返回参数**

| 字段               | 是否必选 | 类型    | 说明                                                         |
| :----------------- | :------- | :------ | :----------------------------------------------------------- |
| log_id             | 是       | uint64  | 唯一的log id，用于问题定位                                   |
| direction          | 否       | int32   | 图像方向，当detect_direction=true时存在。 - -1:未定义， - 0:正向， - 1: 逆时针90度， - 2:逆时针180度， - 3:逆时针270度 |
| language           | 否       | int32   | 语言，当detect_language=true时存在。 -1:未定义， 0:英文， 1: 日文， 2:韩文， 3:中文 |
| words_result       | 是       | array() | 定位和识别结果数组                                           |
| words_result_num   | 是       | uint32  | 识别结果数，表示words_result的元素个数                       |
| +vertexes_location | 否       | array() | 当前为四个顶点: 左上，右上，右下，左下。当vertexes_location=true时存在 |
| ++x                | 是       | uint32  | 水平坐标（坐标0点为左上角）                                  |
| ++y                | 是       | uint32  | 垂直坐标（坐标0点为左上角）                                  |
| +location          | 是       | array() | 位置数组（坐标0点为左上角）                                  |
| ++left             | 是       | uint32  | 表示定位位置的长方形左上顶点的水平坐标                       |
| ++top              | 是       | uint32  | 表示定位位置的长方形左上顶点的垂直坐标                       |
| ++width            | 是       | uint32  | 表示定位位置的长方形的宽度                                   |
| ++height           | 是       | uint32  | 表示定位位置的长方形的高度                                   |
| +words             | 否       | string  | 识别结果字符串                                               |
| +chars             | 否       | array() | 单字符结果，recognize_granularity=small时存在                |
| ++location         | 是       | array() | 位置数组（坐标0点为左上角）                                  |
| +++left            | 是       | uint32  | 表示定位位置的长方形左上顶点的水平坐标                       |
| +++top             | 是       | uint32  | 表示定位位置的长方形左上顶点的垂直坐标                       |
| +++width           | 是       | uint32  | 表示定位定位位置的长方形的宽度                               |
| +++height          | 是       | uint32  | 表示位置的长方形的高度                                       |
| ++char             | 是       | string  | 单字符识别结果                                               |
| probability        | 否       | object  | 识别结果中每一行的置信度值，包含average：行置信度平均值，variance：行置信度方差，min：行置信度最小值 |

**返回示例**

```
HTTP/1.1 200 OK
x-bce-request-id: 73c4e74c-3101-4a00-bf44-fe246959c05e
Cache-Control: no-cache
Server: BWS
Date: Tue, 18 Oct 2016 02:21:01 GMT
Content-Type: application/json;charset=UTF-8
{
"log_id": 3523983603,
"direction": 0, //detect_direction=true时存在
"words_result_num": 2,
"words_result": [
    {
        "location": {
            "left": 35,
            "top": 53,
            "width": 193,
            "height": 109
        },
        "words": "感动",
        "chars": [    //recognize_granularity=small时存在
            {
                "location": {
                    "left": 56,
                    "top": 65,
                    "width": 69,
                    "height": 88
                },
                "char": "感"
            },
            {
                "location": {
                    "left": 140,
                    "top": 65,
                    "width": 70,
                    "height": 88
                },
                "char": "动"
            }
        ]
    }
    ...
]
}
```

# 通用文字识别（含位置高精度版）

## 接口描述

用户向服务请求识别某张图中的所有文字，并返回文字在图片中的坐标信息，相对于通用文字识别（含位置信息版）该产品精度更高，但是识别耗时会稍长。。

## 请求说明

**请求示例**

HTTP 方法：`POST`

请求URL： `https://aip.baidubce.com/rest/2.0/ocr/v1/accurate`

URL参数：

| 参数         | 值                                                           |
| :----------- | :----------------------------------------------------------- |
| access_token | 通过API Key和Secret Key获取的access_token,参考“[Access Token获取](http://ai.baidu.com/docs#/Auth)” |

Header如下：

| 参数         | 值                                |
| :----------- | :-------------------------------- |
| Content-Type | application/x-www-form-urlencoded |

Body中放置请求参数，参数详情如下：

**请求参数**

| 参数                  | 是否必选 | 类型   | 可选值范围  | 说明                                                         |
| :-------------------- | :------- | :----- | :---------- | :----------------------------------------------------------- |
| image                 | true     | string | -           | 图像数据，base64编码后进行urlencode，要求base64编码和urlencode后大小不超过4M，最短边至少15px，最长边最大4096px,支持jpg/png/bmp格式 |
| recognize_granularity | false    | string | big、small  | 是否定位单字符位置，big：不定位单字符位置，默认值；small：定位单字符位置 |
| detect_direction      | false    | string | true、false | 是否检测图像朝向，默认不检测，即：false。朝向是指输入图像是正常方向、逆时针旋转90/180/270度。可选值包括: - true：检测朝向； - false：不检测朝向。 |
| vertexes_location     | FALSE    | string | true、false | 是否返回文字外接多边形顶点位置，不支持单字位置。默认为false  |
| probability           | false    | string | true、false | 是否返回识别结果中每一行的置信度                             |

**请求代码示例**

**提示一**：使用示例代码前，请记得替换其中的示例Token、图片地址或Base64信息。

**提示二**：部分语言依赖的类或库，请在代码注释中查看下载地址。

bash

PHP

Java

Python

C++

C#

```
通用文字识别
curl -i -k 'https://aip.baidubce.com/rest/2.0/ocr/v1/general?access_token=【调用鉴权接口获取的token】' --data 'image=【图片Base64编码，需UrlEncode】' -H 'Content-Type:application/x-www-form-urlencoded'
```

## 返回说明

**返回参数**

| 字段               | 是否必选 | 类型    | 说明                                                         |
| :----------------- | :------- | :------ | :----------------------------------------------------------- |
| log_id             | 是       | uint64  | 唯一的log id，用于问题定位                                   |
| direction          | 否       | int32   | 图像方向，当detect_direction=true时存在。 - -1:未定义， - 0:正向， - 1: 逆时针90度， - 2:逆时针180度， - 3:逆时针270度 |
| words_result       | 是       | array() | 定位和识别结果数组                                           |
| words_result_num   | 是       | uint32  | 识别结果数，表示words_result的元素个数                       |
| +vertexes_location | 否       | array() | 当前为四个顶点: 左上，右上，右下，左下。当vertexes_location=true时存在 |
| ++x                | 是       | uint32  | 水平坐标（坐标0点为左上角）                                  |
| ++y                | 是       | uint32  | 垂直坐标（坐标0点为左上角）                                  |
| +location          | 是       | array() | 位置数组（坐标0点为左上角）                                  |
| ++left             | 是       | uint32  | 表示定位位置的长方形左上顶点的水平坐标                       |
| ++top              | 是       | uint32  | 表示定位位置的长方形左上顶点的垂直坐标                       |
| ++width            | 是       | uint32  | 表示定位位置的长方形的宽度                                   |
| ++height           | 是       | uint32  | 表示定位位置的长方形的高度                                   |
| +words             | 否       | string  | 识别结果字符串                                               |
| +chars             | 否       | array() | 单字符结果，recognize_granularity=small时存在                |
| ++location         | 是       | array() | 位置数组（坐标0点为左上角）                                  |
| +++left            | 是       | uint32  | 表示定位位置的长方形左上顶点的水平坐标                       |
| +++top             | 是       | uint32  | 表示定位位置的长方形左上顶点的垂直坐标                       |
| +++width           | 是       | uint32  | 表示定位定位位置的长方形的宽度                               |
| +++height          | 是       | uint32  | 表示位置的长方形的高度                                       |
| ++char             | 是       | string  | 单字符识别结果                                               |
| probability        | 否       | object  | 识别结果中每一行的置信度值，包含average：行置信度平均值，variance：行置信度方差，min：行置信度最小值 |

**返回示例**

参考通用文字识别（含位置信息版）返回示例

# 通用文字识别（含生僻字版）

## 接口描述

某些场景中，图片中的中文不光有常用字，还包含了生僻字，这时用户需要对该图进行文字识别，应使用通用文字识别（含生僻字版）。

## 请求说明

**请求示例**

HTTP 方法：`POST`

请求URL： `https://aip.baidubce.com/rest/2.0/ocr/v1/general_enhanced`

URL参数：

| 参数         | 值                                                           |
| :----------- | :----------------------------------------------------------- |
| access_token | 通过API Key和Secret Key获取的access_token,参考“[Access Token获取](http://ai.baidu.com/docs#/Auth)” |

Header如下：

| 参数         | 值                                |
| :----------- | :-------------------------------- |
| Content-Type | application/x-www-form-urlencoded |

Body中放置请求参数，参数详情如下：

**请求参数**

| 参数             | 是否必选      | 类型   | 可选值范围  | 说明                                                         |
| :--------------- | :------------ | :----- | :---------- | :----------------------------------------------------------- |
| image            | 和url二选一   | string | -           | 图像数据，base64编码后进行urlencode，要求base64编码和urlencode后大小不超过4M，最短边至少15px，最长边最大4096px,支持jpg/png/bmp格式，当image字段存在时url字段失效 |
| url              | 和image二选一 | string | -           | 图片完整URL，URL长度不超过1024字节，URL对应的图片base64编码后大小不超过4M，最短边至少15px，最长边最大4096px,支持jpg/png/bmp格式，当image字段存在时url字段失效，不支持https的图片链接 |
| detect_direction | false         | string | true、false | 是否检测图像朝向，默认不检测，即：false。朝向是指输入图像是正常方向、逆时针旋转90/180/270度。可选值包括: - true：检测朝向； - false：不检测朝向。 |
| probability      | false         | string | true、false | 是否返回识别结果中每一行的置信度                             |

**请求代码示例**

请参考通用文字识别（含位置信息版）的代码内容，并更换请求地址。

## 返回说明

**返回参数**

| 字段             | 是否必选 | 类型    | 说明                                                         |
| :--------------- | :------- | :------ | :----------------------------------------------------------- |
| log_id           | 是       | uint64  | 唯一的log id，用于问题定位                                   |
| direction        | 否       | int32   | 图像方向，当detect_direction=true时存在。 - -1:未定义， - 0:正向， - 1: 逆时针90度， - 2:逆时针180度， - 3:逆时针270度 |
| words_result     | 是       | array() | 识别结果数组                                                 |
| words_result_num | 是       | uint32  | 识别结果数，表示words_result的元素个数                       |
| +words           | 否       | string  | 识别结果字符串                                               |
| probability      | 否       | object  | 识别结果中每一行的置信度值，包含average：行置信度平均值，variance：行置信度方差，min：行置信度最小值 |

**返回示例**

```
{
"log_id": 2471272194, 
"words_result_num": 2,
"words_result": 
	[
		{"words": " TSINGTAO"}, 
		{"words": "青島睥酒"}
	]
}
```

# 手写文字识别

## 接口描述

对手写中文汉字、数字进行识别

## 请求说明

**请求示例**

HTTP 方法：`POST`

请求URL： `https://aip.baidubce.com/rest/2.0/ocr/v1/handwriting`

URL参数：

| 参数         | 值                                                           |
| :----------- | :----------------------------------------------------------- |
| access_token | 通过API Key和Secret Key获取的access_token,参考“[Access Token获取](http://ai.baidu.com/docs#/Auth)” |

Header如下：

| 参数         | 值                                |
| :----------- | :-------------------------------- |
| Content-Type | application/x-www-form-urlencoded |

Body中放置请求参数，参数详情如下：

**请求参数**

| 参数                  | 是否必选 | 类型   | 可选值范围  | 说明                                                         |
| :-------------------- | :------- | :----- | :---------- | :----------------------------------------------------------- |
| image                 | 是       | string | -           | 图像数据，base64编码后进行urlencode，要求base64编码和urlencode后大小不超过4M，最短边至少15px，最长边最大4096px,支持jpg/png/bmp格式 |
| recognize_granularity | false    | string | big、small  | 是否定位单字符位置，big：不定位单字符位置，默认值；small：定位单字符位置 |
| words_type            | false    | string | 默认/number | words_type=number:手写数字识别；无此参数或传其它值 默认手写通用识别（目前支持汉字和英文） |

**请求代码示例**

请参考通用文字识别（含位置信息版）的代码内容，并更换请求地址。

## 返回说明

**返回参数**

| 字段             | 是否必选 | 类型    | 说明                                                         |
| :--------------- | :------- | :------ | :----------------------------------------------------------- |
| log_id           | 是       | uint64  | 唯一的log id，用于问题定位                                   |
| words_result_num | 是       | uint32  | 识别结果数，表示words_result的元素个数                       |
| words_result     | 是       | array() | 定位和识别结果数组                                           |
| location         | 是       | object  | 位置数组（坐标0点为左上角）                                  |
| left             | 是       | uint32  | 表示定位位置的长方形左上顶点的水平坐标                       |
| top              | 是       | uint32  | 表示定位位置的长方形左上顶点的垂直坐标                       |
| width            | 是       | uint32  | 表示定位位置的长方形的宽度                                   |
| height           | 是       | uint32  | 表示定位位置的长方形的高度                                   |
| words            | 是       | string  | 识别结果字符串                                               |
| chars            | 否       | array() | 单字符结果，recognize_granularity=small时存在                |
| location         | 是       | array() | 位置数组（坐标0点为左上角）                                  |
| left             | 是       | uint32  | 表示定位位置的长方形左上顶点的水平坐标                       |
| top              | 是       | uint32  | 表示定位位置的长方形左上顶点的垂直坐标                       |
| width            | 是       | uint32  | 表示定位定位位置的长方形的宽度                               |
| height           | 是       | uint32  | 表示位置的长方形的高度                                       |
| char             | 是       | string  | 单字符识别结果                                               |
| probability      | 否       | object  | 识别结果中每一行的置信度值，包含average：行置信度平均值，variance：行置信度方差，min：行置信度最小值 |

**返回示例**

```
{
    "log_id": 620759800,
    "words_result": [
        {
            "location": {
                "left": 56,
                "top": 0,
                "width": 21,
                "height": 210
            },
            "words": "3"
        }
    ],
    "words_result_num": 1
}
```

# 身份证识别

## 接口描述

支持对大陆居民二代身份证正反面的所有字段进行结构化识别，包括姓名、性别、民族、出生日期、住址、身份证号、签发机关、有效期限；同时，支持对用户上传的身份证图片进行图像风险和质量检测，可识别图片是否为复印件或临时身份证，是否被翻拍或编辑，是否存在正反颠倒、模糊、欠曝、过曝等质量问题。

## 请求说明

**请求示例**

HTTP 方法：`POST`

请求URL： `https://aip.baidubce.com/rest/2.0/ocr/v1/idcard`

URL参数：

| 参数         | 值                                                           |
| :----------- | :----------------------------------------------------------- |
| access_token | 通过API Key和Secret Key获取的access_token,参考“[Access Token获取](http://ai.baidu.com/docs#/Auth)” |

Header如下：

| 参数         | 值                                |
| :----------- | :-------------------------------- |
| Content-Type | application/x-www-form-urlencoded |

Body中放置请求参数，参数详情如下：

**请求参数**

| 参数             | 是否必选 | 类型   | 可选值范围  | 说明                                                         |
| :--------------- | :------- | :----- | :---------- | :----------------------------------------------------------- |
| image            | true     | string | -           | 图像数据，base64编码后进行urlencode，要求base64编码和urlencode后大小不超过4M，最短边至少15px，最长边最大4096px,支持jpg/png/bmp格式 |
| id_card_side     | true     | string | front、back | front：身份证含照片的一面；back：身份证带国徽的一面          |
| detect_direction | false    | string | true、false | 是否检测图像旋转角度，默认检测，即：true。朝向是指输入图像是正常方向、逆时针旋转90/180/270度。可选值包括: - true：检测旋转角度并矫正识别； - false：不检测旋转角度，针对摆放情况不可控制的情况建议本参数置为true。 |
| detect_risk      | false    | string | true,false  | 是否开启身份证风险类型(身份证复印件、临时身份证、身份证翻拍、修改过的身份证)功能，默认不开启，即：false。可选值:true-开启；false-不开启 |

**请求代码示例**

**提示一**：使用示例代码前，请记得替换其中的示例Token、图片地址或Base64信息。

**提示二**：部分语言依赖的类或库，请在代码注释中查看下载地址。

bash

PHP

Java

Python

C++

C#

```
身份证识别
curl -i -k 'https://aip.baidubce.com/rest/2.0/ocr/v1/idcard?access_token=###########' --data 'id_card_side=front&image=【图片Base64编码，需UrlEncode】' -H 'Content-Type:application/x-www-form-urlencoded'
```

## 返回说明

**返回参数**

| 字段             | 是否必选 | 类型    | 说明                                                         |
| :--------------- | :------- | :------ | :----------------------------------------------------------- |
| direction        | 否       | int32   | 图像方向，当detect_direction=true时存在。 - -1:未定义， - 0:正向， - 1: 逆时针90度， - 2:逆时针180度， - 3:逆时针270度 |
| image_status     | 是       | string  | normal-识别正常 reversed_side-身份证正反面颠倒 non_idcard-上传的图片中不包含身份证 blurred-身份证模糊 other_type_card-其他类型证照 over_exposure-身份证关键字段反光或过曝 over_dark-身份证欠曝（亮度过低） unknown-未知状态 |
| risk_type        | 否       | string  | 输入参数 detect_risk = true 时，则返回该字段识别身份证类型: normal-正常身份证；copy-复印件；temporary-临时身份证；screen-翻拍；unknown-其他未知情况 |
| edit_tool        | 否       | string  | 如果参数 detect_risk = true 时，则返回此字段。如果检测身份证被编辑过，该字段指定编辑软件名称，如:Adobe Photoshop CC 2014 (Macintosh),如果没有被编辑过则返回值无此参数 |
| log_id           | 是       | uint64  | 唯一的log id，用于问题定位                                   |
| words_result     | 是       | array() | 定位和识别结果数组                                           |
| words_result_num | 是       | uint32  | 识别结果数，表示words_result的元素个数                       |
| +location        | 是       | array() | 位置数组（坐标0点为左上角）                                  |
| ++left           | 是       | uint32  | 表示定位位置的长方形左上顶点的水平坐标                       |
| ++top            | 是       | uint32  | 表示定位位置的长方形左上顶点的垂直坐标                       |
| ++width          | 是       | uint32  | 表示定位位置的长方形的宽度                                   |
| ++height         | 是       | uint32  | 表示定位位置的长方形的高度                                   |
| +words           | 否       | string  | 识别结果字符串                                               |

**返回示例**

```
{
    "log_id": 2648325511,
    "direction": 0,
    "image_status": "normal",
    "idcard_type": "normal",
    "edit_tool": "Adobe Photoshop CS3 Windows",
    "words_result": {
        "住址": {
            "location": {
                "left": 267,
                "top": 453,
                "width": 459,
                "height": 99
            },
            "words": "南京市江宁区弘景大道3889号"
        },
        "公民身份号码": {
            "location": {
                "left": 443,
                "top": 681,
                "width": 589,
                "height": 45
            },
            "words": "330881199904173914"
        },
        "出生": {
            "location": {
                "left": 270,
                "top": 355,
                "width": 357,
                "height": 45
            },
            "words": "19990417"
        },
        "姓名": {
            "location": {
                "left": 267,
                "top": 176,
                "width": 152,
                "height": 50
            },
            "words": "伍云龙"
        },
        "性别": {
            "location": {
                "left": 269,
                "top": 262,
                "width": 33,
                "height": 52
            },
            "words": "男"
        },
        "民族": {
            "location": {
                "left": 492,
                "top": 279,
                "width": 30,
                "height": 37
            },
            "words": "汉"
        }
    },
    "words_result_num": 6
}
```

# 银行卡识别

## 接口描述

识别银行卡并返回卡号、有效期、发卡行和卡片类型。

## 请求说明

**请求示例**

HTTP 方法: `POST`

请求URL: `https://aip.baidubce.com/rest/2.0/ocr/v1/bankcard`

URL参数：

| 参数         | 值                                                           |
| :----------- | :----------------------------------------------------------- |
| access_token | 通过API Key和Secret Key获取的access_token,参考“[Access Token获取](http://ai.baidu.com/docs#/Auth)” |

Header如下：

| 参数         | 值                                |
| :----------- | :-------------------------------- |
| Content-Type | application/x-www-form-urlencoded |

Body中放置请求参数，参数详情如下：

**请求参数**

| 参数  | 类型   | 是否必须 | 说明                                                         |
| :---- | :----- | :------- | :----------------------------------------------------------- |
| image | string | 是       | 图像数据，base64编码后进行urlencode，要求base64编码和urlencode后大小不超过4M，最短边至少15px，最长边最大4096px,支持jpg/png/bmp格式 |

**请求代码示例**

**提示一**：使用示例代码前，请记得替换其中的示例Token、图片地址或Base64信息。

**提示二**：部分语言依赖的类或库，请在代码注释中查看下载地址。

bash

PHP

Java

Python

C++

C#

```
银行卡识别
curl -i -k 'https://aip.baidubce.com/rest/2.0/ocr/v1/bankcard?access_token=【调用鉴权接口获取的token】' --data 'image=【图片Base64编码，需UrlEncode】' -H 'Content-Type:application/x-www-form-urlencoded'
```

## 返回说明

**返回参数**

| 参数              | 类型   | 是否必须 | 说明                                         |
| :---------------- | :----- | :------- | :------------------------------------------- |
| log_id            | uint64 | 是       | 请求标识码，随机数，唯一。                   |
| result            | object | 是       | 返回结果                                     |
| +bank_card_number | string | 是       | 银行卡卡号                                   |
| +bank_name        | string | 是       | 银行名，不能识别时为空                       |
| +bank_card_type   | uint32 | 是       | 银行卡类型，0:不能识别; 1: 借记卡; 2: 信用卡 |

**返回示例**

```
{
    "log_id": 1447188951,
    "result": {
        "bank_card_number": "622500000000000",
		"valid_date": "07/21",
        "bank_name": "招商银行",
        "bank_card_type": 1
    }
}
```

# 营业执照识别

## 接口描述

识别营业执照，并返回关键字段的值，包括单位名称、类型、法人、地址、有效期、证件编号、社会信用代码等。

## 请求说明

**请求示例**

HTTP 方法: `POST`

请求URL: `https://aip.baidubce.com/rest/2.0/ocr/v1/business_license`

URL参数：

| 参数         | 值                                                           |
| :----------- | :----------------------------------------------------------- |
| access_token | 通过API Key和Secret Key获取的access_token,参考“[Access Token获取](http://ai.baidu.com/docs#/Auth)” |

Header如下：

| 参数         | 值                                |
| :----------- | :-------------------------------- |
| Content-Type | application/x-www-form-urlencoded |

Body中放置请求参数，参数详情如下：

**请求参数**

| 参数             | 类型   | 是否必须 | 说明                                                         |
| :--------------- | :----- | :------- | :----------------------------------------------------------- |
| image            | string | 是       | 图像数据，base64编码后进行urlencode，要求base64编码和urlencode后大小不超过4M，最短边至少15px，最长边最大4096px,支持jpg/png/bmp格式 |
| detect_direction | string | 否       | 可选值 true,false是否检测图像朝向，默认不检测，即：false。可选值包括true - 检测朝向；false - 不检测朝向。朝向是指输入图像是正常方向、逆时针旋转90/180/270度 |
| accuracy         | string | 否       | 可选值：normal,high参数选normal或为空使用快速服务；选择high使用高精度服务，但是时延会根据具体图片有相应的增加 |

**请求代码示例**

请参考通用文字识别（含位置信息版）的代码内容，并更换请求地址。

## 返回说明

**返回参数**

| 参数             | 是否必须 | 类型    | 说明                                   |
| :--------------- | :------- | :------ | :------------------------------------- |
| log_id           | 是       | uint64  | 请求标识码，随机数，唯一。             |
| words_result_num | 是       | uint32  | 识别结果数，表示words_result的元素个数 |
| words_result     | 是       | array() | 定位和识别结果数组                     |
| left             | 是       | uint32  | 表示定位位置的长方形左上顶点的水平坐标 |
| top              | 是       | uint32  | 表示定位位置的长方形左上顶点的垂直坐标 |
| width            | 是       | uint32  | 表示定位位置的长方形的宽度             |
| height           | 是       | uint32  | 表示定位位置的长方形的高度             |
| words            | 否       | string  | 识别结果字符串                         |

**返回示例**

```
{
    "log_id": 490058765,
    "words_result": {
        "单位名称": {
            "location": {
                "left": 500,
                "top": 479,
                "width": 618,
                "height": 54
            },
            "words": "袁氏财团有限公司"
        },
         "类型": {
            "location": {
                "left": 53,
                "top": 64,
                "width": 74,
                "height": 97
            },
            "words": "有限责任公司（自然人独资）"
        },
        "法人": {
            "location": {
                "left": 938,
                "top": 557,
                "width": 94,
                "height": 46
            },
            "words": "袁运筹"
        },
        "地址": {
            "location": {
                "left": 503,
                "top": 644,
                "width": 574,
                "height": 57
            },
            "words": "江苏省南京市中山东路19号"
        },
        "有效期": {
            "location": {
                "left": 779,
                "top": 1108,
                "width": 271,
                "height": 49
            },
            "words": "2015年02月12日"
        },
        "证件编号": {
            "location": {
                "left": 1219,
                "top": 357,
                "width": 466,
                "height": 39
            },
            "words": "苏餐证字(2019)第666602666661号"
        },
        "社会信用代码": {
            "location": {
                "left": 0,
                "top": 0,
                "width": 0,
                "height": 0
            },
            "words": "无"
        }
    },
    "words_result_num": 6
}
```

# 护照识别

## 接口描述

支持对中国大陆居民护照的资料页进行结构化识别，包含国家码、姓名、姓名拼音、性别、护照号、出生日期、出生地点、签发日期、有效期至、签发地点。

## 请求说明

**请求示例**

HTTP 方法：`POST`

请求URL： `https://aip.baidubce.com/rest/2.0/ocr/v1/passport`

URL参数：

| 参数         | 值                                                           |
| :----------- | :----------------------------------------------------------- |
| access_token | 通过API Key和Secret Key获取的access_token,参考“[Access Token获取](http://ai.baidu.com/docs#/Auth)” |

Header如下：

| 参数         | 值                                |
| :----------- | :-------------------------------- |
| Content-Type | application/x-www-form-urlencoded |

Body中放置请求参数，参数详情如下：

**请求参数**

| 参数  | 是否必选 | 类型   | 可选值范围 | 说明                                                         |
| :---- | :------- | :----- | :--------- | :----------------------------------------------------------- |
| image | 是       | string | -          | 图像数据，base64编码后进行urlencode，要求base64编码和urlencode后大小不超过4M，最短边至少15px，最长边最大4096px,支持jpg/png/bmp格式 |

**请求代码示例**

参考通用文字识别（含位置信息版）

## 返回说明

**返回参数**

| 字段             | 是否必选 | 类型    | 说明                                   |
| :--------------- | :------- | :------ | :------------------------------------- |
| log_id           | 是       | uint64  | 唯一的log id，用于问题定位             |
| words_result_num | 是       | uint32  | 识别结果数，表示words_result的元素个数 |
| words_result     | 是       | array() | 定位和识别结果数组                     |
| -location        | 是       | uint32  | 水平坐标                               |
| -words           | 是       | string  | 识别内容                               |

**返回示例**

```
  {
    "log_id": 1291777459,
    "words_result": {
        "国家码": {
            "location": {
                "left": 231,
                "top": -64,
                "width": 51,
                "height": 70
            },
            "words": "CHN"
        },
        "姓名": {
            "location": {
                "left": 234,
                "top": 26,
                "width": 29,
                "height": 16
            },
            "words": "袁运筹"
        },
        "性别": {
            "location": {
                "left": 139,
                "top": 57,
                "width": 53,
                "height": 50
            },
            "words": "男/M"
        },
        "生日": {
            "location": {
                "left": 321,
                "top": 134,
                "width": 35,
                "height": 14
            },
            "words": "24NOV1990"
        },
        "护照签发地点": {
            "location": {
                "left": 165,
                "top": 206,
                "width": 78,
                "height": 15
            },
            "words": "福建/FUJIAN"
        },
        "有效期至": {
            "location": {
                "left": 321,
                "top": 215,
                "width": 30,
                "height": 14
            },
            "words": "078月/AUG2024"
        },
        "护照号码": {
            "location": {
                "left": 326,
                "top": 33,
                "width": 12,
                "height": 14
            },
            "words": "E21202282"
        },
        "签发日期": {
            "location": {
                "left": 324,
                "top": 181,
                "width": 45,
                "height": 15
            },
            "words": "08月/AUG2014"
        },
        "姓名拼音": {
            "location": {
                "left": 142,
                "top": 18,
                "width": 112,
                "height": 54
            },
            "words": "SC"
        },
        "出生地点": {
            "location": {
                "left": 648,
                "top": 599,
                "width": 349,
                "height": 115
            },
            "words": "江苏/JIANGSU"
        }
    },
    "words_result_num": 10
}
```

# 名片识别

## 接口描述

【此接口需要您在[申请页面](https://cloud.baidu.com/survey/AICooperativeConsultingApply.html)中提交合作咨询开通权限】提供对各类名片的结构化识别功能，提取姓名、邮编、邮箱、电话、网址、地址、手机号、公司、职位字段

## 请求说明

**请求示例**

HTTP 方法：`POST`

请求URL： `https://aip.baidubce.com/rest/2.0/ocr/v1/business_card`

URL参数：

| 参数         | 值                                                           |
| :----------- | :----------------------------------------------------------- |
| access_token | 通过API Key和Secret Key获取的access_token,参考“[Access Token获取](http://ai.baidu.com/docs#/Auth)” |

Header如下：

| 参数         | 值                                |
| :----------- | :-------------------------------- |
| Content-Type | application/x-www-form-urlencoded |

Body中放置请求参数，参数详情如下：

**请求参数**

| 参数  | 是否必选 | 类型   | 可选值范围 | 说明                                                         |
| :---- | :------- | :----- | :--------- | :----------------------------------------------------------- |
| image | 是       | string | -          | 图像数据，base64编码后进行urlencode，要求base64编码和urlencode后大小不超过4M，最短边至少15px，最长边最大4096px,支持jpg/png/bmp格式 |

**请求代码示例**

参考通用文字识别（含位置信息版）

## 返回说明

**返回参数**

| 字段             | 是否必选 | 类型    | 说明                                   |
| :--------------- | :------- | :------ | :------------------------------------- |
| log_id           | 是       | uint64  | 唯一的log id，用于问题定位             |
| words_result_num | 是       | uint32  | 识别结果数，表示words_result的元素个数 |
| words_result     | 是       | array() | 定位和识别结果数组                     |

**返回示例**

```
{
    "errno": "0",
    "logid": "14815156840", 
    "words_result_num": 7
    "words_result": {
            "ADDR": ["中国·北京东城区朝阳门北大街4848号"],
            "FAX": ["010-818480043"],
            "MOBILE": ["18284584483"],
            "NAME": ["陈圆圆"],
            "PC": ["100010"],
            "URL": ["www.baidu.comwww.baidu.com"],
            "TEL": ["010-89184841"],
            "COMPANY": ["宝力机械有限公司"],
            "TITLE": ["总经理"]
        ...
    } 
}
```

# 户口本识别

## 接口描述

【此接口需要您在[申请页面](https://cloud.baidu.com/survey/AICooperativeConsultingApply.html)中提交合作咨询开通权限】对出生地、出生日期、姓名、民族、与户主关系、性别、身份证号码字段进行识别

## 请求说明

**请求示例**

HTTP 方法：`POST`

请求URL： `https://aip.baidubce.com/rest/2.0/ocr/v1/household_register`

URL参数：

| 参数         | 值                                                           |
| :----------- | :----------------------------------------------------------- |
| access_token | 通过API Key和Secret Key获取的access_token,参考“[Access Token获取](http://ai.baidu.com/docs#/Auth)” |

Header如下：

| 参数         | 值                                |
| :----------- | :-------------------------------- |
| Content-Type | application/x-www-form-urlencoded |

Body中放置请求参数，参数详情如下：

**请求参数**

| 参数  | 是否必选 | 类型   | 可选值范围 | 说明                                                         |
| :---- | :------- | :----- | :--------- | :----------------------------------------------------------- |
| image | 是       | string | -          | 图像数据，base64编码后进行urlencode，要求base64编码和urlencode后大小不超过4M，最短边至少15px，最长边最大4096px,支持jpg/png/bmp格式 |

**请求代码示例**

参考通用文字识别（含位置信息版）

## 返回说明

**返回参数**

| 字段             | 是否必选 | 类型    | 说明                                   |
| :--------------- | :------- | :------ | :------------------------------------- |
| log_id           | 是       | uint64  | 唯一的log id，用于问题定位             |
| words_result_num | 是       | int     | 识别结果数，表示words_result的元素个数 |
| words_result     | 是       | array() | 识别结果数组                           |
| location         | 是       | array() | 位置数组                               |
| BirthAddress     | 是       | string  | 出生地                                 |
| Birthday         | 是       | string  | 生日                                   |
| CardNo           | 是       | string  | 身份证号                               |
| Name             | 是       | string  | 姓名                                   |
| Nation           | 是       | string  | 民族                                   |
| Relationship     | 是       | string  | 与户主关系                             |
| Sex              | 是       | string  | 性别                                   |

**返回示例**

```
 {
    "log_id": 1301870459,
    "words_result": {
        "BirthAddress": {
            "location": {
                "left": 0,
                "top": 0,
                "width": 1,
                "height": 1
            },
            "words": "河南洛阳市郊区"
        },
        "Birthday": {
            "location": {
                "left": 0,
                "top": 0,
                "width": 1,
                "height": 1
            },
            "words": ""
        },
        "CardNo": {
            "location": {
                "left": 0,
                "top": 0,
                "width": 1,
                "height": 1
            },
            "words": "41031171072825"
        },
        "Name": {
            "location": {
                "left": 0,
                "top": 0,
                "width": 1,
                "height": 1
            },
            "words": ""
        },
        "Nation": {
            "location": {
                "left": 0,
                "top": 0,
                "width": 1,
                "height": 1
            },
            "words": "汉族"
        },
        "Relationship": {
            "location": {
                "left": 0,
                "top": 0,
                "width": 1,
                "height": 1
            },
            "words": ""
        },
        "Sex": {
            "location": {
                "left": 0,
                "top": 0,
                "width": 1,
                "height": 1
            },
            "words": ""
        },
    },
    "words_result_num": 7
}
```

# 出生医学证明识别

## 接口描述

【此接口需要您在[申请页面](https://cloud.baidu.com/survey/AICooperativeConsultingApply.html)中提交合作咨询开通权限】对出生时间、姓名、性别、出生证编号、父亲姓名、母亲姓名字段进行识别

## 请求说明

**请求示例**

HTTP 方法：`POST`

请求URL： `https://aip.baidubce.com/rest/2.0/ocr/v1/birth_certificate`

URL参数：

| 参数         | 值                                                           |
| :----------- | :----------------------------------------------------------- |
| access_token | 通过API Key和Secret Key获取的access_token,参考“[Access Token获取](http://ai.baidu.com/docs#/Auth)” |

Header如下：

| 参数         | 值                                |
| :----------- | :-------------------------------- |
| Content-Type | application/x-www-form-urlencoded |

Body中放置请求参数，参数详情如下：

**请求参数**

| 参数  | 是否必选 | 类型   | 可选值范围 | 说明                                                         |
| :---- | :------- | :----- | :--------- | :----------------------------------------------------------- |
| image | 是       | string | -          | 图像数据，base64编码后进行urlencode，要求base64编码和urlencode后大小不超过4M，最短边至少15px，最长边最大4096px,支持jpg/png/bmp格式 |

**请求代码示例**

参考通用文字识别（含位置信息版）

## 返回说明

**返回参数**

| 字段             | 是否必选 | 类型    | 说明                                   |
| :--------------- | :------- | :------ | :------------------------------------- |
| log_id           | 是       | uint64  | 唯一的log id，用于问题定位             |
| words_result_num | 是       | int     | 识别结果数，表示words_result的元素个数 |
| words_result     | 是       | array() | 识别结果数组                           |
| location         | 是       | array() | 位置数组                               |
| BabyBirthday     | 是       | string  | 出生时间                               |
| BabyName         | 是       | string  | 姓名                                   |
| BabySex          | 是       | string  | 性别                                   |
| Code             | 是       | string  | 出生证编号                             |
| FatherName       | 是       | string  | 父亲姓名                               |
| MotherName       | 是       | string  | 母亲姓名                               |

**返回示例**

```
 {
    "log_id": 1301874879,
    "words_result": {
        "BabyBirthday": {
            "location": {
                "left": 0,
                "top": 0,
                "width": 1,
                "height": 1
            },
            "words": "2018年1月9日16时49分"
        },
        "BabyName": {
            "location": {
                "left": 0,
                "top": 0,
                "width": 1,
                "height": 1
            },
            "words": "关小小"
        },
        "BabySex": {
            "location": {
                "left": 0,
                "top": 0,
                "width": 1,
                "height": 1
            },
            "words": "男"
        },
        "Code": {
            "location": {
                "left": 0,
                "top": 0,
                "width": 1,
                "height": 1
            },
            "words": "2828913"
        },
        "FatherName": {
            "location": {
                "left": 0,
                "top": 0,
                "width": 1,
                "height": 1
            },
            "words": "关大鹏"
        },
        "MotherName": {
            "location": {
                "left": 0,
                "top": 0,
                "width": 1,
                "height": 1
            },
            "words": "李小燕"
        },
    },
    "words_result_num": 6
}
```

# 港澳通行证识别

## 接口描述

【此接口需要您在[申请页面](https://cloud.baidu.com/survey/AICooperativeConsultingApply.html)中提交合作咨询开通权限】对港澳通行证证号、姓名、姓名拼音、性别、有效期限、签发地点、出生日期字段进行识别

## 请求说明

**请求示例**

HTTP 方法：`POST`

请求URL： `https://aip.baidubce.com/rest/2.0/ocr/v1/HK_Macau_exitentrypermit`

URL参数：

| 参数         | 值                                                           |
| :----------- | :----------------------------------------------------------- |
| access_token | 通过API Key和Secret Key获取的access_token,参考“[Access Token获取](http://ai.baidu.com/docs#/Auth)” |

Header如下：

| 参数         | 值                                |
| :----------- | :-------------------------------- |
| Content-Type | application/x-www-form-urlencoded |

Body中放置请求参数，参数详情如下：

**请求参数**

| 参数  | 是否必选 | 类型   | 可选值范围 | 说明                                                         |
| :---- | :------- | :----- | :--------- | :----------------------------------------------------------- |
| image | 是       | string | -          | 图像数据，base64编码后进行urlencode，要求base64编码和urlencode后大小不超过4M，最短边至少15px，最长边最大4096px,支持jpg/png/bmp格式 |

**请求代码示例**

参考通用文字识别（含位置信息版）

## 返回说明

**返回参数**

| 字段             | 是否必选 | 类型    | 说明                                   |
| :--------------- | :------- | :------ | :------------------------------------- |
| log_id           | 是       | uint64  | 唯一的log id，用于问题定位             |
| words_result_num | 是       | int     | 识别结果数，表示words_result的元素个数 |
| words_result     | 是       | array() | 识别结果数组                           |
| location         | 是       | array() | 位置数组                               |
| Address          | 是       | string  | 签发地点                               |
| Birthday         | 是       | string  | 出生日期                               |
| CardNum          | 是       | string  | 卡号                                   |
| NameChn          | 是       | string  | 姓名                                   |
| NameEng          | 是       | string  | 姓名拼音                               |
| Sex              | 是       | string  | 性别                                   |
| ValidDate        | 是       | string  | 有效期限                               |

**返回示例**

```
 {
    "log_id": 490699656,
    "words_result": {
        "Address": {
            "location": {
                "left": 0,
                "top": 0,
                "width": 1,
                "height": 1
            },
            "words": "山东"
        },
        "Birthday": {
            "location": {
                "left": 0,
                "top": 0,
                "width": 1,
                "height": 1
            },
            "words": "19900201"
        },
        "CardNum": {
            "location": {
                "left": 0,
                "top": 0,
                "width": 1,
                "height": 1
            },
            "words": "c10563465"
        },
        "NameChn": {
            "location": {
                "left": 0,
                "top": 0,
                "width": 1,
                "height": 1
            },
            "words": "陈露露"
        },
        "NameEng": {
            "location": {
                "left": 0,
                "top": 0,
                "width": 1,
                "height": 1
            },
            "words": "CHENLULU"
        },
        "Sex": {
            "location": {
                "left": 0,
                "top": 0,
                "width": 1,
                "height": 1
            },
            "words": "女"
        },
		  "ValidDate": {
            "location": {
                "left": 0,
                "top": 0,
                "width": 1,
                "height": 1
            },
            "words": "20150116-20250115"
        },
    },
    "words_result_num": 7
}
```

# 台湾通行证识别

## 接口描述

【此接口需要您在[申请页面](https://cloud.baidu.com/survey/AICooperativeConsultingApply.html)中提交合作咨询开通权限】对台湾通行证证号、签发地、出生日期、姓名、姓名拼音、性别、有效期字段进行识别

## 请求说明

**请求示例**

HTTP 方法：`POST`

请求URL： `https://aip.baidubce.com/rest/2.0/ocr/v1/taiwan_exitentrypermit`

URL参数：

| 参数         | 值                                                           |
| :----------- | :----------------------------------------------------------- |
| access_token | 通过API Key和Secret Key获取的access_token,参考“[Access Token获取](http://ai.baidu.com/docs#/Auth)” |

Header如下：

| 参数         | 值                                |
| :----------- | :-------------------------------- |
| Content-Type | application/x-www-form-urlencoded |

Body中放置请求参数，参数详情如下：

**请求参数**

| 参数  | 是否必选 | 类型   | 可选值范围 | 说明                                                         |
| :---- | :------- | :----- | :--------- | :----------------------------------------------------------- |
| image | 是       | string | -          | 图像数据，base64编码后进行urlencode，要求base64编码和urlencode后大小不超过4M，最短边至少15px，最长边最大4096px,支持jpg/png/bmp格式 |

**请求代码示例**

参考通用文字识别（含位置信息版）

## 返回说明

**返回参数**

| 字段             | 是否必选 | 类型    | 说明                                   |
| :--------------- | :------- | :------ | :------------------------------------- |
| log_id           | 是       | uint64  | 唯一的log id，用于问题定位             |
| words_result_num | 是       | int     | 识别结果数，表示words_result的元素个数 |
| words_result     | 是       | array() | 识别结果数组                           |
| location         | 是       | array() | 位置数组                               |
| Address          | 是       | string  | 签发地点                               |
| Birthday         | 是       | string  | 出生日期                               |
| CardNum          | 是       | string  | 卡号                                   |
| NameChn          | 是       | string  | 姓名                                   |
| NameEng          | 是       | string  | 姓名拼音                               |
| Sex              | 是       | string  | 性别                                   |
| ValidDate        | 是       | string  | 有效期限                               |

**返回示例**

```
 {
    "log_id": 424957212,
    "words_result": {
        "Address": {
            "location": {
                "left": 0,
                "top": 0,
                "width": 1,
                "height": 1
            },
            "words": "北京"
        },
        "Birthday": {
            "location": {
                "left": 0,
                "top": 0,
                "width": 1,
                "height": 1
            },
            "words": "19870405"
        },
        "CardNum": {
            "location": {
                "left": 0,
                "top": 0,
                "width": 1,
                "height": 1
            },
            "words": "L07379776"
        },
        "NameChn": {
            "location": {
                "left": 0,
                "top": 0,
                "width": 1,
                "height": 1
            },
            "words": "陈孟"
        },
        "NameEng": {
            "location": {
                "left": 0,
                "top": 0,
                "width": 1,
                "height": 1
            },
            "words": "CHENMENG"
        },
        "Sex": {
            "location": {
                "left": 0,
                "top": 0,
                "width": 1,
                "height": 1
            },
            "words": "女"
        },
		  "ValidDate": {
            "location": {
                "left": 0,
                "top": 0,
                "width": 1,
                "height": 1
            },
            "words": "20160116-20260115"
        },
    },
    "words_result_num": 7
}
```

# 表格文字识别(异步接口)

## 接口描述

自动识别表格线及表格内容，结构化输出表头、表尾及每个单元格的文字内容。 本接口为异步接口，分为两个API：提交请求接口、获取结果接口。下面分别描述两个接口的使用方法。

## 提交请求接口

### 请求说明

**请求示例**

HTTP 方法：`POST`

请求URL： `https://aip.baidubce.com/rest/2.0/solution/v1/form_ocr/request`

URL参数：

| 参数         | 值                                                           |
| :----------- | :----------------------------------------------------------- |
| access_token | 通过API Key和Secret Key获取的access_token,参考“[Access Token获取](http://ai.baidu.com/docs#/Auth)” |

Header如下：

| 参数         | 值                                |
| :----------- | :-------------------------------- |
| Content-Type | application/x-www-form-urlencoded |

Body中放置请求参数，参数详情如下：

**请求参数**

| 参数  | 是否必选 | 类型   | 可选值范围 | 说明                                                         |
| :---- | :------- | :----- | :--------- | :----------------------------------------------------------- |
| image | true     | string | -          | 图像数据，base64编码后进行urlencode，要求base64编码和urlencode后大小不超过4M，最短边至少15px，最长边最大4096px,支持jpg/png/bmp格式 |

### 返回说明

**返回参数**

| 字段        | 是否必选 | 类型   | 说明                                                     |
| :---------- | :------- | :----- | :------------------------------------------------------- |
| log_id      | 是       | long   | 唯一的log id，用于问题定位                               |
| result      | 是       | list   | 返回的结果列表                                           |
| +request_id | 是       | string | 该请求生成的request_id，后续使用该request_id获取识别结果 |

**返回示例**

成功返回示例：

```
{
    "result" : [
        {
            "request_id" : "1234_6789"
        }
    ],
    "log_id":149689853984104 
}
```

失败返回示例（详细的错误码说明见本文档底部）：

```
{
    "log_id": 149319909347709, 
    "error_code": 282000
    "error_msg":"internal error"
}
```

## 获取结果接口

### 请求说明

**请求示例**

HTTP 方法：`POST`

请求URL： `https://aip.baidubce.com/rest/2.0/solution/v1/form_ocr/get_request_result`

URL参数：

| 参数         | 值                                                           |
| :----------- | :----------------------------------------------------------- |
| access_token | 通过API Key和Secret Key获取的access_token,参考“[Access Token获取](http://ai.baidu.com/docs#/Auth)” |

Header如下：

| 参数         | 值                                |
| :----------- | :-------------------------------- |
| Content-Type | application/x-www-form-urlencoded |

Body中放置请求参数，参数详情如下：

**请求参数**

| 参数        | 是否必选 | 类型   | 可选值范围 | 说明                                                         |
| :---------- | :------- | :----- | :--------- | :----------------------------------------------------------- |
| request_id  | 是       | string | -          | 发送表格文字识别请求时返回的request id                       |
| result_type | 否       | string | -          | 期望获取结果的类型，取值为“excel”时返回xls文件的地址，取值为“json”时返回json格式的字符串,默认为”excel” |

### 返回说明

**返回参数**

| 字段         | 是否必选 | 类型   | 说明                                                         |
| :----------- | :------- | :----- | :----------------------------------------------------------- |
| log_id       | 是       | long   | 唯一的log id，用于问题定位                                   |
| result       | 是       | object | 返回的结果                                                   |
| +result_data | 是       | string | 识别结果字符串，如果request_type是excel，则返回excel的文件下载地址，如果request_type是json，则返回json格式的字符串 |
| +percent     | 是       | int    | 表格识别进度（百分比）                                       |
| +request_id  | 是       | string | 该图片对应请求的request_id                                   |
| +ret_code    | 是       | int    | 识别状态，1：任务未开始，2：进行中,3:已完成                  |
| +ret_msg     | 是       | string | 识别状态信息，任务未开始，进行中,已完成                      |

**返回示例**

成功返回示例：

```
{
    "result" : {
        "result_data" : "",
        "percent":100,
        "request_id": "149691317905102",
        "ret_code": 3
        "ret_msg": "已完成",
    },
    "log_id":149689853984104 
}
```

当request_type为excel时，result_data格式样例为：

```
{
    "file_url":"https://ai.baidu.com/file/xxxfffddd"
}
```

当request_type为json时，result_data格式样例为：

```
{
    "form_num": 1,
    "forms": [
        {
            "header": [
                {
                    "row": [
                        1
                    ],
                    "column": [
                        1,
                        2
                    ],
                    "word": "表头信息1",
                }
            ],
            "footer": [
                {
                    "row": [
                        1
                    ],
                    "column": [
                        1,
                        2
                    ],
                    "word": "表尾信息1",
                }
            ],
            "body": [
                {
                    "row": [
                        1
                    ],
                    "column": [
                        1,
                        2
                    ],
                    "word": "单元格文字",
                }
            ]
        }
    ]
}
```

其中各个参数的说明(jason方式返回结果时)：

| 字段     | 是否必选 | 类型   | 说明                                   |
| :------- | :------- | :----- | :------------------------------------- |
| form_num | 是       | int    | 表格数量（可能一张图片中包含多个表格） |
| forms    | 是       | list   | 表格内容信息的列表                     |
| +header  | 是       | list   | 每个表格中，表头数据的相关信息         |
| +footer  | 是       | list   | 表尾的相关信息                         |
| +body    | 是       | list   | 表格主体部分的数据                     |
| ++row    | 是       | list   | 该单元格占据的行号                     |
| ++column | 是       | list   | 该单元格占据的列号                     |
| ++word   | 是       | string | 该单元格中的文字信息                   |

失败返回示例（详细的错误码说明见本文档底部）：

```
{
    "log_id": 149319909347709, 
    "error_code": 282000
    "error_msg":"internal error"
}
```

# 表格文字识别(同步接口)

## 接口描述

【此接口需要您在[申请页面](https://cloud.baidu.com/survey/AICooperativeConsultingApply.html)中提交合作咨询开通权限】 自动识别表格线及表格内容，结构化输出表头、表尾及每个单元格的文字内容。 本接口为同步接口，相比于异步接口，本接口在请求后会实时返回请求结果。

## 提交请求接口

### 请求说明

**请求示例**

HTTP 方法：`POST`

请求URL： `https://aip.baidubce.com/rest/2.0/ocr/v1/form`

URL参数：

| 参数         | 值                                                           |
| :----------- | :----------------------------------------------------------- |
| access_token | 通过API Key和Secret Key获取的access_token,参考“[Access Token获取](http://ai.baidu.com/docs#/Auth)” |

Header如下：

| 参数         | 值                                |
| :----------- | :-------------------------------- |
| Content-Type | application/x-www-form-urlencoded |

Body中放置请求参数，参数详情如下：

**请求参数**

| 参数  | 是否必选 | 类型   | 可选值范围 | 说明                                                         |
| :---- | :------- | :----- | :--------- | :----------------------------------------------------------- |
| image | true     | string | -          | 图像数据，base64编码后进行urlencode，要求base64编码和urlencode后大小不超过4M，最短边至少15px，最长边最大4096px,支持jpg/png/bmp格式 |

### 返回说明

**返回参数**

| 字段              | 是否必选 | 类型     | 说明                       |
| :---------------- | :------- | :------- | :------------------------- |
| log_id            | 是       | long     | 唯一的log id，用于问题定位 |
| forms_result_num  | 是       | uint32   | 识别结果元素个数           |
| forms_result      | 是       | object[] | 识别结果                   |
| -body             | 是       | object[] | 表格主体区域               |
| -footer           | 是       | object[] | 表格尾部区域信息           |
| header            | 是       | object[] | 表格头部区域信息           |
| vertexes_location | 是       | object[] | 表格边界顶点               |

**返回示例** 参见表格识别（异步接口）

# 通用票据识别

## 接口描述

用户向服务请求识别医疗票据、发票、的士票、保险保单等票据类图片中的所有文字，并返回文字在图中的位置信息。

## 请求说明

**请求示例**

HTTP 方法：`POST`

请求URL： `https://aip.baidubce.com/rest/2.0/ocr/v1/receipt`

URL参数：

| 参数         | 值                                                           |
| :----------- | :----------------------------------------------------------- |
| access_token | 通过API Key和Secret Key获取的access_token,参考“[Access Token获取](http://ai.baidu.com/docs#/Auth)” |

Header如下：

| 参数         | 值                                |
| :----------- | :-------------------------------- |
| Content-Type | application/x-www-form-urlencoded |

Body中放置请求参数，参数详情如下：

**请求参数**

| 参数                  | 是否必选 | 类型   | 可选值范围  | 说明                                                         |
| :-------------------- | :------- | :----- | :---------- | :----------------------------------------------------------- |
| image                 | 是       | string | -           | 图像数据，base64编码后进行urlencode，要求base64编码和urlencode后大小不超过4M，最短边至少15px，最长边最大4096px,支持jpg/png/bmp格式 |
| recognize_granularity | false    | string | big、small  | 是否定位单字符位置，big：不定位单字符位置，默认值；small：定位单字符位置 |
| probability           | false    | string | true、false | 是否返回识别结果中每一行的置信度                             |
| accuracy              | false    | string | normal,缺省 | normal 使用快速服务;缺省或其它值使用高精度服务               |
| detect_direction      | false    | string | true、false | 是否检测图像朝向，默认不检测，即：false。可选值包括true - 检测朝向；false - 不检测朝向。朝向是指输入图像是正常方向、逆时针旋转90/180/270度。 |

**请求代码示例**

参考通用文字识别（含位置信息版）

## 返回说明

**返回参数**

| 字段             | 是否必选 | 类型    | 说明                                                         |
| :--------------- | :------- | :------ | :----------------------------------------------------------- |
| log_id           | 是       | uint64  | 唯一的log id，用于问题定位                                   |
| words_result_num | 是       | uint32  | 识别结果数，表示words_result的元素个数                       |
| words_result     | 是       | array() | 定位和识别结果数组                                           |
| location         | 是       | object  | 位置数组（坐标0点为左上角）                                  |
| left             | 是       | uint32  | 表示定位位置的长方形左上顶点的水平坐标                       |
| top              | 是       | uint32  | 表示定位位置的长方形左上顶点的垂直坐标                       |
| width            | 是       | uint32  | 表示定位位置的长方形的宽度                                   |
| height           | 是       | uint32  | 表示定位位置的长方形的高度                                   |
| words            | 是       | string  | 识别结果字符串                                               |
| chars            | 否       | array() | 单字符结果，recognize_granularity=small时存在                |
| location         | 是       | array() | 位置数组（坐标0点为左上角）                                  |
| left             | 是       | uint32  | 表示定位位置的长方形左上顶点的水平坐标                       |
| top              | 是       | uint32  | 表示定位位置的长方形左上顶点的垂直坐标                       |
| width            | 是       | uint32  | 表示定位定位位置的长方形的宽度                               |
| height           | 是       | uint32  | 表示位置的长方形的高度                                       |
| char             | 是       | string  | 单字符识别结果                                               |
| probability      | 否       | object  | 识别结果中每一行的置信度值，包含average：行置信度平均值，variance：行置信度方差，min：行置信度最小值 |

**返回示例**

```
    "log_id": 2661573626,
	"words_result_num": 1，
    "words_result": [
        {
            "location": {
                "left": 212,
                "top": 3,
                "width": 738,
                "height": 24
            },
            "words": "卡号/病案号:105353990标本编号:150139071送检科室:血液透析门诊病房",
        }
    ],
}
```

# 增值税发票识别

## 接口描述

识别并结构化返回增值税发票的各个字段及其对应值，包含了发票基础信息9项，货物相关信息12项，购买方/销售方的名称、识别号、地址电话、开户行及账号，共30项结构化字段。

\##更新记录

| 时间       | 更新说明                                             |
| :--------- | :--------------------------------------------------- |
| 2018.08.28 | 新增accuracy参数，能选择使用高精度模型或普通精度模型 |
| 2018.08.23 | 接口从邀测状态转为公测状态                           |
| 2018.06.27 | 发票号码、发票代码准确率提升到99%左右                |
| 2018.05.14 | 发票四要素准确率提升到90%左右                        |
| 2018.04.23 | 新增CheckCode校验码字段                              |
| 2018.02.08 | 接口邀测上线                                         |

\##请求说明

**请求示例**

HTTP 方法：`POST`

请求URL： `https://aip.baidubce.com/rest/2.0/ocr/v1/vat_invoice`

URL参数：

| 参数         | 值                                                           |
| :----------- | :----------------------------------------------------------- |
| access_token | 通过API Key和Secret Key获取的access_token,参考“[Access Token获取](http://ai.baidu.com/docs#/Auth)” |

Header如下：

| 参数         | 值                                |
| :----------- | :-------------------------------- |
| Content-Type | application/x-www-form-urlencoded |

Body中放置请求参数，参数详情如下：

**请求参数**

| 参数     | 是否必选 | 类型   | 可选值范围   | 说明                                                         |
| :------- | :------- | :----- | :----------- | :----------------------------------------------------------- |
| image    | 是       | string | -            | 图像数据，base64编码后进行urlencode，要求base64编码和urlencode后大小不超过4M，最短边至少15px，最长边最大4096px,支持jpg/png/bmp格式 |
| accuracy | 否       | string | normal、high | normal（默认配置）对应普通精度模型，识别速度较快，在四要素的准确率上和high模型保持一致，high对应高精度识别模型，相应的时延会增加，因为超时导致失败的情况也会增加（错误码282000） |

**请求代码示例**

参考通用文字识别（含位置信息版）

## 返回说明

**返回参数**

| 字段                 | 是否必选 | 类型     | 说明                                   |
| :------------------- | :------- | :------- | :------------------------------------- |
| log_id               | 是       | uint64   | 唯一的log id，用于问题定位             |
| words_result_num     | 是       | uint32   | 识别结果数，表示words_result的元素个数 |
| words_result         | 是       | array()  | 识别结果数组                           |
| InvoiceType          | 是       | string   | 发票种类名称                           |
| InvoiceCode          | 是       | uint32   | 发票代码                               |
| InvoiceNum           | 是       | uint32   | 发票号码                               |
| InvoiceDate          | 是       | uint32   | 开票日期                               |
| TotalAmount          | 是       | uint32   | 合计金额                               |
| TotalTax             | 是       | string   | 合计税额                               |
| AmountInFiguers      | 是       | array()  | 价税合计(小写)                         |
| AmountInWords        | 是       | object   | 价税合计(大写)                         |
| CheckCode            | 是       | string   | 校验码                                 |
| SellerName           | 是       | uint32   | 销售方名称                             |
| SellerRegisterNum    | 是       | uint32   | 销售方纳税人识别号                     |
| PurchaserName        | 是       | uint32   | 购方名称                               |
| PurchaserRegisterNum | 是       | uint32   | 购方纳税人识别号                       |
| CommodityName        | 是       | object[] | 货物名称                               |
| -row                 | 是       | uint32   | 行号                                   |
| -word                | 是       | string   | 内容                                   |
| CommodityType        | 是       | object[] | 规格型号                               |
| -row                 | 是       | uint32   | 行号                                   |
| -word                | 是       | string   | 内容                                   |
| CommodityUnit        | 是       | object[] | 单位                                   |
| -row                 | 是       | uint32   | 行号                                   |
| -word                | 是       | string   | 内容                                   |
| CommodityNum         | 是       | object[] | 数量                                   |
| -row                 | 是       | uint32   | 行号                                   |
| -word                | 是       | string   | 内容                                   |
| CommodityPrice       | 是       | object[] | 单价                                   |
| -row                 | 是       | uint32   | 行号                                   |
| -word                | 是       | string   | 内容                                   |
| CommodityAmount      | 是       | object[] | 金额                                   |
| -row                 | 是       | uint32   | 行号                                   |
| -word                | 是       | string   | 内容                                   |
| CommodityTaxRate     | 是       | object[] | 税率                                   |
| -row                 | 是       | uint32   | 行号                                   |
| -word                | 是       | string   | 内容                                   |
| CommodityTax         | 是       | object[] | 税额                                   |
| -row                 | 是       | uint32   | 行号                                   |
| -word                | 是       | string   | 内容                                   |

**返回示例**

```
	"log_id": "5425496231209218858",
	"words_result_num": 29,
	"words_result": {
		"InvoiceNum": "14641426",
		"SellerName": "上海易火广告传媒有限公司",
		"CommodityTaxRate": [
			{
				"word": "6%",
				"row": "1"
			}
		],
		"SellerBank": "中国银行南翔支行446863841354",
		"Checker": ":沈园园",
		"TotalAmount": "94339.62",
		"CommodityAmount": [
			{
				"word": "94339.62",
				"row": "1"
			}
		],
		"InvoiceDate": "2016年06月02日",
		"CommodityTax": [
			{
				"word": "5660.38",
				"row": "1"
			}
		],
		"PurchaserName": "百度时代网络技术(北京)有限公司",
		"CommodityNum": [
			{
				"word": "",
				"row": "1"
			}
		],
		"PurchaserBank": "招商银行北京分行大屯路支行8661820285100030",
		"Remarks": "告传",
		"Password": "074/45781873408>/6>8>65*887676033/51+<5415>9/32--852>1+29<65>641-5>66<500>87/*-34<943359034>716905113*4242>",
		"SellerAddress": ":嘉定区胜辛南路500号15幢1161室55033753",
		"PurchaserAddress": "北京市海淀区东北旺西路8号中关村软件园17号楼二属A2010-59108001",
		"InvoiceCode": "3100153130",
		"CommodityUnit": [
			{
				"word": "",
				"row": "1"
			}
		],
		"Payee": ":徐蓉",
		"PurchaserRegisterNum": "110108787751579",
		"CommodityPrice": [
			{
				"word": "",
				"row": "1"
			}
		],
		"NoteDrawer": "沈园园",
		"AmountInWords": "壹拾万圆整",
		"AmountInFiguers": "100000.00",
		"TotalTax": "5660.38",
		"InvoiceType": "专用发票",
		"SellerRegisterNum": "913101140659591751",
		"CommodityName": [
			{
				"word": "信息服务费",
				"row": "1"
			}
		],
		"CommodityType": [
			{
				"word": "",
				"row": "1"
			}
		]
	}
}
```

# 火车票识别

## 接口描述

支持对大陆火车票的车票号、始发站、目的站、车次、日期、票价、席别、姓名进行结构化识别

## 请求说明

**请求示例**

HTTP 方法: `POST`

请求URL: `https://aip.baidubce.com/rest/2.0/ocr/v1/train_ticket`

URL参数：

| 参数         | 值                                                           |
| :----------- | :----------------------------------------------------------- |
| access_token | 通过API Key和Secret Key获取的access_token,参考“[Access Token获取](http://ai.baidu.com/docs#/Auth)” |

Header如下：

| 参数         | 值                                |
| :----------- | :-------------------------------- |
| Content-Type | application/x-www-form-urlencoded |

Body中放置请求参数，参数详情如下：

**请求参数**

| 参数  | 类型   | 是否必须 | 说明                                                         |
| :---- | :----- | :------- | :----------------------------------------------------------- |
| image | string | 是       | 图像数据，base64编码后进行urlencode，要求base64编码和urlencode后大小不超过4M，最短边至少15px，最长边最大4096px,支持jpg/png/bmp格式 |

**请求代码示例**

请参考通用文字识别（含位置信息版）的代码内容，并更换请求地址。

## 返回说明

**返回参数**

| 参数                | 类型   | 是否必须 | 说明                       |
| :------------------ | :----- | :------- | :------------------------- |
| log_id              | uint64 | 是       | 请求标识码，随机数，唯一。 |
| ticket_num          | string | 是       | 车票号                     |
| starting_station    | string | 是       | 始发站                     |
| train_num           | string | 是       | 车次号                     |
| destination_station | string | 是       | 到达站                     |
| date                | string | 是       | 出发日期                   |
| ticket_rates        | string | 是       | 车票金额                   |
| seat_category       | string | 是       | 席别                       |
| name                | string | 是       | 乘客姓名                   |

**返回示例**

```
{
	{
	"errno":"0",
	"logid":"55481588484",
	"date":"2017年12月11日",
	"destination_station":"嘉善南站",
	"name":"刘虎",
	"seat_category":"二等座",
	"starting_station":"上海虹桥站",
	"ticket_num":"Z13N025800",
	"ticket_rates":"￥24.0元",
	"train_num":"D3125"
	}
}
```

# 出租车票识别

## 接口描述

针对出租车票（现支持北京、上海、深圳）的发票号码、发票代码、车号、日期、时间、金额进行结构化识别

## 请求说明

**请求示例**

HTTP 方法: `POST`

请求URL: `https://aip.baidubce.com/rest/2.0/ocr/v1/taxi_receipt`

URL参数：

| 参数         | 值                                                           |
| :----------- | :----------------------------------------------------------- |
| access_token | 通过API Key和Secret Key获取的access_token,参考“[Access Token获取](http://ai.baidu.com/docs#/Auth)” |

Header如下：

| 参数         | 值                                |
| :----------- | :-------------------------------- |
| Content-Type | application/x-www-form-urlencoded |

Body中放置请求参数，参数详情如下：

**请求参数**

| 参数  | 类型   | 是否必须 | 说明                                                         |
| :---- | :----- | :------- | :----------------------------------------------------------- |
| image | string | 是       | 图像数据，base64编码后进行urlencode，要求base64编码和urlencode后大小不超过4M，最短边至少15px，最长边最大4096px,支持jpg/png/bmp格式 |

**请求代码示例**

请参考通用文字识别（含位置信息版）的代码内容，并更换请求地址。

## 返回说明

**返回参数**

| 参数             | 类型   | 是否必须 | 说明                                   |
| :--------------- | :----- | :------- | :------------------------------------- |
| log_id           | uint64 | 是       | 请求标识码，随机数，唯一。             |
| words_result_num | uint32 | 是       | 识别结果数，表示words_result的元素个数 |
| Date             | string | 是       | 日期                                   |
| Fare             | string | 是       | 实付金额                               |
| InvoiceCode      | string | 是       | 发票代号                               |
| InvoiceNum       | string | 是       | 发票号码                               |
| TaxiNum          | string | 是       | 车牌号                                 |
| Time             | string | 是       | 上下车时间                             |

**返回示例**

```
{
	"log_id":2034039896,
	"words_result_num":6,
	"words_result":
	{
		"Date":"2017-11-26",
		"Fare":"\u00a567.60",
		"InvoiceCode":"111001681009",
		"InvoiceNum":"90769610",
		"TaxiNum":"BV2062",
		"Time":"20:42-21:07"
	}
}
```

# 定额发票识别

## 接口描述

对各类定额发票的代码、号码、金额进行识别

## 请求说明

**请求示例**

HTTP 方法：`POST`

请求URL： `https://aip.baidubce.com/rest/2.0/ocr/v1/quota_invoice`

URL参数：

| 参数         | 值                                                           |
| :----------- | :----------------------------------------------------------- |
| access_token | 通过API Key和Secret Key获取的access_token,参考“[Access Token获取](http://ai.baidu.com/docs#/Auth)” |

Header如下：

| 参数         | 值                                |
| :----------- | :-------------------------------- |
| Content-Type | application/x-www-form-urlencoded |

Body中放置请求参数，参数详情如下：

**请求参数**

| 参数  | 是否必选 | 类型   | 可选值范围 | 说明                                                         |
| :---- | :------- | :----- | :--------- | :----------------------------------------------------------- |
| image | 是       | string | -          | 图像数据，base64编码后进行urlencode，要求base64编码和urlencode后大小不超过4M，最短边至少15px，最长边最大4096px,支持jpg/png/bmp格式 |

**请求代码示例**

参考通用文字识别（含位置信息版）

## 返回说明

**返回参数**

| 字段             | 是否必选 | 类型    | 说明                                   |
| :--------------- | :------- | :------ | :------------------------------------- |
| log_id           | 是       | uint64  | 唯一的log id，用于问题定位             |
| words_result_num | 是       | int     | 识别结果数，表示words_result的元素个数 |
| words_result     | 是       | array() | 识别结果数组                           |
| invoice_code     | 否       | string  | 发票代码                               |
| invoice_number   | 否       | string  | 发票号码                               |
| invoice_rate     | 否       | string  | 金额                                   |

**返回示例**

```
{
    "log_id": 2480896295,
    "words_result_num": 3,
    "words_result": {
        "invoice_code": "132081490320",
        "invoice_number": "01275486",
        "invoice_rate": "伍拾元整"
    }
}
```

# 驾驶证识别

## 接口描述

对机动车驾驶证所有关键字段进行识别

## 请求说明

**请求示例**

HTTP 方法：`POST`

请求URL： `https://aip.baidubce.com/rest/2.0/ocr/v1/driving_license`

URL参数：

| 参数         | 值                                                           |
| :----------- | :----------------------------------------------------------- |
| access_token | 通过API Key和Secret Key获取的access_token,参考“[Access Token获取](http://ai.baidu.com/docs#/Auth)” |

Header如下：

| 参数         | 值                                |
| :----------- | :-------------------------------- |
| Content-Type | application/x-www-form-urlencoded |

Body中放置请求参数，参数详情如下：

**请求参数**

| 参数                 | 是否必选 | 类型   | 可选值范围  | 说明                                                         |
| :------------------- | :------- | :----- | :---------- | :----------------------------------------------------------- |
| image                | true     | string | -           | 图像数据，base64编码后进行urlencode，要求base64编码和urlencode后大小不超过4M，最短边至少15px，最长边最大4096px,支持jpg/png/bmp格式 |
| detect_direction     | false    | string | true、false | 是否检测图像朝向，默认不检测，即：false。朝向是指输入图像是正常方向、逆时针旋转90/180/270度。可选值包括:- true：检测朝向；- false：不检测朝向。 |
| unified_valid_period | false    | bool   | true、false | true: 归一化格式输出；false 或无此参数按非归一化格式输出     |

**请求代码示例**

请参考通用文字识别（含位置信息版）的代码内容，并更换请求地址。

## 返回说明

**返回参数**

| 字段             | 是否必选 | 类型    | 说明                                   |
| :--------------- | :------- | :------ | :------------------------------------- |
| log_id           | 是       | uint64  | 唯一的log id，用于问题定位             |
| words_result_num | 是       | uint32  | 识别结果数，表示words_result的元素个数 |
| words_result     | 是       | array() | 识别结果数组                           |
| +words           | 否       | string  | 识别结果字符串                         |

**返回示例**

```
HTTP/1.1 200 OK
x-bce-request-id: 73c4e74c-3101-4a00-bf44-fe246959c05e
Cache-Control: no-cache
Server: BWS
Date: Tue, 18 Oct 2016 02:21:01 GMT
Content-Type: application/json;charset=UTF-8
{
	"errno": 0,
	"msg": "success",
	"data": {
		"words_result_num": 10,
		"words_result": {
			"证号": {
				"words": "3208231999053090"
			},
			"有效期限": {
				"words": "6年"
			},
			"准驾车型": {
				"words": "B2"
			},
			"有效起始日期": {
				"words": "20101125"
			},
			"住址": {
				"words": "江苏省南通市海门镇秀山新城"
			},
			"姓名": {
				"words": "小欧欧"
			},
			"国籍": {
				"words": "中国"
			},
			"出生日期": {
				"words": "19990530"
			},
			"性别": {
				"words": "男"
			},
			"初次领证日期": {
				"words": "20100125"
			}
		}
	}
}
```

# 行驶证识别

## 接口描述

对机动车行驶证主页及副页所有21个字段进行结构化识别

## 请求说明

**请求示例**

HTTP 方法：`POST`

请求URL： `https://aip.baidubce.com/rest/2.0/ocr/v1/vehicle_license`

URL参数：

| 参数         | 值                                                           |
| :----------- | :----------------------------------------------------------- |
| access_token | 通过API Key和Secret Key获取的access_token,参考“[Access Token获取](http://ai.baidu.com/docs#/Auth)” |

Header如下：

| 参数         | 值                                |
| :----------- | :-------------------------------- |
| Content-Type | application/x-www-form-urlencoded |

Body中放置请求参数，参数详情如下：

**请求参数**

| 参数                 | 是否必选 | 类型   | 可选值范围   | 说明                                                         |
| :------------------- | :------- | :----- | :----------- | :----------------------------------------------------------- |
| image                | true     | string | -            | 图像数据，base64编码后进行urlencode，要求base64编码和urlencode后大小不超过4M，最短边至少15px，最长边最大4096px,支持jpg/png/bmp格式 |
| detect_direction     | false    | string | true/false   | 是否检测图像朝向，默认不检测，即：false。朝向是指输入图像是正常方向、逆时针旋转90/180/270度。可选值包括:- true：检测朝向；- false：不检测朝向。 |
| accuracy             | false    | string | normal，缺省 | normal 使用快速服务，1200ms左右时延；缺省或其它值使用高精度服务，1600ms左右时延 |
| vehicle_license_side | false    | string | front/back   | front：识别行驶证主页，back：识别行驶证副页,默认为正页       |

**请求代码示例**

请参考通用文字识别（含位置信息版）的代码内容，并更换请求地址。

## 返回说明

**返回参数**

| 字段             | 必选 | 类型    | 说明                                   |
| :--------------- | :--- | :------ | :------------------------------------- |
| log_id           | 是   | uint64  | 唯一的log id，用于问题定位             |
| words_result_num | 是   | uint32  | 识别结果数，表示words_result的元素个数 |
| words_result     | 是   | array() | 识别结果数组                           |
| +words           | 否   | string  | 识别结果字符串                         |

**返回示例**

```
HTTP/1.1 200 OK
x-bce-request-id: 73c4e74c-3101-4a00-bf44-fe246959c05e
Cache-Control: no-cache
Server: BWS
Date: Tue, 18 Oct 2016 02:21:01 GMT
Content-Type: application/json;charset=UTF-8
{
	"errno": 0,
	"msg": "success",
	"data": {
		"words_result_num": 10,
		"words_result": {
			"品牌型号": {
				"words": "保时捷GT37182RUCRE"
			},
			"发证日期": {
				"words": "20160104"
			},
			"使用性质": {
				"words": "非营运"
			},
			"发动机号码": {
				"words": "20832"
			},
			"号牌号码": {
				"words": "苏A001"
			},
			"所有人": {
				"words": "圆圆"
			},
			"住址": {
				"words": "南京市江宁区弘景大道"
			},
			"注册日期": {
				"words": "20160104"
			},
			"车辆识别代号": {
				"words": "HCE58"
			},
			"车辆类型": {
				"words": "小型轿车"
			}
		}
	}
}
```

# 车牌识别

## 接口描述

对机动车蓝牌、绿牌、单/双行黄牌的地域编号和车牌号进行识别，并能同时识别图像中的多张车牌。

## 请求说明

**请求示例**

HTTP 方法: `POST`

请求URL: `https://aip.baidubce.com/rest/2.0/ocr/v1/license_plate`

URL参数：

| 参数         | 值                                                           |
| :----------- | :----------------------------------------------------------- |
| access_token | 通过API Key和Secret Key获取的access_token,参考“[Access Token获取](http://ai.baidu.com/docs#/Auth)” |

Header如下：

| 参数         | 值                                |
| :----------- | :-------------------------------- |
| Content-Type | application/x-www-form-urlencoded |

Body中放置请求参数，参数详情如下：

**请求参数**

| 参数         | 类型   | 是否必须 | 说明                                                         |
| :----------- | :----- | :------- | :----------------------------------------------------------- |
| image        | string | 是       | 图像数据，base64编码后进行urlencode，要求base64编码和urlencode后大小不超过4M，最短边至少15px，最长边最大4096px,支持jpg/png/bmp格式 |
| multi_detect | boolen | false    | 是否检测多张车牌，默认为false，当置为true的时候可以对一张图片内的多张车牌进行识别 |

**请求代码示例**

请参考通用文字识别（含位置信息版）的代码内容，并更换请求地址。

## 返回说明

**返回参数**

| 参数              | 类型   | 是否必须 | 说明                              |
| :---------------- | :----- | :------- | :-------------------------------- |
| log_id            | uint64 | 是       | 请求标识码，随机数，唯一。        |
| Color             | string | 是       | 车牌颜色                          |
| number            | string | 是       | 车牌号码                          |
| probability       | string | 是       | 车牌中每个字符的置信度，区间为0-1 |
| vertexes_location | string | 是       | 返回文字外接多边形顶点位置        |

**返回示例**

```
{
	"errno": 0,
	"msg": "success",
	"data": {
		"log_id": "5327722537189137631",
		"words_result": {
			"color": "green",
			"number": "苏AD12267",
			"probability": [
				1,
				0.9999977350235,
				0.99999630451202,
				0.99999868869781,
				0.99998331069946,
				0.99999988079071,
				0.9531751871109,
				0.99922955036163
			],
			"vertexes_location": [
				{
					"y": 223,
					"x": 170
				},
				{
					"y": 223,
					"x": 282
				},
				{
					"y": 256,
					"x": 282
				},
				{
					"y": 256,
					"x": 170
				}
			]
		}
	}
}
```

# 机动车销售发票识别

## 接口描述

【此接口需要您在[申请页面](https://cloud.baidu.com/survey/AICooperativeConsultingApply.html)中提交合作咨询开通权限】识别机动车销售发票号码、代码、日期、价税合计等14个字段

## 请求说明

**请求示例**

HTTP 方法：`POST`

请求URL： `https://aip.baidubce.com/rest/2.0/ocr/v1/vehicle_invoice`

URL参数：

| 参数         | 值                                                           |
| :----------- | :----------------------------------------------------------- |
| access_token | 通过API Key和Secret Key获取的access_token,参考“[Access Token获取](http://ai.baidu.com/docs#/Auth)” |

Header如下：

| 参数         | 值                                |
| :----------- | :-------------------------------- |
| Content-Type | application/x-www-form-urlencoded |

Body中放置请求参数，参数详情如下：

**请求参数**

| 参数  | 是否必选 | 类型   | 可选值范围 | 说明                                                         |
| :---- | :------- | :----- | :--------- | :----------------------------------------------------------- |
| image | 是       | string | -          | 图像数据，base64编码后进行urlencode，要求base64编码和urlencode后大小不超过4M，最短边至少15px，最长边最大4096px,支持jpg/png/bmp格式 |

**请求代码示例**

参考通用文字识别（含位置信息版）

## 返回说明

**返回参数**

| 字段             | 是否必选 | 类型    | 说明                                   |
| :--------------- | :------- | :------ | :------------------------------------- |
| log_id           | 是       | uint64  | 唯一的log id，用于问题定位             |
| words_result_num | 是       | uint32  | 识别结果数，表示words_result的元素个数 |
| words_result     | 是       | array() | 识别结果数组                           |
| InvoiceCode      | 是       | string  | 发票代码                               |
| InvoiceNum       | 是       | string  | 发票号码                               |
| InvoiceDate      | 是       | string  | 开票日期                               |
| MachineCode      | 是       | string  | 机器编号                               |
| ManuModel        | 是       | string  | 厂牌型号                               |
| EngineNum        | 是       | string  | 发动机号码                             |
| VinNum           | 是       | string  | 车架号                                 |
| PriceTax         | 是       | string  | 价税合计                               |
| PriceTaxLow      | 是       | string  | 价税合计小写                           |
| PayerCode        | 是       | string  | 纳税人识别号                           |
| Saler            | 是       | string  | 销售方名称                             |
| TaxRate          | 是       | string  | 税率                                   |
| Tax              | 是       | string  | 税额                                   |
| Price            | 是       | string  | 不含税价格                             |

**返回示例**

```
{
    "log_id": 779438934,
    "words_result_num": 4,
    "words_result": {
            "EngineNum": "H0190278",
            "InvoiceCode": "152001722002",
            "InvoiceDate": "2017-12-18",
            "InvoiceNum": "00138207",
            "MachineCode": "889902359724",
            "ManuModel": "风神牌DFM7150B1C2",
            "PayerCode": "915203017952722367",
            "Price": "53675.21",
            "PriceTax": "陆万贰仟佰圆整",
            "PriceTaxLow": "62800.00",
            "Saler": "遵义市万事兴汽车销售有限公司",
            "Tax": "9124.79",
            "TaxRate": "17%",
            "VinNum": "LGE1EE26HM568118"
    }
}
```

# 车辆合格证识别

## 接口描述

【此接口需要您在[申请页面](https://cloud.baidu.com/survey/AICooperativeConsultingApply.html)中提交合作咨询开通权限】识别车辆合格证编号、车架号、排放标准、发动机编号等12个字段

## 请求说明

**请求示例**

HTTP 方法：`POST`

请求URL： `https://aip.baidubce.com/rest/2.0/ocr/v1/vehicle_certificate`

URL参数：

| 参数         | 值                                                           |
| :----------- | :----------------------------------------------------------- |
| access_token | 通过API Key和Secret Key获取的access_token,参考“[Access Token获取](http://ai.baidu.com/docs#/Auth)” |

Header如下：

| 参数         | 值                                |
| :----------- | :-------------------------------- |
| Content-Type | application/x-www-form-urlencoded |

Body中放置请求参数，参数详情如下：

**请求参数**

| 参数  | 是否必选 | 类型   | 可选值范围 | 说明                                                         |
| :---- | :------- | :----- | :--------- | :----------------------------------------------------------- |
| image | 是       | string | -          | 图像数据，base64编码后进行urlencode，要求base64编码和urlencode后大小不超过4M，最短边至少15px，最长边最大4096px,支持jpg/png/bmp格式 |

**请求代码示例**

参考通用文字识别（含位置信息版）

## 返回说明

**返回参数**

| 字段             | 是否必选 | 类型    | 说明                                   |
| :--------------- | :------- | :------ | :------------------------------------- |
| log_id           | 是       | uint64  | 唯一的log id，用于问题定位             |
| words_result_num | 是       | uint32  | 识别结果数，表示words_result的元素个数 |
| words_result     | 是       | array() | 识别结果数组                           |
| CertificationNo  | 是       | string  | 合格证编号                             |
| CarName          | 是       | string  | 车辆品牌/车辆名称                      |
| VinNo            | 是       | string  | 车架号                                 |
| ChassisType      | 是       | string  | 底盘型号/底盘ID                        |
| EngineType       | 是       | string  | 发动机型号                             |
| EngineNo         | 是       | string  | 发动机号                               |
| FuelType         | 是       | string  | 燃料种类                               |
| Power            | 是       | string  | 功率                                   |
| EmissionStandard | 是       | string  | 排放标准                               |
| InnerSize        | 是       | string  | 货箱内部尺寸                           |
| TyreNum          | 是       | string  | 轮胎数                                 |
| AxleNum          | 是       | string  | 轴数                                   |

**返回示例**

```
{
    "log_id": 889548905,
    "words_result_num": 4,
    "words_result": {
            "AxleNum": "4",
            "CarName": "豪沃牌",
            "CertificationNo": "YG175ZJH1721421",
            "ChassisType": "ZZ3317N4267E1",
            "EmissionStandard": "GB17691-2005国V,GB3847-2005",
            "EngineNo": "180817001627",
            "EngineType": "D10.38-50",
            "FuelType": "柴油",
            "InnerSize": "800023501500",
            "Power": "276",
            "TyreNum": "12",
            "VinNo": "LZZ1EXSE1JA452414"
    }
}
```

# VIN码识别

## 接口描述

对车辆车架上、挡风玻璃上的VIN码进行识别

## 请求说明

**请求示例**

HTTP 方法：`POST`

请求URL： `https://aip.baidubce.com/rest/2.0/ocr/v1/vin_code`

URL参数：

| 参数         | 值                                                           |
| :----------- | :----------------------------------------------------------- |
| access_token | 通过API Key和Secret Key获取的access_token,参考“[Access Token获取](http://ai.baidu.com/docs#/Auth)” |

Header如下：

| 参数         | 值                                |
| :----------- | :-------------------------------- |
| Content-Type | application/x-www-form-urlencoded |

Body中放置请求参数，参数详情如下：

**请求参数**

| 参数  | 是否必选 | 类型   | 可选值范围 | 说明                                                         |
| :---- | :------- | :----- | :--------- | :----------------------------------------------------------- |
| image | 是       | string | -          | 图像数据，base64编码后进行urlencode，要求base64编码和urlencode后大小不超过4M，最短边至少15px，最长边最大4096px,支持jpg/png/bmp格式 |

**请求代码示例**

参考通用文字识别（含位置信息版）

## 返回说明

**返回参数**

| 字段             | 是否必选 | 类型    | 说明                                   |
| :--------------- | :------- | :------ | :------------------------------------- |
| log_id           | 是       | uint64  | 唯一的log id，用于问题定位             |
| words_result     | 是       | array() | 识别结果数组                           |
| location         | 是       | array() | 位置数组                               |
| words            | 是       | string  | VIN码识别结果                          |
| words_result_num | 是       | int     | 识别结果数，表示words_result的元素个数 |

**返回示例**

```
{
	"log_id": 246589877,
	"words_result": [
		{
			"location": {
				"left": 124,
				"top": 11,
				"width": 58,
				"height": 359
			},
			"words": "LFV2A11K8D4010942"
		}
	],
	"words_result_num": 1
}
```

# 二维码识别

## 接口描述

【此接口需要您在[申请页面](https://cloud.baidu.com/survey/AICooperativeConsultingApply.html)中提交合作咨询开通权限】 识别条形码、二维码中包含的URL或其他信息内容

## 请求说明

**请求示例**

HTTP 方法：`POST`

请求URL： `https://aip.baidubce.com/rest/2.0/ocr/v1/qrcode`

URL参数：

| 参数         | 值                                                           |
| :----------- | :----------------------------------------------------------- |
| access_token | 通过API Key和Secret Key获取的access_token,参考“[Access Token获取](http://ai.baidu.com/docs#/Auth)” |

Header如下：

| 参数         | 值                                |
| :----------- | :-------------------------------- |
| Content-Type | application/x-www-form-urlencoded |

Body中放置请求参数，参数详情如下：

**请求参数**

| 参数  | 是否必选 | 类型   | 可选值范围 | 说明                                                         |
| :---- | :------- | :----- | :--------- | :----------------------------------------------------------- |
| image | 是       | string | -          | 图像数据，base64编码后进行urlencode，要求base64编码和urlencode后大小不超过4M，最短边至少15px，最长边最大4096px,支持jpg/png/bmp格式 |

**请求代码示例**

参考通用文字识别（含位置信息版）

## 返回说明

**返回参数**

| 字段             | 是否必选 | 类型    | 说明                                                         |
| :--------------- | :------- | :------ | :----------------------------------------------------------- |
| log_id           | 是       | uint64  | 唯一的log id，用于问题定位                                   |
| codes_result_num | 是       | uint32  | 识别结果数，表示codes_result的元素个数                       |
| codes_result     | 是       | array() | 定位和识别结果数组                                           |
| -type            | 是       | string  | 识别码类型条码类型包括：9种条形码（UPC_A、UPC_E、EAN_13、EAN_8、CODE_39、CODE_93、CODE_128、ITF、CODABAR），4种二维码（QR_CODE、DATA_MATRIX、AZTEC、PDF_417） |
| -text            | 是       | string  | 条形码识别内容,暂时只限于识别中英文结果                      |

**返回示例**

```
{
    "log_id": 863402790,
    "codes_result": [
        {
            "type": "QR_CODE",
            "text": [
                "中国",
                "北京"
            ]
        }
    ],
    "codes_result_num": 1
}
示例2（多个图的情况）:
{
    "log_id": 1508509437,
    "codes_result": [
        {
            "type": "QR_CODE",
            "text": [
                "HTTP://Q8R.HK/YELZ0"
            ]
        },
        {
            "type": "PDF_417",
            "text": [
                "PDF417偼丄TL-30偱撉傒庢傝壜擻偱偡丅"
            ]
        },
        {
            "type": "CODABAR",
            "text": [
                "000800"
            ]
        },
        {
            "type": "CODE_39",
            "text": [
                "1234567890"
            ]
        },
        {
            "type": "AZTEC",
            "text": [
                "www.tec-it.com"
            ]
        },
        {
            "type": "DATA_MATRIX",
            "text": [
                "Wikipedia, the free encyclopedia"
            ]
        },
        {
            "type": "CODE_93",
            "text": [
                "123456789"
            ]
        },
        {
            "type": "CODE_128",
            "text": [
                "50090500019191"
            ]
        },
        {
            "type": "EAN_8",
            "text": [
                "12345670"
            ]
        },
        {
            "type": "EAN_13",
            "text": [
                "6901234567892"
            ]
        },
        {
            "type": "UPC_E",
            "text": [
                "01234565"
            ]
        }
    ],
    "codes_result_num": 11
}
```

# 数字识别

## 接口描述

对图像中的阿拉伯数字进行识别提取，适用于快递单号、手机号、充值码提取等场景

## 请求说明

**请求示例**

HTTP 方法：`POST`

请求URL： `https://aip.baidubce.com/rest/2.0/ocr/v1/numbers`

URL参数：

| 参数         | 值                                                           |
| :----------- | :----------------------------------------------------------- |
| access_token | 通过API Key和Secret Key获取的access_token,参考“[Access Token获取](http://ai.baidu.com/docs#/Auth)” |

Header如下：

| 参数         | 值                                |
| :----------- | :-------------------------------- |
| Content-Type | application/x-www-form-urlencoded |

Body中放置请求参数，参数详情如下：

**请求参数**

| 参数                  | 是否必选 | 类型   | 可选值范围  | 说明                                                         |
| :-------------------- | :------- | :----- | :---------- | :----------------------------------------------------------- |
| image                 | 是       | string | -           | 图像数据，base64编码后进行urlencode，要求base64编码和urlencode后大小不超过4M，最短边至少15px，最长边最大4096px,支持jpg/png/bmp格式 |
| recognize_granularity | false    | string | big、small  | 是否定位单字符位置，big：不定位单字符位置，默认值；small：定位单字符位置 |
| detect_direction      | false    | string | true、false | 是否检测图像朝向，默认不检测，即：false。可选值包括true - 检测朝向；false - 不检测朝向。朝向是指输入图像是正常方向、逆时针旋转90/180/270度。 |

**请求代码示例**

参考通用文字识别（含位置信息版）

## 返回说明

**返回参数**

| 字段             | 是否必选 | 类型    | 说明                                          |
| :--------------- | :------- | :------ | :-------------------------------------------- |
| log_id           | 是       | uint64  | 唯一的log id，用于问题定位                    |
| words_result_num | 是       | uint32  | 识别结果数，表示words_result的元素个数        |
| words_result     | 是       | array() | 定位和识别结果数组                            |
| location         | 是       | object  | 位置数组（坐标0点为左上角）                   |
| left             | 是       | uint32  | 表示定位位置的长方形左上顶点的水平坐标        |
| top              | 是       | uint32  | 表示定位位置的长方形左上顶点的垂直坐标        |
| width            | 是       | uint32  | 表示定位位置的长方形的宽度                    |
| height           | 是       | uint32  | 表示定位位置的长方形的高度                    |
| words            | 是       | string  | 识别结果字符串                                |
| chars            | 否       | array() | 单字符结果，recognize_granularity=small时存在 |
| location         | 是       | array() | 位置数组（坐标0点为左上角）                   |
| left             | 是       | uint32  | 表示定位位置的长方形左上顶点的水平坐标        |
| top              | 是       | uint32  | 表示定位位置的长方形左上顶点的垂直坐标        |
| width            | 是       | uint32  | 表示定位定位位置的长方形的宽度                |
| height           | 是       | uint32  | 表示位置的长方形的高度                        |
| char             | 是       | string  | 单字符识别结果                                |

**返回示例**

```
    "log_id": 620759800,
    "words_result": [
        {
            "location": {
                "left": 56,
                "top": 0,
                "width": 21,
                "height": 210
            },
            "words": "3"
        }
    ],
    "words_result_num": 1
}
```

# 网络图片文字识别

## 接口描述

用户向服务请求识别一些网络上背景复杂，特殊字体的文字。

## 请求说明

**请求示例**

HTTP 方法：`POST`

请求URL： `https://aip.baidubce.com/rest/2.0/ocr/v1/webimage`

URL参数：

| 参数         | 值                                                           |
| :----------- | :----------------------------------------------------------- |
| access_token | 通过API Key和Secret Key获取的access_token,参考“[Access Token获取](http://ai.baidu.com/docs#/Auth)” |

Header如下：

| 参数         | 值                                |
| :----------- | :-------------------------------- |
| Content-Type | application/x-www-form-urlencoded |

Body中放置请求参数，参数详情如下：

**请求参数**

| 参数             | 是否必选      | 类型   | 可选值范围  | 说明                                                         |
| :--------------- | :------------ | :----- | :---------- | :----------------------------------------------------------- |
| image            | 和url二选一   | string | -           | 图像数据，base64编码后进行urlencode，要求base64编码和urlencode后大小不超过4M，最短边至少15px，最长边最大4096px,支持jpg/png/bmp格式，当image字段存在时url字段失效 |
| url              | 和image二选一 | string | -           | 图片完整URL，URL长度不超过1024字节，URL对应的图片base64编码后大小不超过4M，最短边至少15px，最长边最大4096px,支持jpg/png/bmp格式，当image字段存在时url字段失效，不支持https的图片链接 |
| detect_direction | false         | string | true、false | 是否检测图像朝向，默认不检测，即：false。朝向是指输入图像是正常方向、逆时针旋转90/180/270度。可选值包括: - true：检测朝向； - false：不检测朝向。 |
| detect_language  | FALSE         | string | true、false | 是否检测语言，默认不检测。当前支持（中文、英语、日语、韩语） |

**请求代码示例**

请参考通用文字识别（含位置信息版）的代码内容，并更换请求地址。

## 返回说明

**返回参数**

| 字段             | 是否必选 | 类型    | 说明                                                         |
| :--------------- | :------- | :------ | :----------------------------------------------------------- |
| direction        | 否       | int32   | 图像方向，当detect_direction=true时存在。 - -1:未定义， - 0:正向， - 1: 逆时针90度， - 2:逆时针180度， - 3:逆时针270度 |
| log_id           | 是       | uint64  | 唯一的log id，用于问题定位                                   |
| words_result     | 是       | array() | 识别结果数组                                                 |
| words_result_num | 是       | uint32  | 识别结果数，表示words_result的元素个数                       |
| +words           | 否       | string  | 识别结果字符串                                               |
| probability      | 否       | object  | 识别结果中每一行的置信度值，包含average：行置信度平均值，variance：行置信度方差，min：行置信度最小值 |

**返回示例**

```
参见通用文字识别
```

# 彩票识别

## 接口描述

【此接口需要您在[申请页面](https://cloud.baidu.com/survey/AICooperativeConsultingApply.html)中提交合作咨询开通权限】对大乐透、双色球彩票进行识别，并返回识别结果

## 请求说明

**请求示例**

HTTP 方法：`POST`

请求URL： `https://aip.baidubce.com/rest/2.0/ocr/v1/lottery`

URL参数：

| 参数         | 值                                                           |
| :----------- | :----------------------------------------------------------- |
| access_token | 通过API Key和Secret Key获取的access_token,参考“[Access Token获取](http://ai.baidu.com/docs#/Auth)” |

Header如下：

| 参数         | 值                                |
| :----------- | :-------------------------------- |
| Content-Type | application/x-www-form-urlencoded |

Body中放置请求参数，参数详情如下：

**请求参数**

| 参数                  | 是否必选 | 类型   | 可选值范围 | 说明                                                         |
| :-------------------- | :------- | :----- | :--------- | :----------------------------------------------------------- |
| image                 | 是       | string | -          | 图像数据，base64编码后进行urlencode，要求base64编码和urlencode后大小不超过4M，最短边至少15px，最长边最大4096px,支持jpg/png/bmp格式 |
| recognize_granularity | false    | string | big、small | 是否定位单字符位置，big：不定位单字符位置，默认值；small：定位单字符位置 |

**请求代码示例**

参考通用文字识别（含位置信息版）

## 返回说明

**返回参数**

| 字段             | 是否必选 | 类型    | 说明                                          |
| :--------------- | :------- | :------ | :-------------------------------------------- |
| log_id           | 是       | uint64  | 唯一的log id，用于问题定位                    |
| words_result_num | 是       | uint32  | 识别结果数，表示words_result的元素个数        |
| words_result     | 是       | array() | 定位和识别结果数组                            |
| location         | 是       | object  | 位置数组（坐标0点为左上角）                   |
| left             | 是       | uint32  | 表示定位位置的长方形左上顶点的水平坐标        |
| top              | 是       | uint32  | 表示定位位置的长方形左上顶点的垂直坐标        |
| width            | 是       | uint32  | 表示定位位置的长方形的宽度                    |
| height           | 是       | uint32  | 表示定位位置的长方形的高度                    |
| words            | 是       | string  | 识别结果字符串                                |
| chars            | 否       | array() | 单字符结果，recognize_granularity=small时存在 |
| location         | 是       | array() | 位置数组（坐标0点为左上角）                   |
| left             | 是       | uint32  | 表示定位位置的长方形左上顶点的水平坐标        |
| top              | 是       | uint32  | 表示定位位置的长方形左上顶点的垂直坐标        |
| width            | 是       | uint32  | 表示定位定位位置的长方形的宽度                |
| height           | 是       | uint32  | 表示位置的长方形的高度                        |
| char             | 是       | string  | 单字符识别结果                                |

**返回示例**

*参见通用文字识别返回示例*

# 保单识别

## 接口描述

【此接口需要您在[申请页面](https://cloud.baidu.com/survey/AICooperativeConsultingApply.html)中提交合作咨询开通权限】对各类保单中投保人、受益人的各项信息、保费、保险名称等字段进行结构化识别

## 请求说明

**请求示例**

HTTP 方法：`POST`

请求URL： `https://aip.baidubce.com/rest/2.0/ocr/v1/insurance_documents`

URL参数：

| 参数         | 值                                                           |
| :----------- | :----------------------------------------------------------- |
| access_token | 通过API Key和Secret Key获取的access_token,参考“[Access Token获取](http://ai.baidu.com/docs#/Auth)” |

Header如下：

| 参数         | 值                                |
| :----------- | :-------------------------------- |
| Content-Type | application/x-www-form-urlencoded |

Body中放置请求参数，参数详情如下：

**请求参数**

| 参数         | 是否必选 | 类型   | 可选值范围 | 说明                                                         |
| :----------- | :------- | :----- | :--------- | :----------------------------------------------------------- |
| image        | 是       | string | -          | 图像数据，base64编码后进行urlencode，要求base64编码和urlencode后大小不超过4M，最短边至少15px，最长边最大4096px,支持jpg/png/bmp格式 |
| rkv_business | 否       | string | true/false | 是否进行商业逻辑处理，rue：进行商业逻辑处理，false：不进行商业逻辑处理，默认true |

**请求代码示例**

参考通用文字识别（含位置信息版）

## 返回说明

**返回参数**

| 字段             | 是否必选 | 类型   | 说明                                   |
| :--------------- | :------- | :----- | :------------------------------------- |
| log_id           | 是       | uint64 | 唯一的log id，用于问题定位             |
| words_result_num | 是       | uint32 | 识别结果数，表示words_result的元素个数 |
| words_result     | 是       | object | 定位和识别结果数组                     |
| BenPerLst        | 否       | object | 受益人信息                             |
| BenCltNa         | 否       | string | 受益人姓名                             |
| BenPerPro        | 否       | string | 受益比例                               |
| BenPerOrd        | 否       | string | 受益顺序                               |
| BenPerTyp        | 否       | string | 受益人类型                             |
| InsBilCom        | 否       | string | 公司名称                               |
| InsBilNo         | 否       | string | 保险单号码                             |
| InsBilTim        | 否       | string | 保单生效日期                           |
| InsCltGd1        | 否       | string | 投保人性别                             |
| InsCltNa1        | 否       | string | 投保人                                 |
| InsIdcNb1        | 否       | string | 投保人证件号码                         |
| InsIdcTy1        | 否       | string | 投保人证件类型                         |
| InsPerLst        | 否       | object | 被保人信息                             |
| InsCltGd2        | 否       | string | 被保人性别                             |
| InsCltNa2        | 否       | string | 被保险人                               |
| InsBthDa2        | 否       | string | 被保险人出生日期                       |
| InsIdcNb2        | 否       | string | 被保险人证件号码                       |
| InsIdcTy2        | 否       | string | 被保险人证件类型                       |
| InsPrdList       | 否       | object | 保险信息                               |
| InsCovDur        | 否       | string | 保险期限                               |
| InsIcvAmt        | 否       | string | 基本保险金额                           |
| InsPayDur        | 否       | string | 交费期间                               |
| InsPayFeq        | 否       | string | 缴费频率                               |
| InsPerAmt        | 否       | string | 每期交费金额                           |
| InsPrdNam        | 否       | string | 产品名称                               |

**返回示例**

```
{
    "log_id": 673571462,
    "words_result_num": 10,
    "words_result": {
        "BenPerLst": [{
            "BenPerTyp": {
                "words": "身故受益人"
            }
        }],
        "InsBilCom": {
            "location": {
                "left": 168,
                "top": 73,
                "width": 330,
                "height": 41
            },
            "words": "和谐健康保险股份有限公司"
        },
        "InsBilNo": {
            "location": {
                "left": 250,
                "top": 232,
                "width": 248,
                "height": 30
            },
            "words": "2110010000100"
        },
        "InsBilTim": {
            "location": {
                "left": 1047,
                "top": 1349,
                "width": 146,
                "height": 26
            },
            "words": "2014-09-18"
        },
        "InsCltGd1": {
            "location": {
                "left": 184,
                "top": 415,
                "width": 50,
                "height": 29
            },
            "words": "男"
        },
        "InsCltNa1": {
            "location": {
                "left": 257,
                "top": 284,
                "width": 36,
                "height": 29
            },
            "words": "过"
        },
        "InsIdcNb1": {
            "location": {
                "left": 1006,
                "top": 336,
                "width": 189,
                "height": 28
            },
            "words": "31011019880215"
        },
        "InsIdcTy1": {
            "location": {
                "left": 632,
                "top": 422,
                "width": 91,
                "height": 28
            },
            "words": "身份证"
        },
        "InsPerLst": [{
            "InsCltGd2": {
                "location": {
                    "left": 184,
                    "top": 415,
                    "width": 50,
                    "height": 29
                },
                "words": "男"
            },
            "InsCltNa2": {
                "location": {
                    "left": 278,
                    "top": 371,
                    "width": 105,
                    "height": 31
                },
                "words": "过海敏"
            },
            "InsIdcNb2": {
                "location": {
                    "left": 1008,
                    "top": 422,
                    "width": 189,
                    "height": 25
                },
                "words": "31011019880215"
            },
            "InsIdcTy2": {
                "location": {
                    "left": 632,
                    "top": 422,
                    "width": 91,
                    "height": 28
                },
                "words": "身份证"
            }
        }, {
            "InsIdcTy2": {
                "location": {
                    "left": 636,
                    "top": 340,
                    "width": 87,
                    "height": 27
                },
                "words": "身份证"
            }
        }, {
            "InsIdcTy2": {
                "location": {
                    "left": 1006,
                    "top": 336,
                    "width": 189,
                    "height": 28
                },
                "words": "身份证"
            }
        }],
        "InsPrdList": [{
            "InsCovDur": {
                "location": {
                    "left": 737,
                    "top": 808,
                    "width": 72,
                    "height": 25
                },
                "words": "至70岁"
            },
            "InsIcvAmt": {
                "location": {
                    "left": 531,
                    "top": 802,
                    "width": 114,
                    "height": 31
                },
                "words": "20000.00"
            },
            "InsPayDur": {
                "location": {
                    "left": 1081,
                    "top": 804,
                    "width": 48,
                    "height": 24
                },
                "words": "20年"
            },
            "InsPayFeq": {
                "location": {
                    "left": 1246,
                    "top": 800,
                    "width": 51,
                    "height": 26
                },
                "words": "年交"
            },
            "InsPerAmt": {
                "location": {
                    "left": 888,
                    "top": 811,
                    "width": 88,
                    "height": 19
                },
                "words": "952.00"
            },
            "InsPrdNam": {
                "location": {
                    "left": 131,
                    "top": 802,
                    "width": 351,
                    "height": 31
                },
                "words": "和谐健康之尊定期防癌疾病保险"
            }
        }]
    }
}
```

# 税务局通用机打发票识别

## 接口描述

【此接口需要您在[申请页面](https://cloud.baidu.com/survey/AICooperativeConsultingApply.html)中提交合作咨询开通权限】对国家/地方税务局发行的横/竖版通用机打发票的号码、代码、日期、合计金额、类型、商品名称字段进行结构化识别

## 请求说明

**请求示例**

HTTP 方法：`POST`

请求URL： `https://aip.baidubce.com/rest/2.0/ocr/v1/invoice`

URL参数：

| 参数         | 值                                                           |
| :----------- | :----------------------------------------------------------- |
| access_token | 通过API Key和Secret Key获取的access_token,参考“[Access Token获取](http://ai.baidu.com/docs#/Auth)” |

Header如下：

| 参数         | 值                                |
| :----------- | :-------------------------------- |
| Content-Type | application/x-www-form-urlencoded |

Body中放置请求参数，参数详情如下：

**请求参数**

| 参数     | 是否必选 | 类型   | 可选值范围 | 说明                                                         |
| :------- | :------- | :----- | :--------- | :----------------------------------------------------------- |
| image    | 是       | string | -          | 图像数据，base64编码后进行urlencode，要求base64编码和urlencode后大小不超过4M，最短边至少15px，最长边最大4096px,支持jpg/png/bmp格式 |
| location | 否       | string | true/false | 是否输出位置信息，true：输出位置信息，false：不输出位置信息，默认false |

**请求代码示例**

参考通用文字识别（含位置信息版）

## 返回说明

**返回参数**

| 字段             | 是否必选 | 类型   | 说明                                   |
| :--------------- | :------- | :----- | :------------------------------------- |
| log_id           | 是       | uint64 | 唯一的log id，用于问题定位             |
| words_result_num | 是       | uint32 | 识别结果数，表示words_result的元素个数 |
| words_result     | 是       | object | 定位和识别结果数组                     |
| CommodityName    | 否       | string | 商品名称                               |
| InvoiceCode      | 否       | string | 发票代码                               |
| InvoiceDate      | 否       | string | 发票日期                               |
| InvoiceNum       | -        | -      | 发票号码                               |
| InvoiceType      | -        | -      | 发票类型                               |
| TotalTax         | -        | -      | 合计金额                               |

**返回示例**

```
{
    "log_id": 168790215,
    "words_result_num": 6,
    "words_result": {
        "CommodityName": {
            "location": {
                "left": 363,
                "top": 810,
                "width": 249,
                "height": 44
            },
            "words": "汽油"
        },
        "InvoiceCode": {
            "location": {
                "left": 510,
                "top": 353,
                "width": 298,
                "height": 56
            },
            "words": "061001700107"
        },
        "InvoiceDate": {
            "location": {
                "left": 483,
                "top": 602,
                "width": 172,
                "height": 59
            },
            "words": "2018-03-14"
        },
        "InvoiceNum": {
            "location": {
                "left": 506,
                "top": 399,
                "width": 202,
                "height": 64
            },
            "words": "31108887"
        },
        "InvoiceType": {
            "location": {
                "left": 0,
                "top": 0,
                "width": 0,
                "height": 0
            },
            "words": "机打发票"
        },
        "TotalTax": {
            "location": {
                "left": 477,
                "top": 1496,
                "width": 188,
                "height": 40
            },
            "words": "300.00"
        }
    }
} 
```

# 行程单识别

## 接口描述

【此接口需要您在[申请页面](https://cloud.baidu.com/survey/AICooperativeConsultingApply.html)中提交合作咨询开通权限】对飞机行程单中的姓名、始发站、目的站、航班号、日期、票价字段进行结构化识别

## 请求说明

**请求示例**

HTTP 方法：`POST`

请求URL： `https://aip.baidubce.com/rest/2.0/ocr/v1/air_ticket`

URL参数：

| 参数         | 值                                                           |
| :----------- | :----------------------------------------------------------- |
| access_token | 通过API Key和Secret Key获取的access_token,参考“[Access Token获取](http://ai.baidu.com/docs#/Auth)” |

Header如下：

| 参数         | 值                                |
| :----------- | :-------------------------------- |
| Content-Type | application/x-www-form-urlencoded |

Body中放置请求参数，参数详情如下：

**请求参数**

| 参数  | 是否必选 | 类型   | 可选值范围 | 说明                                                         |
| :---- | :------- | :----- | :--------- | :----------------------------------------------------------- |
| image | 是       | string | -          | 图像数据，base64编码后进行urlencode，要求base64编码和urlencode后大小不超过4M，最短边至少15px，最长边最大4096px,支持jpg/png/bmp格式 |

**请求代码示例**

参考通用文字识别（含位置信息版）

## 返回说明

**返回参数**

| 字段                | 是否必选 | 类型   | 说明                                   |
| :------------------ | :------- | :----- | :------------------------------------- |
| log_id              | 是       | uint64 | 唯一的log id，用于问题定位             |
| words_result_num    | 是       | uint32 | 识别结果数，表示words_result的元素个数 |
| words_result        | 是       | object | 定位和识别结果数组                     |
| name                | 否       | string | 姓名                                   |
| starting_station    | 否       | string | 始发站                                 |
| destination_station | 否       | string | 目的站                                 |
| flight              | 否       | string | 航班号                                 |
| date                | 否       | string | 日期                                   |
| ticket_rates        | 否       | string | 票价                                   |

**返回示例**

```
{
    "log_id": 2312235016,
    "words_result_num": 6,
    "words_result": {
        "date": "2017-11-29",
        "destination_station": "长沙",
        "flight": "MU2778",
        "name": "王琦",
        "starting_station": "海口",
        "ticket_rates": "1230.00"
    }
}
```

# 自定义模板文字识别

## 更新记录

| 时间       | 更新说明                                                     |
| :--------- | :----------------------------------------------------------- |
| 2019.02.27 | 新增模板矩形裁切、透视裁切功能，让模板更规范，后期识别率更高；新增支持模板替换功能；模板匹配算法优化，识别准确率提升；同时对产品易用性做了多项提升 |
| 2019.02.21 | 优化了浏览器兼容性，新增对Firefox、Safari、IE11浏览器的支持  |
| 2019.02.11 | 分类器中加入增值税发票、出租车票、火车票、定额发票、行程单、大陆护照、机动车销售发票、车辆合格证、户口本的预置分类，用户直接勾选后即可实现对应票据的自动分类并结构化 |
| 2019.01.25 | 模板列表增加模板图片缩略图，查找模板更方便直观               |
| 2018.12.27 | 在识别区字段类型中新增手写数字识别类型，针对手写数字识别率更高 |
| 2018.10.31 | 新增自定义字段类型功能，在“字段类型管理”中针对返回值是有限集合的字段，用户可以上传词典，对该字段输出值进行限定 |
| 2018.10.10 | 分类模型升级，百度自有测试集上，准确率由95%左右全部提升到100%（视具体情况准确率可能有所波动） |
| 2018.08.30 | 检测模型升级，识别耗时降低20%                                |
| 2018.08.16 | 识别模型升级，漏识别率降低15.15%，准确率提升46.68%           |
| 2018.07.19 | 1.新增识别区属性选择，能针对特定类型的识别区提高识别率； 2.新增返回字段置信度；3.表格识别区新增表格线判断功能，识别准确率提升；4.新增参照字段框选引导 |
| 2018.06.04 | 新增票据自动分类功能                                         |
| 2018.03.16 | 产品易用性提升，优化使用流程                                 |
| 2017.12.25 | 产品上线                                                     |

**注意！请拒绝使用任何第三方插件使用百度OCR服务**

**使用第三方非法插件会导致您的AK SK泄露，导致别人可以盗用您的账户进行任意消费！ 切勿使用任何第三方插件！ 因此导致的账号泄露、恶意消费，请用户自行承担责任。如果您已经使用了相关的插件，建议您立即删除对应appid、更换账户密码、更新所有appid的token，或更换账号！**

## 产品介绍

自定义模板文字识别是一款可以针对固定版面票据、卡证实现**自动分类并实现字段名和字段值对应提取的OCR产品**。

## 名词解释（**非常重要！**）

- 【参照字段】：图片中**位置和内容都固定不变的文字**后期上传的图片会以此为依据进行扭正，参照字段的选取会影响图片的识别率，建议选取8个以上的参照字段，单个参照字段内的文字不可以换行。
- 【识别区】：需要识别的值可能出现的范围。
- 【 templateSign】：模板ID，用于指定后期上传的图片用哪个模板来进行识别。
- 【classifierId】：分类器ID，用于指定使用具体某个分类器，传入本参数后不用再传templateSign参数。

## 模板制作步骤（预计阅读时间2分钟）

**总体步骤：** 上传模板图片 框选参照字段 框选识别区 保存&试一试 发布模板

### 上传模板图片

点击进入产品页面：[ ai.baidu.com/iocr ](http://ai.baidu.com/iocr)，点击“创建模板”后**首先对模板进行命名**，点击编辑区域上传一张清晰、摆放端正的模板图片。

### 框选参照字段

填写完模板名称之后，点击【框选参照字段】标签后使用鼠标框选出模板图片和后期识别图片上内容和位置都不会变化的文字段。 下面是一个参照字段框选的示例，**橘色**矩形框选的为参照字段： ![img](https://ai.bdstatic.com/file/AD22AA92A0C64F9B97AF48B8D215AC0B)

### 框选识别区

点击“框选识别区”标签后鼠标默认启用识别区框选工具。例如单据中常见的日期。此时需要您把日期值所在的区域使用识别区框选工具框选出来，然后在右侧填写这个字段对应的字段名。 如图：**蓝色**矩形框选的为固定识别区 ![img](https://ai.bdstatic.com/file/7DD2D8FADA1B4B9184A03626A39F52BA)

### 保存之后试一试

点击“保存”之后，选择试一试进行在线测试，如果对效果满意即可发布上线。如果发布之后对想回滚到之前的版本，可以在“修改历史”里选择对应版本进行回滚。 ![img](https://ai.bdstatic.com/file/C4CEC8372B9944A29CEE7697699D8AB7)

### 发布模板

如果觉得识别效果已经符合要求，可以点击下方的发布按钮进行发布操作；如果觉得效果不好，可以继续编辑/调整模板，然后保存后再测试。**注意：只有发布后的模板才能在线上进行接口调用和后期的分类操作。如果没有发布，那么仅仅是生成了一个新的版本，此时对模板的任何修改都不会影响线上调用。**

![img](https://ai.bdstatic.com/file/DBB15A864CE84C43A1AC770491145B71)

发布页面中提示的模板ID也可以在自定义模板管理页查询到，也就是管理页的templateSign ![img](https://ai.bdstatic.com/file/F17AD7E43AB2454BA8810D74664F9312)

线上接口会用到模板ID【templateSign】。接口文档参见[此处](http://ai.baidu.com/docs#/OCR-API/8b83b775)，当然您可能还有很多其他疑问，建议您可以参考[自定义模板文字识别Q&A](http://ai.baidu.com/docs#/OCR-API/0d7080dd)，或者在[论坛](http://ai.baidu.com/forum/topic/list/164)发布您的问题，甚至您可以直接加入我们QQ群（群号：570832882），直接找到我们的产品经理、研发同学和运营同学来咨询问题。

## 高级功能

### “带表格区域”模板的制作

**功能：对票据中的表格按行列返回每个单元格中的内容。** 通过上面的阅读您已经可以制作相对简单的模板，接下来演示一个带有表格识别区的复杂模板：

表格识别区可以针对图像中的表格按行列返回单元格中的值。点击工具栏从左往右第二个小图标![img](https://ai.bdstatic.com/file/950EAA81CEBD4BF4931F003D767ED16A)，弹出小框，输入表格的列数。例如本例中的表格共有三列，则输入3，点击插入 ![img](https://ai.bdstatic.com/file/18D18C08D4884A3CB3E5173F7C39117D)

将左上角蓝色的表格识别区拖到模板图片上表格区域，通过调整顶点、分割线的小白点对识别区进行调整，直至每一列识别区覆盖每一列数据。同时请注意表格识别区覆盖的是表格内容！「不包括表头」 ![img](https://ai.bdstatic.com/file/7C67361D0BDD4822BDF6F144A8D2736A)

### 模板自动分类功能

**功能：让系统匹配票据的模板，无需在调用前指定模板ID，替代人工对票据进行分类** 很多客户使用自定义模板文字识别定制了大量模板，但是需要人工先对各类票据进行分类，再选择对应的模板进行结构化识别。为了节省用户票据分类的成本，我们加入了模板自动分类功能，客户在“分类器管理”标签中可以针对所有的自定义模板和百度平台已有的系统模板（如身份证、银行卡、驾驶证等）创建分类器，实现模板的自动分类。

#### 创建分类器

点击“分类器管理”标签进入管理页面，点击“创建分类器”后输入分类器名称和该分类器的应用场景/功能描述后点击确定进入编辑页面。

![img](https://ai.bdstatic.com/file/0C3E96555DA44D089277D61AA1F00962)

#### 选择参与分类的模板

需要分类的模板分为“我的模板”和“系统模板”，我的模板指客户在自定义模板文字识别中创建的模板，系统模板指百度官网预置的模板（包含了：身份证正面、身份证反面、银行卡、驾驶证、行驶证、车牌、营业执照、护照、增值税发票）。客户可以根据业务需要添加模板参与分类。

![img](https://ai.bdstatic.com/file/6BA9AE73D1B3455688121B8DE7EAF503)

#### 上传对应模板的训练集

参与分类的如果是百度预置的模板您无需上传训练集，如果参与分类的是您自己制作的模板则需要您准备30到100张同模板的票据打包成ZIP包以后点击“编辑训练集”上传该训练集。当所有的自定义模板都已经上传了符合要求（30到100张、同模板）的训练集后点击“开始训练”。您可以在分类器管理页面查看预计完成的时间并通过刷新查看当前状态。（上传的训练集不会影响模板识别的结果，但是会通过影响分类准确率影响最终的识别结果） **请保证后期分类的图片和训练集中的图片类型（都是扫描件/都是拍照件）、照片质量、拍摄情况尽可能一致，训练集图片越接近后期使用图片，分类效果越好！**

![img](https://ai.bdstatic.com/file/DAC1FD6444E6444AAECAC24AE66EBCA0)

#### 训练完成后进行效果测试

当您的分类器训练完成后您可以在分类器管理页面点击“测试”上传图片进行分类测试，如果测试结果没有问题点击“发布”即可通过API调用该接口，参数classifierId指定某个已发布的分类器，即可实现该分类器中任意模板的自动识别。如果对分类结果不满意，建议检查训练集数据中是否包含了较多噪声数据，或尝试增加训练集内的图片数量。

### 自定义字段类型

**功能：针对某些字段的输出值是有限集合的情况，通过用户上传字段词典，让系统智能纠正匹配，提高准确率**，如婚姻状况、全国省市、教育情况。

#### 创建字段类型

在顶部【字段类型管理】中点击【创建字段类型】，输入名称后点击【上传词典】上传txt词典文档，词典中不同字段值各占一行。 ![img](https://ai.bdstatic.com/file/74E347CAEB124899BD81CAF20EF65C22)*如果您的字段为：中国地市县名称、省份名称、中国民族，您可以点击【添加预置类型】，百度已经为您准备好对应的词典文件，直接点击添加后，即可在模板制作时选用。百度也将不断丰富预置词典类型，方便您使用。*

#### 制作模板时选用

在制作模板时，当您框选完识别区以后，可以在对应识别区的“字段类型”中找到“我的字段类型”并选择对应类型。这样在识别后我们会根据识别到的结果智能纠正为词典中最接近的词作为结果输出。 ![img](https://ai.bdstatic.com/file/9FDF55536688445CB38DD28E148AA15F)

## 请求说明

**请求示例**

HTTP 方法：`POST`

请求URL： `https://aip.baidubce.com/rest/2.0/solution/v1/iocr/recognise`

URL参数：

| 参数         | 值                                                           |
| :----------- | :----------------------------------------------------------- |
| access_token | 通过API Key和Secret Key获取的access_token,参考“[Access Token获取](http://ai.baidu.com/docs#/Auth)” |

Header如下：

| 参数         | 值                                |
| :----------- | :-------------------------------- |
| Content-Type | application/x-www-form-urlencoded |

Body中放置请求参数，参数详情如下：

**请求参数**

| 参数         | 是否必选 | 类型   | 可选值范围 | 说明                                                         |
| :----------- | :------- | :----- | :--------- | :----------------------------------------------------------- |
| image        | true     | string | -          | 图像数据，base64编码后进行urlencode，要求base64编码和urlencode后大小不超过4M，最短边至少15px，最长边最大4096px,支持jpg/png/bmp格式 |
| templateSign | false    | string | -          | 您在自定义文字识别平台制作的模板的ID，举例：Nsdax2424asaAS791823112 |
| classifierId | false    | int    | -          | 分类器Id。这个参数和templateSign至少存在一个，优先使用templateSign。存在templateSign时，表示使用指定模板；如果没有templateSign而有classifierId，表示使用分类器去判断使用哪个模板 |

**请求代码示例**

请参考通用文字识别（含位置信息版）的代码内容，并更换请求地址。

## 返回说明

**返回参数**

| 字段              | 类型       | 说明                                                         |
| :---------------- | :--------- | :----------------------------------------------------------- |
| error_code        | int        | 0代表成功，如果有错误码返回可以参考下方错误码列表排查问题    |
| error_msg         | string     | 如果error_code具体的失败信息，可以参考下方错误码列表排查问题 |
| data              | jsonObject | 识别返回的结果                                               |
| data_isStructured | string     | 表示是否结构话成功，true为成功，false为失败；成功时候，返回结构化的识别结果；失败时，如果能识别，返回类似通用文字识别的结果，如果不能识别，返回空 |
| data_logId        | string     | 调用的日志id                                                 |
| data_templateSign | string     | 使用的tenplateSign                                           |
| data_scores       | float      | 分类器的得分，直接选择时为1.0F                               |
| data_ret          | jsonArray  | 识别出来的字段数组，每一个单元里包含以下几个元素             |

| 字段        | 类型       | 说明                                                         |
| :---------- | :--------- | :----------------------------------------------------------- |
| word_name   | string     | isStructured 为 true 时存在，表示字段的名字；如果 isStructured 为 false 时，不存在 |
| word        | string     | 识别的字符串或单字                                           |
| location    | jsonObject | 字段在原图上对应的矩形框                                     |
| probability | jsonObject | 字段的置信度，包括最大，最小和方差                           |

**返回示例**

```
{
    "data": {
        "ret": [
            {
                "probability": {
                    "average": 0.998482,
                    "min": 0.9957,
                    "variance": 0.000002
                },
                "location": {
                    "height": 88,
                    "left": 1202,
                    "top": 437,
                    "width": 267
                },
                "word_name": "终点站",
                "word": "天津"
            },
            {
                "probability": {
                    "average": 0.994316,
                    "min": 0.629856,
                    "variance": 0.000281
                },
                "location": {
                    "height": 82,
                    "left": 359,
                    "top": 593,
                    "width": 660
                },
                "word_name": "发车时间",
                "word": "201706092107"
            },
            {
                "probability": {
                    "average": 0.998482,
                    "min": 0.9957,
                    "variance": 0.000002
                },
                "location": {
                    "height": 90,
                    "left": 432,
                    "top": 432,
                    "width": 261
                },
                "word_name": "始发站",
                "word": "北京南"
            },
            {
                "probability": {
                    "average": 0.952242,
                    "min": 0.77037,
                    "variance": 0.008272
                },
                "location": {
                    "height": 79,
                    "left": 879,
                    "top": 464,
                    "width": 252
                },
                "word_name": "车次",
                "word": "C2097"
            },
            {
                "probability": {
                    "average": 0.980604,
                    "min": 0.932502,
                    "variance": 0.000352
                },
                "location": {
                    "height": 74,
                    "left": 982,
                    "top": 877,
                    "width": 206
                },
                "word_name": "乘车人",
                "word": "向宇波"
            },
            {
                "probability": {
                    "average": 0.994155,
                    "min": 0.903164,
                    "variance": 0.000396
                },
                "location": {
                    "height": 65,
                    "left": 1171,
                    "top": 593,
                    "width": 248
                },
                "word_name": "座位号",
                "word": "07车无座"
            },
            {
                "probability": {
                    "average": 0.993914,
                    "min": 1.2888,
                    "variance": 0.000009
                },
                "location": {
                    "height": 67,
                    "left": 429,
                    "top": 674,
                    "width": 193
                },
                "word_name": "价格",
                "word": "54.50"
            }
        ],
        "templateSign": "1c65a67f151df56ba4e29c4dddace5ee",
        "scores": 1,
        "isStructured": true,
        "logId": "153206517722624"
    },
    "error_code": 0,
    "error_msg": ""
}
```

## Q&A

### Q：什么是自定义模板文字识别？什么场景下我该使用这个产品？

A：自定义模板文字识别是一款您可以针对各种票据、卡证实现字段名和字段值对应提取的OCR产品；举例：当您需要识别某一种证件（比如房产证），但是百度官方还没有针对这种类型的证件推出具体的模板识别接口，而使用通用文字识别无法实现字段名和字段值对应化的提取，这种情况下您可以使用自定义模板文字识别产品，实现结构化的数据提取。

\###Q：产品实现的原理是什么？ A：基本原理：如果您要识别特定的一类具有固定格式的文档，首先上传一张票据、卡证的图片作为模板（*用于制作模板的图片要求摆放端正、平整，拍摄时避免过曝，阴影等不良情况*），然后在模板上框选一些固定的字段作为【参照字段】。后续调用识别接口时，会将新上传的图片以【参照字段】为锚点扭正到和模板图片一致。最后框选需要识别的区域作为【识别区】，框选后在右侧给该识别区命名，点击保存，这便完成了一个模板的制作。

### Q：自定义模板文字识别支持哪些浏览器？

A：推荐使用Chrome（版本58及以上），暂时不支持Safari。

### Q：上传的图片有大小限制吗？上传什么样的图片效果会比较好？

A：上传用于模板制作的图片，最大：小于等于4M，且分辨率小于等于4096像素乘4096像素，最小：大于等于15像素乘15像素且大于等于1KB，后期上传识别的图片最大：大小不超过4M，且分辨率小于等于4096像素乘4096像素，最小：大于等于15像素乘15像素且大于等于1KB。 为了保证更好的效果，建议模板图片：

1. 模板图片清晰平整，摆放端正
2. 模板图片格式以 **.jpg 为最佳**，png、bmp格式识别效果欠佳
3. 模板图片尽量突出需要识别的部分，请先手动剪裁掉不需要的部分，提高识别率
4. 模板图片大小建议为：转为base64编码后不超过1M，不宜过大或过小
5. 模板图片中，大多数汉字的大小保持在 32*32像素 左右，不符合的整体缩放调整

### Q：我该怎么使用自定义模板文字识别？

A：首先您需要制作您的模板，在Chrome中打开[ ai.baidu.com/iocr ](http://ai.baidu.com/iocr)进入模板管理界面，此时需要您首先登陆百度账号（和您的百度网盘、百度贴吧、百度文库等百度系产品通用），进入后点击创建模板，进入模板编辑界面，首先您需要给您的模板进行命名，然后点击左侧编辑框中的按钮上传模板图片（模板图片要求端正、清晰），然后框选字段值，框选后在右侧对应位置填写字段名，全部框选完后点击右侧“参照字段”标签，在图中框选参照字段（要求参见下一条Q&A），完成后点击保存，则您已经制作完您的模板，此时您可以点击“发布”按钮，把次模板发布到线上环境（保存只是保存修改记录，不会实时生效，发布后您的所有操作才会生效），然后您可以参照文档中的“请求说明”上传图片，并制定templateSign（模板标识），来指定上传的图片使用该模板。

### Q：模板制作过程中怎么进行图片的缩放？

A：可以使用工具栏中的放大缩小工具，或使用鼠标滚轮，或使用触摸板（如果您的设备具有触摸板）进行双指缩放。

### Q：什么是参照字段，选取时有什么注意点？

A：为了将您后期上传的图片矫正成和您模板图片以在同样的位置区间寻找关键值，您需要在制作模板的时候在“参照字段”标签页下框选至少4个（推荐框选8个以上）的参照字段，参照字段的选取需要点击编辑模板界面右上角工具栏中的“设置参照字段”工具，然后在图上拖动选取固定文字。 框选时有一些注意点：

- 同一参照字段的文字**必须**在同一行；
- 参照字段**必须**是模板图片和后期上传的图片中**共同拥有并且内容和位置都不变**的文字；
- 参照字段尽量**四散**在图片的边缘，尤其是四角；
- 参照字段尽量在模板图片上**唯一**，在图片中多次出现的文字段效果较差；
- 参照字段尽量**多**，至少4个，强烈推荐标注**8个**以上的参照字段，参照字段越多越分散识别效果越好；
- *如果后期测试时显示“未匹配到模板”则是因为参照字段选取和识别的问题，请按照上述要求检查核对并重新选取参照字段。*

\###Q：框选参照字段的时候发现识别错了，可以纠正吗？ A：可以的，您可以点击参照字段后面的编辑按钮，对参照字段进行人工纠正，输入正确的文字内容。修改正确参照字段的内容有助于提升后期模板匹配效果。纠正的规则是： -不能添加/删除超过两个字符，并且如果您框选的参照字段范围比较小，无法放下新增的两个字符，则您需要适当扩大该参照字段的框选范围 -跨行的参照字段无法编辑，请先改为框选单行文字 -不能将参照字段内容删除为空

\###Q：框选识别区时有什么办法可以提高准确率？ A：如果您选择的识别区内容正好为以下表格中的某一项，您可以选择对应的字段类型来提升识别效果：

| 字段属性           | 适用范围                                                     | 输出结果                                                     |
| :----------------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| 常规               | 适用于全场景识别， 如果该切片属于下列属性中任意一个， 建议使用下面的切片属性来提高准确率 | 识别区所有内容                                               |
| 小写数字金额       | 各类票据中金额数字                                           | 结果只返回至少包含小数点后两位的数值（不满两位则默认补充为##.00）并且会**忽略所有的非数字以外的文字和符号（也会丢弃¥、$）** |
| 日期               | **单个**日期如2018年7月19日                                  | 结果会做归一化处理统一以20180719格式返回                     |
| 长串数字           | 如运单号、票号                                               | 结果只返回长串数字、英文组合                                 |
| 手写汉字           | 手写中文汉字                                                 | 该识别区进行全量识别，但是对手写汉字有较高的准确率           |
| 手写数字           | 手写阿拉伯数字                                               | 该识别区进行全量识别，但是对手写数字有较高的准确率           |
| 数字/英文/符号混合 | 发票密码区                                                   | 识别区所有内容，相比于“常规”识别率更高                       |
| 我的字段类型       | 您可以在【字段类型管理】 中为字段值是有限集合的字段上传词典， 限定输出范围 | 智能匹配后的词典值                                           |

### Q：在框选字段值/框选参照字段的时候不小心多点击增加了一个错误的选择框，应该怎么删除？

A：可以点击右侧的“识别区”/“参照字段”下面对应字段后的X按钮进行删除。

\###Q：有些识别区容易漏字、识别不准怎么办？ A：在对应识别区的“字段类型”中选择“数字/英文/符号混合”可以提高该字段的识别效果。

### Q：保存和发布是什么关系/发布是用来干嘛的？

A：考虑到很多用户会把自己制作的模板使用到业务中去，所以为了尽可能的保证您业务的连续性，我们的模板编辑完后点击保存时只是把您的编辑操作保存到云端，此时，您线上使用的模板还是您之前的模板，直至您对刚才的模板进行发布操作。举例：您在2月1日生成了A模板，并点击发布，此时您调用这个接口时是使用的2月1日的A模板，然后您在3月1日对模板进行了修改，点击了保存，此时您在3月1日的所有编辑操作都已经保存在云端，但是您线上使用的模板仍然是2月1日的A模板，如果您需要使用3月1日的模板去替换2月1日的版本，您需要对3月1日编辑过的A模板进行发布操作，当您点击发布以后，您调用这个接口使用的将会是3月1日编辑的A模板。

### Q：修改历史是什么？/我能回退到之前某个版本吗？

A：点击“修改历史”右侧的小箭头即可展开这个模板的版本记录，版本记录从新到旧列出了您针对这个模板修改的各个版本，您可以点击对应版本右侧的“退回到此刻”来将模板回退到当时那个版本，您框选的取值范围、参照字段都会回退到当时版本的设置，但是您的模板名字不会因此回退。

### Q：制作完模板以后我可以给模板改名字吗？回退到其他版本的时候名字也会回退吗？

A：您可以在模板编辑页面随时修改您的名字，修改完名字以后需要您点击保存，此时会生成一个新的版本；在您回退到过去的某个版本的时候模板名字不会回退。

### Q：分类时是否数据越多越好？

A：不一定，我们建议您每个模板提供30张同模板的训练集，如果您训练图片较丰富可以提供100张以下的图片，每张图片建议不超过500kb，选择的图片要尽量覆盖到使用的场景。同时更多的图片会导致训练时间加长。

### Q：分类的细粒度大概是什么样的？

A：现在分类的细粒度为视觉元素层面有较明显的区分的图片，如身份证、银行卡、户口本这些人类能快速区分开的卡证、票据。但是无法做到需要根据文字内容来进行区分的地步，如：无法区分北京增值税专票和天津增值税专票。

### Q：分类时训练数据不很是很多，能否用同一张照片PS处理成多张不同的图片来进行训练？

A：非常不建议您这么做。这样拟合出来的分类器模型没有很强的泛化能力，分类的准确性会大幅下降。我们还是建议您使用真实场景中需要分类的数据进行训练。 ###Q：为什么训练以后显示准确率100%，但是还会有分类错误的情况呢？ A：界面上显示的分类器的准确率预估是基于少量测试图片得出的结论，只代表在该测试集下的准确率。

### Q：训练完的分类器预测的准确率不高是什么原因？

A：主要是训练数据的问题，包括： 1.某个模板的训练集中混杂了其他类型的图片； 2.训练集数据较少或过于单一没有很好覆盖全实际场景； 3.需要分类的不同模板区别不明显，如北京增值税专票和天津增值税专票 针对上述情况的解决方案如下： -1.检查每个模板的训练集，确保训练集中的图片属于同一个模板； -2.增加训练集中的图片数量，尽量覆盖实际使用时可能会遇到的场景； -3.只是文字内容级别的不同模板建议使用通用文字识别的结果作为参考进行分类。

### Q：如果检查分类训练数据无误后，还是分类不准确，怎么办？

A：请加入QQ群，联系我们，群号570832882。在群里有专门的同学负责回答自定义模板文字识别的问题，到时候具体问题具体分析。

# 错误码

若请求错误，服务器将返回的JSON文本包含以下参数：

- **error_code**：错误码。
- **error_msg**：错误描述信息，帮助理解和解决发生的错误。

例如Access Token失效返回：

```
{
  "error_code": 110,
  "error_msg": "Access token invalid or no longer valid"
}
```

需要重新获取新的Access Token再次请求即可。

| 错误码 | 错误信息                                                     | 描述                                                         |
| :----- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| 1      | Unknown error                                                | 服务器内部错误，请再次请求， 如果持续出现此类错误，请在控制台提交工单联系技术支持团队 |
| 2      | Service temporarily unavailable                              | 服务暂不可用，请再次请求， 如果持续出现此类错误，请在控制台提交工单联系技术支持团队 |
| 3      | Unsupported openapi method                                   | 调用的API不存在，请检查后重新尝试                            |
| 4      | Open api request limit reached                               | 集群超限额                                                   |
| 6      | No permission to access data                                 | 无权限访问该用户数据                                         |
| 14     | IAM Certification failed                                     | IAM鉴权失败，建议用户参照文档自查生成sign的方式是否正确，或换用控制台中ak sk的方式调用 |
| 17     | Open api daily request limit reached                         | 每天请求量超限额                                             |
| 18     | Open api qps request limit reached                           | QPS超限额                                                    |
| 19     | Open api total request limit reached                         | 请求总量超限额                                               |
| 100    | Invalid parameter                                            | 无效的access_token参数，请检查后重新尝试                     |
| 110    | Access token invalid or no longer valid                      | access_token无效                                             |
| 111    | Access token expired                                         | access token过期                                             |
| 282000 | internal error                                               | 服务器内部错误，如果您使用的是高精度接口，报这个错误码的原因可能是您上传的图片中文字过多，识别超时导致的，建议您对图片进行切割后再识别，其他情况请再次请求， 如果持续出现此类错误，请在控制台提交工单联系技术支持团队 |
| 216100 | invalid param                                                | 请求中包含非法参数，请检查后重新尝试                         |
| 216101 | not enough param                                             | 缺少必须的参数，请检查参数是否有遗漏                         |
| 216102 | service not support                                          | 请求了不支持的服务，请检查调用的url                          |
| 216103 | param too long                                               | 请求中某些参数过长，请检查后重新尝试                         |
| 216110 | appid not exist                                              | appid不存在，请重新核对信息是否为后台应用列表中的appid       |
| 216200 | empty image                                                  | 图片为空，请检查后重新尝试                                   |
| 216201 | image format error                                           | 上传的图片格式错误，现阶段我们支持的图片格式为：PNG、JPG、JPEG、BMP，请进行转码或更换图片 |
| 216202 | image size error                                             | 上传的图片大小错误，现阶段我们支持的图片大小为：base64编码后小于4M，分辨率不高于4096*4096，请重新上传图片 |
| 216630 | recognize error                                              | 识别错误，请再次请求，如果持续出现此类错误，请在控制台提交工单联系技术支持团队 |
| 216631 | recognize bank card error                                    | 识别银行卡错误，出现此问题的原因一般为：您上传的图片非银行卡正面，上传了异形卡的图片或上传的银行卡正品图片不完整 |
| 216633 | recognize idcard error                                       | 识别身份证错误，出现此问题的原因一般为：您上传了非身份证图片或您上传的身份证图片不完整 |
| 216634 | detect error                                                 | 检测错误，请再次请求，如果持续出现此类错误，请在控制台提交工单联系技术支持团队 |
| 272000 | structure failed                                             | 未能匹配模板，请检查参照字段的设置是否符合规范，并重新选取或增加更多的参照字段 |
| 272001 | classify failed                                              | 未能成功分类                                                 |
| 282003 | missing parameters: {参数名}                                 | 请求参数缺失                                                 |
| 282004 | invalid parameter, appId doesn't own this template nor not launch | 您指定的模板暂未发布，请先保存发布该模板，再调用             |
| 282005 | batch  processing error                                      | 处理批量任务时发生部分或全部错误，请根据具体错误码排查       |
| 282006 | batch task  limit reached                                    | 批量任务处理数量超出限制，请将任务数量减少到10或10以下       |
| 282102 | target detect error                                          | 未检测到图片中识别目标，请确保图片中包含对应卡证票据         |
| 282103 | target recognize error                                       | 图片目标识别错误，请确保图片中包含对应卡证票据，如果持续出现此类错误，请在控制台提交工单联系技术支持团队 |
| 282110 | urls not exit                                                | URL参数不存在，请核对URL后再次提交                           |
| 282111 | url format illegal                                           | URL格式非法，请检查url格式是否符合相应接口的入参要求         |
| 282112 | url download timeout                                         | url下载超时，请检查url对应的图床/图片无法下载或链路状况不好，您可以重新尝试一下，如果多次尝试后仍不行，建议更换图片地址 |
| 282113 | url response invalid                                         | URL返回无效参数                                              |
| 282114 | url size error                                               | URL长度超过1024字节或为0                                     |
| 282808 | request id: xxxxx not exist                                  | request id xxxxx 不存在                                      |
| 282809 | result type error                                            | 返回结果请求错误（不属于excel或json）                        |
| 282810 | image recognize error                                        | 图像识别错误                                                 |







# 自定义模板文字识别

## 更新记录

| 时间       | 更新说明                                                     |
| :--------- | :----------------------------------------------------------- |
| 2019.02.27 | 新增模板矩形裁切、透视裁切功能，让模板更规范，后期识别率更高；新增支持模板替换功能；模板匹配算法优化，识别准确率提升；同时对产品易用性做了多项提升 |
| 2019.02.21 | 优化了浏览器兼容性，新增对Firefox、Safari、IE11浏览器的支持  |
| 2019.02.11 | 分类器中加入增值税发票、出租车票、火车票、定额发票、行程单、大陆护照、机动车销售发票、车辆合格证、户口本的预置分类，用户直接勾选后即可实现对应票据的自动分类并结构化 |
| 2019.01.25 | 模板列表增加模板图片缩略图，查找模板更方便直观               |
| 2018.12.27 | 在识别区字段类型中新增手写数字识别类型，针对手写数字识别率更高 |
| 2018.10.31 | 新增自定义字段类型功能，在“字段类型管理”中针对返回值是有限集合的字段，用户可以上传词典，对该字段输出值进行限定 |
| 2018.10.10 | 分类模型升级，百度自有测试集上，准确率由95%左右全部提升到100%（视具体情况准确率可能有所波动） |
| 2018.08.30 | 检测模型升级，识别耗时降低20%                                |
| 2018.08.16 | 识别模型升级，漏识别率降低15.15%，准确率提升46.68%           |
| 2018.07.19 | 1.新增识别区属性选择，能针对特定类型的识别区提高识别率； 2.新增返回字段置信度；3.表格识别区新增表格线判断功能，识别准确率提升；4.新增参照字段框选引导 |
| 2018.06.04 | 新增票据自动分类功能                                         |
| 2018.03.16 | 产品易用性提升，优化使用流程                                 |
| 2017.12.25 | 产品上线                                                     |

**注意！请拒绝使用任何第三方插件使用百度OCR服务**

**使用第三方非法插件会导致您的AK SK泄露，导致别人可以盗用您的账户进行任意消费！ 切勿使用任何第三方插件！ 因此导致的账号泄露、恶意消费，请用户自行承担责任。如果您已经使用了相关的插件，建议您立即删除对应appid、更换账户密码、更新所有appid的token，或更换账号！**

## 产品介绍

自定义模板文字识别是一款可以针对固定版面票据、卡证实现**自动分类并实现字段名和字段值对应提取的OCR产品**。

## 名词解释（**非常重要！**）

- 【参照字段】：图片中**位置和内容都固定不变的文字**后期上传的图片会以此为依据进行扭正，参照字段的选取会影响图片的识别率，建议选取8个以上的参照字段，单个参照字段内的文字不可以换行。
- 【识别区】：需要识别的值可能出现的范围。
- 【 templateSign】：模板ID，用于指定后期上传的图片用哪个模板来进行识别。
- 【classifierId】：分类器ID，用于指定使用具体某个分类器，传入本参数后不用再传templateSign参数。

## 模板制作步骤（预计阅读时间2分钟）

**总体步骤：** 上传模板图片 框选参照字段 框选识别区 保存&试一试 发布模板

### 上传模板图片

点击进入产品页面：[ ai.baidu.com/iocr ](http://ai.baidu.com/iocr)，点击“创建模板”后**首先对模板进行命名**，点击编辑区域上传一张清晰、摆放端正的模板图片。

### 框选参照字段

填写完模板名称之后，点击【框选参照字段】标签后使用鼠标框选出模板图片和后期识别图片上内容和位置都不会变化的文字段。 下面是一个参照字段框选的示例，**橘色**矩形框选的为参照字段： ![img](https://ai.bdstatic.com/file/AD22AA92A0C64F9B97AF48B8D215AC0B)

### 框选识别区

点击“框选识别区”标签后鼠标默认启用识别区框选工具。例如单据中常见的日期。此时需要您把日期值所在的区域使用识别区框选工具框选出来，然后在右侧填写这个字段对应的字段名。 如图：**蓝色**矩形框选的为固定识别区 ![img](https://ai.bdstatic.com/file/7DD2D8FADA1B4B9184A03626A39F52BA)

### 保存之后试一试

点击“保存”之后，选择试一试进行在线测试，如果对效果满意即可发布上线。如果发布之后对想回滚到之前的版本，可以在“修改历史”里选择对应版本进行回滚。 ![img](https://ai.bdstatic.com/file/C4CEC8372B9944A29CEE7697699D8AB7)

### 发布模板

如果觉得识别效果已经符合要求，可以点击下方的发布按钮进行发布操作；如果觉得效果不好，可以继续编辑/调整模板，然后保存后再测试。**注意：只有发布后的模板才能在线上进行接口调用和后期的分类操作。如果没有发布，那么仅仅是生成了一个新的版本，此时对模板的任何修改都不会影响线上调用。**

![img](https://ai.bdstatic.com/file/DBB15A864CE84C43A1AC770491145B71)

发布页面中提示的模板ID也可以在自定义模板管理页查询到，也就是管理页的templateSign ![img](https://ai.bdstatic.com/file/F17AD7E43AB2454BA8810D74664F9312)

线上接口会用到模板ID【templateSign】。接口文档参见[此处](http://ai.baidu.com/docs#/OCR-API/8b83b775)，当然您可能还有很多其他疑问，建议您可以参考[自定义模板文字识别Q&A](http://ai.baidu.com/docs#/OCR-API/0d7080dd)，或者在[论坛](http://ai.baidu.com/forum/topic/list/164)发布您的问题，甚至您可以直接加入我们QQ群（群号：570832882），直接找到我们的产品经理、研发同学和运营同学来咨询问题。

## 高级功能

### “带表格区域”模板的制作

**功能：对票据中的表格按行列返回每个单元格中的内容。** 通过上面的阅读您已经可以制作相对简单的模板，接下来演示一个带有表格识别区的复杂模板：

表格识别区可以针对图像中的表格按行列返回单元格中的值。点击工具栏从左往右第二个小图标![img](https://ai.bdstatic.com/file/950EAA81CEBD4BF4931F003D767ED16A)，弹出小框，输入表格的列数。例如本例中的表格共有三列，则输入3，点击插入 ![img](https://ai.bdstatic.com/file/18D18C08D4884A3CB3E5173F7C39117D)

将左上角蓝色的表格识别区拖到模板图片上表格区域，通过调整顶点、分割线的小白点对识别区进行调整，直至每一列识别区覆盖每一列数据。同时请注意表格识别区覆盖的是表格内容！「不包括表头」 ![img](https://ai.bdstatic.com/file/7C67361D0BDD4822BDF6F144A8D2736A)

### 模板自动分类功能

**功能：让系统匹配票据的模板，无需在调用前指定模板ID，替代人工对票据进行分类** 很多客户使用自定义模板文字识别定制了大量模板，但是需要人工先对各类票据进行分类，再选择对应的模板进行结构化识别。为了节省用户票据分类的成本，我们加入了模板自动分类功能，客户在“分类器管理”标签中可以针对所有的自定义模板和百度平台已有的系统模板（如身份证、银行卡、驾驶证等）创建分类器，实现模板的自动分类。

#### 创建分类器

点击“分类器管理”标签进入管理页面，点击“创建分类器”后输入分类器名称和该分类器的应用场景/功能描述后点击确定进入编辑页面。

![img](https://ai.bdstatic.com/file/0C3E96555DA44D089277D61AA1F00962)

#### 选择参与分类的模板

需要分类的模板分为“我的模板”和“系统模板”，我的模板指客户在自定义模板文字识别中创建的模板，系统模板指百度官网预置的模板（包含了：身份证正面、身份证反面、银行卡、驾驶证、行驶证、车牌、营业执照、护照、增值税发票）。客户可以根据业务需要添加模板参与分类。

![img](https://ai.bdstatic.com/file/6BA9AE73D1B3455688121B8DE7EAF503)

#### 上传对应模板的训练集

参与分类的如果是百度预置的模板您无需上传训练集，如果参与分类的是您自己制作的模板则需要您准备30到100张同模板的票据打包成ZIP包以后点击“编辑训练集”上传该训练集。当所有的自定义模板都已经上传了符合要求（30到100张、同模板）的训练集后点击“开始训练”。您可以在分类器管理页面查看预计完成的时间并通过刷新查看当前状态。（上传的训练集不会影响模板识别的结果，但是会通过影响分类准确率影响最终的识别结果） **请保证后期分类的图片和训练集中的图片类型（都是扫描件/都是拍照件）、照片质量、拍摄情况尽可能一致，训练集图片越接近后期使用图片，分类效果越好！**

![img](https://ai.bdstatic.com/file/DAC1FD6444E6444AAECAC24AE66EBCA0)

#### 训练完成后进行效果测试

当您的分类器训练完成后您可以在分类器管理页面点击“测试”上传图片进行分类测试，如果测试结果没有问题点击“发布”即可通过API调用该接口，参数classifierId指定某个已发布的分类器，即可实现该分类器中任意模板的自动识别。如果对分类结果不满意，建议检查训练集数据中是否包含了较多噪声数据，或尝试增加训练集内的图片数量。

### 自定义字段类型

**功能：针对某些字段的输出值是有限集合的情况，通过用户上传字段词典，让系统智能纠正匹配，提高准确率**，如婚姻状况、全国省市、教育情况。

#### 创建字段类型

在顶部【字段类型管理】中点击【创建字段类型】，输入名称后点击【上传词典】上传txt词典文档，词典中不同字段值各占一行。 ![img](https://ai.bdstatic.com/file/74E347CAEB124899BD81CAF20EF65C22)*如果您的字段为：中国地市县名称、省份名称、中国民族，您可以点击【添加预置类型】，百度已经为您准备好对应的词典文件，直接点击添加后，即可在模板制作时选用。百度也将不断丰富预置词典类型，方便您使用。*

#### 制作模板时选用

在制作模板时，当您框选完识别区以后，可以在对应识别区的“字段类型”中找到“我的字段类型”并选择对应类型。这样在识别后我们会根据识别到的结果智能纠正为词典中最接近的词作为结果输出。 ![img](https://ai.bdstatic.com/file/9FDF55536688445CB38DD28E148AA15F)

## 请求说明

**请求示例**

HTTP 方法：`POST`

请求URL： `https://aip.baidubce.com/rest/2.0/solution/v1/iocr/recognise`

URL参数：

| 参数         | 值                                                           |
| :----------- | :----------------------------------------------------------- |
| access_token | 通过API Key和Secret Key获取的access_token,参考“[Access Token获取](http://ai.baidu.com/docs#/Auth)” |

Header如下：

| 参数         | 值                                |
| :----------- | :-------------------------------- |
| Content-Type | application/x-www-form-urlencoded |

Body中放置请求参数，参数详情如下：

**请求参数**

| 参数         | 是否必选 | 类型   | 可选值范围 | 说明                                                         |
| :----------- | :------- | :----- | :--------- | :----------------------------------------------------------- |
| image        | true     | string | -          | 图像数据，base64编码后进行urlencode，要求base64编码和urlencode后大小不超过4M，最短边至少15px，最长边最大4096px,支持jpg/png/bmp格式 |
| templateSign | false    | string | -          | 您在自定义文字识别平台制作的模板的ID，举例：Nsdax2424asaAS791823112 |
| classifierId | false    | int    | -          | 分类器Id。这个参数和templateSign至少存在一个，优先使用templateSign。存在templateSign时，表示使用指定模板；如果没有templateSign而有classifierId，表示使用分类器去判断使用哪个模板 |

**请求代码示例**

请参考通用文字识别（含位置信息版）的代码内容，并更换请求地址。

## 返回说明

**返回参数**

| 字段              | 类型       | 说明                                                         |
| :---------------- | :--------- | :----------------------------------------------------------- |
| error_code        | int        | 0代表成功，如果有错误码返回可以参考下方错误码列表排查问题    |
| error_msg         | string     | 如果error_code具体的失败信息，可以参考下方错误码列表排查问题 |
| data              | jsonObject | 识别返回的结果                                               |
| data_isStructured | string     | 表示是否结构话成功，true为成功，false为失败；成功时候，返回结构化的识别结果；失败时，如果能识别，返回类似通用文字识别的结果，如果不能识别，返回空 |
| data_logId        | string     | 调用的日志id                                                 |
| data_templateSign | string     | 使用的tenplateSign                                           |
| data_scores       | float      | 分类器的得分，直接选择时为1.0F                               |
| data_ret          | jsonArray  | 识别出来的字段数组，每一个单元里包含以下几个元素             |

| 字段        | 类型       | 说明                                                         |
| :---------- | :--------- | :----------------------------------------------------------- |
| word_name   | string     | isStructured 为 true 时存在，表示字段的名字；如果 isStructured 为 false 时，不存在 |
| word        | string     | 识别的字符串或单字                                           |
| location    | jsonObject | 字段在原图上对应的矩形框                                     |
| probability | jsonObject | 字段的置信度，包括最大，最小和方差                           |

**返回示例**

```
{
    "data": {
        "ret": [
            {
                "probability": {
                    "average": 0.998482,
                    "min": 0.9957,
                    "variance": 0.000002
                },
                "location": {
                    "height": 88,
                    "left": 1202,
                    "top": 437,
                    "width": 267
                },
                "word_name": "终点站",
                "word": "天津"
            },
            {
                "probability": {
                    "average": 0.994316,
                    "min": 0.629856,
                    "variance": 0.000281
                },
                "location": {
                    "height": 82,
                    "left": 359,
                    "top": 593,
                    "width": 660
                },
                "word_name": "发车时间",
                "word": "201706092107"
            },
            {
                "probability": {
                    "average": 0.998482,
                    "min": 0.9957,
                    "variance": 0.000002
                },
                "location": {
                    "height": 90,
                    "left": 432,
                    "top": 432,
                    "width": 261
                },
                "word_name": "始发站",
                "word": "北京南"
            },
            {
                "probability": {
                    "average": 0.952242,
                    "min": 0.77037,
                    "variance": 0.008272
                },
                "location": {
                    "height": 79,
                    "left": 879,
                    "top": 464,
                    "width": 252
                },
                "word_name": "车次",
                "word": "C2097"
            },
            {
                "probability": {
                    "average": 0.980604,
                    "min": 0.932502,
                    "variance": 0.000352
                },
                "location": {
                    "height": 74,
                    "left": 982,
                    "top": 877,
                    "width": 206
                },
                "word_name": "乘车人",
                "word": "向宇波"
            },
            {
                "probability": {
                    "average": 0.994155,
                    "min": 0.903164,
                    "variance": 0.000396
                },
                "location": {
                    "height": 65,
                    "left": 1171,
                    "top": 593,
                    "width": 248
                },
                "word_name": "座位号",
                "word": "07车无座"
            },
            {
                "probability": {
                    "average": 0.993914,
                    "min": 1.2888,
                    "variance": 0.000009
                },
                "location": {
                    "height": 67,
                    "left": 429,
                    "top": 674,
                    "width": 193
                },
                "word_name": "价格",
                "word": "54.50"
            }
        ],
        "templateSign": "1c65a67f151df56ba4e29c4dddace5ee",
        "scores": 1,
        "isStructured": true,
        "logId": "153206517722624"
    },
    "error_code": 0,
    "error_msg": ""
}
```

## Q&A

### Q：什么是自定义模板文字识别？什么场景下我该使用这个产品？

A：自定义模板文字识别是一款您可以针对各种票据、卡证实现字段名和字段值对应提取的OCR产品；举例：当您需要识别某一种证件（比如房产证），但是百度官方还没有针对这种类型的证件推出具体的模板识别接口，而使用通用文字识别无法实现字段名和字段值对应化的提取，这种情况下您可以使用自定义模板文字识别产品，实现结构化的数据提取。

\###Q：产品实现的原理是什么？ A：基本原理：如果您要识别特定的一类具有固定格式的文档，首先上传一张票据、卡证的图片作为模板（*用于制作模板的图片要求摆放端正、平整，拍摄时避免过曝，阴影等不良情况*），然后在模板上框选一些固定的字段作为【参照字段】。后续调用识别接口时，会将新上传的图片以【参照字段】为锚点扭正到和模板图片一致。最后框选需要识别的区域作为【识别区】，框选后在右侧给该识别区命名，点击保存，这便完成了一个模板的制作。

### Q：自定义模板文字识别支持哪些浏览器？

A：推荐使用Chrome（版本58及以上），暂时不支持Safari。

### Q：上传的图片有大小限制吗？上传什么样的图片效果会比较好？

A：上传用于模板制作的图片，最大：小于等于4M，且分辨率小于等于4096像素乘4096像素，最小：大于等于15像素乘15像素且大于等于1KB，后期上传识别的图片最大：大小不超过4M，且分辨率小于等于4096像素乘4096像素，最小：大于等于15像素乘15像素且大于等于1KB。 为了保证更好的效果，建议模板图片：

1. 模板图片清晰平整，摆放端正
2. 模板图片格式以 **.jpg 为最佳**，png、bmp格式识别效果欠佳
3. 模板图片尽量突出需要识别的部分，请先手动剪裁掉不需要的部分，提高识别率
4. 模板图片大小建议为：转为base64编码后不超过1M，不宜过大或过小
5. 模板图片中，大多数汉字的大小保持在 32*32像素 左右，不符合的整体缩放调整

### Q：我该怎么使用自定义模板文字识别？

A：首先您需要制作您的模板，在Chrome中打开[ ai.baidu.com/iocr ](http://ai.baidu.com/iocr)进入模板管理界面，此时需要您首先登陆百度账号（和您的百度网盘、百度贴吧、百度文库等百度系产品通用），进入后点击创建模板，进入模板编辑界面，首先您需要给您的模板进行命名，然后点击左侧编辑框中的按钮上传模板图片（模板图片要求端正、清晰），然后框选字段值，框选后在右侧对应位置填写字段名，全部框选完后点击右侧“参照字段”标签，在图中框选参照字段（要求参见下一条Q&A），完成后点击保存，则您已经制作完您的模板，此时您可以点击“发布”按钮，把次模板发布到线上环境（保存只是保存修改记录，不会实时生效，发布后您的所有操作才会生效），然后您可以参照文档中的“请求说明”上传图片，并制定templateSign（模板标识），来指定上传的图片使用该模板。

### Q：模板制作过程中怎么进行图片的缩放？

A：可以使用工具栏中的放大缩小工具，或使用鼠标滚轮，或使用触摸板（如果您的设备具有触摸板）进行双指缩放。

### Q：什么是参照字段，选取时有什么注意点？

A：为了将您后期上传的图片矫正成和您模板图片以在同样的位置区间寻找关键值，您需要在制作模板的时候在“参照字段”标签页下框选至少4个（推荐框选8个以上）的参照字段，参照字段的选取需要点击编辑模板界面右上角工具栏中的“设置参照字段”工具，然后在图上拖动选取固定文字。 框选时有一些注意点：

- 同一参照字段的文字**必须**在同一行；
- 参照字段**必须**是模板图片和后期上传的图片中**共同拥有并且内容和位置都不变**的文字；
- 参照字段尽量**四散**在图片的边缘，尤其是四角；
- 参照字段尽量在模板图片上**唯一**，在图片中多次出现的文字段效果较差；
- 参照字段尽量**多**，至少4个，强烈推荐标注**8个**以上的参照字段，参照字段越多越分散识别效果越好；
- *如果后期测试时显示“未匹配到模板”则是因为参照字段选取和识别的问题，请按照上述要求检查核对并重新选取参照字段。*

\###Q：框选参照字段的时候发现识别错了，可以纠正吗？ A：可以的，您可以点击参照字段后面的编辑按钮，对参照字段进行人工纠正，输入正确的文字内容。修改正确参照字段的内容有助于提升后期模板匹配效果。纠正的规则是： -不能添加/删除超过两个字符，并且如果您框选的参照字段范围比较小，无法放下新增的两个字符，则您需要适当扩大该参照字段的框选范围 -跨行的参照字段无法编辑，请先改为框选单行文字 -不能将参照字段内容删除为空

\###Q：框选识别区时有什么办法可以提高准确率？ A：如果您选择的识别区内容正好为以下表格中的某一项，您可以选择对应的字段类型来提升识别效果：

| 字段属性           | 适用范围                                                     | 输出结果                                                     |
| :----------------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| 常规               | 适用于全场景识别， 如果该切片属于下列属性中任意一个， 建议使用下面的切片属性来提高准确率 | 识别区所有内容                                               |
| 小写数字金额       | 各类票据中金额数字                                           | 结果只返回至少包含小数点后两位的数值（不满两位则默认补充为##.00）并且会**忽略所有的非数字以外的文字和符号（也会丢弃¥、$）** |
| 日期               | **单个**日期如2018年7月19日                                  | 结果会做归一化处理统一以20180719格式返回                     |
| 长串数字           | 如运单号、票号                                               | 结果只返回长串数字、英文组合                                 |
| 手写汉字           | 手写中文汉字                                                 | 该识别区进行全量识别，但是对手写汉字有较高的准确率           |
| 手写数字           | 手写阿拉伯数字                                               | 该识别区进行全量识别，但是对手写数字有较高的准确率           |
| 数字/英文/符号混合 | 发票密码区                                                   | 识别区所有内容，相比于“常规”识别率更高                       |
| 我的字段类型       | 您可以在【字段类型管理】 中为字段值是有限集合的字段上传词典， 限定输出范围 | 智能匹配后的词典值                                           |

### Q：在框选字段值/框选参照字段的时候不小心多点击增加了一个错误的选择框，应该怎么删除？

A：可以点击右侧的“识别区”/“参照字段”下面对应字段后的X按钮进行删除。

\###Q：有些识别区容易漏字、识别不准怎么办？ A：在对应识别区的“字段类型”中选择“数字/英文/符号混合”可以提高该字段的识别效果。

### Q：保存和发布是什么关系/发布是用来干嘛的？

A：考虑到很多用户会把自己制作的模板使用到业务中去，所以为了尽可能的保证您业务的连续性，我们的模板编辑完后点击保存时只是把您的编辑操作保存到云端，此时，您线上使用的模板还是您之前的模板，直至您对刚才的模板进行发布操作。举例：您在2月1日生成了A模板，并点击发布，此时您调用这个接口时是使用的2月1日的A模板，然后您在3月1日对模板进行了修改，点击了保存，此时您在3月1日的所有编辑操作都已经保存在云端，但是您线上使用的模板仍然是2月1日的A模板，如果您需要使用3月1日的模板去替换2月1日的版本，您需要对3月1日编辑过的A模板进行发布操作，当您点击发布以后，您调用这个接口使用的将会是3月1日编辑的A模板。

### Q：修改历史是什么？/我能回退到之前某个版本吗？

A：点击“修改历史”右侧的小箭头即可展开这个模板的版本记录，版本记录从新到旧列出了您针对这个模板修改的各个版本，您可以点击对应版本右侧的“退回到此刻”来将模板回退到当时那个版本，您框选的取值范围、参照字段都会回退到当时版本的设置，但是您的模板名字不会因此回退。

### Q：制作完模板以后我可以给模板改名字吗？回退到其他版本的时候名字也会回退吗？

A：您可以在模板编辑页面随时修改您的名字，修改完名字以后需要您点击保存，此时会生成一个新的版本；在您回退到过去的某个版本的时候模板名字不会回退。

### Q：分类时是否数据越多越好？

A：不一定，我们建议您每个模板提供30张同模板的训练集，如果您训练图片较丰富可以提供100张以下的图片，每张图片建议不超过500kb，选择的图片要尽量覆盖到使用的场景。同时更多的图片会导致训练时间加长。

### Q：分类的细粒度大概是什么样的？

A：现在分类的细粒度为视觉元素层面有较明显的区分的图片，如身份证、银行卡、户口本这些人类能快速区分开的卡证、票据。但是无法做到需要根据文字内容来进行区分的地步，如：无法区分北京增值税专票和天津增值税专票。

### Q：分类时训练数据不很是很多，能否用同一张照片PS处理成多张不同的图片来进行训练？

A：非常不建议您这么做。这样拟合出来的分类器模型没有很强的泛化能力，分类的准确性会大幅下降。我们还是建议您使用真实场景中需要分类的数据进行训练。 ###Q：为什么训练以后显示准确率100%，但是还会有分类错误的情况呢？ A：界面上显示的分类器的准确率预估是基于少量测试图片得出的结论，只代表在该测试集下的准确率。

### Q：训练完的分类器预测的准确率不高是什么原因？

A：主要是训练数据的问题，包括： 1.某个模板的训练集中混杂了其他类型的图片； 2.训练集数据较少或过于单一没有很好覆盖全实际场景； 3.需要分类的不同模板区别不明显，如北京增值税专票和天津增值税专票 针对上述情况的解决方案如下： -1.检查每个模板的训练集，确保训练集中的图片属于同一个模板； -2.增加训练集中的图片数量，尽量覆盖实际使用时可能会遇到的场景； -3.只是文字内容级别的不同模板建议使用通用文字识别的结果作为参考进行分类。

### Q：如果检查分类训练数据无误后，还是分类不准确，怎么办？

A：请加入QQ群，联系我们，群号570832882。在群里有专门的同学负责回答自定义模板文字识别的问题，到时候具体问题具体分析。





