
# 2015级C++第12周实践项目 运算符重载（一） - 迂者-贺利坚的专栏 - CSDN博客

2016年05月10日 15:20:25[迂者-贺利坚](https://me.csdn.net/sxhelijian)阅读数：3116


【项目1-实现复数类中的运算符重载】[参考解答](http://blog.csdn.net/sxhelijian/article/details/45172591)
（1）请用类的成员函数，定义复数类重载运算符+、-、*、/，使之能用于复数的加减乘除
```python
class
```
```python
Complex 
{
```
```python
public
```
```python
:
    Complex(){real=
```
```python
0
```
```python
;imag=
```
```python
0
```
```python
;}
    Complex(
```
```python
double
```
```python
r,
```
```python
double
```
```python
i){real=r; imag=i;}
    Complex
```
```python
operator
```
```python
+(
```
```python
const
```
```python
Complex &c2);
    Complex
```
```python
operator
```
```python
-(
```
```python
const
```
```python
Complex &c2);
    Complex
```
```python
operator
```
```python
*(
```
```python
const
```
```python
Complex &c2);
    Complex
```
```python
operator
```
```python
/(
```
```python
const
```
```python
Complex &c2);
```
```python
void
```
```python
display();
```
```python
private
```
```python
:
```
```python
double
```
```python
real;
```
```python
double
```
```python
imag;
};
```
```python
//下面定义成员函数
```
```python
//下面定义用于测试的main()函数
```
```python
int
```
```python
main()
{
    Complex c1(
```
```python
3
```
```python
,
```
```python
4
```
```python
),c2(
```
```python
5
```
```python
,-
```
```python
10
```
```python
),c3;
```
```python
cout
```
```python
<<
```
```python
"c1="
```
```python
;
    c1.display();
```
```python
cout
```
```python
<<
```
```python
"c2="
```
```python
;
    c2.display();
    c3=c1+c2;
```
```python
cout
```
```python
<<
```
```python
"c1+c2="
```
```python
;
    c3.display();
    c3=c1-c2;
```
```python
cout
```
```python
<<
```
```python
"c1-c2="
```
```python
;
    c3.display();
    c3=c1*c2;
```
```python
cout
```
```python
<<
```
```python
"c1*c2="
```
```python
;
    c3.display();
    c3=c1/c2;
```
```python
cout
```
```python
<<
```
```python
"c1/c2="
```
```python
;
    c3.display();
```
```python
return
```
```python
0
```
```python
;
}
```
（2）请用类的友元函数，而不是成员函数，再次完成上面提及的运算符的重载；
（3）定义一个定义完整的类（是可以当作独立的产品发布，成为众多项目中的“基础工程”）。这样的类在(2)的基础上，扩展+、-、*、/运算符的功能，使之能与double型数据进行运算。设Complex c; double d; c+d和d+c的结果为“将d视为实部为d的复数同c相加”，其他-、*、/运算符类似。
【项目2-Time类中的运算符重载】[参考解答](http://blog.csdn.net/sxhelijian/article/details/51363458)
实现Time类中的运算符重载。
```python
class
```
```python
CTime
{
```
```python
private
```
```python
:
```
```python
unsigned
```
```python
short
```
```python
int
```
```python
hour;
```
```python
// 时
```
```python
unsigned
```
```python
short
```
```python
int
```
```python
minute;
```
```python
// 分
```
```python
unsigned
```
```python
short
```
```python
int
```
```python
second;
```
```python
// 秒
```
```python
public
```
```python
:
    CTime(
```
```python
int
```
```python
h=
```
```python
0
```
```python
,
```
```python
int
```
```python
m=
```
```python
0
```
```python
,
```
```python
int
```
```python
s=
```
```python
0
```
```python
);
```
```python
void
```
```python
setTime(
```
```python
int
```
```python
h,
```
```python
int
```
```python
m,
```
```python
int
```
```python
s);
```
```python
void
```
```python
display();
```
```python
//二目的比较运算符重载
```
```python
bool
```
```python
operator
```
```python
> (CTime &t);
```
```python
bool
```
```python
operator
```
```python
< (CTime &t);
```
```python
bool
```
```python
operator
```
```python
>= (CTime &t);
```
```python
bool
```
```python
operator
```
```python
<= (CTime &t);
```
```python
bool
```
```python
operator
```
```python
== (CTime &t);
```
```python
bool
```
```python
operator
```
```python
!= (CTime &t);
```
```python
//二目的加减运算符的重载
```
```python
//返回t规定的时、分、秒后的时间
```
```python
//例t1(8,20,25),t2(11,20,50)，t1+t2为19:41:15
```
```python
CTime
```
```python
operator
```
```python
+(CTime &t);
    CTime
```
```python
operator
```
```python
-(CTime &t);
```
```python
//对照+理解
```
```python
CTime
```
```python
operator
```
```python
+(
```
```python
int
```
```python
s);
```
```python
//返回s秒后的时间
```
```python
CTime
```
```python
operator
```
```python
-(
```
```python
int
```
```python
s);
```
```python
//返回s秒前的时间
```
```python
//二目赋值运算符的重载
```
```python
CTime &
```
```python
operator
```
```python
+=(CTime &c);
    CTime &
```
```python
operator
```
```python
-=(CTime &c);
    CTime &
```
```python
operator
```
```python
+=(
```
```python
int
```
```python
s);
```
```python
//返回s秒后的时间
```
```python
CTime &
```
```python
operator
```
```python
-=(
```
```python
int
```
```python
s);
```
```python
//返回s秒前的时间
```
```python
//一目运算符的重载
```
```python
CTime
```
```python
operator
```
```python
++(
```
```python
int
```
```python
);
```
```python
//后置++，下一秒
```
```python
CTime &
```
```python
operator
```
```python
++();
```
```python
//前置++，下一秒
```
```python
CTime
```
```python
operator
```
```python
--(
```
```python
int
```
```python
);
```
```python
//后置--，前一秒
```
```python
CTime &
```
```python
operator
```
```python
--();
```
```python
//前置--，前一秒
```
```python
};
```
提示1：并不是所有比较运算重载函数都很复杂
```python
//比较运算返回的是比较结果，是bool型的true或false
```
```python
//可以直接使用已经重载了的运算实现新运算，例如果已经实现了 > ，则实现 <= 就可以很方便了……
```
```python
bool
```
```python
CTime::
```
```python
operator
```
```python
<= (CTime &t)
```
```python
// 判断时间t1<=t2
```
```python
{
```
```python
if
```
```python
(*
```
```python
this
```
```python
> t)
```
```python
return
```
```python
false
```
```python
;
```
```python
return
```
```python
true
```
```python
;
}
```
甚至可以如下面的代码般简练：
```python
bool
```
```python
CTime::
```
```python
operator
```
```python
<= (CTime &t){
```
```python
return
```
```python
!(*
```
```python
this
```
```python
> t)}
```
提示2：并不是所有复合赋值运算重载函数都需要很复杂
```python
//可以直接使用已经重载了的加减运算实现
```
```python
//这种赋值, 例如 t1+=20，直接改变当前对象的值，所以在运算完成后，将*this作为返回值
```
```python
CTime &CTime::
```
```python
operator
```
```python
+=(CTime &c)
{
    *
```
```python
this
```
```python
=*
```
```python
this
```
```python
+c;
```
```python
return
```
```python
*
```
```python
this
```
```python
;
}
```
提示3：请自行编制用于测试的main()函数，有些结果不必依赖display()函数，提倡用单步执行查看结果
【项目3-数组类运算的实现】[参考解答](http://blog.csdn.net/sxhelijian/article/details/51363352)
设计数组类Array，为了实现测试函数中要求的功能，请补足相关的函数（构造、析构函数）和运算符重载的函数。请注意引用的用法。
实现策略提示：可以将测试函数中的语句加上注释，取消一句的注释，增加相应的函数，以渐增地实现所有的功能，避免全盘考虑带来的困难。
```python
class
```
```python
Array
{
```
```python
private
```
```python
:
```
```python
int
```
```python
*
```
```python
list
```
```python
;
```
```python
//用于存放动态分配的数组内存首地址
```
```python
int
```
```python
size;
```
```python
//数组大小（元素个数）
```
```python
public
```
```python
:
```
```python
//成员函数声明
```
```python
};
```
```python
//要求测试函数能够运行出正确、合理的结果：
```
```python
int
```
```python
main()
{
```
```python
int
```
```python
a[
```
```python
8
```
```python
]= {
```
```python
1
```
```python
,
```
```python
2
```
```python
,
```
```python
3
```
```python
,
```
```python
4
```
```python
,
```
```python
5
```
```python
,
```
```python
6
```
```python
,
```
```python
7
```
```python
,
```
```python
8
```
```python
};
```
```python
int
```
```python
b[
```
```python
8
```
```python
]= {
```
```python
10
```
```python
,
```
```python
20
```
```python
,
```
```python
30
```
```python
,
```
```python
40
```
```python
,
```
```python
50
```
```python
,
```
```python
60
```
```python
,
```
```python
70
```
```python
,
```
```python
80
```
```python
};
    Array array1(a,
```
```python
8
```
```python
),array3,array4;
```
```python
const
```
```python
Array array2(b,
```
```python
8
```
```python
);
    array4=array3=array1+array2;
    array3.show();
    array4.resize(
```
```python
20
```
```python
);
    array4[
```
```python
8
```
```python
]=
```
```python
99
```
```python
;
```
```python
cout
```
```python
<<array4[
```
```python
8
```
```python
]<<endl;
```
```python
cout
```
```python
<<array2[
```
```python
3
```
```python
]<<endl;
```
```python
return
```
```python
0
```
```python
;
}
```
【项目4-String类的构造】[参考解答](http://blog.csdn.net/sxhelijian/article/details/45172585)
写一个能处理字符串的类，其数据成员如下所示：
```python
class String  
{  
public:
```
```python
...
```
```python
//需要的成员函数（若需要的话，声明友元函数）
private:  
    char *p;   //指向存储的字符串 
    int len;   //记录字符串的长度  
};
```
请构造String类的加、减运算。其中，s1 + s2将两个字符串的连接起来；s1 - s2是将s1的尾部空格和s2的前导空格去除后的连接。
提示：有指针成员，设计时要注意。这个，你懂的。

