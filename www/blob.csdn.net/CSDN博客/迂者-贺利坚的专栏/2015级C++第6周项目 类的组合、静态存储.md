
# 2015级C++第6周项目 类的组合、静态存储 - 迂者-贺利坚的专栏 - CSDN博客

2016年03月31日 14:12:09[迂者-贺利坚](https://me.csdn.net/sxhelijian)阅读数：1313个人分类：[C++																](https://blog.csdn.net/sxhelijian/article/category/908261)



### 一、“书面”实践项目
【项目1】
“IT妹子类”的设计，作UML表达。见“云班课”中作业，每人一份，须签名。
【项目2】
阅读程序，对照运行结果，领会变量的变化过程，介绍三种方法，让你读得更明白：（1）画出变量占用的内存及值的变化；（2）画出变量占用的内存及值的变化；（3）画出变量占用的内存及值的变化。
（程序1）
```python
#include <iostream>
```
```python
using
```
```python
namespace
```
```python
std
```
```python
;
```
```python
int
```
```python
f(
```
```python
int
```
```python
n);
```
```python
int
```
```python
main()  
{
```
```python
cout
```
```python
<<f(
```
```python
5
```
```python
)<<
```
```python
"  "
```
```python
;
```
```python
cout
```
```python
<<f(
```
```python
8
```
```python
)<<endl;
```
```python
return
```
```python
0
```
```python
;  
}
```
```python
int
```
```python
f(
```
```python
int
```
```python
n)  
{
```
```python
static
```
```python
int
```
```python
a=
```
```python
2
```
```python
;
```
```python
int
```
```python
b=
```
```python
0
```
```python
;  
    a+=n;  
    b+=a;
```
```python
return
```
```python
b;  
}
```
（程序2）
```python
#include <iostream>
```
```python
using
```
```python
namespace
```
```python
std
```
```python
;
```
```python
int
```
```python
func (
```
```python
int
```
```python
a,
```
```python
int
```
```python
b)  
{
```
```python
static
```
```python
int
```
```python
m=
```
```python
0
```
```python
, i=
```
```python
2
```
```python
;  
    i+=m+
```
```python
1
```
```python
;  
    m=i+a+b;
```
```python
return
```
```python
m;  
}
```
```python
int
```
```python
main() 
{
```
```python
int
```
```python
k=
```
```python
4
```
```python
, m=
```
```python
1
```
```python
, p;  
    p=func(k, m);
```
```python
cout
```
```python
<<p<<endl;  
    p=func(k, m);
```
```python
cout
```
```python
<<p<<endl;
```
```python
return
```
```python
0
```
```python
;  
}
```
（程序3）
```python
#include <iostream>
```
```python
using
```
```python
namespace
```
```python
std
```
```python
;
```
```python
int
```
```python
a=
```
```python
3
```
```python
, b=
```
```python
5
```
```python
;
```
```python
int
```
```python
max(
```
```python
int
```
```python
a,
```
```python
int
```
```python
b)  {
```
```python
int
```
```python
c;  
    c=a>b? a:b;
```
```python
return
```
```python
c;  
}
```
```python
int
```
```python
main()  {
```
```python
int
```
```python
a=
```
```python
8
```
```python
;
```
```python
//若无这一句，又将如何？
```
```python
cout
```
```python
<<max(a,b)<<endl;
```
```python
return
```
```python
0
```
```python
;  
}
```
### 二、上机实践项目
【项目1-分数类的雏形】[参考解答](http://blog.csdn.net/sxhelijian/article/details/44626261)
C++中提供了多种基本的数据类型。实际上，这些远不能满足我们的需求。例如，对于复数、分数等数据，我们可以自定义类支持这些数据类型。
本任务将设计一个简单的分数类，完成对分数的几个运算。一则巩固基于对象编程的方法，二则也为运算符重载等积累些感性认识。
分数类的声明为：
```python
class CFraction
{
```
```python
private
```
```python
:
```
```python
int
```
```python
nume;
```
```python
// 分子
```
```python
int
```
```python
deno;
```
```python
// 分母
```
```python
public
```
```python
:
```
```python
CFraction
```
```python
(
```
```python
int
```
```python
nu=
```
```python
0
```
```python
,
```
```python
int
```
```python
de=
```
```python
1
```
```python
);
```
```python
//构造函数，初始化用
```
```python
void
```
```python
set
```
```python
(
```
```python
int
```
```python
nu=
```
```python
0
```
```python
,
```
```python
int
```
```python
de=
```
```python
1
```
```python
);
```
```python
//置值，改变值时用
```
```python
void
```
```python
input();
```
```python
//按照"nu/de"的格式，如"5/2"的形式输入
```
```python
void
```
```python
simplify();
```
```python
//化简（使分子分母没有公因子）
```
```python
void
```
```python
amplify(
```
```python
int
```
```python
n);
```
```python
//放大n倍，如2/3放大5倍为10/3
```
```python
void
```
```python
output(
```
```python
int
```
```python
style=
```
```python
0
```
```python
);
```
```python
//输出：以8/6为例，style为0时，原样输出8/6；
```
```python
//style为1时，输出化简后形式4/3；
```
```python
//style为2时，输出1(1/3)形式，表示一又三分之一；
```
```python
//style为3时，用小数形式输出，如1.3333；
```
```python
//默认方式0
```
```python
};
```
项目要求：完成分数类的设计，并在main()函数中自行定义对象，调用各成员函数，完成基本的测试。
实践策略：
（1）不建议一次实现所有成员函数后再调试，而是实现一个，测试一个；
（2）本项目的实现及测试顺序可以是：先构造函数和输出output函数（可以先只实现一种输出方式），再set函数，再input函数，等等。
【项目2-带武器的游戏角色】[参考解答](http://blog.csdn.net/sxhelijian/article/details/51045853)
设计一个武器类，其数据成员至少要有武器名、威力，还可以加上你想描述武器的其他数据。想一想要对武器实施什么处理，设计其成员函数。
在[上周的游戏角色类Role](http://blog.csdn.net/sxhelijian/article/details/50993545)基础上扩充，为每个角色创建一个武器，并在攻击(attack)行为发生时，武器在其中起作用。制定游戏规则，使之接近于真实的游戏场景，并利用成员函数实现游戏规则，最后在main函数中通过调用相应的成员函数，模拟游戏过程。
【项目3-IP地址类】[参考解答](http://blog.csdn.net/sxhelijian/article/details/51045934)
在互联网中使用的IP地址占4字节，可以用四段法表示，每段值的范围为0-255，中间用“.”隔开，例如202.194.116.97。其实，也可以看看一个有4字节的无符号整型值3401741409。
现设计一个IP地址类，用于保存IP地址，并实施在IP地址上的一些操作。如下所示：
```python
class
```
```python
IP
{
```
```python
private
```
```python
:
```
```python
union
```
```python
//由此匿名联合体可以看出，IP地址共占4个字节
```
```python
{
```
```python
struct
```
```python
//这是一个由4个字节构成的匿名结构体
```
```python
{
```
```python
unsigned
```
```python
char
```
```python
seg0;
```
```python
unsigned
```
```python
char
```
```python
seg1;
```
```python
unsigned
```
```python
char
```
```python
seg2;
```
```python
unsigned
```
```python
char
```
```python
seg3;
        };
```
```python
//4字节的IP地址可以看作4部分，每部分1字节
```
```python
unsigned
```
```python
int
```
```python
address;
```
```python
//4字节的IP地址可以看成一个4字节的整体
```
```python
};
```
```python
public
```
```python
:
    IP(
```
```python
int
```
```python
=
```
```python
0
```
```python
,
```
```python
int
```
```python
=
```
```python
0
```
```python
,
```
```python
int
```
```python
=
```
```python
0
```
```python
,
```
```python
int
```
```python
=
```
```python
0
```
```python
);
```
```python
//构造函数
```
```python
void
```
```python
showIP();
```
```python
//用四段法显示IP地址
```
```python
bool
```
```python
sameSubnet(
```
```python
const
```
```python
IP &ip,
```
```python
const
```
```python
IP &mark);
```
```python
//判断是否处于同一子网
```
```python
char
```
```python
whatKind();
```
```python
//返回属于哪一类网络
```
```python
};
```
```python
//实现成员函数
```
```python
int
```
```python
main()
{
    IP ip1(
```
```python
202
```
```python
,
```
```python
194
```
```python
,
```
```python
116
```
```python
,
```
```python
97
```
```python
), ip2(
```
```python
202
```
```python
,
```
```python
194
```
```python
,
```
```python
119
```
```python
,
```
```python
102
```
```python
), mark(
```
```python
255
```
```python
,
```
```python
255
```
```python
,
```
```python
248
```
```python
,
```
```python
0
```
```python
);
```
```python
cout
```
```python
<<
```
```python
"ip1: "
```
```python
;
    ip1.showIP();
```
```python
cout
```
```python
<<
```
```python
"ip2: "
```
```python
;
    ip2.showIP();
```
```python
if
```
```python
(ip1.sameSubnet(ip2,mark))
```
```python
cout
```
```python
<<
```
```python
"两个IP在同一子网"
```
```python
<<endl;
```
```python
else
```
```python
cout
```
```python
<<
```
```python
"两个IP不在同一子网"
```
```python
<<endl;
```
```python
cout
```
```python
<<
```
```python
"ip1属于"
```
```python
<<ip1.whatKind()<<
```
```python
"类网络"
```
```python
<<endl;
```
```python
return
```
```python
0
```
```python
;
}
```
相关的背景知识请通过搜索引擎找到。在给出的代码中，也通过注释给了一些背景知识的介绍。
如果觉得写出来太难，可以将本题作为代码阅读题看待。
【项目4-静态成员应用】[参考解答](http://blog.csdn.net/sxhelijian/article/details/44836325)
设计含有静态数据成员和成员函数的Time类。静态数据成员是类中所有的对象共有的数据，在下面的设计中，时钟要采用12小时制，还是要使用24小时制，显示时，不足两位的数字前是否前导0，都是“影响全局”的设置，适合作为类中的静态数据成员。
![这里写图片描述](https://img-blog.csdn.net/20150401100757701)
```python
class Time
{
```
```python
public
```
```python
:
```
```python
Time
```
```python
(
```
```python
int
```
```python
=
```
```python
0
```
```python
,
```
```python
int
```
```python
=
```
```python
0
```
```python
,
```
```python
int
```
```python
=
```
```python
0
```
```python
);
```
```python
void
```
```python
show_time( );
```
```python
//根据is_24和from0，输出适合形式-20:23:5/8:23:5 pm/08:23:05 pm
```
```python
void
```
```python
add_seconds(
```
```python
int
```
```python
);
```
```python
//增加n秒钟
```
```python
void
```
```python
add_minutes(
```
```python
int
```
```python
);
```
```python
//增加n分钟
```
```python
void
```
```python
add_hours(
```
```python
int
```
```python
);
```
```python
//增加n小时
```
```python
static
```
```python
void
```
```python
change24();
```
```python
//改变静态成员is_24，在12和24时制之间转换
```
```python
static
```
```python
void
```
```python
changefrom0();
```
```python
//改变静态成员from0，切换是否前导0
```
```python
private
```
```python
:
```
```python
static
```
```python
bool
```
```python
is_24;
```
```python
//为true时，24小时制，如20:23:5；为flase，12小时制，显示为8:23:5 pm
```
```python
static
```
```python
bool
```
```python
from0;
```
```python
//为true时，前导0，8:23:5显示为08:23:05
```
```python
int
```
```python
hour;
```
```python
int
```
```python
minute;
```
```python
int
```
```python
sec;  
};
```
```python
//下面写出静态成员的初始化及各成员函数的定义……
```
```python
int
```
```python
main( )   
{  }
```

