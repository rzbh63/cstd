
# 运筹系列23：凸规划求解包cvxopt - kittyzc的博客 - CSDN博客


2019年04月09日 14:59:52[IE06](https://me.csdn.net/kittyzc)阅读数：7个人分类：[算法																](https://blog.csdn.net/kittyzc/article/category/7940151)[运筹学																](https://blog.csdn.net/kittyzc/article/category/7940150)[							](https://blog.csdn.net/kittyzc/article/category/7940151)



# 1. 软件介绍
## 1.1 安装
在机器学习问题中，我们常常需要对多优化问题进行求解，用一般的线性规划求解器没有办法求解了。cvxopt是一个可靠的求解包，安装方法如下：
```python
pip install cvxopt
```
## 1.2 使用说明
优化器：使用op(目标函数，约束条件)进行定义，调用solve()可以求解，调用objective.value()可以获得求解之后的目标值。op也可以从MPS标准格式的文件中读取数据。
变量：使用variable()进行声明，可以传入整数定义变量数组。求解之后可以调用value变量获取值
约束：可以直接写不等式表达式数组，或者用matrix矩阵形式表达
矩阵：下面举例说一下怎么用。注意直接转换matrix和转化为array后再转换为matrix的行/列是不一样的。
>>>from
```python
cvxopt
```
import
```python
matrix
```
>>>
```python
A
```
=
```python
matrix
```
(1,(1,4))>>>print(
```python
A
```
)[1111]>>>
```python
A
```
=
```python
matrix
```
(1.0,(1,4))>>>print(
```python
A
```
)[1.00e+001.00e+001.00e+001.00e+00]>>>
```python
A
```
=
```python
matrix
```
([0,1,2,3],(2,2))>>>
```python
A
```
=
```python
matrix
```
((0,1,2,3),(2,2))>>>
```python
A
```
=
```python
matrix
```
(range(4),(2,2))>>>print(
```python
A
```
)[02][13]>>>
```python
A
```
=
```python
matrix
```
([1.,2.,3.,4.,5.,6.],(2,3))>>>print(
```python
A
```
)[1.00e+003.00e+005.00e+00][2.00e+004.00e+006.00e+00]>>>
```python
B
```
=
```python
matrix
```
(
```python
A
```
,(3,2))>>>print(
```python
B
```
)[1.00e+004.00e+00][2.00e+005.00e+00][3.00e+006.00e+00]>>>from
```python
numpy
```
import
```python
array
```
>>>
```python
x
```
=
```python
array
```
([[1.,2.,3.],[4.,5.,6.]])>>>
```python
x
array
```
([[1.2.3.][4.5.6.]])>>>print(
```python
matrix
```
(
```python
x
```
))[1.00e+002.00e+003.00e+00][4.00e+005.00e+006.00e+00]>>>print(
```python
matrix
```
([[1.,2.],[3.,4.],[5.,6.]]))[1.00e+003.00e+005.00e+00][2.00e+004.00e+006.00e+00]>>>
```python
A1
```
=
```python
matrix
```
([1,2],(2,1))>>>
```python
B1
```
=
```python
matrix
```
([6,7,8,9,10,11],(2,3))>>>
```python
B2
```
=
```python
matrix
```
([12,13,14,15,16,17],(2,3))>>>
```python
B3
```
=
```python
matrix
```
([18,19,20],(1,3))>>>
```python
C
```
=
```python
matrix
```
([[
```python
A1
```
,3.0,4.0,5.0],[
```python
B1
```
,
```python
B2
```
,
```python
B3
```
]])>>>print(
```python
C
```
)[1.00e+006.00e+008.00e+001.00e+01][2.00e+007.00e+009.00e+001.10e+01][3.00e+001.20e+011.40e+011.60e+01][4.00e+001.30e+011.50e+011.70e+01][5.00e+001.80e+011.90e+012.00e+01]>>>
```python
A
```
=
```python
spmatrix
```
([2,-1,2,-2,1,4,3],[1,2,0,2,3,2,0],[0,0,1,1,2,3,4])>>>print(
```python
A
```
)[02.00e+00003.00e+00][2.00e+000000][-1.00e+00-2.00e+0004.00e+000][001.00e+0000]
# 2. 示例
## 2.1 线性规划
![在这里插入图片描述](https://img-blog.csdnimg.cn/20190111143942424.png)
第一种方式：
[
](https://img-blog.csdnimg.cn/20190111143942424.png)>>>from
```python
cvxopt
```
.
```python
modeling
```
import*>>>
```python
x
```
=
```python
variable
```
()>>>
```python
y
```
=
```python
variable
```
()>>>
```python
c1
```
=(2*
```python
x
```
+
```python
y
```
<=3)>>>
```python
c2
```
=(
```python
x
```
+2*
```python
y
```
<=3)>>>
```python
c3
```
=(
```python
x
```
>=0)>>>
```python
c4
```
=(
```python
y
```
>=0)>>>
```python
lp1
```
=
```python
op
```
(-4*
```python
x
```
-5*
```python
y
```
,[
```python
c1
```
,
```python
c2
```
,
```python
c3
```
,
```python
c4
```
])>>>
```python
lp1
```
.
```python
solve
```
()>>>
```python
lp1
```
.
```python
status
```
'optimal'>>>print(
```python
lp1
```
.
```python
objective
```
.
```python
value
```
())[-9.00e+00]>>>print(
```python
x
```
.
```python
value
```
)[1.00e+00]>>>print(
```python
y
```
.
```python
value
```
)[1.00e+00]>>>print(
```python
c1
```
.
```python
multiplier
```
.
```python
value
```
)[1.00e+00]>>>print(
```python
c2
```
.
```python
multiplier
```
.
```python
value
```
)[2.00e+00]>>>print(
```python
c3
```
.
```python
multiplier
```
.
```python
value
```
)[2.87e-08]>>>print(
```python
c4
```
.
```python
multiplier
```
.
```python
value
```
)[2.80e-08][
](https://img-blog.csdnimg.cn/20190111143942424.png)第二种方式，数组和矩阵形式。注意矩阵形式里面，要把变量大于等于0也添加到约束条件里面：
[
](https://img-blog.csdnimg.cn/20190111143942424.png)>>>from
```python
cvxopt
```
.
```python
modeling
```
import*>>>
```python
x
```
=
```python
variable
```
(2)>>>
```python
A
```
=
```python
matrix
```
([[2.,1.,-1.,0.],[1.,2.,0.,-1.]])>>>
```python
b
```
=
```python
matrix
```
([3.,3.,0.,0.])>>>
```python
c
```
=
```python
matrix
```
([-4.,-5.])>>>
```python
ineq
```
=(
```python
A
```
*
```python
x
```
<=
```python
b
```
)>>>
```python
lp2
```
=
```python
op
```
(
```python
dot
```
(
```python
c
```
,
```python
x
```
),
```python
ineq
```
)>>>
```python
lp2
```
.
```python
solve
```
()>>>print(
```python
lp2
```
.
```python
objective
```
.
```python
value
```
())[-9.00e+00]>>>print(
```python
x
```
.
```python
value
```
)[1.00e+00][1.00e+00]>>>print(
```python
ineq
```
.
```python
multiplier
```
.
```python
value
```
)[1.00e+00][2.00e+00][2.87e-08][2.80e-08][
](https://img-blog.csdnimg.cn/20190111143942424.png)第三种方式：
[
](https://img-blog.csdnimg.cn/20190111143942424.png)>>>from
```python
cvxopt
```
import
```python
matrix
```
,
```python
solvers
```
>>>
```python
c
```
=
```python
matrix
```
([-4.,-5.])>>>
```python
G
```
=
```python
matrix
```
([[2.,1.,-1.,0.],[1.,2.,0.,-1.]])>>>
```python
h
```
=
```python
matrix
```
([3.,3.,0.,0.])>>>
```python
sol
```
=
```python
solvers
```
.
```python
lp
```
(
```python
c
```
,
```python
G
```
,
```python
h
```
)>>>print(
```python
sol
```
['x'])[1.00e+00][1.00e+00][
](https://img-blog.csdnimg.cn/20190111143942424.png)
## 2.2 凸优化示例
[
](https://img-blog.csdnimg.cn/20190111143942424.png)cvxopt.solvers.qp(P, q[, G, h[, A, b[, solver[, initvals]]]])
对应的标准型为：
![在这里插入图片描述](https://img-blog.csdnimg.cn/20190111163103768.png)
下面举一个例子：
![在这里插入图片描述](https://img-blog.csdnimg.cn/20190111162800438.png)
from
```python
cvxopt
```
import
```python
matrix
```
,
```python
solvers
P
```
=2*
```python
matrix
```
([[2,.5],[.5,1]])
```python
q
```
=
```python
matrix
```
([1.0,1.0])
```python
G
```
=
```python
matrix
```
([[-1.0,0.0],[0.0,-1.0]])
```python
h
```
=
```python
matrix
```
([0.0,0.0])
```python
A
```
=
```python
matrix
```
([1.0,1.0],(1,2))
```python
b
```
=
```python
matrix
```
(1.0)
```python
sol
```
=
```python
solvers
```
.
```python
qp
```
(
```python
P
```
,
```python
q
```
,
```python
G
```
,
```python
h
```
,
```python
A
```
,
```python
b
```
)print(
```python
sol
```
['x'])print(
```python
sol
```
['primal objective'])更多例子可以参考[http://cvxopt.org/examples/index.html](http://cvxopt.org/examples/index.html)

[
](https://img-blog.csdnimg.cn/20190111163103768.png)
