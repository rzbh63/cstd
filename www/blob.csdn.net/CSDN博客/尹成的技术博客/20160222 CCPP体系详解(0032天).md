
# 20160222.CCPP体系详解(0032天) - 尹成的技术博客 - CSDN博客

置顶2016年03月20日 22:32:01[尹成](https://me.csdn.net/yincheng01)阅读数：2363个人分类：[CCPP](https://blog.csdn.net/yincheng01/article/category/6096925)


程序片段(01):宽字符.c+字符串与内存四区.c
内容概要:**宽窄字符**
```python
///宽字符.c
```
```python
#include <stdio.h>
```
```python
#include <stdlib.h>
```
```python
#include <locale.h>
```
```python
//01.宽字符的应用:
```
```python
//  1.宽字符用于国际化:
```
```python
//      Unicode编码情况之下,需要启用宽字符编程
```
```python
//  2.中文的高级处理:
```
```python
//      必须依赖于宽字符
```
```python
//  3.宽窄字符的唯一不同特点:
```
```python
//      存储数据的盒子尺寸不一致(宽字符采用双字节存储,窄字符采用单字节存储)
```
```python
//      注:其它特性和窄字符一致
```
```python
//  4.宽字符情况之下:
```
```python
//      所有单个宽字符都占据两个字节的内存空间
```
```python
//  5.设置本地化的目的:
```
```python
//      启用本地字符集,以实现基于本地化的国际化
```
```python
//  注:
```
```python
//      1.L'X'-'X'和L"ABC"-"ABC"两种存储方式存储的数据实质都是一样的,不一样的
```
```python
//          只是存储该数据的盒子尺寸不一样
```
```python
//      2.宽窄字符的使用注意事项:
```
```python
//          宽字符:
```
```python
//              如果没有设置本地化的情况之下,也就只能处理ASCII码表包含字符
```
```python
//              只有在设置了正确的本地化的情况之下,才能正确的处理本地语言
```
```python
//          窄字符:
```
```python
//              无论是否设置本地化,都只能处理ASCII码表当中所定义的字符
```
```python
//              也就是说只有宽字符才存在设置本地化的不同点
```
```python
//      3.宽窄字符的结尾标识符:
```
```python
//          宽字符:L'\0'
```
```python
//          窄字符:'\0
```
```python
//          注:所有位于代码区常量池的字符串默认携带结尾标识符
```
```python
//02.采用窄字符存储中文的特点分析:
```
```python
//  1.所有ASCII码表所包含的字符都只占用一个字节
```
```python
//  2.所有中文字符将会包含两个字节
```
```python
//  注:窄字符存储原理
```
```python
int
```
```python
main01(
```
```python
void
```
```python
)
{
```
```python
char
```
```python
* p1 =
```
```python
"我"
```
```python
;
```
```python
char
```
```python
* p2 =
```
```python
"我的"
```
```python
;
```
```python
//所有位于代码区常量池的字符串结尾默认自带'\0'orL'\0'
```
```python
printf
```
```python
(
```
```python
"%d, %d \n"
```
```python
,
```
```python
sizeof
```
```python
(
```
```python
"我"
```
```python
),
```
```python
sizeof
```
```python
(
```
```python
"我的"
```
```python
));
```
```python
printf
```
```python
(
```
```python
"%s \n"
```
```python
, p1);
```
```python
//窄字符情况下:分ASCII码表字符和非ASCII码表字符
```
```python
system(
```
```python
"pause"
```
```python
);
}
```
```python
//03.非ASCII码表的其他字符如果按照字符数组进行存储:
```
```python
//  就需要按照其他字符所占据的字节个数进行连续字符的打印,这样才能正确
```
```python
//  的还原字符数组当中所存储的字符串内容
```
```python
int
```
```python
main02(
```
```python
void
```
```python
)
{
```
```python
char
```
```python
str[
```
```python
10
```
```python
] =
```
```python
"我"
```
```python
;
```
```python
//非ASCII码表内容按照窄字符数组存储,需要按照连续的单字节个数进行字符解析
```
```python
printf
```
```python
(
```
```python
"%c%c \n"
```
```python
, *(str +
```
```python
0
```
```python
), *(str +
```
```python
1
```
```python
));
```
```python
//方能正确的显示非ASCII码表字符串
```
```python
system(
```
```python
"pause"
```
```python
);
}
```
```python
//04.宽窄字符使用注意事项:
```
```python
//  1.严格区分宽窄字符
```
```python
//  2.严格区分单字符还是字符串:
```
```python
//      单字符:就是单个字符
```
```python
//      字符串:含有结束标识
```
```python
//  3.严格区分占用字节和使用字节:
```
```python
//注:认真区分宽窄字符的存储原理!
```
```python
int
```
```python
main03(
```
```python
void
```
```python
)
{
```
```python
wchar_t
```
```python
wchr1 = L
```
```python
'我'
```
```python
;
```
```python
wchar_t
```
```python
wstr[
```
```python
10
```
```python
] = L
```
```python
"我的C"
```
```python
;
```
```python
printf
```
```python
(
```
```python
"%d \n"
```
```python
,
```
```python
sizeof
```
```python
(wchr1));
```
```python
//2
```
```python
printf
```
```python
(
```
```python
"%d \n"
```
```python
,
```
```python
sizeof
```
```python
(wstr));
```
```python
//20
```
```python
printf
```
```python
(
```
```python
"%d \n"
```
```python
,
```
```python
sizeof
```
```python
(L
```
```python
"我的C1"
```
```python
));
```
```python
//宽字符:无论是何种字符,都按照两个字节进行存储
```
```python
system(
```
```python
"pause"
```
```python
);
}
```
```python
//05.宽窄字符都遵守内存四区理论
```
```python
int
```
```python
main04(
```
```python
void
```
```python
)
{
```
```python
wchar_t
```
```python
* p = L
```
```python
"我的C"
```
```python
;
```
```python
//宽窄字符都遵从内存四区理论
```
```python
*p = L
```
```python
'X'
```
```python
;
    system(
```
```python
"pause"
```
```python
);
}
```
```python
//06.无论是宽字符的字符还是字符串:
```
```python
//  都必须要求添加上宽字符前缀标识L
```
```python
//      宽字符(单字符):L''
```
```python
//      宽字符(字符串):L""
```
```python
//07.宽字符细节问题:
```
```python
//  1.宽字符(单字符):
```
```python
//      外部标识:L''
```
```python
//      格式控制:%c
```
```python
//  2.宽字符(字符串)
```
```python
//      外部标识:L""
```
```python
//      格式控制:%ls
```
```python
//注:宽字符最好同时使用(本地化)+(宽字符标识)+(宽字符函数)+(宽字符格式控制)
```
```python
//  这样宽字符才能保证完全正确的显示
```
```python
int
```
```python
main05(
```
```python
void
```
```python
)
{
    setlocale(LC_ALL,
```
```python
"zh-CN"
```
```python
);
```
```python
wchar_t
```
```python
* pWChr = L
```
```python
"12345abcdef我的王"
```
```python
;
```
```python
//printf("%s \n", pWChr);//类型不匹配
```
```python
wprintf(L
```
```python
"wprintf = %ls \n"
```
```python
, pWChr);
    system(
```
```python
"pause"
```
```python
);
}
```
```python
int
```
```python
main06(
```
```python
void
```
```python
)
{
    setlocale(LC_ALL, L
```
```python
"zh-CN"
```
```python
);
```
```python
wchar_t
```
```python
wchr = L
```
```python
'我'
```
```python
;
    putwchar(wchr);
    system(
```
```python
"pause"
```
```python
);
}
```
```python
///字符串与内存四区.c
```
```python
#define _CRT_SECURE_NO_WARNINGS
```
```python
#include <stdio.h>
```
```python
#include <stdlib.h>
```
```python
#include <string.h>
```
```python
char
```
```python
str[
```
```python
100
```
```python
] =
```
```python
"12345"
```
```python
;
```
```python
//01.除了代码区当中的内容不可进行修改,其他地儿几乎都可以:
```
```python
//      代码区常量池:直接获取
```
```python
//      代码区符号表:先读取,再生成,最后才能使用
```
```python
int
```
```python
main07(
```
```python
void
```
```python
)
{
```
```python
char
```
```python
* pStr1 =
```
```python
"ABCDEF"
```
```python
;
```
```python
//代码区
```
```python
char
```
```python
str[
```
```python
100
```
```python
] =
```
```python
"1234567"
```
```python
;
```
```python
//栈内存
```
```python
char
```
```python
* pStr2 = (
```
```python
char
```
```python
*)
```
```python
malloc
```
```python
(
```
```python
100
```
```python
);
```
```python
//堆内存
```
```python
strcpy
```
```python
(pStr2,
```
```python
"ABCDEF"
```
```python
);
```
```python
//*pStr1 = 'X';
```
```python
*pStr2 =
```
```python
'X'
```
```python
;
    *str =
```
```python
'X'
```
```python
;
```
```python
char
```
```python
* pChr = str;
```
```python
printf
```
```python
(
```
```python
"%s, %s, %s \n"
```
```python
, pStr1, str, pStr2);
    system(
```
```python
"pause"
```
```python
);
}
```
```python
int
```
```python
main08(
```
```python
void
```
```python
)
{
```
```python
char
```
```python
* pStr1 =
```
```python
"ABCDEF"
```
```python
;
```
```python
char
```
```python
* pStr2 =
```
```python
"ABCDEF"
```
```python
;
```
```python
//代码区常量池当中的相同常量字符串只有一份儿(地址相同)
```
```python
char
```
```python
str1[
```
```python
10
```
```python
] =
```
```python
"ABCDEF"
```
```python
;
```
```python
char
```
```python
str2[
```
```python
10
```
```python
] =
```
```python
"ABCDEF"
```
```python
;
```
```python
char
```
```python
* pM1 = (
```
```python
char
```
```python
*)
```
```python
malloc
```
```python
(
```
```python
10
```
```python
);
```
```python
char
```
```python
* pM2 = (
```
```python
char
```
```python
*)
```
```python
malloc
```
```python
(
```
```python
10
```
```python
);
```
```python
strcpy
```
```python
(pM1,
```
```python
"ABCDEF"
```
```python
);
```
```python
strcpy
```
```python
(pM2,
```
```python
"ABCDEF"
```
```python
);
```
```python
printf
```
```python
(
```
```python
"%d, %d, %d \n"
```
```python
, pStr1 == pStr2, str1 == str2, pM1 == pM2);
    system(
```
```python
"pause"
```
```python
);
}
```
```python
char
```
```python
strX[
```
```python
100
```
```python
] =
```
```python
"ABCDEF"
```
```python
;
```
```python
char
```
```python
* getStr()
{
```
```python
char
```
```python
str[
```
```python
100
```
```python
] =
```
```python
"ABCDEF"
```
```python
;
```
```python
//返回栈内存不可以
```
```python
char
```
```python
* pStr =
```
```python
"ABCDEF"
```
```python
;
```
```python
//代码区地址
```
```python
char
```
```python
* pStrX = strX;
```
```python
//静态区地址
```
```python
return
```
```python
pStrX;
}
```
```python
//02.函数的返回值所能返回的指针特点:
```
```python
//  1.绝对不能返回指向栈内存的指针
```
```python
//  2.返回指向栈内存的指针属于迷途指针:
```
```python
//      迷途指针:指针所指向的内存块儿已经被回收了
```
```python
int
```
```python
main09(
```
```python
void
```
```python
)
{
```
```python
char
```
```python
* pStr;
    pStr = getStr();
```
```python
printf
```
```python
(
```
```python
"\n\n\n"
```
```python
);
```
```python
free
```
```python
(pStr);
```
```python
//迷途指针
```
```python
pStr == NULL;
```
```python
//指针为空
```
```python
printf
```
```python
(
```
```python
"%s \n"
```
```python
, pStr);
    system(
```
```python
"pause"
```
```python
);
}
```
程序片段(02):MyString.h+MyString.c+main.c
内容概要:**字符串库封装**
```python
///MyString.h
```
```python
#pragma once
```
```python
#include <stdlib.h>
```
```python
typedef
```
```python
struct
```
```python
{
```
```python
char
```
```python
* pAStr;
```
```python
//首地址
```
```python
int
```
```python
memLen;
```
```python
//实际长
```
```python
} MyAString;
```
```python
typedef
```
```python
struct
```
```python
{
```
```python
wchar_t
```
```python
* pWStr;
```
```python
int
```
```python
memLen;
} MyWString;
```
```python
//指定初始
```
```python
void
```
```python
initMyAStrWithAStr(MyAString * pMyAStr,
```
```python
char
```
```python
const
```
```python
* pAStr);
```
```python
void
```
```python
initMyWStrWithWStr(MyWString * pMyWStr,
```
```python
wchar_t
```
```python
const
```
```python
* pWStr);
```
```python
//显示字串
```
```python
void
```
```python
showMyAStr(MyAString * pMyAStr);
```
```python
void
```
```python
showMyWStr(MyWString * pMyWStr);
```
```python
//字串长度
```
```python
int
```
```python
myAStrLen(MyAString * pMyAStr);
```
```python
int
```
```python
myWStrLen(MyWString * pMyWstr);
```
```python
//字串拷贝
```
```python
MyAString * myAStrCpy(MyAString * pMyAStr,
```
```python
char
```
```python
const
```
```python
* pAStr);
MyWString * myWStrCpy(MyWString * pMyWStr,
```
```python
wchar_t
```
```python
const
```
```python
* pWStr);
```
```python
//递归拷贝
```
```python
MyAString * myAStrCopy(MyAString * pMyAStr,
```
```python
char
```
```python
const
```
```python
* pAStr,
```
```python
int
```
```python
i);
MyWString * myWStrCopy(MyWString * pMyWStr,
```
```python
wchar_t
```
```python
const
```
```python
* pWStr,
```
```python
int
```
```python
i);
```
```python
//尾部追加
```
```python
void
```
```python
myAStrAddAStr(MyAString * pMyAStr,
```
```python
char
```
```python
const
```
```python
* pAStr);
```
```python
void
```
```python
myWStrAddWStr(MyWString * pMyWStr,
```
```python
wchar_t
```
```python
const
```
```python
* pWStr);
```
```python
//字串查找
```
```python
char
```
```python
* myAStrAStr(MyAString * pMyAStr,
```
```python
char
```
```python
* pAStr);
```
```python
wchar_t
```
```python
* myWStrWStr(MyWString * pMyWStr,
```
```python
wchar_t
```
```python
* pWStr);
```
```python
//随机前插
```
```python
void
```
```python
myAStrPrevInsertAStr(MyAString * pMyAStr,
```
```python
char
```
```python
* pAStr,
```
```python
char
```
```python
* pInsertAStr);
```
```python
void
```
```python
myWStrPrevInsertWStr(MyWString * pMyWstr,
```
```python
wchar_t
```
```python
* pWStr,
```
```python
wchar_t
```
```python
* pInsertWStr);
```
```python
//随机后插
```
```python
void
```
```python
myAStrNextInsertAStr(MyAString * pMyAStr,
```
```python
char
```
```python
* pAStr,
```
```python
char
```
```python
* pInsertAStr);
```
```python
void
```
```python
myWStrNextInsertWStr(MyWString * pMyWStr,
```
```python
wchar_t
```
```python
* pWStr,
```
```python
wchar_t
```
```python
* pInsertWStr );
```
```python
//删除单个
```
```python
void
```
```python
myAStrDelFirstAStr(MyAString * pMyAStr,
```
```python
char
```
```python
* pAStr);
```
```python
void
```
```python
myWStrDelFirstWStr(MyWString * pMyWStr,
```
```python
wchar_t
```
```python
* pWStr);
```
```python
//删除多个
```
```python
void
```
```python
myAStrDelAllAStr(MyAString * pMyAStr,
```
```python
char
```
```python
* pAStr);
```
```python
void
```
```python
myWStrDelAllWStr(MyWString * pMyWStr,
```
```python
wchar_t
```
```python
* pWStr);
```
```python
void
```
```python
myAStrDelAllAStrByRec(MyAString * pMyAStr,
```
```python
char
```
```python
* pAStr);
```
```python
void
```
```python
myWStrDelAllWStrByRec(MyWString * pMyWStr,
```
```python
wchar_t
```
```python
* pWStr);
```
```python
//随机替换(低效率)
```
```python
void
```
```python
myAStrRepFirstAStrLow(MyAString * pMyAStr,
```
```python
char
```
```python
* pAStr,
```
```python
char
```
```python
* pRepAStr);
```
```python
void
```
```python
myWStrRepFirstWStrLow(MyWString * pMyWStr,
```
```python
wchar_t
```
```python
* pWStr,
```
```python
wchar_t
```
```python
* pRepWStr);
```
```python
void
```
```python
myAStrRepAllAStrLow(MyAString * pMyAStr,
```
```python
char
```
```python
* pAStr,
```
```python
char
```
```python
* pRepAStr);
```
```python
void
```
```python
myWStrRepAllWStrLow(MyWString * pMyWStr,
```
```python
wchar_t
```
```python
* pWStr,
```
```python
wchar_t
```
```python
* pRepStr);
```
```python
//随机替换(高效率)
```
```python
void
```
```python
myAStrRepFirstAStrHigh(MyAString * pMyAStr,
```
```python
char
```
```python
* pAStr,
```
```python
char
```
```python
* pRepAStr);
```
```python
void
```
```python
myWStrRepFirstWStrHigh(MyWString * pMyWStr,
```
```python
wchar_t
```
```python
* pWStr,
```
```python
wchar_t
```
```python
* pRepWStr);
```
```python
void
```
```python
myAStrRepAllAStrHigh(MyAString * pMyAStr,
```
```python
char
```
```python
* pAStr,
```
```python
char
```
```python
* pRepAStr);
```
```python
void
```
```python
myWStrRepAllWStrHigh(MyWString * pMyWStr,
```
```python
wchar_t
```
```python
* pWStr,
```
```python
wchar_t
```
```python
* pRepWStr);
```
```python
//扩充功能:
```
```python
//字符串压缩:
```
```python
//  1.时间优先or空间优先
```
```python
//  2.单字符压缩和字符串压缩
```
```python
///MyString.c
```
```python
#define _CRT_SECURE_NO_WARNINGS
```
```python
#include "MyString.h"
```
```python
#include <string.h>
```
```python
#include <stdio.h>
```
```python
void
```
```python
showMyAStr(MyAString * pMyAStr)
{
```
```python
if
```
```python
(
```
```python
NULL
```
```python
== pMyAStr->pAStr)
```
```python
return
```
```python
;
    printf(
```
```python
"%s \n"
```
```python
, pMyAStr->pAStr);
}
```
```python
void
```
```python
showMyWStr(MyWString * pMyWStr)
{
```
```python
if
```
```python
(
```
```python
NULL
```
```python
== pMyWStr->pWStr)
```
```python
return
```
```python
;
    wprintf(L
```
```python
"%ls \n"
```
```python
, pMyWStr->pWStr);
}
```
```python
int
```
```python
myAStrLen(MyAString * pMyAStr)
{
```
```python
if
```
```python
(
```
```python
NULL
```
```python
== pMyAStr)
```
```python
return
```
```python
0
```
```python
;
```
```python
int
```
```python
i =
```
```python
0
```
```python
;
```
```python
while
```
```python
(*pMyAStr->pAStr++)
    {
        ++i;
    }
```
```python
return
```
```python
i;
}
```
```python
int
```
```python
myWStrLen(MyWString * pMyWStr)
{
```
```python
if
```
```python
(
```
```python
NULL
```
```python
== pMyWStr)
```
```python
return
```
```python
0
```
```python
;
```
```python
int
```
```python
i =
```
```python
0
```
```python
;
```
```python
while
```
```python
(*pMyWStr->pWStr++)
    {
        ++i;
    }
```
```python
return
```
```python
i;
}
MyAString * myAStrCpy(MyAString * pMyAStr,
```
```python
char
```
```python
const
```
```python
* pAStr)
{
```
```python
if
```
```python
(
```
```python
NULL
```
```python
== pMyAStr ||
```
```python
NULL
```
```python
== pAStr)
```
```python
return
```
```python
NULL
```
```python
;
```
```python
//pAStrLen = strlen(pAStr);
```
```python
//for (int i = 0; i < pAStrlen + 1; ++i)
```
```python
//{
```
```python
//  *(pMyAStr->pAStr + i) = *(pAStr + i);
```
```python
//}
```
```python
char
```
```python
* pCopy = pMyAStr->pAStr;
```
```python
while
```
```python
(*pCopy++ = *pAStr++);
```
```python
return
```
```python
pMyAStr;
}
MyWString * myWStrCpy(MyWString * pMyWStr,
```
```python
wchar_t
```
```python
const
```
```python
* pWStr)
{
```
```python
if
```
```python
(
```
```python
NULL
```
```python
== pMyWStr ||
```
```python
NULL
```
```python
== pWStr)
```
```python
return
```
```python
NULL
```
```python
;
```
```python
//int pWStrLen = wcslen(pWStr);
```
```python
//for (int i = 0; i < pWStrLen + 1; ++i)
```
```python
//{
```
```python
//  *(pMyWStr->pWStr + i) = *(pWStr + i);
```
```python
//}
```
```python
wchar_t
```
```python
* pCopy = pMyWStr->pWStr;
```
```python
while
```
```python
(*pCopy++ = *pWStr++);
```
```python
return
```
```python
pMyWStr;
}
MyAString * myAStrCopy(MyAString * pMyAStr,
```
```python
char
```
```python
const
```
```python
* pAStr,
```
```python
int
```
```python
i)
{
```
```python
if
```
```python
(!(*(pMyAStr->pAStr + i) = *(pAStr + i++)))
```
```python
return
```
```python
pMyAStr;
    myAStrCopy(pMyAStr, pAStr, i);
}
MyWString * myWStrCopy(MyWString * pMyWStr,
```
```python
wchar_t
```
```python
const
```
```python
* pWStr,
```
```python
int
```
```python
i)
{
```
```python
//static char * pTemp = pWStr;//静态局部变量不能使用变量进行初始化
```
```python
if
```
```python
(!(*(pMyWStr->pWStr + i) = *(pWStr + i++)))
```
```python
return
```
```python
pMyWStr;
    myWStrCopy(pMyWStr, pWStr, i);
}
```
```python
void
```
```python
initMyAStrWithAStr(MyAString * pMyAStr,
```
```python
char
```
```python
const
```
```python
* pAStr)
{
```
```python
if
```
```python
(
```
```python
NULL
```
```python
== pMyAStr ||
```
```python
NULL
```
```python
== pAStr)
        abort();
```
```python
int
```
```python
myStrLen = strlen(pAStr) +
```
```python
1
```
```python
;
    pMyAStr->pAStr = (
```
```python
char
```
```python
*)malloc(myStrLen *
```
```python
sizeof
```
```python
(
```
```python
char
```
```python
));
```
```python
//myAStrCpy(pMyAStr, pAStr);
```
```python
myAStrCopy(pMyAStr, pAStr,
```
```python
0
```
```python
);
    pMyAStr->memLen = myStrLen +
```
```python
1
```
```python
;
}
```
```python
void
```
```python
initMyWStrWithWStr(MyWString * pMyWStr,
```
```python
wchar_t
```
```python
const
```
```python
* pWStr)
{
```
```python
if
```
```python
(
```
```python
NULL
```
```python
== pMyWStr ||
```
```python
NULL
```
```python
== pWStr)
        abort();
```
```python
int
```
```python
myWStrLen = wcslen(pWStr) +
```
```python
1
```
```python
;
    pMyWStr->pWStr = (
```
```python
wchar_t
```
```python
*)malloc(myWStrLen *
```
```python
sizeof
```
```python
(
```
```python
wchar_t
```
```python
));
```
```python
//myWStrCpy(pMyWStr, pWStr);
```
```python
myWStrCopy(pMyWStr, pWStr,
```
```python
0
```
```python
);
    pMyWStr->memLen = myWStrLen;
}
```
```python
void
```
```python
myAStrAddAStr(MyAString * pMyAStr,
```
```python
char
```
```python
const
```
```python
* pAStr)
{
```
```python
if
```
```python
(
```
```python
NULL
```
```python
== pMyAStr ||
```
```python
NULL
```
```python
== pAStr)
        abort();
```
```python
if
```
```python
(
```
```python
NULL
```
```python
== pMyAStr)
    {
        initMyAStrWithAStr(pMyAStr, pAStr);
    }
```
```python
else
```
```python
{
```
```python
int
```
```python
myAStrLen = strlen(pMyAStr->pAStr);
```
```python
int
```
```python
addAStrLen = strlen(pAStr);
```
```python
int
```
```python
allAStrLen = myAStrLen + addAStrLen +
```
```python
1
```
```python
;
```
```python
if
```
```python
(pMyAStr->memLen < allAStrLen)
        {
            pMyAStr->pAStr = (
```
```python
char
```
```python
*)realloc(pMyAStr->pAStr, allAStrLen *
```
```python
sizeof
```
```python
(
```
```python
char
```
```python
));
            pMyAStr->memLen = allAStrLen;
        }
        strcat(pMyAStr->pAStr, pAStr);
    }
}
```
```python
void
```
```python
myWStrAddWStr(MyWString * pMyWStr,
```
```python
wchar_t
```
```python
const
```
```python
* pWStr)
{
```
```python
if
```
```python
(
```
```python
NULL
```
```python
== pMyWStr ||
```
```python
NULL
```
```python
== pWStr)
        abort();
```
```python
if
```
```python
(
```
```python
NULL
```
```python
== pMyWStr->pWStr)
    {
        initMyWStrWithWStr(pMyWStr, pWStr);
    }
```
```python
else
```
```python
{
```
```python
int
```
```python
myWStrLen = wcslen(pMyWStr->pWStr);
```
```python
int
```
```python
addWStrLen = wcslen(pWStr);
```
```python
int
```
```python
allWStrLen = myWStrLen + addWStrLen +
```
```python
1
```
```python
;
```
```python
if
```
```python
(pMyWStr->memLen < allWStrLen)
        {
            pMyWStr->pWStr = (
```
```python
wchar_t
```
```python
*)realloc(pMyWStr->pWStr, allWStrLen *
```
```python
sizeof
```
```python
(
```
```python
wchar_t
```
```python
));
            pMyWStr->memLen = allWStrLen;
        }
        wcscat(pMyWStr->pWStr, pWStr);
    }
}
```
```python
char
```
```python
* myAStrAStr(MyAString * pMyAStr,
```
```python
char
```
```python
* pAStr)
{
```
```python
if
```
```python
(
```
```python
NULL
```
```python
== pMyAStr ||
```
```python
NULL
```
```python
== pMyAStr->pAStr ||
```
```python
NULL
```
```python
== pAStr)
```
```python
return
```
```python
NULL
```
```python
;
```
```python
int
```
```python
pMyAStrLen = strlen(pMyAStr->pAStr);
```
```python
int
```
```python
pAStrLen = strlen(pAStr);
```
```python
int
```
```python
diffAStrLen = pMyAStrLen - pAStrLen;
```
```python
for
```
```python
(
```
```python
int
```
```python
i =
```
```python
0
```
```python
; i <= diffAStrLen; ++i)
    {
```
```python
int
```
```python
find =
```
```python
1
```
```python
;
```
```python
for
```
```python
(
```
```python
int
```
```python
j =
```
```python
0
```
```python
; j < pAStrLen; ++j)
        {
```
```python
if
```
```python
(*(pMyAStr->pAStr + i + j) != *(pAStr + j))
            {
                find =
```
```python
0
```
```python
;
```
```python
break
```
```python
;
            }
        }
```
```python
if
```
```python
(find)
        {
```
```python
return
```
```python
pMyAStr->pAStr + i;
        }
    }
```
```python
return
```
```python
NULL
```
```python
;
}
```
```python
wchar_t
```
```python
* myWStrWStr(MyWString * pMyWStr,
```
```python
wchar_t
```
```python
* pWStr)
{
```
```python
if
```
```python
(
```
```python
NULL
```
```python
== pMyWStr ||
```
```python
NULL
```
```python
== pMyWStr->pWStr ||
```
```python
NULL
```
```python
== pWStr)
```
```python
return
```
```python
NULL
```
```python
;
```
```python
wchar_t
```
```python
* pCopy = pMyWStr->pWStr;
```
```python
while
```
```python
(*pCopy)
    {
```
```python
int
```
```python
find =
```
```python
1
```
```python
;
```
```python
wchar_t
```
```python
*pTmp = pCopy;
```
```python
wchar_t
```
```python
*pTemp = pWStr;
```
```python
while
```
```python
(*pTemp)
        {
```
```python
if
```
```python
(
```
```python
'\0'
```
```python
== *pTmp || *pTmp != *pTemp)
            {
                find =
```
```python
0
```
```python
;
```
```python
break
```
```python
;
            }
            ++pTmp;
            ++pTemp;
        }
```
```python
if
```
```python
(find)
        {
```
```python
return
```
```python
pCopy;
        }
        ++pCopy;
    }
```
```python
return
```
```python
NULL
```
```python
;
}
```
```python
void
```
```python
myAStrPrevInsertAStr(MyAString * pMyAStr,
```
```python
char
```
```python
* pAStr,
```
```python
char
```
```python
* pInsertAStr)
{
```
```python
if
```
```python
(
```
```python
NULL
```
```python
== pMyAStr ||
```
```python
NULL
```
```python
== pMyAStr->pAStr ||
```
```python
NULL
```
```python
== pInsertAStr)
```
```python
return
```
```python
;
```
```python
char
```
```python
* pFind = myAStrAStr(pMyAStr, pAStr);
```
```python
if
```
```python
(
```
```python
NULL
```
```python
== pFind)
```
```python
return
```
```python
;
```
```python
int
```
```python
myAStrLen = strlen(pMyAStr->pAStr);
```
```python
int
```
```python
insertAStrLen = strlen(pInsertAStr);
```
```python
int
```
```python
totalAStrLen = myAStrLen + insertAStrLen +
```
```python
1
```
```python
;
```
```python
int
```
```python
relativeLen = pFind - pMyAStr->pAStr;
```
```python
if
```
```python
(pMyAStr->memLen < totalAStrLen)
    {
        pMyAStr->pAStr = (
```
```python
char
```
```python
*)realloc(pMyAStr->pAStr, totalAStrLen *
```
```python
sizeof
```
```python
(
```
```python
char
```
```python
));
        pMyAStr->memLen = totalAStrLen;
    }
```
```python
for
```
```python
(
```
```python
int
```
```python
i = myAStrLen; i >= relativeLen; --i)
    {
        pMyAStr->pAStr[i + insertAStrLen] = pMyAStr->pAStr[i];
    }
```
```python
for
```
```python
(
```
```python
int
```
```python
i = relativeLen, j =
```
```python
0
```
```python
; i < relativeLen + insertAStrLen; ++i)
    {
        pMyAStr->pAStr[i] = pInsertAStr[j++];
    }
}
```
```python
void
```
```python
myWStrPrevInsertWStr(MyWString * pMyWStr,
```
```python
wchar_t
```
```python
* pWStr,
```
```python
wchar_t
```
```python
* pInsertWStr)
{
```
```python
if
```
```python
(
```
```python
NULL
```
```python
== pMyWStr->pWStr ||
```
```python
NULL
```
```python
== pInsertWStr)
```
```python
return
```
```python
;
```
```python
wchar_t
```
```python
* pFindWStr = wcsstr(pMyWStr->pWStr, pWStr);
```
```python
if
```
```python
(
```
```python
NULL
```
```python
== pFindWStr)
```
```python
return
```
```python
;
```
```python
int
```
```python
myWStrLen = wcslen(pMyWStr->pWStr);
```
```python
int
```
```python
insertWStrLen = wcslen(pInsertWStr);
```
```python
int
```
```python
totalWStrLen = myWStrLen + insertWStrLen +
```
```python
1
```
```python
;
```
```python
if
```
```python
(pMyWStr->memLen < totalWStrLen)
    {
        pMyWStr->pWStr = (
```
```python
wchar_t
```
```python
*)realloc(pMyWStr->pWStr, totalWStrLen *
```
```python
sizeof
```
```python
(
```
```python
wchar_t
```
```python
));
        pMyWStr->memLen = totalWStrLen;
    }
    pFindWStr = wcsstr(pMyWStr->pWStr, pWStr);
```
```python
for
```
```python
(
```
```python
wchar_t
```
```python
* p = pMyWStr->pWStr + myWStrLen; p >= pFindWStr; --p)
    {
        *(p + insertWStrLen) = *p;
    }
```
```python
while
```
```python
(*pInsertWStr)
    {
        *pFindWStr++ = *pInsertWStr++;
    }
}
```
```python
void
```
```python
myAStrNextInsertAStr(MyAString * pMyAStr,
```
```python
char
```
```python
* pAStr,
```
```python
char
```
```python
* pInsertAStr)
{
```
```python
if
```
```python
(
```
```python
NULL
```
```python
== pMyAStr->pAStr ||
```
```python
NULL
```
```python
== pInsertAStr)
```
```python
return
```
```python
;
```
```python
char
```
```python
* pFindAStr = strstr(pMyAStr->pAStr, pAStr);
```
```python
if
```
```python
(
```
```python
NULL
```
```python
== pFindAStr)
```
```python
return
```
```python
;
```
```python
int
```
```python
myAStrLen = strlen(pMyAStr->pAStr);
```
```python
int
```
```python
findAStrLen = strlen(pFindAStr);
```
```python
int
```
```python
relAStrLen = myAStrLen - findAStrLen;
```
```python
int
```
```python
insertAStrLen = strlen(pInsertAStr);
```
```python
int
```
```python
totalAStrLen = myAStrLen + insertAStrLen +
```
```python
1
```
```python
;
```
```python
if
```
```python
(pMyAStr->memLen < totalAStrLen)
    {
        pMyAStr->pAStr = (
```
```python
char
```
```python
*)realloc(pMyAStr->pAStr, totalAStrLen *
```
```python
sizeof
```
```python
(
```
```python
char
```
```python
));
        pMyAStr->memLen = totalAStrLen;
    }
```
```python
for
```
```python
(
```
```python
int
```
```python
i = myAStrLen; i >= relAStrLen + strlen(pAStr); --i)
    {
        *(pMyAStr->pAStr + i + insertAStrLen) = *(pMyAStr->pAStr + i);
    }
```
```python
for
```
```python
(
```
```python
int
```
```python
i =
```
```python
0
```
```python
; i < insertAStrLen; ++i)
    {
        *(pMyAStr->pAStr + relAStrLen + strlen(pAStr) + i) = *(pInsertAStr + i);
    }
}
```
```python
void
```
```python
myWStrNextInsertWStr(MyWString * pMyWStr,
```
```python
wchar_t
```
```python
* pWStr,
```
```python
wchar_t
```
```python
* pInsertWStr)
{
```
```python
if
```
```python
(
```
```python
NULL
```
```python
== pMyWStr->pWStr ||
```
```python
NULL
```
```python
== pInsertWStr)
```
```python
return
```
```python
;
```
```python
wchar_t
```
```python
* pFindWStr = wcsstr(pMyWStr->pWStr, pWStr);
```
```python
if
```
```python
(
```
```python
NULL
```
```python
== pFindWStr)
```
```python
return
```
```python
;
```
```python
int
```
```python
myWStrLen = wcslen(pMyWStr->pWStr);
```
```python
int
```
```python
insertWStrLen = wcslen(pInsertWStr);
```
```python
int
```
```python
totalWStrLen = myWStrLen + insertWStrLen +
```
```python
1
```
```python
;
```
```python
if
```
```python
(pMyWStr->memLen < totalWStrLen)
    {
        pMyWStr->pWStr = (
```
```python
wchar_t
```
```python
*)realloc(pMyWStr->pWStr, totalWStrLen *
```
```python
sizeof
```
```python
(
```
```python
wchar_t
```
```python
));
        pMyWStr->memLen = totalWStrLen;
    }
    pFindWStr = wcsstr(pMyWStr->pWStr, pWStr);
```
```python
for
```
```python
(
```
```python
wchar_t
```
```python
* p = pMyWStr->pWStr + myWStrLen; p >= pFindWStr + wcslen(pWStr); --p)
    {
        *(p + insertWStrLen) = *p;
    }
```
```python
while
```
```python
(*pInsertWStr)
    {
        *(pFindWStr + wcslen(pWStr)) = *pInsertWStr++;
        ++pFindWStr;
    }
}
```
```python
void
```
```python
myAStrDelFirstAStr(MyAString * pMyAStr,
```
```python
char
```
```python
* pAStr)
{
```
```python
char
```
```python
* pFindAStr = strstr(pMyAStr->pAStr, pAStr);
```
```python
if
```
```python
(
```
```python
NULL
```
```python
== pFindAStr)
```
```python
return
```
```python
;
```
```python
int
```
```python
delAStrLen = strlen(pAStr);
```
```python
char
```
```python
* pRepAStr = pFindAStr + delAStrLen;
```
```python
//while ('\0' != *pFindAStr)
```
```python
//while (0 != pFindAStr)
```
```python
//while (*pFindAStr)
```
```python
//{
```
```python
//  *pFindAStr = *pRepAStr;
```
```python
//  ++pRepAStr;
```
```python
//  ++pFindAStr;
```
```python
//}
```
```python
//while (*pFindAStr++ = *pRepAStr++);
```
```python
//while (*pFindAStr = *(pFindAStr + delAStrLen))
```
```python
//{
```
```python
//  ++pFindAStr;
```
```python
//}
```
```python
while
```
```python
(*pFindAStr++ = *(pFindAStr + delAStrLen));
}
```
```python
void
```
```python
myWStrDelFirstWStr(MyWString * pMyWStr,
```
```python
wchar_t
```
```python
* pWStr)
{
```
```python
wchar_t
```
```python
* pFindWStr = wcsstr(pMyWStr->pWStr, pWStr);
```
```python
if
```
```python
(
```
```python
NULL
```
```python
== pFindWStr)
```
```python
return
```
```python
;
```
```python
int
```
```python
delWStrLen = wcslen(pWStr);
```
```python
wchar_t
```
```python
*   pRepWStr = pFindWStr + delWStrLen;
```
```python
//while ('\0' != *pFindWStr);
```
```python
//while (0 != *pFindWStr);
```
```python
//while (*pFindWStr)
```
```python
//{
```
```python
//  *pFindWStr = *pRepWStr;
```
```python
//  ++pRepWStr;
```
```python
//  ++pFindWStr;
```
```python
//}
```
```python
//while (*pFindWStr++ = *pRepWStr++);
```
```python
//while (*pFindWStr = *(pFindWStr + delWStrLen))
```
```python
//{
```
```python
//  ++pFindWStr;
```
```python
//}
```
```python
while
```
```python
(*pFindWStr++ = *(pFindWStr + delWStrLen));
}
```
```python
void
```
```python
myAStrDelAllAStr(MyAString * pMyAStr,
```
```python
char
```
```python
* pAStr)
{
```
```python
char
```
```python
* pFindAStr = strstr(pMyAStr->pAStr, pAStr);
```
```python
while
```
```python
(
```
```python
NULL
```
```python
!= pFindAStr)
    {
        myAStrDelFirstAStr(pMyAStr, pAStr);
        pFindAStr = strstr(pMyAStr->pAStr, pAStr);
    }
}
```
```python
void
```
```python
myWStrDelAllWStr(MyWString * pMyWStr,
```
```python
wchar_t
```
```python
* pWStr)
{
```
```python
wchar_t
```
```python
* pFindWStr = wcsstr(pMyWStr->pWStr, pWStr);
```
```python
if
```
```python
(
```
```python
NULL
```
```python
!= pFindWStr)
    {
```
```python
do
```
```python
{
            myWStrDelFirstWStr(pMyWStr, pWStr);
            pFindWStr = wcsstr(pMyWStr->pWStr, pWStr);
        }
```
```python
while
```
```python
(
```
```python
NULL
```
```python
!= pFindWStr);
    }
}
```
```python
void
```
```python
myAStrDelAllAStrByRec(MyAString * pMyAStr,
```
```python
char
```
```python
* pAStr)
{
```
```python
if
```
```python
(
```
```python
NULL
```
```python
== strstr(pMyAStr->pAStr, pAStr))
```
```python
return
```
```python
;
    myAStrDelFirstAStr(pMyAStr, pAStr);
    myAStrDelAllAStr(pMyAStr, pAStr);
}
```
```python
void
```
```python
myWStrDelAllWStrByRec(MyWString * pMyWStr,
```
```python
wchar_t
```
```python
* pWStr)
{
```
```python
if
```
```python
(
```
```python
NULL
```
```python
== wcsstr(pMyWStr->pWStr, pWStr))
```
```python
return
```
```python
;
    myWStrDelFirstWStr(pMyWStr, pWStr);
    myWStrDelAllWStrByRec(pMyWStr, pWStr);
}
```
```python
void
```
```python
myAStrRepFirstAStrLow(MyAString * pMyAStr,
```
```python
char
```
```python
* pAStr,
```
```python
char
```
```python
* pRepAStr)
{
```
```python
char
```
```python
* pFindAStr = strstr(pMyAStr->pAStr, pAStr);
```
```python
if
```
```python
(
```
```python
NULL
```
```python
== pFindAStr)
```
```python
return
```
```python
;
    myAStrPrevInsertAStr(pMyAStr, pAStr, pRepAStr);
    myAStrDelFirstAStr(pMyAStr, pAStr);
}
```
```python
void
```
```python
myWStrRepFirstWStrLow(MyWString * pMyWStr,
```
```python
wchar_t
```
```python
* pWStr,
```
```python
wchar_t
```
```python
* pRepWStr)
{
```
```python
wchar_t
```
```python
* pFindWStr = wcsstr(pMyWStr->pWStr, pWStr);
```
```python
if
```
```python
(
```
```python
NULL
```
```python
== pFindWStr)
```
```python
return
```
```python
;
    myWStrPrevInsertWStr(pMyWStr, pWStr, pRepWStr);
    myWStrDelFirstWStr(pMyWStr, pWStr);
}
```
```python
void
```
```python
myAStrRepAllAStrLow(MyAString * pMyAStr,
```
```python
char
```
```python
* pAStr,
```
```python
char
```
```python
* pRepAStr)
{
```
```python
if
```
```python
(
```
```python
NULL
```
```python
== strstr(pMyAStr->pAStr, pAStr))
```
```python
return
```
```python
;
    myAStrRepFirstAStrLow(pMyAStr, pAStr, pRepAStr);
    myAStrRepAllAStrLow(pMyAStr, pAStr, pRepAStr);
}
```
```python
void
```
```python
myWStrRepAllWStrLow(MyWString * pMyWStr,
```
```python
wchar_t
```
```python
* pWStr,
```
```python
wchar_t
```
```python
* pRepWStr)
{
```
```python
if
```
```python
(
```
```python
NULL
```
```python
== wcsstr(pMyWStr->pWStr, pWStr))
```
```python
return
```
```python
;
    myWStrRepFirstWStrLow(pMyWStr, pWStr, pRepWStr);
    myWStrRepAllWStrLow(pMyWStr, pWStr, pRepWStr);
}
```
```python
void
```
```python
myAStrRepFirstAStrHigh(MyAString * pMyAStr,
```
```python
char
```
```python
* pAStr,
```
```python
char
```
```python
* pRepAStr)
{
```
```python
char
```
```python
* pFindAStr = strstr(pMyAStr->pAStr, pAStr);
```
```python
if
```
```python
(
```
```python
NULL
```
```python
== pFindAStr)
```
```python
return
```
```python
;
```
```python
int
```
```python
pAStrLen = strlen(pAStr);
```
```python
int
```
```python
pRepAStrLen = strlen(pRepAStr);
```
```python
int
```
```python
allAStrLen = strlen(pMyAStr->pAStr) +
```
```python
1
```
```python
+ (pRepAStrLen - pAStrLen);
```
```python
if
```
```python
(pAStrLen < pRepAStrLen)
    {
```
```python
if
```
```python
(allAStrLen < pMyAStr->memLen)
        {
            pMyAStr->pAStr = (
```
```python
char
```
```python
*)realloc(pMyAStr->pAStr, allAStrLen*
```
```python
sizeof
```
```python
(
```
```python
char
```
```python
));
            pMyAStr->memLen = allAStrLen;
        }
        pFindAStr = strstr(pMyAStr->pAStr, pAStr);
```
```python
int
```
```python
addAStrLen = pRepAStrLen - pAStrLen;
```
```python
for
```
```python
(
```
```python
char
```
```python
* p = pMyAStr->pAStr + strlen(pMyAStr->pAStr); p >= pFindAStr + pAStrLen; --p)
        {
            *(p + addAStrLen) = *p;
        }
```
```python
while
```
```python
(*pRepAStr)
        {
            *pFindAStr++ = *pRepAStr;
            ++pRepAStr;
        }
    }
```
```python
else
```
```python
if
```
```python
(pAStrLen == pRepAStrLen)
    {
```
```python
while
```
```python
(*pRepAStr)
        {
            *pFindAStr++ = *pRepAStr++;
        }
    }
```
```python
else
```
```python
{
```
```python
int
```
```python
subAStrLen = pRepAStrLen - pAStrLen;
```
```python
while
```
```python
(*pRepAStr)
        {
            *pFindAStr++ = *pRepAStr++;
        }
```
```python
char
```
```python
* pTemp = pFindAStr + pAStrLen;
```
```python
while
```
```python
(*pTemp++ = *(pTemp + subAStrLen));
    }
}
```
```python
void
```
```python
myAStrRepAllAStrHigh(MyAString * pMyAStr,
```
```python
char
```
```python
* pAStr,
```
```python
char
```
```python
* pRepAStr)
{
```
```python
if
```
```python
(
```
```python
NULL
```
```python
== strstr(pMyAStr->pAStr, pAStr))
```
```python
return
```
```python
;
    myAStrRepFirstAStrHigh(pMyAStr, pAStr, pRepAStr);
    myAStrRepAllAStrHigh(pMyAStr, pAStr, pRepAStr);
}
```
```python
void
```
```python
myWStrRepFirstWStrHigh(MyWString * pMyWStr,
```
```python
wchar_t
```
```python
* pWStr,
```
```python
wchar_t
```
```python
* pRepWStr)
{
```
```python
wchar_t
```
```python
* pFindWStr = wcsstr(pMyWStr->pWStr, pWStr);
```
```python
if
```
```python
(
```
```python
NULL
```
```python
== pFindWStr)
```
```python
return
```
```python
;
```
```python
int
```
```python
pWStrLen = wcslen(pWStr);
```
```python
int
```
```python
pRepWStrLen = wcslen(pRepWStr);
```
```python
if
```
```python
(pWStrLen < pRepWStrLen)
    {
```
```python
int
```
```python
totalWStrLen = wcslen(pMyWStr->pWStr) + (pRepWStrLen - pWStrLen) +
```
```python
1
```
```python
;
```
```python
if
```
```python
(pMyWStr->memLen < totalWStrLen)
        {
            pMyWStr->pWStr = (
```
```python
wchar_t
```
```python
*)realloc(pMyWStr->pWStr, totalWStrLen *
```
```python
sizeof
```
```python
(
```
```python
wchar_t
```
```python
));
            pMyWStr->memLen = totalWStrLen;
        }
        pFindWStr = wcsstr(pMyWStr->pWStr, pWStr);
```
```python
int
```
```python
myWStrLen = wcslen(pMyWStr->pWStr);
```
```python
int
```
```python
moveWStrLen = pRepWStrLen - pWStrLen;
```
```python
for
```
```python
(
```
```python
wchar_t
```
```python
* p = pMyWStr->pWStr + myWStrLen; p >= pFindWStr + pWStrLen; --p)
        {
            *(p + moveWStrLen) = *p;
        }
```
```python
while
```
```python
(*pRepWStr)
        {
            *pFindWStr++ = *pRepWStr++;
        }
    }
```
```python
else
```
```python
if
```
```python
(pWStrLen == pRepWStr)
    {
```
```python
while
```
```python
(*pRepWStr)
        {
            *pFindWStr++ = *pRepWStr++;
        }
    }
```
```python
else
```
```python
{
```
```python
int
```
```python
moveWStrLen = pWStrLen - pRepWStrLen;
```
```python
wchar_t
```
```python
* p = pFindWStr + pWStrLen - moveWStrLen;
```
```python
while
```
```python
(*p++ = *(p + moveWStrLen));
```
```python
while
```
```python
(*pRepWStr)
        {
            *pFindWStr++ = *pRepWStr++;
        }
    }
}
```
```python
void
```
```python
myWStrRepAllWStrHigh(MyWString * pMyWStr,
```
```python
wchar_t
```
```python
* pWStr,
```
```python
wchar_t
```
```python
* pRepWStr)
{
```
```python
if
```
```python
(
```
```python
NULL
```
```python
== wcsstr(pMyWStr->pWStr, pWStr))
```
```python
return
```
```python
;
    myWStrRepFirstWStrHigh(pMyWStr, pWStr, pRepWStr);
    myWStrRepAllWStrHigh(pMyWStr, pWStr, pRepWStr);
}
```
```python
/
```
```python
//main
```
```python
.c
```
```python
#define _CRT_SECURE_NO_WARNINGS
```
```python
#include "MyString.h"
```
```python
#include <locale.h>
```
```python
#include <stdio.h>
```
```python
int main(void)
{
    setlocale(
```
```python
LC_ALL
```
```python
,
```
```python
"zh-CN"
```
```python
);
```
```python
MyAString
```
```python
myAString;
```
```python
MyWString
```
```python
myWString;
    initMyAStrWithAStr(&myAString,
```
```python
"ABC123321CBA123"
```
```python
);
    initMyWStrWithWStr(&myWString,
```
```python
L
```
```python
"ABC123321CBA123"
```
```python
);
    myAStrAddAStr(&myAString,
```
```python
"HaHaHa嘻嘻嘻"
```
```python
);
    myWStrAddWStr(&myWString,
```
```python
L
```
```python
"XiXiXi哈哈哈"
```
```python
);
```
```python
//my
```
```python
AStrPrevInsertAStr(&myAString,
```
```python
"123"
```
```python
,
```
```python
"JKL"
```
```python
);
```
```python
//my
```
```python
AStrNextInsertAStr(&myAString,
```
```python
"123"
```
```python
,
```
```python
"JKL"
```
```python
);
```
```python
//my
```
```python
WStrPrevInsertWStr(&myWString,
```
```python
L
```
```python
"123"
```
```python
,
```
```python
L
```
```python
"JKL"
```
```python
);
```
```python
//my
```
```python
WStrNextInsertWStr(&myWString,
```
```python
L
```
```python
"123"
```
```python
,
```
```python
L
```
```python
"JKL"
```
```python
);
```
```python
//my
```
```python
AStrDelFirstAStr(&myAString,
```
```python
"ABC"
```
```python
);
```
```python
//my
```
```python
WStrDelFirstWStr(&myWString,
```
```python
L
```
```python
"ABC"
```
```python
);
```
```python
//my
```
```python
AStrDelAllAStr(&myAString,
```
```python
"123"
```
```python
);
```
```python
//my
```
```python
WStrDelAllWStr(&myWString,
```
```python
L
```
```python
"123"
```
```python
);
```
```python
//my
```
```python
AStrDelAllAStrByRec(&myAString,
```
```python
"123"
```
```python
);
```
```python
//my
```
```python
WStrDelAllWStrByRec(&myWString,
```
```python
L
```
```python
"123"
```
```python
);
```
```python
//my
```
```python
AStrRepFirstAStrLow(&myAString,
```
```python
"123"
```
```python
,
```
```python
"JKL"
```
```python
);
```
```python
//my
```
```python
WStrRepFirstWStrLow(&myWString,
```
```python
L
```
```python
"123"
```
```python
,
```
```python
L
```
```python
"JKL"
```
```python
);
```
```python
//my
```
```python
AStrRepAllAStrLow(&myAString,
```
```python
"123"
```
```python
,
```
```python
"JKL"
```
```python
);
```
```python
//my
```
```python
WStrRepAllWStrLow(&myWString,
```
```python
L
```
```python
"123"
```
```python
,
```
```python
L
```
```python
"JKL"
```
```python
);
```
```python
//my
```
```python
AStrRepFirstAStrHigh(&myAString,
```
```python
"123"
```
```python
,
```
```python
"JKL"
```
```python
);
```
```python
//my
```
```python
AStrRepAllAStrHigh(&myAString,
```
```python
"123"
```
```python
,
```
```python
"JKL"
```
```python
);
```
```python
//my
```
```python
WStrRepFirstWStrHigh(&myWString,
```
```python
L
```
```python
"123"
```
```python
,
```
```python
L
```
```python
"JKL"
```
```python
);
```
```python
//my
```
```python
WStrRepAllWStrHigh(&myWString,
```
```python
L
```
```python
"123"
```
```python
,
```
```python
L
```
```python
"JKL"
```
```python
);
    showMyAStr(&myAString);
    showMyWStr(&myWString);
```
```python
//printf
```
```python
(
```
```python
"%s \n"
```
```python
, myAStrAStr(&myAString,
```
```python
"123321"
```
```python
));
```
```python
//wprintf
```
```python
(
```
```python
L
```
```python
"%ws \n"
```
```python
, myWStrWStr(&myWString,
```
```python
L
```
```python
"123321"
```
```python
));
    system(
```
```python
"pause"
```
```python
);
}
```
程序片段(03):myarray.h+myarray.c+main.c
内容概要:**数组库**
```python
///myarray.h
```
```python
#pragma once
```
```python
//1.包含的时候,只包含一次[预编译的时候]
```
```python
#include <stdio.h>
```
```python
#include <stdlib.h>
```
```python
#include <memory.h>
```
```python
#define datatype int
```
```python
//2.double ,char-X->int * struct[扩展的时候,只能扩展基本数据类型]
```
```python
struct
```
```python
array
```
```python
{
```
```python
//3.[采用结构体进行数组模拟]
```
```python
datatype *pstart;
```
```python
//数组首地址
```
```python
int
```
```python
length;
```
```python
//长度[数组]
```
```python
int
```
```python
sortstat;
```
```python
//有序或者无序,0无序,1有序
```
```python
};
```
```python
struct
```
```python
Res
{
```
```python
//4.[采用结构体模拟字符串类型的数组,由于字符串数组当中的每个元素存储的是字符串地址,所以采用二级指针进行该数组的模拟动作]
```
```python
datatype **ppstat;
```
```python
//创建指针数组[二级指针(一级指针地址)-->一级指针(变量地址)-->零级指针(数据)]
```
```python
int
```
```python
n;
};
```
```python
//5.[为结构体模拟数组创建一些针对于该数组的操作函数]
```
```python
//[初始化]
```
```python
void
```
```python
init(
```
```python
struct
```
```python
array
```
```python
*parr);
```
```python
void
```
```python
initwithdata(
```
```python
struct
```
```python
array
```
```python
*parr, datatype data);
```
```python
void
```
```python
initwitharray(
```
```python
struct
```
```python
array
```
```python
*parr, datatype *pdata,
```
```python
int
```
```python
datalength);
```
```python
//[增加]
```
```python
void
```
```python
addobject(
```
```python
struct
```
```python
array
```
```python
*parr, datatype data);
```
```python
void
```
```python
addobjects(
```
```python
struct
```
```python
array
```
```python
*parr, datatype *pdata,
```
```python
int
```
```python
datalength);
```
```python
//[插入]
```
```python
void
```
```python
insertobject(
```
```python
struct
```
```python
array
```
```python
*parr, datatype data, datatype insertdata);
```
```python
//根据位置插入
```
```python
void
```
```python
insertobjects(
```
```python
struct
```
```python
array
```
```python
*parr, datatype data, datatype *pdata,
```
```python
int
```
```python
datalength);
```
```python
//[删除]
```
```python
void
```
```python
deletefirstobject(
```
```python
struct
```
```python
array
```
```python
*parr, datatype data);
```
```python
void
```
```python
deleteallobject(
```
```python
struct
```
```python
array
```
```python
*parr, datatype);
```
```python
//[修改]
```
```python
void
```
```python
changefirstobject(
```
```python
struct
```
```python
array
```
```python
*parr, datatype data, datatype newdata);
```
```python
void
```
```python
changeallobject(
```
```python
struct
```
```python
array
```
```python
*parr, datatype data, datatype newdata);
```
```python
//[查询]
```
```python
datatype * findfirst(
```
```python
struct
```
```python
array
```
```python
*parr, datatype data);
```
```python
//查找
```
```python
struct
```
```python
Res findall(
```
```python
struct
```
```python
array
```
```python
*parr, datatype data);
```
```python
//查找全部
```
```python
//[显示]
```
```python
void
```
```python
show(
```
```python
struct
```
```python
array
```
```python
*parr);
```
```python
//5.数组库扩展功能实现
```
```python
//      (1)排序:选择,插入,二分插入,冒泡,堆,快速,从左之右
```
```python
//      (2)插值查找,二分查找
```
```python
//      (3)初始化with可变参数
```
```python
///myarray.c
```
```python
#include "myarray.h"
```
```python
void
```
```python
init(
```
```python
struct
```
```python
array
```
```python
*parr)
{
```
```python
//1.[初始化数据结构]
```
```python
if
```
```python
(parr != NULL)
    {
        parr->pstart = NULL;
        parr->length =
```
```python
0
```
```python
;
        parr->sortstat =
```
```python
0
```
```python
;
    }
```
```python
else
```
```python
{
```
```python
printf
```
```python
(
```
```python
"init error!"
```
```python
);
    }
}
```
```python
void
```
```python
initwithdata(
```
```python
struct
```
```python
array
```
```python
*parr, datatype data)
{
```
```python
//2[.初始化结构体数据(单个)]
```
```python
if
```
```python
(parr != NULL)
    {
        parr->pstart =
```
```python
malloc
```
```python
(
```
```python
sizeof
```
```python
(datatype));
        *(parr->pstart) = data;
```
```python
//初始化
```
```python
parr->length =
```
```python
1
```
```python
;
        parr->sortstat =
```
```python
0
```
```python
;
    }
```
```python
else
```
```python
{
```
```python
printf
```
```python
(
```
```python
"initwithdata error!"
```
```python
);
    }
}
```
```python
void
```
```python
initwitharray(
```
```python
struct
```
```python
array
```
```python
*parr, datatype *pdata,
```
```python
int
```
```python
datalength)
{
```
```python
//3.[初始化结构体数据(多个)]
```
```python
if
```
```python
(parr != NULL)
    {
        parr->pstart =
```
```python
malloc
```
```python
(
```
```python
sizeof
```
```python
(datatype)*datalength);
```
```python
memcpy
```
```python
(parr->pstart, pdata,
```
```python
sizeof
```
```python
(datatype)*datalength);
        parr->length = datalength;
        parr->sortstat =
```
```python
0
```
```python
;
    }
```
```python
else
```
```python
{
```
```python
printf
```
```python
(
```
```python
"initwitharray error!"
```
```python
);
    }
}
```
```python
void
```
```python
addobject(
```
```python
struct
```
```python
array
```
```python
*parr, datatype data)
{
```
```python
if
```
```python
(parr != NULL)
    {
```
```python
//4.该结构体模拟的数组存在
```
```python
if
```
```python
(parr->pstart == NULL || parr->length ==
```
```python
0
```
```python
)
        {
```
```python
//5.该数组的状态处于初始化状态
```
```python
initwithdata(parr, data);
        }
```
```python
else
```
```python
{
```
```python
//6.数组操作说明:5 a[4]-->[5个元素-->最后一个元素为a[4]-->5这个索引为数组外尾第一个元素]
```
```python
parr->pstart = realloc(parr->pstart, (parr->length +
```
```python
1
```
```python
)*
```
```python
sizeof
```
```python
(datatype));
```
```python
//拓展内存
```
```python
parr->pstart[parr->length] = data;
```
```python
//插入
```
```python
parr->length +=
```
```python
1
```
```python
;
```
```python
//长度自增
```
```python
}
    }
```
```python
else
```
```python
{
```
```python
printf
```
```python
(
```
```python
"addobject error!"
```
```python
);
    }
}
```
```python
void
```
```python
addobjects(
```
```python
struct
```
```python
array
```
```python
*parr, datatype *pdata,
```
```python
int
```
```python
datalength)
{
```
```python
if
```
```python
(parr != NULL)
    {
```
```python
if
```
```python
(parr->pstart == NULL || parr->length ==
```
```python
0
```
```python
)
        {
            initwitharray(parr, pdata, datalength);
```
```python
//调用初始化
```
```python
}
```
```python
else
```
```python
{
```
```python
//7.说明:12345 a[4] &a[5]
```
```python
parr->pstart = realloc(parr->pstart, (parr->length + datalength)*
```
```python
sizeof
```
```python
(datatype));
```
```python
//拓展内存
```
```python
memcpy
```
```python
(parr->pstart + parr->length, pdata, datalength*
```
```python
sizeof
```
```python
(datatype));
```
```python
//8.追加一个数组的时候,可以指定位置进行追加动作,如果是追加多个数据,建议采用内存拷贝机制,提升效率
```
```python
parr->length += datalength;
```
```python
//长度自增
```
```python
}
    }
```
```python
else
```
```python
{
```
```python
printf
```
```python
(
```
```python
"addobjects error!"
```
```python
);
    }
}
```
```python
void
```
```python
insertobject(
```
```python
struct
```
```python
array
```
```python
*parr, datatype data, datatype insertdata)
{
```
```python
if
```
```python
(parr != NULL)
    {
        datatype *pfind = findfirst(parr, data);
```
```python
if
```
```python
(pfind == NULL)
        {
```
```python
printf
```
```python
(
```
```python
"can not insertobject error!"
```
```python
);
        }
```
```python
else
```
```python
{
```
```python
int
```
```python
curr = pfind - parr->pstart;
```
```python
//9.指针相减确定相对下标,当前数据的相对下标
```
```python
//printf("\n curr=%d", curr);//10.同类型的指针相减,自动除以该指针所指向的变量类型长度
```
```python
parr->pstart = realloc(parr->pstart, (parr->length +
```
```python
1
```
```python
)*
```
```python
sizeof
```
```python
(datatype));
```
```python
//拓展内存
```
```python
for
```
```python
(
```
```python
int
```
```python
i = parr->length -
```
```python
1
```
```python
; i >= curr; i--)
```
```python
//11.减一的目的是为了从最后一个元素开始进行数据的拖动
```
```python
{
                parr->pstart[i +
```
```python
1
```
```python
] = parr->pstart[i];
```
```python
//往后拖动
```
```python
}
            parr->pstart[curr] = insertdata;
```
```python
//插入数据
```
```python
parr->length +=
```
```python
1
```
```python
;
```
```python
//长度自增
```
```python
}
    }
```
```python
else
```
```python
{
```
```python
printf
```
```python
(
```
```python
"insertobject error!"
```
```python
);
    }
}
```
```python
void
```
```python
insertobjects(
```
```python
struct
```
```python
array
```
```python
*parr, datatype data, datatype *pdata,
```
```python
int
```
```python
datalength)
{
```
```python
if
```
```python
(parr != NULL)
    {
        datatype *pfind = findfirst(parr, data);
```
```python
if
```
```python
(pfind == NULL)
        {
```
```python
printf
```
```python
(
```
```python
"can not insertobject error!"
```
```python
);
        }
```
```python
else
```
```python
{
```
```python
int
```
```python
curr = pfind - parr->pstart;
            parr->pstart = realloc(parr->pstart, (parr->length + datalength)*
```
```python
sizeof
```
```python
(datatype));
```
```python
for
```
```python
(
```
```python
int
```
```python
i = parr->length -
```
```python
1
```
```python
; i >= curr; i--)
            {
                parr->pstart[i + datalength] = parr->pstart[i];
            }
```
```python
memcpy
```
```python
(parr->pstart + curr, pdata, datalength*
```
```python
sizeof
```
```python
(datatype));
```
```python
//拷贝数组
```
```python
parr->length += datalength;
```
```python
//修改长度
```
```python
}
    }
```
```python
else
```
```python
{
```
```python
printf
```
```python
(
```
```python
"insertobjects error!"
```
```python
);
    }
}
```
```python
void
```
```python
deletefirstobject(
```
```python
struct
```
```python
array
```
```python
*parr, datatype data)
{
```
```python
if
```
```python
(parr!=NULL)
    {
        datatype *pfind = findfirst(parr, data);
```
```python
if
```
```python
(pfind==NULL)
        {
```
```python
printf
```
```python
(
```
```python
"can not find deleteerror!"
```
```python
);
        }
```
```python
else
```
```python
{
```
```python
int
```
```python
curr = pfind - parr->pstart;
```
```python
//指针相减确定下标,当前数据的相对下标
```
```python
for
```
```python
(
```
```python
int
```
```python
i = curr; i < parr->length -
```
```python
1
```
```python
; i++)
            {
                parr->pstart[i] = parr->pstart[i +
```
```python
1
```
```python
];
```
```python
//删除,从后向前移动
```
```python
}
            parr->length -=
```
```python
1
```
```python
;
```
```python
//长度自减
```
```python
parr->pstart = realloc(parr->pstart, (parr->length)*
```
```python
sizeof
```
```python
(datatype));
```
```python
//压缩内存
```
```python
}
    }
```
```python
else
```
```python
{
```
```python
printf
```
```python
(
```
```python
"deleteobject error!"
```
```python
);
    }
}
```
```python
void
```
```python
deleteallobject(
```
```python
struct
```
```python
array
```
```python
*parr, datatype data)
{
```
```python
if
```
```python
(parr!=NULL)
    {
```
```python
for
```
```python
(
```
```python
int
```
```python
*pcurr = findfirst(parr, data); pcurr != NULL; pcurr = findfirst(parr, data))
        {
            deletefirstobject(parr, data);
        }
    }
```
```python
else
```
```python
{
```
```python
printf
```
```python
(
```
```python
"deleteobject error!"
```
```python
);
    }
}
```
```python
void
```
```python
changefirstobject(
```
```python
struct
```
```python
array
```
```python
*parr, datatype data, datatype newdata)
{
```
```python
if
```
```python
(parr != NULL)
    {
        datatype *pfind = findfirst(parr, data);
```
```python
if
```
```python
(pfind == NULL)
        {
```
```python
printf
```
```python
(
```
```python
"can not find changeobject error!"
```
```python
);
        }
```
```python
else
```
```python
{
            *pfind = newdata;
        }
    }
```
```python
else
```
```python
{
```
```python
printf
```
```python
(
```
```python
"deleteobject error"
```
```python
);
    }
}
```
```python
void
```
```python
changeallobject(
```
```python
struct
```
```python
array
```
```python
*parr, datatype data, datatype newdata)
{
```
```python
if
```
```python
(parr!=NULL)
    {
```
```python
for
```
```python
(
```
```python
int
```
```python
*pcurr = findfirst(parr, data); pcurr != NULL; pcurr = findfirst(parr, data))
        {
            changefirstobject(parr, data, newdata);
        }
    }
```
```python
else
```
```python
{
```
```python
printf
```
```python
(
```
```python
"changeallobject error"
```
```python
);
    }
}
datatype * findfirst(
```
```python
struct
```
```python
array
```
```python
*parr, datatype data)
{
```
```python
if
```
```python
(parr == NULL || parr->pstart == NULL || parr->length ==
```
```python
0
```
```python
)
    {
```
```python
printf
```
```python
(
```
```python
"没有数据咋查找?"
```
```python
);
```
```python
return
```
```python
NULL;
    }
```
```python
else
```
```python
{
```
```python
//5 0-4
```
```python
datatype *pfind = NULL;
```
```python
for
```
```python
(
```
```python
int
```
```python
i =
```
```python
0
```
```python
; i < parr->length; i++)
        {
```
```python
if
```
```python
(data == parr->pstart[i])
            {
                pfind = parr->pstart[i];
```
```python
//parr->pstart+i
```
```python
break
```
```python
;
            }
        }
```
```python
return
```
```python
pfind;
    }
}
```
```python
struct
```
```python
Res findall(
```
```python
struct
```
```python
array
```
```python
*parr, datatype data)
{
```
```python
struct
```
```python
Res ResA;
    ResA.n =
```
```python
0
```
```python
;
```
```python
//统计元素个数
```
```python
for
```
```python
(
```
```python
int
```
```python
i =
```
```python
0
```
```python
; i < parr->length; i++)
    {
```
```python
if
```
```python
(data==parr->pstart[i])
```
```python
//基本完成
```
```python
{
            ResA.n++;
        }
    }
    ResA.ppstat =
```
```python
malloc
```
```python
(
```
```python
sizeof
```
```python
(datatype *)*ResA.n);
```
```python
//分配内存[指针数组占用]
```
```python
int
```
```python
j =
```
```python
0
```
```python
;
```
```python
//代表下标
```
```python
for
```
```python
(
```
```python
int
```
```python
i =
```
```python
0
```
```python
; i < parr->length; i++)
    {
```
```python
if
```
```python
(data==parr->pstart[i])
        {
            ResA.ppstat[j++] = parr->pstart + i;
```
```python
//保存地址
```
```python
}
    }
```
```python
return
```
```python
ResA;
}
```
```python
void
```
```python
show(
```
```python
struct
```
```python
array
```
```python
*parr)
{
```
```python
if
```
```python
(parr == NULL || parr->pstart == NULL || parr->length ==
```
```python
0
```
```python
)
    {
```
```python
printf
```
```python
(
```
```python
"没有数据咋显示?"
```
```python
);
```
```python
return
```
```python
;
    }
```
```python
else
```
```python
{
```
```python
//5 0-4
```
```python
printf
```
```python
(
```
```python
"\n数组此时状态\n"
```
```python
);
```
```python
for
```
```python
(
```
```python
int
```
```python
i =
```
```python
0
```
```python
; i < parr->length; i++)
        {
```
```python
printf
```
```python
(
```
```python
"%4d"
```
```python
, parr->pstart[i]);
```
```python
//打印数据
```
```python
}
    }
}
```
```python
///main.c
```
```python
#include "myarray.h"
```
```python
void
```
```python
main()
{
```
```python
struct
```
```python
array
```
```python
mydata;
```
```python
int
```
```python
a[
```
```python
10
```
```python
] = {
```
```python
1
```
```python
,
```
```python
2
```
```python
,
```
```python
6
```
```python
,
```
```python
4
```
```python
,
```
```python
5
```
```python
,
```
```python
6
```
```python
,
```
```python
7
```
```python
,
```
```python
8
```
```python
,
```
```python
9
```
```python
,
```
```python
6
```
```python
};
```
```python
int
```
```python
b[
```
```python
5
```
```python
] = {
```
```python
11
```
```python
,
```
```python
12
```
```python
,
```
```python
13
```
```python
,
```
```python
14
```
```python
};
```
```python
int
```
```python
c[
```
```python
4
```
```python
] = {
```
```python
21
```
```python
,
```
```python
22
```
```python
,
```
```python
23
```
```python
,
```
```python
24
```
```python
};
    initwitharray(&mydata, a,
```
```python
10
```
```python
);
    show(&mydata);
```
```python
//changeallobject(&mydata, 6, 660);
```
```python
//changefirstobject(&mydata,5, 950);
```
```python
//insertobjects(&mydata, 8, c, 4);
```
```python
//deleteallobject(&mydata, 6);
```
```python
//deletefirstobject(&mydata, 6);
```
```python
//addobjects(&mydata, b, 5);
```
```python
//addobjects(&mydata, c, 4);
```
```python
//insertobject(&mydata, 1,999);//根据位置插入
```
```python
struct
```
```python
Res res = findall(&mydata,
```
```python
6
```
```python
);
```
```python
for
```
```python
(
```
```python
int
```
```python
i =
```
```python
0
```
```python
; i < res.n; i++)
    {
```
```python
printf
```
```python
(
```
```python
"\n%p,%d"
```
```python
, res.ppstat[i], *res.ppstat[i]);
    }
    show(&mydata);
    system(
```
```python
"pause"
```
```python
);
}
```

