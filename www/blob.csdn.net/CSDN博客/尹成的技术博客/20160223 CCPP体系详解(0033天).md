
# 20160223.CCPP体系详解(0033天) - 尹成的技术博客 - CSDN博客

置顶2016年03月20日 22:32:38[尹成](https://me.csdn.net/yincheng01)阅读数：2442个人分类：[CCPP](https://blog.csdn.net/yincheng01/article/category/6096925)


程序片段(01):MyArray.h+MyArray.c+main.c
内容概要:**数组库**
```python
///MyArray.h
```
```python
#pragma
```
```python
once
```
```python
#define
```
```python
DT int
```
```python
//类型通用
```
```python
typedef struct
{
    DT
```
```python
*
```
```python
pStart;
```
```python
//起始地址
```
```python
int len;
```
```python
//元素个数
```
```python
int sortState;
```
```python
//排序状态(0无序+1有序)
```
```python
}
```
```python
Array
```
```python
;
typedef struct
{
    DT
```
```python
**
```
```python
ppStart;
    int len;
}ResArray;
```
```python
void
```
```python
initArray(
```
```python
Array
```
```python
*
```
```python
pArray);
```
```python
void
```
```python
initArrayWithData(
```
```python
Array
```
```python
*
```
```python
pArray, DT
```
```python
data
```
```python
);
```
```python
void
```
```python
initArrayWithDatas(
```
```python
Array
```
```python
*
```
```python
pArray, DT
```
```python
*
```
```python
pDatas, int pDatasLen);
```
```python
void
```
```python
showArray(
```
```python
Array
```
```python
*
```
```python
pArray);
```
```python
void
```
```python
arrayAddData(
```
```python
Array
```
```python
*
```
```python
pArray, DT
```
```python
data
```
```python
);
```
```python
void
```
```python
arrayAddDatas(
```
```python
Array
```
```python
*
```
```python
pArray, DT
```
```python
*
```
```python
pDatas, int pDatasLen);
DT
```
```python
*
```
```python
arrayFindFirstData(
```
```python
Array
```
```python
*
```
```python
pArray, DT
```
```python
data
```
```python
);
ResArray arrayFindAllDatas(
```
```python
Array
```
```python
*
```
```python
pArray, DT
```
```python
data
```
```python
);
```
```python
void
```
```python
arrayInsertData(
```
```python
Array
```
```python
*
```
```python
pArray, DT
```
```python
data
```
```python
, DT insertData);
```
```python
void
```
```python
arrayInsertDatas(
```
```python
Array
```
```python
*
```
```python
pArray, DT
```
```python
data
```
```python
, DT
```
```python
*
```
```python
pInsertDatas, int pInsertDatasLen);
```
```python
void
```
```python
arrayDelFirstData(
```
```python
Array
```
```python
*
```
```python
pArray, DT
```
```python
data
```
```python
);
```
```python
void
```
```python
arrayDelAllData(
```
```python
Array
```
```python
*
```
```python
pArray, DT
```
```python
data
```
```python
);
```
```python
void
```
```python
arrayUpdateFirstData(
```
```python
Array
```
```python
*
```
```python
pArray, DT oldData, DT newData);
```
```python
void
```
```python
arrayUpdateAllData(
```
```python
Array
```
```python
*
```
```python
pArray , DT oldData, DT newData);
```
```python
//扩展功能:
```
```python
//  1.排序:
```
```python
//      冒泡(左右)-->选择-->插入-->快速(单线程)-->希尔(多线程)-->堆排序
```
```python
//  2.查找:
```
```python
//      二分-->插值
```
```python
//  3.可变:
```
```python
//      可变参数
```
```python
//  4.多线程检索
```
```python
///MyArray.c
```
```python
#include "MyArray.h"
```
```python
#include <stdlib.h>
```
```python
#include <memory.h>
```
```python
#include <stdio.h>
```
```python
void
```
```python
initArray(Array * pArray)
{
```
```python
if
```
```python
(NULL == pArray)
    {
```
```python
printf
```
```python
(
```
```python
"init error! \n"
```
```python
);
```
```python
abort
```
```python
();
    }
    pArray->pStart = NULL;
    pArray->len =
```
```python
0
```
```python
;
    pArray->sortState =
```
```python
0
```
```python
;
}
```
```python
void
```
```python
initArrayWithData(Array * pArray, DT data)
{
```
```python
if
```
```python
(NULL == pArray)
    {
```
```python
printf
```
```python
(
```
```python
"init error! \n"
```
```python
);
```
```python
abort
```
```python
();
    }
    pArray->pStart = (DT *)
```
```python
malloc
```
```python
(
```
```python
sizeof
```
```python
(DT));
    *(pArray->pStart) = data;
    pArray->len =
```
```python
1
```
```python
;
    pArray->sortState =
```
```python
0
```
```python
;
}
```
```python
void
```
```python
initArrayWithDatas(Array * pArray, DT * pDatas,
```
```python
int
```
```python
pDatasLen)
{
```
```python
if
```
```python
(NULL == pArray)
    {
```
```python
printf
```
```python
(
```
```python
"init error! \n"
```
```python
);
```
```python
abort
```
```python
();
    }
    pArray->pStart = (DT *)
```
```python
malloc
```
```python
(pDatasLen *
```
```python
sizeof
```
```python
(DT));
```
```python
memcpy
```
```python
(pArray->pStart, pDatas, pDatasLen *
```
```python
sizeof
```
```python
(DT));
    pArray->len = pDatasLen;
    pArray->sortState =
```
```python
0
```
```python
;
}
```
```python
void
```
```python
showArray(Array * pArray)
{
```
```python
if
```
```python
(NULL == pArray || NULL == pArray->pStart ||
```
```python
0
```
```python
== pArray->len)
    {
```
```python
printf
```
```python
(
```
```python
"没有数据咋打印? \n"
```
```python
);
```
```python
abort
```
```python
();
    }
```
```python
printf
```
```python
(
```
```python
"数组此时状态: \n"
```
```python
);
```
```python
for
```
```python
(
```
```python
int
```
```python
i =
```
```python
0
```
```python
; i < pArray->len; ++i)
    {
```
```python
//优先级问题:从第一个标识符开始进行判断(从左往右不断结合)
```
```python
printf
```
```python
(
```
```python
"%4d"
```
```python
, pArray->pStart[i]);
    }
}
```
```python
void
```
```python
arrayAddData(Array * pArray, DT data)
{
```
```python
if
```
```python
(NULL == pArray)
    {
```
```python
printf
```
```python
(
```
```python
"数组根本不存在! \n"
```
```python
);
```
```python
abort
```
```python
();
    }
```
```python
if
```
```python
(NULL == pArray->pStart)
    {
        initArrayWithData(pArray, data);
    }
```
```python
else
```
```python
{
        pArray->pStart = (DT *)realloc(pArray->pStart, (pArray->len +
```
```python
1
```
```python
) *
```
```python
sizeof
```
```python
(DT));
        pArray->pStart[pArray->len] = data;
        ++pArray->len;
    }
}
```
```python
void
```
```python
arrayAddDatas(Array * pArray, DT * pDatas,
```
```python
int
```
```python
pDatasLen)
{
```
```python
if
```
```python
(NULL == pArray)
    {
```
```python
printf
```
```python
(
```
```python
"数组根本不存在! \n"
```
```python
);
```
```python
abort
```
```python
();
    }
```
```python
if
```
```python
(NULL == pArray->pStart)
    {
        initArrayWithDatas(pArray, pDatas, pDatasLen);
    }
```
```python
else
```
```python
{
        pArray->pStart = (DT *)realloc(pArray->pStart, (pArray->len + pDatasLen) *
```
```python
sizeof
```
```python
(DT));
```
```python
memcpy
```
```python
(pArray->pStart + pArray->len, pDatas, pDatasLen *
```
```python
sizeof
```
```python
(DT));
        pArray->len += pDatasLen;
    }
}
DT * arrayFindFirstData(Array * pArray, DT data)
{
```
```python
if
```
```python
(NULL == pArray)
    {
```
```python
printf
```
```python
(
```
```python
"数组根本不存在! \n"
```
```python
);
```
```python
abort
```
```python
();
    }
```
```python
if
```
```python
(NULL == pArray->pStart)
    {
```
```python
printf
```
```python
(
```
```python
"数组未初始化数据! \n"
```
```python
);
```
```python
abort
```
```python
();
    }
```
```python
if
```
```python
(
```
```python
0
```
```python
== pArray->len)
    {
```
```python
printf
```
```python
(
```
```python
"数组没有数据! \n"
```
```python
);
```
```python
abort
```
```python
();
    }
```
```python
for
```
```python
(
```
```python
int
```
```python
i =
```
```python
0
```
```python
; i < pArray->len; ++i)
    {
```
```python
if
```
```python
(data == *(pArray->pStart + i))
        {
```
```python
return
```
```python
pArray->pStart + i;
        }
    }
```
```python
return
```
```python
NULL;
}
ResArray arrayFindAllDatas(Array * pArray, DT data)
{
```
```python
if
```
```python
(NULL == pArray)
    {
```
```python
printf
```
```python
(
```
```python
"数组根本不存在! \n"
```
```python
);
```
```python
abort
```
```python
();
    }
```
```python
if
```
```python
(NULL == pArray->pStart)
    {
```
```python
printf
```
```python
(
```
```python
"数组未初始化数据! \n"
```
```python
);
```
```python
abort
```
```python
();
    }
    ResArray resArray;
    resArray.len =
```
```python
0
```
```python
;
```
```python
for
```
```python
(
```
```python
int
```
```python
i =
```
```python
0
```
```python
; i < pArray->len; ++i)
    {
```
```python
if
```
```python
(data == pArray->pStart[i])
        {
            ++resArray.len;
        }
    }
    resArray.ppStart = (DT **)
```
```python
malloc
```
```python
(resArray.len *
```
```python
sizeof
```
```python
(DT *));
```
```python
int
```
```python
j =
```
```python
0
```
```python
;
```
```python
for
```
```python
(
```
```python
int
```
```python
i =
```
```python
0
```
```python
; i < pArray->len; ++i)
    {
```
```python
if
```
```python
(data == pArray->pStart[i])
        {
            resArray.ppStart[j++] = pArray->pStart + i;
        }
    }
```
```python
return
```
```python
resArray;
}
```
```python
void
```
```python
arrayInsertData(Array * pArray, DT data, DT insertData)
{
```
```python
if
```
```python
(NULL == pArray)
    {
```
```python
printf
```
```python
(
```
```python
"数组根本不存在! \n"
```
```python
);
```
```python
abort
```
```python
();
    }
```
```python
if
```
```python
(NULL == pArray->pStart)
    {
```
```python
printf
```
```python
(
```
```python
"数组没有初始化数据! \n"
```
```python
);
```
```python
abort
```
```python
();
    }
```
```python
if
```
```python
(
```
```python
0
```
```python
== pArray->len)
    {
```
```python
printf
```
```python
(
```
```python
"数组没有数据! \n"
```
```python
);
```
```python
abort
```
```python
();
    }
    DT * pFindData = arrayFindFirstData(pArray, data);
```
```python
if
```
```python
(NULL == pFindData)
    {
```
```python
printf
```
```python
(
```
```python
"未能找到数据待插入的位置! \n"
```
```python
);
```
```python
abort
```
```python
();
    }
```
```python
int
```
```python
relPos = pFindData - pArray->pStart;
    pArray->pStart = (DT *)realloc(pArray->pStart, (pArray->len +
```
```python
1
```
```python
) *
```
```python
sizeof
```
```python
(DT));
```
```python
for
```
```python
(
```
```python
int
```
```python
i = pArray->len; i >= relPos; --i)
    {
        *(pArray->pStart + i +
```
```python
1
```
```python
) = *(pArray->pStart + i);
    }
    *(pArray->pStart + relPos) = insertData;
    ++pArray->len;
}
```
```python
void
```
```python
arrayInsertDatas(Array * pArray, DT data, DT * pInsertDatas,
```
```python
int
```
```python
pInsertDatasLen)
{
```
```python
if
```
```python
(NULL == pArray)
    {
```
```python
printf
```
```python
(
```
```python
"数组根本不存在! \n"
```
```python
);
```
```python
abort
```
```python
();
    }
```
```python
if
```
```python
(NULL == pArray->pStart)
    {
```
```python
printf
```
```python
(
```
```python
"数组未初始化数据! \n"
```
```python
);
```
```python
abort
```
```python
();
    }
```
```python
if
```
```python
(
```
```python
0
```
```python
== pArray->len)
    {
```
```python
printf
```
```python
(
```
```python
"数组没有数据! \n"
```
```python
);
```
```python
abort
```
```python
();
    }
    DT * pFindData = arrayFindFirstData(pArray, data);
```
```python
if
```
```python
(NULL == pFindData)
    {
```
```python
printf
```
```python
(
```
```python
"未能找到数据待插入的位置! \n"
```
```python
);
```
```python
abort
```
```python
();
    }
```
```python
int
```
```python
relPos = pFindData - pArray->pStart;
    pArray->pStart = (DT *)realloc(pArray->pStart, (pArray->len + pInsertDatasLen) *
```
```python
sizeof
```
```python
(DT));
```
```python
for
```
```python
(
```
```python
int
```
```python
i = pArray->len; i >= relPos; --i)
    {
        *(pArray->pStart + i + pInsertDatasLen) = *(pArray->pStart + i);
    }
```
```python
memcpy
```
```python
(pArray->pStart + relPos, pInsertDatas, pInsertDatasLen *
```
```python
sizeof
```
```python
(DT));
    pArray->len += pInsertDatasLen;
}
```
```python
void
```
```python
arrayDelFirstData(Array * pArray, DT data)
{
```
```python
if
```
```python
(NULL == pArray)
    {
```
```python
printf
```
```python
(
```
```python
"数组不存在! \n"
```
```python
);
```
```python
abort
```
```python
();
    }
```
```python
if
```
```python
(NULL == pArray->pStart)
    {
```
```python
printf
```
```python
(
```
```python
"数组无初始化数据! \n"
```
```python
);
```
```python
abort
```
```python
();
    }
```
```python
if
```
```python
(
```
```python
0
```
```python
== pArray->len)
    {
```
```python
printf
```
```python
(
```
```python
"数组没有数据! \n"
```
```python
);
```
```python
abort
```
```python
();
    }
    DT * pFindData = arrayFindFirstData(pArray, data);
```
```python
if
```
```python
(NULL == pFindData)
    {
```
```python
printf
```
```python
(
```
```python
"没有找到待删除数据! \n"
```
```python
);
```
```python
abort
```
```python
();
    }
```
```python
int
```
```python
relPos = pFindData - pArray->pStart;
```
```python
for
```
```python
(
```
```python
int
```
```python
i = relPos; i < pArray->len -
```
```python
1
```
```python
; ++i)
    {
        *(pArray->pStart + i) = *(pArray->pStart + i +
```
```python
1
```
```python
);
    }
    --pArray->len;
    pArray->pStart = (DT *)realloc(pArray->pStart, pArray->len *
```
```python
sizeof
```
```python
(DT));
}
```
```python
void
```
```python
arrayDelAllData(Array * pArray, DT data)
{
```
```python
if
```
```python
(NULL == pArray)
    {
```
```python
printf
```
```python
(
```
```python
"数组不存在! \n"
```
```python
);
```
```python
abort
```
```python
();
    }
```
```python
if
```
```python
(NULL == pArray->pStart)
    {
```
```python
printf
```
```python
(
```
```python
"数组无初始化数据! \n"
```
```python
);
```
```python
abort
```
```python
();
    }
```
```python
if
```
```python
(
```
```python
0
```
```python
== pArray->len)
    {
```
```python
printf
```
```python
(
```
```python
"数组没有数据! \n"
```
```python
);
```
```python
abort
```
```python
();
    }
```
```python
for
```
```python
(DT * p = arrayFindFirstData(pArray, data); NULL != p; p = arrayFindFirstData(pArray, data))
    {
        arrayDelFirstData(pArray, data);
    }
}
```
```python
void
```
```python
arrayUpdateFirstData(Array * pArray, DT oldData, DT newData)
{
```
```python
if
```
```python
(NULL == pArray)
    {
```
```python
printf
```
```python
(
```
```python
"数组不存在! \n"
```
```python
);
```
```python
abort
```
```python
();
    }
```
```python
if
```
```python
(NULL == pArray->pStart)
    {
```
```python
printf
```
```python
(
```
```python
"数组未初始化数据! \n"
```
```python
);
```
```python
abort
```
```python
();
    }
```
```python
if
```
```python
(
```
```python
0
```
```python
== pArray->len)
    {
```
```python
printf
```
```python
(
```
```python
"数组没有数据! \n"
```
```python
);
```
```python
abort
```
```python
();
    }
    DT * pFindData = arrayFindFirstData(pArray, oldData);
```
```python
if
```
```python
(NULL == pFindData)
    {
```
```python
printf
```
```python
(
```
```python
"未能找到待替换的数据! \n"
```
```python
);
```
```python
abort
```
```python
();
    }
    *pFindData = newData;
}
```
```python
void
```
```python
arrayUpdateAllData(Array * pArray, DT oldData, DT newData)
{
```
```python
if
```
```python
(NULL == pArray)
    {
```
```python
printf
```
```python
(
```
```python
"数组不存在! \n"
```
```python
);
```
```python
abort
```
```python
();
    }
```
```python
if
```
```python
(NULL == pArray->pStart)
    {
```
```python
printf
```
```python
(
```
```python
"数组未初始化数据! \n"
```
```python
);
```
```python
abort
```
```python
();
    }
```
```python
if
```
```python
(
```
```python
0
```
```python
== pArray->len)
    {
```
```python
printf
```
```python
(
```
```python
"数组没有数据! \n"
```
```python
);
```
```python
abort
```
```python
();
    }
```
```python
for
```
```python
(DT * p = arrayFindFirstData(pArray, oldData); NULL != p; p = arrayFindFirstData(pArray, oldData))
    {
        arrayUpdateFirstData(pArray, oldData, newData);
    }
}
```
```python
///main.c
```
```python
#include "MyArray.h"
```
```python
#include <stdlib.h>
```
```python
int
```
```python
main(
```
```python
void
```
```python
)
{
    Array
```
```python
array
```
```python
;
```
```python
//initArrayWithData(&array, 1);
```
```python
int
```
```python
intArr1[
```
```python
5
```
```python
] = {
```
```python
1
```
```python
,
```
```python
2
```
```python
,
```
```python
3
```
```python
,
```
```python
4
```
```python
,
```
```python
5
```
```python
};
    initArrayWithDatas(&
```
```python
array
```
```python
, intArr1,
```
```python
5
```
```python
);
```
```python
//arrayAddData(&array, 6);
```
```python
int
```
```python
intArr2[
```
```python
3
```
```python
] = {
```
```python
6
```
```python
,
```
```python
7
```
```python
,
```
```python
8
```
```python
};
    arrayAddDatas(&
```
```python
array
```
```python
, intArr2,
```
```python
3
```
```python
);
```
```python
//arrayInsertData(&array, 6, 7);
```
```python
int
```
```python
intArr3[
```
```python
3
```
```python
] = {
```
```python
8
```
```python
,
```
```python
9
```
```python
,
```
```python
10
```
```python
};
    arrayInsertDatas(&
```
```python
array
```
```python
,
```
```python
6
```
```python
, intArr3,
```
```python
3
```
```python
);
```
```python
//arrayDelFirstData(&array, 6);
```
```python
//arrayDelAllData(&array, 8);
```
```python
//arrayUpdateFirstData(&array, 8, 11);
```
```python
arrayUpdateAllData(&
```
```python
array
```
```python
,
```
```python
8
```
```python
,
```
```python
11
```
```python
);
    showArray(&
```
```python
array
```
```python
);

    system(
```
```python
"pause"
```
```python
);
}
```
```python
//void main()
```
```python
//{
```
```python
//  struct array  mydata;
```
```python
//  int  a[10] = { 1, 2, 6, 4, 5, 6, 7, 8, 9, 6 };
```
```python
//  int b[5] = { 11, 12, 13, 14 };
```
```python
//  int c[4] = { 21, 22, 23, 24 };
```
```python
//  initwitharray(&mydata, a, 10);
```
```python
//  show(&mydata);
```
```python
//
```
```python
//  //changeallobject(&mydata, 6, 660);
```
```python
//  //changefirstobject(&mydata,5, 950);
```
```python
//  //insertobjects(&mydata, 8, c, 4);
```
```python
//  //deleteallobject(&mydata, 6);
```
```python
//  //deletefirstobject(&mydata, 6);
```
```python
//  //addobjects(&mydata, b, 5);
```
```python
//  //addobjects(&mydata, c, 4);
```
```python
//  //insertobject(&mydata, 1,999);//根据位置插入
```
```python
//  struct  Res res = findall(&mydata, 6);
```
```python
//  for (int i = 0; i < res.n;i++)
```
```python
//  {
```
```python
//      printf("\n%p,%d", res.ppstart[i], *res.ppstart[i]);
```
```python
//  }
```
```python
//
```
```python
//  show(&mydata);
```
```python
//
```
```python
//
```
```python
//
```
```python
//
```
```python
//
```
```python
//
```
```python
//  system("pause");
```
```python
//}
```
程序片段(02):MyArray.h+MyArray.c+main.c
内容概要:**数组库**
```python
///MyArray.h
```
```python
#pragma
```
```python
once
```
```python
//#define DT int
```
```python
#define
```
```python
DT char
```
```python
*
```
```python
typedef struct
{
    DT
```
```python
*
```
```python
pStart;
    int len;
    int sortState;
}
```
```python
Array
```
```python
;
typedef struct
{
    DT
```
```python
**
```
```python
ppStart;
    int len;
}ResArray;
typedef int (
```
```python
*
```
```python
EqualFunP)(DT
```
```python
*
```
```python
, DT
```
```python
*
```
```python
);
typedef
```
```python
void
```
```python
(
```
```python
*
```
```python
PrintFunP)(
```
```python
Array
```
```python
*
```
```python
pArray);
```
```python
void
```
```python
initArray(
```
```python
Array
```
```python
*
```
```python
pArray);
```
```python
void
```
```python
initArrayWithData(
```
```python
Array
```
```python
*
```
```python
pArray, DT
```
```python
data
```
```python
);
```
```python
void
```
```python
initArrayWithDatas(
```
```python
Array
```
```python
*
```
```python
pArray, DT
```
```python
*
```
```python
pDatas, int pDataLen);
int isValidA(
```
```python
Array
```
```python
*
```
```python
pArray);
int isValidB(
```
```python
Array
```
```python
*
```
```python
pArray);
int isValidC(
```
```python
Array
```
```python
*
```
```python
pArray);
int isValidD(
```
```python
Array
```
```python
*
```
```python
pArray);
int isValidE(
```
```python
Array
```
```python
*
```
```python
pArray);
```
```python
void
```
```python
printInt(
```
```python
Array
```
```python
*
```
```python
pArray);
```
```python
void
```
```python
printString(
```
```python
Array
```
```python
*
```
```python
pArray);
```
```python
void
```
```python
showArray(
```
```python
Array
```
```python
*
```
```python
pArray, PrintFunP funP);
```
```python
void
```
```python
arrayAddData(
```
```python
Array
```
```python
*
```
```python
pArray, DT
```
```python
data
```
```python
);
```
```python
void
```
```python
arrayAddDatas(
```
```python
Array
```
```python
*
```
```python
pArray, DT
```
```python
*
```
```python
pDatas, int pDatasLen);
int intIsEqual(int
```
```python
*
```
```python
pDataA, int
```
```python
*
```
```python
pDataB);
int strIsEqual(char
```
```python
**
```
```python
pDataA, char
```
```python
**
```
```python
pDataB);
DT
```
```python
*
```
```python
arraySelectFirstData(EqualFunP funP,
```
```python
Array
```
```python
*
```
```python
pArray, DT
```
```python
data
```
```python
);
ResArray arraySelectAllDatas(EqualFunP funP,
```
```python
Array
```
```python
*
```
```python
pArray, DT
```
```python
data
```
```python
);
```
```python
void
```
```python
arrayInsertData(
```
```python
Array
```
```python
*
```
```python
pArray, DT
```
```python
data
```
```python
, DT insertData);
```
```python
void
```
```python
arrayInsertDatas(
```
```python
Array
```
```python
*
```
```python
pArray, DT
```
```python
data
```
```python
, DT
```
```python
*
```
```python
pInsertDatas, int pInsertDatasLen);
```
```python
void
```
```python
arrayDeleteFirstData(
```
```python
Array
```
```python
*
```
```python
pArray, DT
```
```python
data
```
```python
);
```
```python
void
```
```python
arrayDeleteAllDatas(
```
```python
Array
```
```python
*
```
```python
pArray, DT
```
```python
data
```
```python
);
```
```python
void
```
```python
arrayUpdateFirstData(
```
```python
Array
```
```python
*
```
```python
pArray, DT oldData, DT newData);
```
```python
void
```
```python
arrayUpdateAllDatas(
```
```python
Array
```
```python
*
```
```python
pArray, DT oldData, DT newData);
```
```python
//数组库拓展功能:
```
```python
//  1.排序:
```
```python
//      冒泡->选择->插入->堆排序->快速(单线程)->希尔(多线程)
```
```python
//  2.查找:
```
```python
//      二分->插值->多线程
```
```python
//  3.可变参数
```
```python
//      可变参数拓展
```
```python
///MyArray.c
```
```python
#include "MyArray.h"
```
```python
#include <stdlib.h>
```
```python
#include <stdio.h>
```
```python
#include <memory.h>
```
```python
#include <string.h>
```
```python
void
```
```python
initArray(Array * pArray)
{
```
```python
if
```
```python
(NULL == pArray)
    {
```
```python
printf
```
```python
(
```
```python
"数组不存在! \n"
```
```python
);
```
```python
abort
```
```python
();
    }
    (*pArray).pStart = NULL;
    (*pArray).len =
```
```python
0
```
```python
;
    (*pArray).sortState =
```
```python
0
```
```python
;
}
```
```python
void
```
```python
initArrayWithData(Array * pArray, DT data)
{
```
```python
if
```
```python
(NULL == pArray)
    {
```
```python
printf
```
```python
(
```
```python
"数组不存在! \n"
```
```python
);
```
```python
abort
```
```python
();
    }
    (*pArray).pStart = (DT *)
```
```python
malloc
```
```python
(
```
```python
sizeof
```
```python
(DT));
    *((*pArray).pStart) = data;
    (*pArray).len =
```
```python
1
```
```python
;
    (*pArray).sortState =
```
```python
0
```
```python
;
}
```
```python
void
```
```python
initArrayWithDatas(Array * pArray, DT * pDatas,
```
```python
int
```
```python
pDatasLen)
{
```
```python
if
```
```python
(NULL == pArray)
    {
```
```python
printf
```
```python
(
```
```python
"数组不存在! \n"
```
```python
);
```
```python
abort
```
```python
();
    }
    (*pArray).pStart = (DT *)
```
```python
malloc
```
```python
(pDatasLen*
```
```python
sizeof
```
```python
(DT));
```
```python
memcpy
```
```python
((*pArray).pStart, pDatas, pDatasLen *
```
```python
sizeof
```
```python
(DT));
    (*pArray).len = pDatasLen;
    (*pArray).sortState =
```
```python
0
```
```python
;
}
```
```python
int
```
```python
isValidA(Array * pArray)
{
```
```python
if
```
```python
(NULL == pArray)
    {
```
```python
printf
```
```python
(
```
```python
"数组不存在! \n"
```
```python
);
```
```python
return
```
```python
0
```
```python
;
    }
```
```python
return
```
```python
1
```
```python
;
}
```
```python
int
```
```python
isValidB(Array * pArray)
{
```
```python
if
```
```python
(NULL == (*pArray).pStart)
    {
```
```python
printf
```
```python
(
```
```python
"数组无初始化数据! \n"
```
```python
);
```
```python
return
```
```python
0
```
```python
;
    }
```
```python
return
```
```python
1
```
```python
;
}
```
```python
int
```
```python
isValidC(Array * pArray)
{
```
```python
if
```
```python
(
```
```python
0
```
```python
== (*pArray).len)
    {
```
```python
printf
```
```python
(
```
```python
"数组没有数据! \n"
```
```python
);
```
```python
return
```
```python
0
```
```python
;
    }
```
```python
return
```
```python
1
```
```python
;
}
```
```python
int
```
```python
isValidD(Array * pArray)
{
```
```python
if
```
```python
(NULL == pArray)
    {
```
```python
printf
```
```python
(
```
```python
"数组不存在! \n"
```
```python
);
```
```python
return
```
```python
0
```
```python
;
    }
```
```python
if
```
```python
(NULL == (*pArray).pStart)
    {
```
```python
printf
```
```python
(
```
```python
"数组无初始化数据! \n"
```
```python
);
```
```python
return
```
```python
0
```
```python
;
    }
```
```python
return
```
```python
1
```
```python
;
}
```
```python
int
```
```python
isValidE(Array * pArray)
{
```
```python
if
```
```python
(NULL == pArray)
    {
```
```python
printf
```
```python
(
```
```python
"数组不存在! \n"
```
```python
);
```
```python
return
```
```python
0
```
```python
;
    }
```
```python
if
```
```python
(NULL == (*pArray).pStart)
    {
```
```python
printf
```
```python
(
```
```python
"数组无初始化数据! \n"
```
```python
);
```
```python
return
```
```python
0
```
```python
;
    }
```
```python
return
```
```python
1
```
```python
;
}
```
```python
void
```
```python
printString(Array * pArray)
{
```
```python
for
```
```python
(
```
```python
int
```
```python
i =
```
```python
0
```
```python
; i < (*pArray).len; ++i)
    {
```
```python
printf
```
```python
(
```
```python
"%s \n"
```
```python
, *((*pArray).pStart + i));
    }
}
```
```python
void
```
```python
printInt(Array * pArray)
{
```
```python
for
```
```python
(
```
```python
int
```
```python
i =
```
```python
0
```
```python
; i < (*pArray).len; ++i)
    {
```
```python
printf
```
```python
(
```
```python
"%d \n"
```
```python
, *((*pArray).pStart + i));
    }
}
```
```python
void
```
```python
showArray(Array * pArray, PrintFunP funP)
{
```
```python
if
```
```python
(!isValidE(pArray))
    {
```
```python
abort
```
```python
();
    }
    funP(pArray);
}
```
```python
void
```
```python
arrayAddData(Array * pArray, DT data)
{
```
```python
if
```
```python
(!isValidA(pArray))
    {
```
```python
abort
```
```python
();
    }
```
```python
if
```
```python
(!isValidB(pArray))
    {
        initArrayWithData(pArray, data);
    }
```
```python
else
```
```python
{
        (*pArray).pStart = (DT *)realloc((*pArray).pStart, ((*pArray).len +
```
```python
1
```
```python
) *
```
```python
sizeof
```
```python
(DT));
        *((*pArray).pStart + (*pArray).len) = data;
        ++(*pArray).len;
    }
}
```
```python
void
```
```python
arrayAddDatas(Array * pArray, DT * pDatas,
```
```python
int
```
```python
pDatasLen)
{
```
```python
if
```
```python
(!isValidA(pArray))
    {
```
```python
abort
```
```python
();
    }
```
```python
if
```
```python
(!isValidB(pArray))
    {
        initArrayWithDatas(pArray, pDatas, pDatasLen);
    }
```
```python
else
```
```python
{
        (*pArray).pStart = (DT *)realloc((*pArray).pStart, ((*pArray).len + pDatasLen) *
```
```python
sizeof
```
```python
(DT));
```
```python
memcpy
```
```python
((*pArray).pStart + (*pArray).len, pDatas, pDatasLen *
```
```python
sizeof
```
```python
(DT));
        (*pArray).len += pDatasLen;
    }
}
```
```python
int
```
```python
intIsEqual(
```
```python
int
```
```python
* pDataA,
```
```python
int
```
```python
* pDataB)
{
```
```python
return
```
```python
*pDataA == *pDataB;
}
```
```python
int
```
```python
strIsEqual(
```
```python
char
```
```python
** pDataA,
```
```python
char
```
```python
** pDataB)
{
```
```python
return
```
```python
!
```
```python
strcmp
```
```python
(*pDataA, *pDataB);
}
DT * arraySelectFirstData(EqualFunP funP, Array * pArray, DT data)
{
```
```python
if
```
```python
(!isValidE(pArray))
    {
```
```python
abort
```
```python
();
    }
```
```python
for
```
```python
(
```
```python
int
```
```python
i =
```
```python
0
```
```python
; i < (*pArray).len; ++i)
    {
```
```python
if
```
```python
(funP(&data, (*pArray).pStart + i))
        {
```
```python
return
```
```python
(*pArray).pStart + i;
        }
    }
```
```python
return
```
```python
NULL;
}
ResArray arraySelectAllDatas(EqualFunP funP, Array * pArray, DT data)
{
```
```python
if
```
```python
(!isValidE(pArray))
    {
```
```python
abort
```
```python
();
    }
    ResArray resArr;
    resArr.len =
```
```python
0
```
```python
;
```
```python
for
```
```python
(
```
```python
int
```
```python
i =
```
```python
0
```
```python
; i < (*pArray).len; ++i)
    {
```
```python
if
```
```python
(funP(&data, (*pArray).pStart + i))
        {
            ++resArr.len;
        }
    }
    resArr.ppStart = (DT **)
```
```python
malloc
```
```python
(resArr.len *
```
```python
sizeof
```
```python
(DT *));
```
```python
int
```
```python
j =
```
```python
0
```
```python
;
```
```python
for
```
```python
(
```
```python
int
```
```python
i =
```
```python
0
```
```python
; i < (*pArray).len; ++i)
    {
```
```python
if
```
```python
(funP(&data, (*pArray).pStart + i))
        {
            *(resArr.ppStart + j++) = (*pArray).pStart + i;
        }
    }
```
```python
return
```
```python
resArr;
}
```
```python
void
```
```python
arrayInsertData(Array * pArray, DT data, DT insertData)
{
```
```python
if
```
```python
(!isValidE(pArray))
    {
```
```python
abort
```
```python
();
    }
    DT * pFindData = arraySelectFirstData(strIsEqual, pArray, data);
```
```python
if
```
```python
(NULL == pFindData)
    {
```
```python
printf
```
```python
(
```
```python
"没有找到待插入的位置! \n"
```
```python
);
```
```python
abort
```
```python
();
    }
```
```python
int
```
```python
relPos = pFindData - (*pArray).pStart;
    (*pArray).pStart = (DT *)realloc((*pArray).pStart, ((*pArray).len +
```
```python
1
```
```python
)*
```
```python
sizeof
```
```python
(DT));
```
```python
for
```
```python
(
```
```python
int
```
```python
i = (*pArray).len; i >= relPos; --i)
    {
        *((*pArray).pStart + i +
```
```python
1
```
```python
) = *((*pArray).pStart + i);
    }
    *((*pArray).pStart + relPos) = insertData;
    ++(*pArray).len;
}
```
```python
void
```
```python
arrayInsertDatas(Array * pArray, DT data, DT * pInsertDatas,
```
```python
int
```
```python
pInsertDatasLen)
{
```
```python
if
```
```python
(!isValidE(pArray))
    {
```
```python
abort
```
```python
();
    }
    DT * pFindData = arraySelectFirstData(strIsEqual, pArray, data);
```
```python
if
```
```python
(NULL == pFindData)
    {
```
```python
printf
```
```python
(
```
```python
"没有找到待插入的位置! \n"
```
```python
);
```
```python
abort
```
```python
();
    }
```
```python
int
```
```python
relPos = pFindData - (*pArray).pStart;
    (*pArray).pStart = (DT *)realloc((*pArray).pStart, ((*pArray).len + pInsertDatasLen) *
```
```python
sizeof
```
```python
(DT));
```
```python
for
```
```python
(
```
```python
int
```
```python
i = (*pArray).len; i >= relPos; --i)
    {
        *((*pArray).pStart + i + pInsertDatasLen) = *((*pArray).pStart + i);
    }
```
```python
memcpy
```
```python
((*pArray).pStart + relPos, pInsertDatas, pInsertDatasLen *
```
```python
sizeof
```
```python
(DT));
    (*pArray).len += pInsertDatasLen;
}
```
```python
void
```
```python
arrayDeleteFirstData(Array * pArray, DT data)
{
```
```python
if
```
```python
(!isValidE(pArray))
    {
```
```python
abort
```
```python
();
    }
    DT * pFindData = arraySelectFirstData(strIsEqual, pArray, data);
```
```python
if
```
```python
(NULL == pFindData)
    {
```
```python
printf
```
```python
(
```
```python
"没有找到待删除的位置! \n"
```
```python
);
```
```python
abort
```
```python
();
    }
```
```python
int
```
```python
relPos = pFindData - (*pArray).pStart;
```
```python
for
```
```python
(
```
```python
int
```
```python
i = relPos; i < (*pArray).len -
```
```python
1
```
```python
; ++i)
    {
        *((*pArray).pStart + i) = *((*pArray).pStart + i +
```
```python
1
```
```python
);
    }
    --(*pArray).len;
    (*pArray).pStart = (DT *)realloc((*pArray).pStart, (*pArray).len *
```
```python
sizeof
```
```python
(DT));
}
```
```python
void
```
```python
arrayDeleteAllDatas(Array * pArray, DT data)
{
```
```python
if
```
```python
(!isValidE(pArray))
    {
```
```python
abort
```
```python
();
    }
```
```python
for
```
```python
(DT * p = arraySelectFirstData(strIsEqual, pArray, data); NULL != p; p = arraySelectFirstData(strIsEqual, pArray, data))
    {
        arrayDeleteFirstData(pArray, data);
    }
}
```
```python
void
```
```python
arrayUpdateFirstData(Array * pArray, DT oldData, DT newData)
{
```
```python
if
```
```python
(!isValidE(pArray))
    {
```
```python
abort
```
```python
();
    }
    DT * pFindData = arraySelectFirstData(strIsEqual, pArray, oldData);
```
```python
if
```
```python
(NULL == pFindData)
    {
```
```python
printf
```
```python
(
```
```python
"未能找到待更新的位置! \n"
```
```python
);
```
```python
abort
```
```python
();
    }
    *pFindData = newData;
}
```
```python
void
```
```python
arrayUpdateAllDatas(Array * pArray, DT oldData, DT newData)
{
```
```python
if
```
```python
(!isValidE(pArray))
    {
```
```python
abort
```
```python
();
    }
```
```python
for
```
```python
(DT * p = arraySelectFirstData(strIsEqual, pArray, oldData); NULL != p; p = arraySelectFirstData(strIsEqual, pArray, oldData))
    {
        *p = newData;
    }
}
```
```python
///main.c
```
```python
#include "MyArray.h"
```
```python
#include <stdlib.h>
```
```python
#include <stdio.h>
```
```python
int
```
```python
main01(
```
```python
void
```
```python
)
{
    Array
```
```python
array
```
```python
;
    initArray(&
```
```python
array
```
```python
);
```
```python
//initArrayWithData(&array, 1);
```
```python
//int intArr[5] = { 1, 2, 3, 4, 5 };
```
```python
//initArrayWithDatas(&array, intArr, 5);
```
```python
//arrayAddData(&array, 6);
```
```python
//int intArr1[3] = { 7, 8, 9 };
```
```python
//arrayAddDatas(&array, intArr1, 3);
```
```python
//showArray(&array, printInt);
```
```python
initArrayWithData(&
```
```python
array
```
```python
,
```
```python
"123"
```
```python
);
```
```python
char
```
```python
* pArr[
```
```python
5
```
```python
] = {
```
```python
"abc"
```
```python
,
```
```python
"def"
```
```python
,
```
```python
"ghi"
```
```python
,
```
```python
"jkl"
```
```python
,
```
```python
"jkl"
```
```python
};
    initArrayWithDatas(&
```
```python
array
```
```python
, pArr,
```
```python
5
```
```python
);
    arrayAddData(&
```
```python
array
```
```python
,
```
```python
"opq"
```
```python
);
```
```python
char
```
```python
* pArr1[
```
```python
3
```
```python
] = {
```
```python
"rst"
```
```python
,
```
```python
"uvw"
```
```python
,
```
```python
"xyz"
```
```python
};
    arrayAddDatas(&
```
```python
array
```
```python
, pArr1,
```
```python
3
```
```python
);
    arrayInsertData(&
```
```python
array
```
```python
,
```
```python
"jkl"
```
```python
,
```
```python
"AAA"
```
```python
);
```
```python
char
```
```python
* pArr2[
```
```python
3
```
```python
] = {
```
```python
"BBB"
```
```python
,
```
```python
"CCC"
```
```python
,
```
```python
"DDD"
```
```python
};
    arrayInsertDatas(&
```
```python
array
```
```python
,
```
```python
"jkl"
```
```python
, pArr2,
```
```python
3
```
```python
);
    arrayDeleteFirstData(&
```
```python
array
```
```python
,
```
```python
"AAA"
```
```python
);
    arrayDeleteAllDatas(&
```
```python
array
```
```python
,
```
```python
"jkl"
```
```python
);
    arrayUpdateFirstData(&
```
```python
array
```
```python
,
```
```python
"BBB"
```
```python
,
```
```python
"EEE"
```
```python
);
    arrayUpdateAllDatas(&
```
```python
array
```
```python
,
```
```python
"CCC"
```
```python
,
```
```python
"FFF"
```
```python
);
    showArray(&
```
```python
array
```
```python
, printString);
```
```python
//printf("%s \n", *(arraySelectFirstData(strIsEqual, &array, "uvw")));
```
```python
//ResArray resArr = arraySelectAllDatas(strIsEqual, &array, "jkl");
```
```python
//for (int i = 0; i < resArr.len; ++i)
```
```python
//{
```
```python
//  printf("%s \n", **(resArr.ppStart + i));
```
```python
//}
```
```python
system(
```
```python
"pause"
```
```python
);
}
```
程序片段(03):String.h+Array.h+String.c+Array.c+main.c
内容概要:**库中库**
```python
///String.h
```
```python
#pragma once
```
```python
#include <stdlib.h>
```
```python
typedef
```
```python
struct
```
```python
{
```
```python
char
```
```python
* pAStr;
```
```python
int
```
```python
memLen;
}AString;
```
```python
typedef
```
```python
struct
```
```python
{
```
```python
wchar_t
```
```python
* pWStr;
```
```python
int
```
```python
memLen;
}WString;
```
```python
void
```
```python
setWStrLocale(
```
```python
char
```
```python
const
```
```python
* pStr);
```
```python
int
```
```python
strIsValidA(
```
```python
void
```
```python
* pStr);
```
```python
int
```
```python
strIsValidB(
```
```python
char
```
```python
chr,
```
```python
void
```
```python
* pStr);
```
```python
int
```
```python
strIsValidC(
```
```python
char
```
```python
chr,
```
```python
void
```
```python
* pStr);
```
```python
void
```
```python
initStr(
```
```python
char
```
```python
chr,
```
```python
void
```
```python
* pStr);
```
```python
void
```
```python
initStrWithStr(
```
```python
char
```
```python
chr,
```
```python
void
```
```python
* pStr,
```
```python
void
```
```python
const
```
```python
* pInitStr);
```
```python
void
```
```python
showStr(
```
```python
char
```
```python
chr,
```
```python
void
```
```python
* pStr);
```
```python
///
```
```python
Array.h
```
```python
#
```
```python
pragma
```
```python
once
```
```python
typedef
```
```python
struct
```
```python
{
```
```python
int
```
```python
eleSize;
```
```python
int
```
```python
len;
```
```python
char
```
```python
eleType[
```
```python
12
```
```python
];
```
```python
void
```
```python
* pArr;
}Array;
```
```python
void
```
```python
initArray(Array * pArr,
```
```python
char
```
```python
eleType[
```
```python
12
```
```python
],
```
```python
int
```
```python
eleSize);
```
```python
void
```
```python
initArrayWithDatas(Array * pArr,
```
```python
char
```
```python
eleType[
```
```python
12
```
```python
],
```
```python
int
```
```python
eleSize,
```
```python
void
```
```python
* pInitDatas,
```
```python
int
```
```python
pInitDatasLen);
```
```python
void
```
```python
showArray(Array * pArr,
```
```python
char
```
```python
eleType[
```
```python
12
```
```python
]);
```
```python
void
```
```python
arrayAddData(Array * pArr,
```
```python
void
```
```python
* pData);
```
```python
///String.c
```
```python
#define _CRT_SECURE_NO_WARNINGS
```
```python
#include "String.h"
```
```python
#include <locale.h>
```
```python
#include <string.h>
```
```python
#include <stdio.h>
```
```python
void
```
```python
setWStrLocale(
```
```python
char
```
```python
const
```
```python
* pStr)
{
    setlocale(LC_ALL, pStr);
}
```
```python
int
```
```python
strIsValidA(
```
```python
void
```
```python
* pStr)
{
```
```python
if
```
```python
(NULL == pStr)
    {
```
```python
printf
```
```python
(
```
```python
"字符串不存在! \n"
```
```python
);
```
```python
return
```
```python
0
```
```python
;
    }
```
```python
return
```
```python
1
```
```python
;
}
```
```python
int
```
```python
strIsValidB(
```
```python
char
```
```python
chr,
```
```python
void
```
```python
* pStr)
{
```
```python
if
```
```python
(
```
```python
'w'
```
```python
== chr)
    {
        WString * pAStr = pStr;
```
```python
if
```
```python
(NULL == (*pAStr).pWStr)
        {
```
```python
printf
```
```python
(
```
```python
"宽字符串无初始化数据! \n"
```
```python
);
```
```python
return
```
```python
0
```
```python
;
        }
    }
```
```python
else
```
```python
{
        AString * pWStr = pStr;
```
```python
if
```
```python
(NULL == (*pWStr).pAStr)
        {
```
```python
printf
```
```python
(
```
```python
"宽字符串无初始化数据! \n"
```
```python
);
```
```python
return
```
```python
0
```
```python
;
        }
    }
```
```python
return
```
```python
1
```
```python
;
}
```
```python
int
```
```python
strIsValidC(
```
```python
char
```
```python
chr,
```
```python
void
```
```python
* pStr)
{
```
```python
if
```
```python
(
```
```python
'w'
```
```python
== chr)
    {
        WString * pWStr = pStr;
```
```python
if
```
```python
(
```
```python
0
```
```python
== wcslen((*pWStr).pWStr))
        {
```
```python
printf
```
```python
(
```
```python
"宽字符串没有数据! \n"
```
```python
);
```
```python
return
```
```python
0
```
```python
;
        }
    }
```
```python
else
```
```python
{
        AString * pAStr = pStr;
```
```python
if
```
```python
(
```
```python
0
```
```python
==
```
```python
strlen
```
```python
((*pAStr).pAStr))
        {
```
```python
printf
```
```python
(
```
```python
"窄字符串没有数据! \n"
```
```python
);
```
```python
return
```
```python
0
```
```python
;
        }
    }
```
```python
return
```
```python
1
```
```python
;
}
```
```python
void
```
```python
initStr(
```
```python
char
```
```python
chr,
```
```python
void
```
```python
* pStr)
{
```
```python
if
```
```python
(!strIsValidA(pStr))
    {
```
```python
abort
```
```python
();
    }
```
```python
if
```
```python
(
```
```python
'w'
```
```python
== chr)
    {
        WString * pWStr = pStr;
        (*pWStr).pWStr = NULL;
        (*pWStr).memLen =
```
```python
0
```
```python
;
    }
```
```python
else
```
```python
{
        AString * pAStr = pStr;
        (*pAStr).pAStr = NULL;
        (*pAStr).memLen =
```
```python
0
```
```python
;
    }
}
```
```python
void
```
```python
initStrWithStr(
```
```python
char
```
```python
chr,
```
```python
void
```
```python
* pStr,
```
```python
void
```
```python
* pInitStr)
{
```
```python
if
```
```python
(!strIsValidA(pStr))
    {
```
```python
abort
```
```python
();
    }
```
```python
if
```
```python
(
```
```python
'w'
```
```python
== chr)
    {
        WString * pWStr = pStr;
```
```python
wchar_t
```
```python
* pInitWStr = pInitStr;
```
```python
int
```
```python
pWStrLen = wcslen(pInitWStr) +
```
```python
1
```
```python
;
        (*pWStr).pWStr = (
```
```python
wchar_t
```
```python
*)
```
```python
malloc
```
```python
(pWStrLen *
```
```python
2
```
```python
);
        wcscpy((*pWStr).pWStr, pInitWStr);
        (*pWStr).memLen = pWStrLen;
    }
```
```python
else
```
```python
{
        AString * pAStr = pStr;
```
```python
char
```
```python
* pInitAStr = pInitStr;
```
```python
int
```
```python
pAStrLen =
```
```python
strlen
```
```python
(pInitAStr) +
```
```python
1
```
```python
;
        (*pAStr).pAStr = (
```
```python
char
```
```python
*)
```
```python
malloc
```
```python
(pAStrLen *
```
```python
sizeof
```
```python
(
```
```python
char
```
```python
));
```
```python
strcpy
```
```python
((*pAStr).pAStr, pInitAStr);
        (*pAStr).memLen = pAStrLen;
    }
}
```
```python
void
```
```python
showStr(
```
```python
char
```
```python
chr,
```
```python
void
```
```python
const
```
```python
* pStr)
{
```
```python
if
```
```python
(!strIsValidA(pStr) || !strIsValidB(chr, pStr) || !strIsValidC(chr ,pStr))
    {
```
```python
abort
```
```python
();
    }
```
```python
if
```
```python
(
```
```python
'w'
```
```python
== chr)
    {
        WString * pWStr = pStr;
        wprintf(L
```
```python
"%ls \n"
```
```python
, (*pWStr).pWStr);
    }
```
```python
else
```
```python
{
        AString * pAStr = pStr;
```
```python
printf
```
```python
(
```
```python
"%s \n"
```
```python
, (*pAStr).pAStr);
    }
}
```
```python
///Array.c
```
```python
#define _CRT_SECURE_NO_WARNINGS
```
```python
#include "Array.h"
```
```python
#include "String.h"
```
```python
#include <stdlib.h>
```
```python
#include <stdio.h>
```
```python
#include <string.h>
```
```python
void
```
```python
initArray(Array * pArr,
```
```python
char
```
```python
eleType[
```
```python
12
```
```python
],
```
```python
int
```
```python
eleSize)
{
    pArr->pArr = NULL;
    pArr->len =
```
```python
0
```
```python
;
    pArr->eleSize = eleSize;
```
```python
strcpy
```
```python
(pArr->eleType, eleType);
}
```
```python
void
```
```python
initArrayWithDatas(Array * pArr,
```
```python
char
```
```python
eleType[
```
```python
12
```
```python
],
```
```python
int
```
```python
eleSize,
```
```python
void
```
```python
* pInitDatas,
```
```python
int
```
```python
pInitDatasLen)
{
```
```python
strcpy
```
```python
((*pArr).eleType, eleType);
    (*pArr).eleSize = eleSize;
```
```python
if
```
```python
(!
```
```python
strcmp
```
```python
(
```
```python
"WString"
```
```python
, eleType))
    {
        WString * pWStr = pInitDatas;
        (*pArr).pArr = (WString *)
```
```python
malloc
```
```python
(pInitDatasLen *
```
```python
sizeof
```
```python
(WString));
```
```python
memcpy
```
```python
((*pArr).pArr, pWStr, pInitDatasLen *
```
```python
sizeof
```
```python
(WString));
        (*pArr).len = pInitDatasLen;
    }
```
```python
else
```
```python
if
```
```python
(!
```
```python
strcmp
```
```python
(
```
```python
"AString"
```
```python
, eleType))
    {
        AString * pAStr = pInitDatas;
        (*pArr).pArr = (AString *)
```
```python
malloc
```
```python
(pInitDatasLen *
```
```python
sizeof
```
```python
(AString));
```
```python
memcpy
```
```python
((*pArr).pArr, pAStr, pInitDatasLen *
```
```python
sizeof
```
```python
(AString));
        (*pArr).len = pInitDatasLen;
    }
}
```
```python
void
```
```python
showArray(Array * pArr,
```
```python
char
```
```python
eleType[
```
```python
12
```
```python
])
{
```
```python
if
```
```python
(!
```
```python
strcmp
```
```python
(
```
```python
"WString"
```
```python
, eleType))
    {
        WString * pWStr = (*pArr).pArr;
```
```python
for
```
```python
(
```
```python
int
```
```python
i =
```
```python
0
```
```python
; i < (*pArr).len; ++i)
        {
            wprintf(L
```
```python
"%ls \n"
```
```python
, (*(pWStr + i)).pWStr);
        }
```
```python
printf
```
```python
(
```
```python
"\n"
```
```python
);
    }
```
```python
else
```
```python
if
```
```python
(!
```
```python
strcmp
```
```python
(
```
```python
"AString"
```
```python
, eleType))
    {
        AString * pAStr = (*pArr).pArr;
```
```python
for
```
```python
(
```
```python
int
```
```python
i =
```
```python
0
```
```python
; i < (*pArr).len; ++i)
        {
```
```python
printf
```
```python
(
```
```python
"%s \n"
```
```python
, (*(pAStr + i)).pAStr);
        }
```
```python
printf
```
```python
(
```
```python
"\n"
```
```python
);
    }
}
```
```python
void
```
```python
arrayAddData(Array * pArr,
```
```python
void
```
```python
* pData)
{
```
```python
if
```
```python
(!
```
```python
strcmp
```
```python
(
```
```python
"WString"
```
```python
, (*pArr).eleType))
    {
        (*pArr).pArr = (WString *)realloc((*pArr).pArr, ((*pArr).len +
```
```python
1
```
```python
)*
```
```python
sizeof
```
```python
(WString));
        WString * pWStr = pData;
        WString * pTmp = (*pArr).pArr;
        *(pTmp + (*pArr).len) = *pWStr;
        ++(*pArr).len;
    }
```
```python
else
```
```python
if
```
```python
(!
```
```python
strcmp
```
```python
(
```
```python
"AString"
```
```python
, (*pArr).eleType))
    {
        (*pArr).pArr = (AString *)realloc((*pArr).pArr, ((*pArr).len +
```
```python
1
```
```python
)*
```
```python
sizeof
```
```python
(AString));
        AString * pAStr = pData;
        AString * pTmp = (*pArr).pArr;
        *(pTmp + (*pArr).len) = *pAStr;
        ++(*pArr).len;
    }
}
```
```python
///main.c
```
```python
#include
```
```python
"String.h"
```
```python
#include
```
```python
"Array.h"
```
```python
int
```
```python
main01(
```
```python
void
```
```python
)
{
    setWStrLocale(
```
```python
"zh-CN"
```
```python
);
    AString  astring;
    WString
```
```python
wstring
```
```python
;
```
```python
//initStr('a', &pAStr);
```
```python
//initStr('w', &pWStr);
```
```python
initStrWithStr(
```
```python
'a'
```
```python
, &astring,
```
```python
"calc"
```
```python
);
    initStrWithStr(
```
```python
'w'
```
```python
, &
```
```python
wstring
```
```python
,L
```
```python
"你猜猜"
```
```python
);
    showStr(
```
```python
'a'
```
```python
, &astring);
    showStr(
```
```python
'w'
```
```python
, &
```
```python
wstring
```
```python
);
    system(
```
```python
"pause"
```
```python
);
}
```
程序片段(04):Row.h+Array.h+init.h+Row.c+Array.c+init.c
内容概要:**数据的管理-增删查改线性存储**
```python
///
```
```python
Row.h
```
```python
#
```
```python
pragma
```
```python
once
```
```python
typedef
```
```python
struct
```
```python
{
```
```python
long
```
```python
long
```
```python
QQ;
```
```python
char
```
```python
* pStr;
    unsigned
```
```python
char
```
```python
len;
}Row;
```
```python
int
```
```python
rowIsValidA(Row * pRow);
```
```python
int
```
```python
rowIsValidB(Row * pRow);
```
```python
int
```
```python
rowIsValidC(Row * pRow);
```
```python
void
```
```python
initRowWithData(Row * pRow,
```
```python
long
```
```python
long
```
```python
QQ,
```
```python
char
```
```python
* pStr);
```
```python
void
```
```python
initRowWithPass(Row * pRow,
```
```python
char
```
```python
* pPass);
```
```python
void
```
```python
initRowWithStr(Row * pRow,
```
```python
char
```
```python
* pStr);
```
```python
void
```
```python
showRow(Row * pRow);
```
```python
void
```
```python
rowUpdateRow(Row * pOldRow, Row * pNewRow);
```
```python
void
```
```python
rowUpdateRowDeep(Row * pOldRow, Row * pNewRow);
```
```python
///
```
```python
Array.h
```
```python
#
```
```python
pragma
```
```python
once
```
```python
#include "Row.h"
```
```python
typedef
```
```python
struct
```
```python
{
    Row * pRow;
```
```python
int
```
```python
len;
}Array;
```
```python
void
```
```python
initArray(Array * pArr);
```
```python
void
```
```python
initArrayWithStr(Array * pArr,
```
```python
char
```
```python
* pStr);
```
```python
void
```
```python
showArray(Array * pArr);
```
```python
void
```
```python
arraySelectDataByFirstQQ(Array * pArr,
```
```python
long
```
```python
long
```
```python
QQ);
```
```python
void
```
```python
arraySelectDataByAllQQ(Array * pArr,
```
```python
long
```
```python
long
```
```python
QQ);
```
```python
void
```
```python
arraySelectDataByFirstPass(Array * pArr,
```
```python
char
```
```python
* pPass);
```
```python
void
```
```python
arraySelectDataByAllPass(Array * pArr,
```
```python
char
```
```python
* pPass);
```
```python
void
```
```python
arrayAddData(Array * pArr, Row * pRow);
```
```python
void
```
```python
arrayInsertDataByFirstQQ(Array * pArr,
```
```python
long
```
```python
long
```
```python
QQ, Row * pRow);
```
```python
void
```
```python
arrayInsertDataByAllQQ(Array * pArr,
```
```python
long
```
```python
long
```
```python
QQ, Row * pRow);
```
```python
void
```
```python
arrayInsertDataByFirstPass(Array * pArr,
```
```python
char
```
```python
* pPass, Row * pRow);
```
```python
void
```
```python
arrayInsertDataByAllPass(Array * pArr,
```
```python
char
```
```python
* pPass, Row * pRow);
```
```python
void
```
```python
arrayDeleteAllDatas(Array * pArr);
```
```python
void
```
```python
arrayDeleteDataByFirstQQ(Array * pArr,
```
```python
long
```
```python
long
```
```python
QQ);
```
```python
void
```
```python
arrayDeleteDataByAllQQ(Array * pArr,
```
```python
long
```
```python
long
```
```python
QQ);
```
```python
void
```
```python
arrayDeleteDataByFirstPass(Array * pArr,
```
```python
char
```
```python
* pPass);
```
```python
void
```
```python
arrayDeleteDataByAllPass(Array * pArr,
```
```python
char
```
```python
* pPass);
```
```python
void
```
```python
arrayUpdateDataByFirstQQ(Array * pArr,
```
```python
long
```
```python
long
```
```python
QQ, Row * pRow);
```
```python
void
```
```python
arrayUpdateDataByAllQQ(Array * pArr,
```
```python
long
```
```python
long
```
```python
QQ, Row * pRow);
```
```python
void
```
```python
arrayUpdateDataByFirstPass(Array * pArr,
```
```python
char
```
```python
* pPass, Row * pRow);
```
```python
void
```
```python
arrayUpdateDataByAllPass(Array * pArr,
```
```python
char
```
```python
* pPass, Row * pRow);
```
```python
int
```
```python
comByQQ(Row * pQQA, Row * pQQB);
```
```python
int
```
```python
comByPass(Row * pPassA, Row * pPassB);
```
```python
void
```
```python
sortByQQ(Array * pArr);
```
```python
void
```
```python
sortByPass(Array * pArr);
```
```python
///
```
```python
init.h
```
```python
#
```
```python
pragma
```
```python
once
```
```python
//01.全局变量位于静态区,与程序共存亡:
```
```python
//  函数和全局变量的声明可以有多个;
```
```python
//  但是定义只能有一个
```
```python
char
```
```python
str[
```
```python
1024
```
```python
];
```
```python
int
```
```python
num;
```
```python
int
```
```python
countRow(
```
```python
char
```
```python
* pStr);
```
```python
///Row.c
```
```python
#include "Row.h"
```
```python
#include <string.h>
```
```python
#include <stdlib.h>
```
```python
#include <stdio.h>
```
```python
int
```
```python
rowIsValidA(Row * pRow)
{
```
```python
if
```
```python
(NULL == pRow)
    {
```
```python
printf
```
```python
(
```
```python
"行结构不存在! \n"
```
```python
);
```
```python
return
```
```python
0
```
```python
;
    }
```
```python
return
```
```python
1
```
```python
;
}
```
```python
int
```
```python
rowIsValidB(Row * pRow)
{
```
```python
if
```
```python
(NULL == (*pRow).pStr)
    {
```
```python
printf
```
```python
(
```
```python
"行结构无初始数据行! \n"
```
```python
);
```
```python
return
```
```python
0
```
```python
;
    }
```
```python
return
```
```python
1
```
```python
;
}
```
```python
int
```
```python
rowIsValidC(Row * pRow)
{
```
```python
if
```
```python
(
```
```python
0
```
```python
== (*pRow).len)
    {
```
```python
printf
```
```python
(
```
```python
"行结构无数据行! \n"
```
```python
);
```
```python
return
```
```python
0
```
```python
;
    }
```
```python
return
```
```python
1
```
```python
;
}
```
```python
void
```
```python
initRowWithData(Row * pRow,
```
```python
long
```
```python
long
```
```python
QQ,
```
```python
char
```
```python
* pStr)
{
```
```python
if
```
```python
(!rowIsValidA(pRow))
```
```python
abort
```
```python
();
    (*pRow).QQ = QQ;
```
```python
int
```
```python
len =
```
```python
strlen
```
```python
(pStr);
    (*pRow).pStr = (
```
```python
char
```
```python
*)
```
```python
malloc
```
```python
((len +
```
```python
1
```
```python
)*
```
```python
sizeof
```
```python
(
```
```python
char
```
```python
));
```
```python
strcpy
```
```python
((*pRow).pStr, pStr);
    (*pRow).len = len +
```
```python
1
```
```python
;
}
```
```python
void
```
```python
initRowWithPass(Row * pRow,
```
```python
char
```
```python
* pPass)
{
```
```python
if
```
```python
(!rowIsValidA(pRow))
```
```python
abort
```
```python
();
    (*pRow).QQ =
```
```python
77025077
```
```python
;
```
```python
int
```
```python
initStrLen =
```
```python
strlen
```
```python
(pPass) +
```
```python
1
```
```python
;
    (*pRow).pStr = (
```
```python
char
```
```python
*)
```
```python
malloc
```
```python
(initStrLen *
```
```python
sizeof
```
```python
(
```
```python
char
```
```python
));
```
```python
strcpy
```
```python
((*pRow).pStr, pPass);
    (*pRow).len = initStrLen;
}
```
```python
void
```
```python
initRowWithStr(Row * pRow,
```
```python
char
```
```python
* pInitStr)
{
```
```python
if
```
```python
(!rowIsValidA(pRow))
```
```python
abort
```
```python
();
```
```python
char
```
```python
* p =
```
```python
strstr
```
```python
(pInitStr,
```
```python
"----"
```
```python
);
    *p =
```
```python
'\0'
```
```python
;
```
```python
sscanf
```
```python
(p,
```
```python
"%lld"
```
```python
, &(*pRow).QQ);
```
```python
int
```
```python
pInitStrLen =
```
```python
strlen
```
```python
(p +
```
```python
4
```
```python
);
    (*pRow).pStr = (
```
```python
char
```
```python
*)
```
```python
malloc
```
```python
((pInitStrLen +
```
```python
1
```
```python
) *
```
```python
sizeof
```
```python
(
```
```python
char
```
```python
));
```
```python
strcpy
```
```python
((*pRow).pStr, pInitStr);
    (*pRow).len = pInitStrLen +
```
```python
1
```
```python
;
}
```
```python
void
```
```python
showRow(Row * pRow)
{
```
```python
if
```
```python
(!rowIsValidA(pRow) || !rowIsValidB(pRow) || !rowIsValidC(pRow))
```
```python
abort
```
```python
();
```
```python
printf
```
```python
(
```
```python
"%lld<--->%s \n"
```
```python
, (*pRow).QQ, (*pRow).pStr);
}
```
```python
void
```
```python
rowUpdateRow(Row * pOldRow, Row * pNewRow)
{
```
```python
if
```
```python
(!rowIsValidA(pOldRow) || !rowIsValidA(pNewRow))
```
```python
abort
```
```python
();
    *pOldRow = *pNewRow;
}
```
```python
void
```
```python
rowUpdateRowDeep(Row * pOldRow, Row * pNewRow)
{
```
```python
if
```
```python
(!rowIsValidA(pOldRow) || !rowIsValidA(pNewRow))
```
```python
abort
```
```python
();
    *pOldRow = *pNewRow;
    (*pOldRow).pStr = (
```
```python
char
```
```python
*)
```
```python
malloc
```
```python
((
```
```python
strlen
```
```python
((*pNewRow).len +
```
```python
1
```
```python
) *
```
```python
sizeof
```
```python
(
```
```python
char
```
```python
)));
```
```python
strcpy
```
```python
((*pOldRow).pStr, (*pNewRow).pStr);
}
```
```python
///Array.c
```
```python
#include "Array.h"
```
```python
#include <stdlib.h>
```
```python
#include <string.h>
```
```python
#include "Row.h"
```
```python
#include "init.h"
```
```python
int
```
```python
arrIsValidA(Array * pArr)
{
```
```python
if
```
```python
(NULL == pArr)
    {
```
```python
printf
```
```python
(
```
```python
"数组不存在! \n"
```
```python
);
```
```python
return
```
```python
0
```
```python
;
    }
```
```python
return
```
```python
1
```
```python
;
}
```
```python
int
```
```python
arrIsValidB(Array * pArr)
{
```
```python
if
```
```python
(NULL == (*pArr).pRow)
    {
```
```python
printf
```
```python
(
```
```python
"数组未初始化数据! \n"
```
```python
);
```
```python
return
```
```python
0
```
```python
;
    }
```
```python
return
```
```python
1
```
```python
;
}
```
```python
int
```
```python
arrIsValidC(Array * pArr)
{
```
```python
if
```
```python
(
```
```python
0
```
```python
== (*pArr).len)
    {
```
```python
printf
```
```python
(
```
```python
"数组无数据! \n"
```
```python
);
```
```python
return
```
```python
0
```
```python
;
    }
```
```python
return
```
```python
1
```
```python
;
}
```
```python
void
```
```python
initArray(Array * pArr)
{
```
```python
if
```
```python
(!arrIsValidA(pArr))
    {
```
```python
abort
```
```python
();
    }
    (*pArr).pRow = NULL;
    (*pArr).len =
```
```python
0
```
```python
;
}
```
```python
void
```
```python
initArrayWithStr(Array * pArr,
```
```python
char
```
```python
* pStr)
{
```
```python
if
```
```python
(!arrIsValidA(pArr))
    {
```
```python
abort
```
```python
();
    }
```
```python
int
```
```python
rowNum = countRow(pStr);
    (*pArr).pRow = (Row *)
```
```python
malloc
```
```python
(rowNum *
```
```python
sizeof
```
```python
(Row));
    (*pArr).len = rowNum;
```
```python
int
```
```python
pStrLen =
```
```python
strlen
```
```python
(pStr);
```
```python
for
```
```python
(
```
```python
char
```
```python
* p = pStr; p < pStr + pStrLen; p +=
```
```python
strlen
```
```python
(p) +
```
```python
1
```
```python
)
    {
```
```python
//字符串预处理
```
```python
if
```
```python
(
```
```python
' '
```
```python
== *p)
        {
            *p =
```
```python
'\0'
```
```python
;
        }
    }
```
```python
int
```
```python
i =
```
```python
0
```
```python
;
```
```python
for
```
```python
(
```
```python
char
```
```python
* p = pStr; p < pStr + pStrLen; p +=
```
```python
strlen
```
```python
(p) +
```
```python
1
```
```python
)
    {
```
```python
char
```
```python
* pTmp = (
```
```python
char
```
```python
*)
```
```python
malloc
```
```python
((
```
```python
strlen
```
```python
(p) +
```
```python
1
```
```python
) *
```
```python
sizeof
```
```python
(
```
```python
char
```
```python
));
```
```python
strcpy
```
```python
(pTmp, p);
        initRowWithStr((*pArr).pRow + i++, pTmp);
    }
}
```
```python
void
```
```python
showArray(Array * pArr)
{
```
```python
if
```
```python
(!arrIsValidA(pArr) || !arrIsValidB(pArr) || !arrIsValidC(pArr))
```
```python
abort
```
```python
();
```
```python
for
```
```python
(
```
```python
int
```
```python
i =
```
```python
0
```
```python
; i < (*pArr).len; ++i)
    {
        showRow((*pArr).pRow + i);
    }
}
```
```python
void
```
```python
arraySelectDataByFirstQQ(Array * pArr,
```
```python
long
```
```python
long
```
```python
QQ)
{
```
```python
if
```
```python
(!arrIsValidA(pArr) || !arrIsValidB(pArr) || !arrIsValidC(pArr))
```
```python
abort
```
```python
();
```
```python
for
```
```python
(
```
```python
int
```
```python
i =
```
```python
0
```
```python
; i < (*pArr).len; ++i)
    {
```
```python
if
```
```python
(QQ == (*((*pArr).pRow + i)).QQ)
        {
```
```python
printf
```
```python
(
```
```python
"找到了首个QQ:%lld, pass:%s \n"
```
```python
, QQ, (*((*pArr).pRow + i)).pStr);
```
```python
printf
```
```python
(
```
```python
"数据查找结束! \n"
```
```python
);
```
```python
return
```
```python
;
        }
    }                    
}
```
```python
void
```
```python
arraySelectDataByAllQQ(Array * pArr,
```
```python
long
```
```python
long
```
```python
QQ)
{
```
```python
if
```
```python
(!arrIsValidA(pArr) || !arrIsValidB(pArr) || !arrIsValidC(pArr))
```
```python
abort
```
```python
();
```
```python
for
```
```python
(
```
```python
int
```
```python
i =
```
```python
0
```
```python
; i < (*pArr).len; ++i)
    {
```
```python
if
```
```python
(QQ == (*((*pArr).pRow + i)).QQ)
        {
```
```python
printf
```
```python
(
```
```python
"QQ:%lld, pass:%s \n"
```
```python
, QQ, (*((*pArr).pRow + i)).pStr);
        }
    }
```
```python
printf
```
```python
(
```
```python
"数据查找结束! \n"
```
```python
);
}
```
```python
void
```
```python
arraySelectDataByFirstPass(Array * pArr,
```
```python
char
```
```python
* pPass)
{
```
```python
if
```
```python
(!arrIsValidA(pArr) || !arrIsValidB(pArr) || !arrIsValidC(pArr))
```
```python
abort
```
```python
();
```
```python
for
```
```python
(
```
```python
int
```
```python
i =
```
```python
0
```
```python
; i < (*pArr).len; ++i)
    {
```
```python
if
```
```python
(NULL !=
```
```python
strstr
```
```python
((*((*pArr).pRow + i)).pStr, pPass))
        {
```
```python
printf
```
```python
(
```
```python
"首次找到了QQ:%lld, pass:%s \n"
```
```python
, (*((*pArr).pRow + i)).QQ, (*((*pArr).pRow + i)).pStr);
```
```python
printf
```
```python
(
```
```python
"数据查找结束! \n"
```
```python
);
```
```python
return
```
```python
;
        }
    }
}
```
```python
void
```
```python
arraySelectDataByAllPass(Array * pArr,
```
```python
char
```
```python
* pPass)
{
```
```python
if
```
```python
(!arrIsValidA(pArr) || !arrIsValidB(pArr) || !arrIsValidC(pArr))
```
```python
abort
```
```python
();
```
```python
for
```
```python
(
```
```python
int
```
```python
i =
```
```python
0
```
```python
; i < (*pArr).len; ++i)
    {
```
```python
if
```
```python
(NULL !=
```
```python
strstr
```
```python
((*((*pArr).pRow + i)).pStr, pPass))
        {
```
```python
printf
```
```python
(
```
```python
"QQ:%lld, pass:%s \n"
```
```python
, (*((*pArr).pRow + i)).QQ, (*((*pArr).pRow + i)).pStr);
        }
    }
```
```python
printf
```
```python
(
```
```python
"数据查询完毕! \n"
```
```python
);
}
```
```python
void
```
```python
arrayAddData(Array * pArr, Row * pData)
{
```
```python
if
```
```python
(!arrIsValidA(pArr))
```
```python
abort
```
```python
();
    (*pArr).pRow = (Row *)realloc((*pArr).pRow, ((*pArr).len +
```
```python
1
```
```python
) *
```
```python
sizeof
```
```python
(Row));
    *((*pArr).pRow + (*pArr).len) = *pData;
    ++(*pArr).len;
}
```
```python
void
```
```python
arrayInsertDataByFirstQQ(Array * pArr,
```
```python
long
```
```python
long
```
```python
QQ, Row * pRow)
{
```
```python
if
```
```python
(!arrIsValidA(pArr) || !arrIsValidB(pArr) || !arrIsValidCI(pArr))
```
```python
abort
```
```python
();
```
```python
int
```
```python
relPos = -
```
```python
1
```
```python
;
```
```python
for
```
```python
(
```
```python
int
```
```python
i =
```
```python
0
```
```python
; i < (*pArr).len; ++i)
    {
```
```python
if
```
```python
(QQ == (*((*pArr).pRow + i)).QQ)
        {
            relPos = i;
```
```python
printf
```
```python
(
```
```python
"找到首个QQ:%lld, pass:%s \n"
```
```python
, (*(QQ, (*pArr).pRow + i)).pStr);
```
```python
break
```
```python
;
        }
    }
```
```python
if
```
```python
(-
```
```python
1
```
```python
== relPos)
    {
```
```python
printf
```
```python
(
```
```python
"没有找到将要插入的位置! \n"
```
```python
);
```
```python
abort
```
```python
();
    }
    (*pArr).pRow = (Row *)realloc((*pArr).pRow, ((*pArr).len +
```
```python
1
```
```python
) *
```
```python
sizeof
```
```python
(Row));
```
```python
for
```
```python
(
```
```python
int
```
```python
i = (*pArr).len; i >= relPos; --i)
    {
        *((*pArr).pRow + i +
```
```python
1
```
```python
) = *((*pArr).pRow + i);
    }
    *((*pArr).pRow + relPos) = *pRow;
    ++(*pArr).len;
}
```
```python
void
```
```python
arrayInsertDataByAllQQ(Array * pArr,
```
```python
long
```
```python
long
```
```python
QQ, Row * pRow)
{
```
```python
if
```
```python
(!arrIsValidA(pArr) || !arrIsValidB(pArr) || !arrIsValidC(pArr))
```
```python
abort
```
```python
();
```
```python
int
```
```python
i =
```
```python
0
```
```python
;
```
```python
int
```
```python
j =
```
```python
0
```
```python
;
```
```python
while
```
```python
(
```
```python
1
```
```python
)
    {
```
```python
if
```
```python
(i >= (*pArr).len || j >= (*pArr).len)
        {
```
```python
break
```
```python
;
        }
        *((*pArr).pRow + i) = *((*pArr).pRow + j);
```
```python
if
```
```python
(QQ == ((*pArr).pRow + i))
        {
            (*pArr).pRow = (Row *)realloc((*pArr).pRow, ((*pArr).len +
```
```python
1
```
```python
) *
```
```python
sizeof
```
```python
(Row));
```
```python
for
```
```python
(
```
```python
int
```
```python
k = (*pArr).len -
```
```python
1
```
```python
; k >= i; --k)
            {
                *((*pArr).pRow + k +
```
```python
1
```
```python
) = *((*pArr).pRow + k);
            }
            *((*pArr).pRow + i) = *pRow;
            ++(*pArr).len;
            i +=
```
```python
2
```
```python
;
```
```python
//跳到下一起点
```
```python
j +=
```
```python
2
```
```python
;
        }
```
```python
else
```
```python
{
            ++j;
            ++i;
        }
    }
}
```
```python
void
```
```python
arrayInsertDataByFirstPass(Array * pArr,
```
```python
char
```
```python
* pPass, Row * pRow)
{
```
```python
if
```
```python
(!arrIsValidA(pArr) || !arrIsValidB(pArr) || !arrIsValidC(pArr))
```
```python
abort
```
```python
();
```
```python
int
```
```python
relPos = -
```
```python
1
```
```python
;
```
```python
for
```
```python
(
```
```python
int
```
```python
i =
```
```python
0
```
```python
; i < (*pArr).len; ++i)
    {
```
```python
if
```
```python
(!
```
```python
strcmp
```
```python
(pPass, (*((*pArr).pRow + i)).pStr))
        {
            relPos = i;
```
```python
break
```
```python
;
        }
    }
```
```python
if
```
```python
(-
```
```python
1
```
```python
== relPos)
    {
```
```python
abort
```
```python
();
    }
    (*pArr).pRow = (Row *)realloc((*pArr).pRow, ((*pArr).len +
```
```python
1
```
```python
) *
```
```python
sizeof
```
```python
(Row));
```
```python
for
```
```python
(
```
```python
int
```
```python
i = (*pArr).len; i >= relPos; --i)
    {
        *((*pArr).pRow + i +
```
```python
1
```
```python
) = *((*pArr).pRow + i);
    }
    *((*pArr).pRow + relPos) = *pRow;
    ++(*pArr).len;
}
```
```python
void
```
```python
arrayInsertDataByAllPass(Array * pArr,
```
```python
char
```
```python
* pPass, Row * pRow)
{
```
```python
if
```
```python
(!arrIsValidA(pArr) || !arrIsValidB(pArr) || !arrIsValidC(pArr))
```
```python
abort
```
```python
();
```
```python
int
```
```python
i =
```
```python
0
```
```python
, j =
```
```python
0
```
```python
;
```
```python
while
```
```python
(
```
```python
1
```
```python
)
    {
```
```python
if
```
```python
(i >= (*pArr).len || j >= (*pArr).len)
        {
```
```python
return
```
```python
;
        }
        *((*pArr).pRow + i) = *((*pArr).pRow + j);
```
```python
if
```
```python
(!
```
```python
strcmp
```
```python
((*((*pArr).pRow + i)).pStr, pPass))
        {
            (*pArr).pRow = (Row *)realloc((*pArr).pRow, ((*pArr).len +
```
```python
1
```
```python
) *
```
```python
sizeof
```
```python
(Row));
```
```python
for
```
```python
(
```
```python
int
```
```python
k = (*pArr).len; k >= i; --k)
            {
                *((*pArr).pRow + k +
```
```python
1
```
```python
) = *((*pArr).pRow + k);
            }
            *((*pArr).pRow + i) = *pRow;
            j +=
```
```python
2
```
```python
;
            i +=
```
```python
2
```
```python
;
        }
```
```python
else
```
```python
{
            ++j;
            ++i;
        }
    }               
}
```
```python
void
```
```python
arrayDeleteAllDatas(Array * pArr)
{
```
```python
if
```
```python
(!arrIsValidA(pArr))
```
```python
abort
```
```python
();
```
```python
for
```
```python
(
```
```python
int
```
```python
i =
```
```python
0
```
```python
; i < (*pArr).len; ++i)
{
```
```python
free
```
```python
((*((*pArr).pRow + i)).pStr);
}
```
```python
free
```
```python
((*pArr).pRow);
(*pArr).pRow = NULL;
(*pArr).len =
```
```python
0
```
```python
;
}
```
```python
void
```
```python
arrayDeleteDataByFirstQQ(Array * pArr,
```
```python
long
```
```python
long
```
```python
QQ)
{
```
```python
if
```
```python
(!isValidA(pArr) || !arrIsValidB(pArr) || !arrIsValidC(pArr))
```
```python
abort
```
```python
();
```
```python
int
```
```python
relPos = -
```
```python
1
```
```python
;
```
```python
for
```
```python
(
```
```python
int
```
```python
i =
```
```python
0
```
```python
; i < (*pArr).len; ++i)
    {
```
```python
if
```
```python
(QQ == (*((*pArr).pRow + i)).QQ)
        {
            relPos = i;
```
```python
break
```
```python
;
        }
    }
```
```python
if
```
```python
(-
```
```python
1
```
```python
== relPos)
    {
```
```python
abort
```
```python
();
    }
```
```python
free
```
```python
((*((*pArr).pRow + relPos)).pStr);
```
```python
for
```
```python
(
```
```python
int
```
```python
i = relPos; i < (*pArr).len -
```
```python
1
```
```python
; ++i)
    {
        *((*pArr).pRow + i) = *((*pArr).pRow + i +
```
```python
1
```
```python
);
    }
    --(*pArr).len;
    (*pArr).pRow = (Row *)realloc((*pArr).pRow, (*pArr).len *
```
```python
sizeof
```
```python
(Row));
}
```
```python
void
```
```python
arrayDeleteDataByAllQQ(Array * pArr,
```
```python
long
```
```python
long
```
```python
QQ)
{
```
```python
if
```
```python
(!arrIsValidA(pArr) || !arrIsValidB(pArr) || !arrIsValidC(pArr))
```
```python
abort
```
```python
();
```
```python
int
```
```python
i =
```
```python
0
```
```python
, j =
```
```python
0
```
```python
, k =
```
```python
0
```
```python
;;
```
```python
while
```
```python
(
```
```python
1
```
```python
)
    {
```
```python
if
```
```python
(i >= (*pArr).len || j >= (*pArr).len)
```
```python
break
```
```python
;
        *((*pArr).pRow + i) = *((*pArr).pRow + j);
```
```python
if
```
```python
(QQ == (*((*pArr).pRow + i)).QQ)
        {
```
```python
free
```
```python
((*((*pArr).pRow + i)).pStr);
            ++j;
            ++k;
        }
```
```python
else
```
```python
{
            ++i;
            ++j;
        }
    }
    (*pArr).len -= k;
    (*pArr).pRow = (Row *)realloc((*pArr).pRow, (*pArr).len *
```
```python
sizeof
```
```python
(Row));
}
```
```python
void
```
```python
arrayDeleteDataByFirstPass(Array * pArr,
```
```python
char
```
```python
* pPass)
{
```
```python
if
```
```python
(!arrIsValidA(pArr) || !arrIsValidB(pArr) || !arrIsValidC(pArr))
```
```python
abort
```
```python
();
```
```python
int
```
```python
relPos = -
```
```python
1
```
```python
;
```
```python
for
```
```python
(
```
```python
int
```
```python
i =
```
```python
0
```
```python
; i < (*pArr).len; ++i)
    {
```
```python
if
```
```python
(!
```
```python
strcmp
```
```python
(pPass, (*((*pArr).pRow + i)).pStr))
        {
            relPos = i;
```
```python
break
```
```python
;
        }
    }
```
```python
if
```
```python
(-
```
```python
1
```
```python
== relPos)
    {
```
```python
abort
```
```python
();
    }
```
```python
free
```
```python
((*((*pArr).pRow + relPos)).pStr);
```
```python
for
```
```python
(
```
```python
int
```
```python
i = relPos; i < (*pArr).len -
```
```python
1
```
```python
; ++i)
    {
        *((*pArr).pRow + i) = *((*pArr).pRow + i +
```
```python
1
```
```python
);
    }
    --(*pArr).len;
    (*pArr).pRow = (Row *)realloc((*pArr).pRow, (*pArr).len *
```
```python
sizeof
```
```python
(Row));
}
```
```python
void
```
```python
arrayDeleteDataByAllPass(Array * pArr,
```
```python
char
```
```python
* pPass)
{
```
```python
if
```
```python
(!arrIsValidA(pArr) || !arrIsValidB(pArr) || !arrIsValidC(pArr))
```
```python
abort
```
```python
();
```
```python
int
```
```python
i =
```
```python
0
```
```python
, j =
```
```python
0
```
```python
, k =
```
```python
0
```
```python
;
```
```python
while
```
```python
(
```
```python
1
```
```python
)
    {
```
```python
if
```
```python
(i >= (*pArr).len || j >= (*pArr).len)
```
```python
break
```
```python
;;
        *((*pArr).pRow + i) = *((*pArr).pRow + j);
```
```python
if
```
```python
(!
```
```python
strcmp
```
```python
(pPass, (*pArr).pRow + i))
        {
```
```python
free
```
```python
((*((*pArr).pRow + i)).pStr);
            ++k;
            ++j;
        }
```
```python
else
```
```python
{
            ++i;
            ++j;
        }
    }
    (*pArr).len -= k;
    (*pArr).pRow = (Row *)realloc((*pArr).pRow, (*pArr).len *
```
```python
sizeof
```
```python
(Row));
}
```
```python
void
```
```python
arrayUpdateDataByFirstQQ(Array * pArr,
```
```python
long
```
```python
long
```
```python
QQ, Row * pRow)
{
```
```python
if
```
```python
(!arrIsValidA(pArr) || !arrIsValidB(pArr) || !arrIsValidC(pArr))
```
```python
abort
```
```python
();
```
```python
for
```
```python
(
```
```python
int
```
```python
i =
```
```python
0
```
```python
; i < (*pArr).len; ++i)
    {
```
```python
if
```
```python
(QQ == (*((*pArr).pRow + i)).QQ)
        {
            rowUpdateRow((*pArr).pRow + i, pRow);
```
```python
break
```
```python
;
        }
    }
}
```
```python
void
```
```python
arrayUpdateDataByAllQQ(Array * pArr,
```
```python
long
```
```python
long
```
```python
QQ, Row * pRow)
{
```
```python
if
```
```python
(!arrIsValidA(pArr) || !arrIsValidB(pArr) || !arrIsValidC(pArr))
```
```python
abort
```
```python
();
```
```python
for
```
```python
(
```
```python
int
```
```python
i =
```
```python
0
```
```python
; i < (*pArr).len; ++i)
    {
```
```python
if
```
```python
(QQ == (*((*pArr).pRow + i)).QQ)
        {
            rowUpdateRow((*pArr).pRow + i, pRow);
        }
    }
}
```
```python
void
```
```python
arrayUpdateDataByFirstPass(Array * pArr,
```
```python
char
```
```python
* pPass, Row * pRow)
{
```
```python
if
```
```python
(!arrIsValidA(pArr) || !arrIsValidB(pArr) || !arrIsValidC(pArr))
```
```python
abort
```
```python
();
```
```python
for
```
```python
(
```
```python
int
```
```python
i =
```
```python
0
```
```python
; i < (*pArr).len; ++i)
    {
```
```python
if
```
```python
(!
```
```python
strcmp
```
```python
(pPass, (*((*pArr).pRow + i)).pStr))
        {
            rowUpdateRow((*pArr).pRow + i, pRow);
```
```python
break
```
```python
;
        }
    }
}
```
```python
void
```
```python
arrayUpdateDataByAllPass(Array * pArr,
```
```python
char
```
```python
* pPass, Row * pRow)
{
```
```python
if
```
```python
(!arrIsValidA(pArr) || !arrIsValidB(pArr) || !arrIsValidC(pArr))
```
```python
abort
```
```python
();
```
```python
for
```
```python
(
```
```python
int
```
```python
i =
```
```python
0
```
```python
; i < (*pArr).len; ++i)
    {
```
```python
if
```
```python
(!
```
```python
strcmp
```
```python
(pPass, (*((*pArr).pRow + i)).pStr))
        {
            rowUpdateRow((*pArr).pRow + i, pRow);
        }
    }
}
```
```python
int
```
```python
comByQQ(Row * pDataA, Row * pDataB)
{
```
```python
if
```
```python
(!rowIsValidA(pDataA) || !rowIsValidA(pDataB))
```
```python
abort
```
```python
();
```
```python
if
```
```python
((*pDataA).QQ < (*pDataB).QQ)
    {
```
```python
return
```
```python
-
```
```python
1
```
```python
;
    }
```
```python
else
```
```python
if
```
```python
((*pDataA).QQ == (*pDataB).QQ)
    {
```
```python
return
```
```python
0
```
```python
;
    }
```
```python
else
```
```python
{
```
```python
return
```
```python
1
```
```python
;
    }
}
```
```python
int
```
```python
comByPass(Row * pDataA, Row * pDataB)
{
```
```python
return
```
```python
strcmp
```
```python
((*pDataA).pStr, (*pDataB).pStr);
}
```
```python
void
```
```python
sortByQQ(Array * pArr)
{
    qsort((*pArr).pRow, (*pArr).len,
```
```python
sizeof
```
```python
(Row), comByQQ);
}
```
```python
void
```
```python
sortByPass(Array * pArr)
{
    qsort((*pArr).pRow, (*pArr).len,
```
```python
sizeof
```
```python
(Row), comByPass);
}
```
```python
///init
```
```python
.
```
```python
c
```
```python
#include
```
```python
"init
```
```python
.
```
```python
h"
```
```python
#include
```
```python
<
```
```python
string
```
```python
.
```
```python
h
```
```python
>
```
```python
char
```
```python
str
```
```python
[
```
```python
1024
```
```python
]
```
```python
=
```
```python
"521276402
```
```python
-
```
```python
-
```
```python
-
```
```python
-
```
```python
hanlei@19940403
```
```python
\
```
```python
286738260
```
```python
-
```
```python
-
```
```python
-
```
```python
-
```
```python
weipei559720
```
```python
\
```
```python
501223616
```
```python
-
```
```python
-
```
```python
-
```
```python
-
```
```python
feng66532008
```
```python
\
```
```python
77025077
```
```python
-
```
```python
-
```
```python
-
```
```python
-
```
```python
shuidongwo520
```
```python
\
```
```python
1340382355
```
```python
-
```
```python
-
```
```python
-
```
```python
-
```
```python
huang
```
```python
.
```
```python
512yang
```
```python
.
```
```python
\
```
```python
1061817115
```
```python
-
```
```python
-
```
```python
-
```
```python
-
```
```python
fz62wangyong1983
```
```python
\
```
```python
347232860
```
```python
-
```
```python
-
```
```python
-
```
```python
-
```
```python
20080811
```
```python
\
```
```python
1028181591
```
```python
-
```
```python
-
```
```python
-
```
```python
-
```
```python
7404850554
```
```python
\
```
```python
120539543
```
```python
-
```
```python
-
```
```python
-
```
```python
-
```
```python
0
```
```python
.
```
```python
0123456789
```
```python
\
```
```python
754229005
```
```python
-
```
```python
-
```
```python
-
```
```python
-
```
```python
460228214
```
```python
\
```
```python
819781633
```
```python
-
```
```python
-
```
```python
-
```
```python
-
```
```python
zmt1993826
```
```python
\
```
```python
1319148052
```
```python
-
```
```python
-
```
```python
-
```
```python
-
```
```python
ynu1500621032
```
```python
\
```
```python
904972448
```
```python
-
```
```python
-
```
```python
-
```
```python
-
```
```python
zhouxiaowen
```
```python
.
```
```python
520
```
```python
\
```
```python
750134133
```
```python
-
```
```python
-
```
```python
-
```
```python
-
```
```python
1292857988
```
```python
\
```
```python
77025077
```
```python
-
```
```python
-
```
```python
-
```
```python
-
```
```python
320675
```
```python
\
```
```python
379644978
```
```python
-
```
```python
-
```
```python
-
```
```python
-
```
```python
7758521tao
```
```python
\
```
```python
346083956
```
```python
-
```
```python
-
```
```python
-
```
```python
-
```
```python
devl1017
```
```python
\
```
```python
77025077
```
```python
-
```
```python
-
```
```python
-
```
```python
-
```
```python
5361a749
```
```python
";
```
```python
int
```
```python
num=0;//定义
```
```python
int
```
```python
countRow(char
```
```python
*
```
```python
pStr)
```
```python
{
```
```python
int
```
```python
rowNum
```
```python
=
```
```python
0;
```
```python
for
```
```python
(char
```
```python
*
```
```python
p
```
```python
=
```
```python
strstr(pStr
```
```python
,
```
```python
"
```
```python
-
```
```python
-
```
```python
-
```
```python
-
```
```python
");
```
```python
NULL
```
```python
!=
```
```python
p;
```
```python
p
```
```python
=
```
```python
strstr(p
```
```python
+
```
```python
4
```
```python
,
```
```python
"
```
```python
-
```
```python
-
```
```python
-
```
```python
-
```
```python
");)
```
```python
{
```
```python
+
```
```python
+
```
```python
rowNum;
```
```python
}
```
```python
return
```
```python
rowNum;
```
```python
}
```
程序片段(05):main.c
内容概要:**劫持方法解决内存泄漏**
```python
#include <stdio.h>
```
```python
#include <stdlib.h>
```
```python
//01.内存泄露:
```
```python
//  问题:手动开辟的堆内存空间没有进行及时的手动回收
```
```python
//  解决:劫持技术解决+堆内存操作函数包装(函数包装)
```
```python
//  原理:等同于引用计数的特点
```
```python
//02.防内存泄露原理:
```
```python
//  引用技术原理的使用
```
```python
typedef
```
```python
struct
```
```python
{
```
```python
//单内存块儿
```
```python
void
```
```python
* pStart;
```
```python
//首地址
```
```python
int
```
```python
memSize;
```
```python
//内存尺寸
```
```python
}Mem;
```
```python
typedef
```
```python
struct
```
```python
{
```
```python
//动态数组
```
```python
Mem * pMem;
```
```python
//首地址
```
```python
int
```
```python
memNum;
```
```python
//内存块数
```
```python
}MemArr;
```
```python
int
```
```python
i =
```
```python
0
```
```python
;
```
```python
//全局变量-->静态区-->统计内存块儿数
```
```python
void
```
```python
* myMalloc(size_t size)
{
    ++i;
```
```python
return
```
```python
malloc
```
```python
(size);
}
```
```python
void
```
```python
myFree(
```
```python
void
```
```python
* mem)
{
```
```python
free
```
```python
(mem);
    --i;
}
```
```python
int
```
```python
main01(
```
```python
void
```
```python
)
{
```
```python
void
```
```python
* pStart1 = myMalloc(
```
```python
14
```
```python
);
```
```python
void
```
```python
* pStart2 = myMalloc(
```
```python
14
```
```python
);
```
```python
void
```
```python
* pStart3 = myMalloc(
```
```python
14
```
```python
);
    myFree(pStart1);
```
```python
printf
```
```python
(
```
```python
"%d \n"
```
```python
, i);
    system(
```
```python
"pause"
```
```python
);
}
```

