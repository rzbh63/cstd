
# 数据结构之自建算法库——广义表 - 迂者-贺利坚的专栏 - CSDN博客

2015年10月07日 21:40:51[迂者-贺利坚](https://me.csdn.net/sxhelijian)阅读数：2437


本文针对[数据结构基础系列网络课程(5)：数组与广义表](http://edu.csdn.net/course/detail/1512)中第6课时[广义表的存储结构及基本运算的实现](http://edu.csdn.net/course/detail/1512/23607)。
广义算法库采用程序的多文件组织形式，包括两个文件：
1.头文件：glist.h，包含定义广义表数据结构的代码、宏定义、要实现算法的函数的声明；
```python
#ifndef GLIST_H_INCLUDED
```
```python
#define GLIST_H_INCLUDED
```
```python
typedef
```
```python
char
```
```python
ElemType;
```
```python
typedef
```
```python
struct
```
```python
lnode
{
```
```python
int
```
```python
tag;
```
```python
//节点类型标识
```
```python
union
```
```python
{
        ElemType data;
```
```python
//原子值
```
```python
struct
```
```python
lnode *sublist;
```
```python
//指向子表的指针
```
```python
} val;
```
```python
struct
```
```python
lnode *link;
```
```python
//指向下一个元素
```
```python
} GLNode;
```
```python
//广义表节点类型定义
```
```python
int
```
```python
GLLength(GLNode *g);
```
```python
//求广义表g的长度
```
```python
int
```
```python
GLDepth(GLNode *g);
```
```python
//求广义表g的深度
```
```python
GLNode *CreateGL(
```
```python
char
```
```python
*&s);
```
```python
//返回由括号表示法表示s的广义表链式存储结构
```
```python
void
```
```python
DispGL(GLNode *g);
```
```python
//输出广义表g
```
```python
#endif
```
```python
// GLIST_H_INCLUDED
```
2.源文件：glist.cpp，包含实现各种算法的函数的定义
```python
#include
```
```python
<
```
```python
stdio
```
```python
.
```
```python
h
```
```python
>
```
```python
#include
```
```python
<
```
```python
malloc
```
```python
.
```
```python
h
```
```python
>
```
```python
#include
```
```python
"glist.h"
```
```python
int GLLength(GLNode
```
```python
*
```
```python
g)
```
```python
//求广义表g的长度
```
```python
{
    int n
```
```python
=
```
```python
0
```
```python
;
    GLNode
```
```python
*
```
```python
g1;
    g1
```
```python
=
```
```python
g
```
```python
->
```
```python
val
```
```python
.
```
```python
sublist;
```
```python
//g指向广义表的第一个元素
```
```python
while
```
```python
(g1
```
```python
!=
```
```python
NULL
```
```python
)
    {
        n
```
```python
++
```
```python
;
```
```python
//累加元素个数
```
```python
g1
```
```python
=
```
```python
g1
```
```python
->
```
```python
link
```
```python
;
    }
```
```python
return
```
```python
n;
}
int GLDepth(GLNode
```
```python
*
```
```python
g)
```
```python
//求广义表g的深度
```
```python
{
    GLNode
```
```python
*
```
```python
g1;
    int
```
```python
max
```
```python
=
```
```python
0
```
```python
,dep;
```
```python
if
```
```python
(g
```
```python
->
```
```python
tag
```
```python
==
```
```python
0
```
```python
)
```
```python
//为原子时返回0
```
```python
return
```
```python
0
```
```python
;
    g1
```
```python
=
```
```python
g
```
```python
->
```
```python
val
```
```python
.
```
```python
sublist;
```
```python
//g1指向第一个元素
```
```python
if
```
```python
(g1
```
```python
==
```
```python
NULL
```
```python
)
```
```python
//为空表时返回1
```
```python
return
```
```python
1
```
```python
;
```
```python
while
```
```python
(g1
```
```python
!=
```
```python
NULL
```
```python
)
```
```python
//遍历表中的每一个元素
```
```python
{
```
```python
if
```
```python
(g1
```
```python
->
```
```python
tag
```
```python
==
```
```python
1
```
```python
)
```
```python
//元素为子表的情况
```
```python
{
            dep
```
```python
=
```
```python
GLDepth(g1);
```
```python
//递归调用求出子表的深度
```
```python
if
```
```python
(dep
```
```python
>
```
```python
max
```
```python
)
```
```python
//max为同一层所求过的子表中深度的最大值
```
```python
max
```
```python
=
```
```python
dep;
        }
        g1
```
```python
=
```
```python
g1
```
```python
->
```
```python
link
```
```python
;
```
```python
//使g1指向下一个元素
```
```python
}
```
```python
return
```
```python
(
```
```python
max
```
```python
+
```
```python
1
```
```python
);
```
```python
//返回表的深度
```
```python
}
GLNode
```
```python
*
```
```python
CreateGL(char
```
```python
*&
```
```python
s)
```
```python
//返回由括号表示法表示s的广义表链式存储结构
```
```python
{
    GLNode
```
```python
*
```
```python
g;
    char ch
```
```python
=*
```
```python
s
```
```python
++
```
```python
;
```
```python
//取一个字符
```
```python
if
```
```python
(ch
```
```python
!=
```
```python
'\0'
```
```python
)
```
```python
//串未结束判断
```
```python
{
        g
```
```python
=
```
```python
(GLNode
```
```python
*
```
```python
)malloc(sizeof(GLNode));
```
```python
//创建一个新节点
```
```python
if
```
```python
(ch
```
```python
==
```
```python
'('
```
```python
)
```
```python
//当前字符为左括号时
```
```python
{
            g
```
```python
->
```
```python
tag
```
```python
=
```
```python
1
```
```python
;
```
```python
//新节点作为表头节点
```
```python
g
```
```python
->
```
```python
val
```
```python
.
```
```python
sublist
```
```python
=
```
```python
CreateGL(s);
```
```python
//递归构造子表并链到表头节点
```
```python
}
```
```python
else
```
```python
if
```
```python
(ch
```
```python
==
```
```python
')'
```
```python
)
            g
```
```python
=
```
```python
NULL
```
```python
;
```
```python
//遇到')'字符,g置为空
```
```python
else
```
```python
if
```
```python
(ch
```
```python
==
```
```python
'#'
```
```python
)
```
```python
//遇到'#'字符，表示为空表
```
```python
g
```
```python
=
```
```python
NULL
```
```python
;
```
```python
else
```
```python
//为原子字符
```
```python
{
            g
```
```python
->
```
```python
tag
```
```python
=
```
```python
0
```
```python
;
```
```python
//新节点作为原子节点
```
```python
g
```
```python
->
```
```python
val
```
```python
.
```
```python
data
```
```python
=
```
```python
ch;
        }
    }
```
```python
else
```
```python
//串结束,g置为空
```
```python
g
```
```python
=
```
```python
NULL
```
```python
;
    ch
```
```python
=*
```
```python
s
```
```python
++
```
```python
;
```
```python
//取下一个字符
```
```python
if
```
```python
(g
```
```python
!=
```
```python
NULL
```
```python
)
```
```python
//串未结束，继续构造兄弟节点
```
```python
{
```
```python
if
```
```python
(ch
```
```python
==
```
```python
','
```
```python
)
```
```python
//当前字符为','
```
```python
g
```
```python
->
```
```python
link
```
```python
=
```
```python
CreateGL(s);
```
```python
//递归构造兄弟节点
```
```python
else
```
```python
//没有兄弟了,将兄弟指针置为NULL
```
```python
g
```
```python
->
```
```python
link
```
```python
=
```
```python
NULL
```
```python
;
    }
```
```python
return
```
```python
g;
```
```python
//返回广义表g
```
```python
}
```
```python
void
```
```python
DispGL(GLNode
```
```python
*
```
```python
g)
```
```python
//输出广义表g
```
```python
{
```
```python
if
```
```python
(g
```
```python
!=
```
```python
NULL
```
```python
)
```
```python
//表不为空判断
```
```python
{
```
```python
//先处理g的元素
```
```python
if
```
```python
(g
```
```python
->
```
```python
tag
```
```python
==
```
```python
0
```
```python
)
```
```python
//g的元素为原子时
```
```python
printf(
```
```python
"%c"
```
```python
, g
```
```python
->
```
```python
val
```
```python
.
```
```python
data
```
```python
);
```
```python
//输出原子值
```
```python
else
```
```python
//g的元素为子表时
```
```python
{
            printf(
```
```python
"("
```
```python
);
```
```python
//输出'('
```
```python
if
```
```python
(g
```
```python
->
```
```python
val
```
```python
.
```
```python
sublist
```
```python
==
```
```python
NULL
```
```python
)
```
```python
//为空表时
```
```python
printf(
```
```python
"#"
```
```python
);
```
```python
else
```
```python
//为非空子表时
```
```python
DispGL(g
```
```python
->
```
```python
val
```
```python
.
```
```python
sublist);
```
```python
//递归输出子表
```
```python
printf(
```
```python
")"
```
```python
);
```
```python
//输出')'
```
```python
}
```
```python
if
```
```python
(g
```
```python
->
```
```python
link
```
```python
!=
```
```python
NULL
```
```python
)
        {
            printf(
```
```python
","
```
```python
);
            DispGL(g
```
```python
->
```
```python
link
```
```python
);
```
```python
//递归输出后续表的内容
```
```python
}
    }
}
```
3.在同一项目（project）中建立一个源文件(如main.cpp)，编制main函数，完成相关的测试工作。 例：
```python
#include <stdio.h>
```
```python
#include "glist.h"
```
```python
int
```
```python
main()
{
    GLNode
```
```python
*g
```
```python
;
    char
```
```python
*s
```
```python
=
```
```python
"(b,(b,a,(#),d),((a,b),c((#))))"
```
```python
;
    g = CreateGL(
```
```python
s
```
```python
);
    DispGL(g);
```
```python
printf
```
```python
(
```
```python
"广义表长度:
```
```python
%d
```
```python
\n"
```
```python
, GLLength(g));
```
```python
printf
```
```python
(
```
```python
"广义表深度:
```
```python
%d
```
```python
\n"
```
```python
, GLDepth(g));
```
```python
return
```
```python
0
```
```python
;
}
```

