
# 数据结构实践——计数的模式匹配 - 迂者-贺利坚的专栏 - CSDN博客

2015年10月11日 01:53:07[迂者-贺利坚](https://me.csdn.net/sxhelijian)阅读数：1798个人分类：[数据结构																](https://blog.csdn.net/sxhelijian/article/category/5757113)



本文针对[数据结构基础系列网络课程(4)：串](http://edu.csdn.net/course/detail/1434)实践项目。
【项目 - 计数的模式匹配】
采用顺序结构存储串，编写一个算法计算指定子串在一个字符串中出现的次数，如果该子串不出现则为0。
> 提示：无论BF模式匹配算法，还是KMP算法，都是在找到子串substr后就退出了。解决这个问题，要查找完整个字符串，并将出现的次数记下来。改造这两个算法吧。
[参考解答]（头文件sqstring.h见[顺序串算法库](http://blog.csdn.net/sxhelijian/article/details/48573133)）
改造BF算法完成求解。
```python
#include <stdio.h>
```
```python
#include "sqString.h"
```
```python
int
```
```python
str_count(SqString s,SqString t)
{
```
```python
int
```
```python
i=
```
```python
0
```
```python
,j=
```
```python
0
```
```python
,count=
```
```python
0
```
```python
;
```
```python
while
```
```python
(i<s.length && j<t.length)
    {
```
```python
if
```
```python
(s.data[i]==t.data[j])
```
```python
//继续匹配下一个字符
```
```python
{
            i++;
```
```python
//主串和子串依次匹配下一个字符
```
```python
j++;
        }
```
```python
else
```
```python
//主串、子串指针回溯重新开始下一次匹配
```
```python
{
            i=i-j+
```
```python
1
```
```python
;
```
```python
//主串从下一个位置开始匹配
```
```python
j=
```
```python
0
```
```python
;
```
```python
//子串从头开始匹配
```
```python
}
```
```python
//在BF算法中，没有下面的这一部分
```
```python
//这里增加一个判断，可以“捕捉”到已经产生的匹配
```
```python
if
```
```python
(j>=t.length)
```
```python
//如果j已经达到了子串的长度，产生了一个匹配
```
```python
{
            count++;
```
```python
//匹配次数加1
```
```python
i=i-j+
```
```python
1
```
```python
;
```
```python
//主串从下一个位置开始继续匹配
```
```python
j=
```
```python
0
```
```python
;
```
```python
//子串从头开始匹配
```
```python
}
    }
```
```python
return
```
```python
(count);
}
```
```python
int
```
```python
main()
{
    SqString s,t;
    StrAssign(s,
```
```python
"accaccacacabcacbab"
```
```python
);
    StrAssign(t,
```
```python
"accac"
```
```python
);
```
```python
printf
```
```python
(
```
```python
"s:"
```
```python
);
    DispStr(s);
```
```python
printf
```
```python
(
```
```python
"t:"
```
```python
);
    DispStr(t);
```
```python
printf
```
```python
(
```
```python
"%d\n"
```
```python
,str_count(s,t));
```
```python
return
```
```python
0
```
```python
;
}
```

