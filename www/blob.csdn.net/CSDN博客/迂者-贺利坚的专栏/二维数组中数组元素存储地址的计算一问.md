
# 二维数组中数组元素存储地址的计算一问 - 迂者-贺利坚的专栏 - CSDN博客

2019年01月31日 08:55:59[迂者-贺利坚](https://me.csdn.net/sxhelijian)阅读数：397


关于二维数组中数组元素的存储地址，有同学问出了个好问题。
在我的课件中，出现了下面的讲解：
![在这里插入图片描述](https://img-blog.csdnimg.cn/20190131082513554.JPG?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3N4aGVsaWppYW4=,size_16,color_FFFFFF,t_70)
`a[i][j]`的地址是`p+(i*col+j)*d`（d是数组元素所占的字节数）。
同学编程序进行验证，出问题了：
![在这里插入图片描述](https://img-blog.csdnimg.cn/20190131082802599.JPG?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3N4aGVsaWppYW4=,size_16,color_FFFFFF,t_70)
地球停止转动了也必须先赞这种学习方式！
同学问：“老师，第一张图的*4，我怎么觉得不对呢？第二张图我没*4，结果好像也对，这里面差在哪呢？”
我的答复：“两个都对。”
第一张图在讲原理，是我们在人脑里面要以“字节”为单位计算，p为首地址，单位是字节，再往后多少个字节，必须考虑到在整型数组中每个数组元素占4个字节，从首地址到`a[i][j]`有`(i*col+j)`个元素，计算其字节地址时，乘4是必要的。
第二张图是在计算机中的运行结果，是已经在计算机内按找第几“个”数组元素为单位计算地址值了，*4的操作，是在寻址中已经计算过了，在此直接输出结果。
更直白地，第一张图中的“p+”中的加，和我们日常算术中的加一样，我们按“字节”说事；而第二张图中的“p+”，是C语言中指针的加运算，是增加一个单元，究竟多少字节，还要考虑指向的元素的数据类型，在32位系统中，对于整型，一个单元4字节，而对于double型，一个单元8字节。
两个加号形状一样，含义是不同。
这个问题，学C/C++的同学才可能会遇到，学习C/C++中主动寻疑验证的同学才会遇到。可见学C/C++的价值，可见主动寻疑验证的价值。
想起离散数学中的代数结构，用符号任意地表达运算，研究或设计运算系统，好一个“让思绪飞扬”和”精彩世界“，一不留神却成了“枯燥乏味”和“与实践无关”。
能从不同层面，不同视角看问题，这就是自由。

