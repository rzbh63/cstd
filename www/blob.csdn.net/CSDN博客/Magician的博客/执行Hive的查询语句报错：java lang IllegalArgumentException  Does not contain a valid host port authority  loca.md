
# 执行Hive的查询语句报错：java.lang.IllegalArgumentException: Does not contain a valid host:port authority: loca - Magician的博客 - CSDN博客


2017年10月22日 22:49:31[春雨里de太阳](https://me.csdn.net/qq_16633405)阅读数：624


好不容易把Hive装完了，结果一执行Hive的查询语句运行MapReduce程序立马报错。。。
log详细信息如下：
```python
Job running
```
```python
in
```
```python
-process (local Hadoop)
Hadoop job information for null: number of mappers:
```
```python
1
```
```python
; number of reducers: 0
```
```python
2017
```
```python
-
```
```python
10
```
```python
-
```
```python
21
```
```python
21
```
```python
:
```
```python
54
```
```python
:
```
```python
15
```
```python
,
```
```python
503
```
```python
null map =
```
```python
0
```
```python
%,  reduce =
```
```python
0
```
```python
%
```
```python
2017
```
```python
-
```
```python
10
```
```python
-
```
```python
21
```
```python
21
```
```python
:
```
```python
54
```
```python
:
```
```python
44
```
```python
,
```
```python
930
```
```python
null map =
```
```python
100
```
```python
%,  reduce =
```
```python
0
```
```python
%
Ended Job = job_1508590228879_0004 with errors
Error during job, obtaining debugging information...
Examining task ID: task_1508590228879_0004_m_000000 (
```
```python
and
```
```python
more) from job job_1508590228879_0004
Exception
```
```python
in
```
```python
thread
```
```python
"Thread-19"
```
```python
java
```
```python
.lang
```
```python
.IllegalArgumentException
```
```python
: Does not contain a valid host:port authority: local
        at org
```
```python
.apache
```
```python
.hadoop
```
```python
.net
```
```python
.NetUtils
```
```python
.createSocketAddr
```
```python
(NetUtils
```
```python
.java
```
```python
:
```
```python
212
```
```python
)
        at org
```
```python
.apache
```
```python
.hadoop
```
```python
.net
```
```python
.NetUtils
```
```python
.createSocketAddr
```
```python
(NetUtils
```
```python
.java
```
```python
:
```
```python
164
```
```python
)
        at org
```
```python
.apache
```
```python
.hadoop
```
```python
.net
```
```python
.NetUtils
```
```python
.createSocketAddr
```
```python
(NetUtils
```
```python
.java
```
```python
:
```
```python
153
```
```python
)
        at org
```
```python
.apache
```
```python
.hadoop
```
```python
.hive
```
```python
.ql
```
```python
.exec
```
```python
.JobTrackerURLResolver
```
```python
.getURL
```
```python
(JobTrackerURLResolver
```
```python
.java
```
```python
:
```
```python
42
```
```python
)
        at org
```
```python
.apache
```
```python
.hadoop
```
```python
.hive
```
```python
.ql
```
```python
.exec
```
```python
.JobDebugger
```
```python
.showJobFailDebugInfo
```
```python
(JobDebugger
```
```python
.java
```
```python
:
```
```python
209
```
```python
)
        at org
```
```python
.apache
```
```python
.hadoop
```
```python
.hive
```
```python
.ql
```
```python
.exec
```
```python
.JobDebugger
```
```python
.run
```
```python
(JobDebugger
```
```python
.java
```
```python
:
```
```python
92
```
```python
)
        at java
```
```python
.lang
```
```python
.Thread
```
```python
.run
```
```python
(Thread
```
```python
.java
```
```python
:
```
```python
744
```
```python
)
Execution failed with exit status:
```
```python
2
```
```python
Obtaining error information
```
```python
FAILED:
```
```python
Execution Error, return code
```
```python
2
```
```python
from org
```
```python
.apache
```
```python
.hadoop
```
```python
.hive
```
```python
.ql
```
```python
.exec
```
```python
.MapRedTask
```
看了网上的许多方法，有让在hive-site日志下加入这个属性:
```python
<
```
```python
property
```
```python
>
```
```python
<
```
```python
name
```
```python
>
```
```python
hive.exec.show.job.failure.debug.info
```
```python
</
```
```python
name
```
```python
>
```
```python
<
```
```python
value
```
```python
>
```
```python
false
```
```python
</
```
```python
value
```
```python
>
```
```python
</
```
```python
property
```
```python
>
```
然而并没有效果。刚好最近开十九大，整个VPN被封完了，也没法翻墙找答案，只能在内网大海捞针（答案千篇一律）。然而皇天不负有心人，最终总算在一个算是能访问的国外论坛中找到了答案，（同样的问题，十几个回答中找到了唯一正确的解决方法。。。）。至于原因，我还没搞懂（根据这个属性的设置，个人猜测应该通过添加这个设置的属性值，将程序源码执行中要抛出的异常给忽略了）。
废话少说直接上解决方案：
直接再hive-site下添加如下属性：
```python
<
```
```python
property
```
```python
>
```
```python
<
```
```python
name
```
```python
>
```
```python
mapreduce.jobtracker.address
```
```python
</
```
```python
name
```
```python
>
```
```python
<
```
```python
value
```
```python
>
```
```python
ignorethis
```
```python
</
```
```python
value
```
```python
>
```
```python
</
```
```python
property
```
```python
>
```
这样直接就OK了。
就因为一个这样的小问题就花了我快一天的学习时间，真TM要命。。。
希望后能为后来者提供下帮助。

