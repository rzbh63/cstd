
# 2015级C++第16周程序阅读 文件操作 - 迂者-贺利坚的专栏 - CSDN博客

2016年06月09日 11:55:02[迂者-贺利坚](https://me.csdn.net/sxhelijian)阅读数：1543个人分类：[C++																](https://blog.csdn.net/sxhelijian/article/category/908261)



1、请写出下面程序的输出结果
（1）
```python
#include <iostream>
```
```python
#include <fstream>
```
```python
using
```
```python
namespace
```
```python
std
```
```python
;
```
```python
int
```
```python
main()
{
    fstream outfile,infile;
    outfile.open(
```
```python
"data.dat"
```
```python
,ios::out);
    outfile<<
```
```python
"1111111111"
```
```python
<<endl;
    outfile<<
```
```python
"aaaaaaaaaa"
```
```python
<<endl;
    outfile<<
```
```python
"AAAAAAAAAA"
```
```python
<<endl;
    outfile<<
```
```python
"**********"
```
```python
<<endl;
    outfile.close();
    infile.open(
```
```python
"data.dat"
```
```python
,ios::in);
```
```python
char
```
```python
line[
```
```python
80
```
```python
];
```
```python
int
```
```python
i=
```
```python
0
```
```python
;
```
```python
while
```
```python
(!infile.eof())
    {
        i++;
        infile.getline(line,
```
```python
sizeof
```
```python
(line));
```
```python
cout
```
```python
<<i<<
```
```python
": "
```
```python
<<line<<endl;
    }
    infile.close();
```
```python
return
```
```python
0
```
```python
;
}
```
（2）说出程序的功能，并上机验证（请自建a.txt）
```python
#include <iostream>
```
```python
#include <fstream>
```
```python
using
```
```python
namespace
```
```python
std
```
```python
;
```
```python
int
```
```python
main()
{
    ifstream readFile;
    ofstream writeFile;
```
```python
char
```
```python
ch;
    readFile.open(
```
```python
"a.txt"
```
```python
, ios::in);
    writeFile.open(
```
```python
"b.txt"
```
```python
, ios::out);
```
```python
while
```
```python
(readFile.get(ch))
        writeFile.put(ch);
    readFile.close();
    writeFile.close();
```
```python
cout
```
```python
<<
```
```python
"Finish!"
```
```python
<< endl;
```
```python
return
```
```python
0
```
```python
;
}
```
（3）
```python
#include <iostream>
```
```python
#include <fstream>
```
```python
#include<cstring>
```
```python
using
```
```python
namespace
```
```python
std
```
```python
;
```
```python
int
```
```python
main()
{
    ifstream readFile;
    ofstream writeFile;
```
```python
char
```
```python
ch[
```
```python
100
```
```python
];
    readFile.open(
```
```python
"a.txt"
```
```python
, ios::in);
    writeFile.open(
```
```python
"b.txt"
```
```python
, ios::out);
```
```python
while
```
```python
(!readFile.eof())
    {
        readFile.getline(ch,
```
```python
100
```
```python
,
```
```python
'\n'
```
```python
);
        writeFile.write(ch,
```
```python
strlen
```
```python
(ch));
        writeFile.write(
```
```python
"\n"
```
```python
,
```
```python
1
```
```python
);
    }
    readFile.close();
    writeFile.close();
```
```python
cout
```
```python
<<
```
```python
"Finish!"
```
```python
<< endl;
```
```python
return
```
```python
0
```
```python
;
}
```
2、阅读并运行下面的两个程序，分别用记事本和二进制文件阅读器（请自行下载Binary Viewer）。查看其内容，并理解二进制文件存储的原理。
（1）
```python
#include <iostream>
```
```python
#include <fstream>
```
```python
#include <cstdlib>
```
```python
using
```
```python
namespace
```
```python
std
```
```python
;
```
```python
int
```
```python
main( )
{
```
```python
int
```
```python
a;
    ofstream outfile(
```
```python
"f1.dat"
```
```python
,ios::out);
```
```python
if
```
```python
(!outfile)
    {
```
```python
cerr
```
```python
<<
```
```python
"open error!"
```
```python
<<endl;
```
```python
exit
```
```python
(
```
```python
1
```
```python
);
    }
```
```python
cin
```
```python
>>a;
    outfile<<a<<endl;
    outfile.close();
```
```python
return
```
```python
0
```
```python
;
}
```
（2）
```python
#include <iostream>
```
```python
#include <fstream>
```
```python
#include <cstdlib>
```
```python
using
```
```python
namespace
```
```python
std
```
```python
;
```
```python
int
```
```python
main( )
{
```
```python
int
```
```python
a;
    ofstream outfile(
```
```python
"f2.dat"
```
```python
,ios::out|ios::binary);
```
```python
if
```
```python
(!outfile)
    {
```
```python
cerr
```
```python
<<
```
```python
"open error!"
```
```python
<<endl;
```
```python
exit
```
```python
(
```
```python
1
```
```python
);
    }
```
```python
cin
```
```python
>>a;
    outfile.write((
```
```python
char
```
```python
*)&a,
```
```python
sizeof
```
```python
(
```
```python
int
```
```python
));
    outfile.close();
```
```python
return
```
```python
0
```
```python
;
}
```
3、查看下面程序的输出，解释为什么会有这样的输出。
```python
#include <iostream>
```
```python
#include <fstream>
```
```python
using
```
```python
namespace
```
```python
std
```
```python
;
```
```python
int
```
```python
main( )
{
```
```python
unsigned
```
```python
char
```
```python
a[] = {
```
```python
0xD4
```
```python
,
```
```python
0xB8
```
```python
,
```
```python
0xB7
```
```python
,
```
```python
0xAD
```
```python
,
```
```python
0xD7
```
```python
,
```
```python
0xAA
```
```python
,
```
```python
0xB5
```
```python
,
```
```python
0xC4
```
```python
,
```
```python
0x43
```
```python
,
```
```python
0x2B
```
```python
,
```
```python
0x2B
```
```python
,
```
```python
0xBF
```
```python
,
```
```python
0xCE
```
```python
,
```
```python
0xCC
```
```python
,
```
```python
0xC3
```
```python
,
```
```python
0xCE
```
```python
,
```
```python
0xAA
```
```python
,
```
```python
0xC4
```
```python
,
```
```python
0xE3
```
```python
,
```
```python
0xB4
```
```python
,
```
```python
0xF8
```
```python
,
```
```python
0xC0
```
```python
,
```
```python
0xB4
```
```python
,
```
```python
0xD1
```
```python
,
```
```python
0xA7
```
```python
,
```
```python
0xCF
```
```python
,
```
```python
0xB0
```
```python
,
```
```python
0xB7
```
```python
,
```
```python
0xBD
```
```python
,
```
```python
0xB7
```
```python
,
```
```python
0xA8
```
```python
,
```
```python
0xB5
```
```python
,
```
```python
0xC4
```
```python
,
```
```python
0xB8
```
```python
,
```
```python
0xC4
```
```python
,
```
```python
0xB1
```
```python
,
```
```python
0xE4
```
```python
,
```
```python
0xA3
```
```python
,
```
```python
0xA1
```
```python
};
    ofstream outfile(
```
```python
"f3.dat"
```
```python
,ios::out|ios::binary);
    outfile.write((
```
```python
char
```
```python
*)a,
```
```python
sizeof
```
```python
(a));
    outfile.close();
```
```python
return
```
```python
0
```
```python
;
}
```
4、阅读下面的程序，指出其功能，体会seekg()、tellg()等函数的功能及其用法
（1）
```python
#include<iostream>
```
```python
#include <fstream>
```
```python
using
```
```python
namespace
```
```python
std
```
```python
;
```
```python
const
```
```python
char
```
```python
* filename =
```
```python
"a.txt"
```
```python
;
```
```python
int
```
```python
main ()
{
```
```python
long
```
```python
l,m;
    ifstream file (filename, ios::in|ios::binary);
    l = file.tellg();
    file.seekg (
```
```python
0
```
```python
, ios::end);
    m = file.tellg();
    file.close();
```
```python
cout
```
```python
<<
```
```python
"size of "
```
```python
<< filename;
```
```python
cout
```
```python
<<
```
```python
" is "
```
```python
<< (m-l) <<
```
```python
" bytes.\n"
```
```python
;
```
```python
return
```
```python
0
```
```python
;
}
```
（2）
```python
#include <fstream>
```
```python
using namespace std;
```
```python
int
```
```python
main ()
{
    long
```
```python
pos
```
```python
;
    ofstream outfile;
    outfile.
```
```python
open
```
```python
(
```
```python
"test.txt"
```
```python
);
    outfile.
```
```python
write
```
```python
(
```
```python
"This is an apple"
```
```python
,
```
```python
16
```
```python
);
```
```python
pos
```
```python
=outfile.tellp();
    outfile.seekp (
```
```python
pos
```
```python
-
```
```python
7
```
```python
);
    outfile.
```
```python
write
```
```python
(
```
```python
" sam"
```
```python
,
```
```python
4
```
```python
);
    outfile.
```
```python
close
```
```python
();
```
```python
return
```
```python
0
```
```python
;
}
```
（3）
```python
#include <iostream>
```
```python
#include <fstream>
```
```python
using
```
```python
namespace
```
```python
std
```
```python
;
```
```python
int
```
```python
main()
{
    fstream outfile,infile;
    outfile.open(
```
```python
"data.txt"
```
```python
,ios::out);
```
```python
for
```
```python
(
```
```python
int
```
```python
i=
```
```python
0
```
```python
; i<
```
```python
26
```
```python
; i++)
        outfile<<(
```
```python
char
```
```python
)(
```
```python
'A'
```
```python
+i);
    outfile.close();
    infile.open(
```
```python
"data.txt"
```
```python
,ios::in);
```
```python
char
```
```python
ch;
    infile.seekg(
```
```python
6
```
```python
,ios::beg);
```
```python
if
```
```python
(infile.get(ch))
```
```python
cout
```
```python
<<ch;
    infile.seekg(
```
```python
8
```
```python
,ios::beg);
```
```python
if
```
```python
(infile.get(ch))
```
```python
cout
```
```python
<<ch;
    infile.seekg(-
```
```python
8
```
```python
,ios::end);
```
```python
if
```
```python
(infile.get(ch))
```
```python
cout
```
```python
<<ch;
```
```python
cout
```
```python
<<endl;
    infile.close();
```
```python
return
```
```python
0
```
```python
;
}
```

