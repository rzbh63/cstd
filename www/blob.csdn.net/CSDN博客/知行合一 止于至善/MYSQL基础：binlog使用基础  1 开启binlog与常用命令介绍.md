
# MYSQL基础：binlog使用基础: 1:开启binlog与常用命令介绍 - 知行合一 止于至善 - CSDN博客

2019年03月08日 06:16:35[liumiaocn](https://me.csdn.net/liumiaocn)阅读数：412标签：[mysql																](https://so.csdn.net/so/search/s.do?q=mysql&t=blog)[binlog																](https://so.csdn.net/so/search/s.do?q=binlog&t=blog)[
							](https://so.csdn.net/so/search/s.do?q=mysql&t=blog)个人分类：[数据库																](https://blog.csdn.net/liumiaocn/article/category/6328292)



![在这里插入图片描述](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
Binlog是binary log的缩写，这种以二进制文件形式存放的log，记录了mysql的数据变更，所有的DDL和DML语句都会以时间的形式予以记录，同时语句执行的消耗时间等也会被记录。它也是在数据丢失的时候，往往第一时间想到的部分。当你不小心drop database的时候，如果你有日别的定时备份和binlog，使用binlog恢复增量数据部分，往往问题并不会很大。
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
# 使用场景
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)主要的使用场景有如下两种：
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
## MYSQL主从复制
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)Master端打开binlog，需要进行主从复制时通过binlog文件的传递来实现
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
## 数据恢复
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)使用mysqlbinlog工具来进行数据的恢复，本文将使用简单示例进行说明。
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
# binlog的三种模式
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)binlog主要有如下三种模式：
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)Row：行模式。记录每条数据详细变更内容和所有字段，日志会比较大。
Statement：语句模式。记录的只是执行语句，减少了日志量。
Mixed：混合模式。一般的修改使用statement格式，当statement无法完成主从复制时，则采用Row模式。
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
# 确认binlog
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)使用如下命令可以确认binlog状态，可以看到当前状态为OFF
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
```python
mysql
```
```python
>
```
```python
show
```
```python
variables
```
```python
like
```
```python
'log_bin%'
```
```python
;
```
```python
+
```
```python
---------------------------------+-------+
```
```python
|
```
```python
Variable_name
```
```python
|
```
```python
Value
```
```python
|
```
```python
+
```
```python
---------------------------------+-------+
```
```python
|
```
```python
log_bin
```
```python
|
```
```python
OFF
```
```python
|
```
```python
|
```
```python
log_bin_basename
```
```python
|
```
```python
|
```
```python
|
```
```python
log_bin_index
```
```python
|
```
```python
|
```
```python
|
```
```python
log_bin_trust_function_creators
```
```python
|
```
```python
OFF
```
```python
|
```
```python
|
```
```python
log_bin_use_v1_row_events
```
```python
|
```
```python
OFF
```
```python
|
```
```python
+
```
```python
---------------------------------+-------+
```
```python
5
```
```python
rows
```
```python
in
```
```python
set
```
```python
(
```
```python
0.00
```
```python
sec
```
```python
)
```
```python
mysql
```
```python
>
```
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
# 开启binlog
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)此官方mysql镜像，设定文件可以直接修改/etc/mysql/mysql.conf.d/mysqld.cnf。
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)`# echo "log_bin=ON" >>/etc/mysql/mysql.conf.d/mysqld.cnf
#`[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)但是请注意，在mysql 5.7及其以上版本的话，如果开启binlog，做上述设定时，必须同时设定server-id，此server-id在MYSQL集群中需要指定不重复的信息，单机版本的MYSQL可以随意指定，但是如果没有指定，则可能会由于出现如下错误，导致mysql无法启动
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)`[ERROR] You have enabled the binary log, but you haven't provided the mandatory server-id. Please refer to the proper server start-up parameters documentation`[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)比如这里指定信息如下所示
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)`server-id=1001`[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)重启mysql的容器即可开启binlog，在此确认binlog状态如下所示,可以看到log_bin_basename和log_bin_index也同时被设定。
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
```python
mysql
```
```python
>
```
```python
show
```
```python
variables
```
```python
like
```
```python
'log_bin%'
```
```python
;
```
```python
+
```
```python
---------------------------------+-------------------------+
```
```python
|
```
```python
Variable_name
```
```python
|
```
```python
Value
```
```python
|
```
```python
+
```
```python
---------------------------------+-------------------------+
```
```python
|
```
```python
log_bin
```
```python
|
```
```python
ON
```
```python
|
```
```python
|
```
```python
log_bin_basename
```
```python
|
```
```python
/
```
```python
var
```
```python
/
```
```python
lib
```
```python
/
```
```python
mysql
```
```python
/
```
```python
ON
```
```python
|
```
```python
|
```
```python
log_bin_index
```
```python
|
```
```python
/
```
```python
var
```
```python
/
```
```python
lib
```
```python
/
```
```python
mysql
```
```python
/
```
```python
ON
```
```python
.
```
```python
index
```
```python
|
```
```python
|
```
```python
log_bin_trust_function_creators
```
```python
|
```
```python
OFF
```
```python
|
```
```python
|
```
```python
log_bin_use_v1_row_events
```
```python
|
```
```python
OFF
```
```python
|
```
```python
+
```
```python
---------------------------------+-------------------------+
```
```python
5
```
```python
rows
```
```python
in
```
```python
set
```
```python
(
```
```python
0.00
```
```python
sec
```
```python
)
```
```python
mysql
```
```python
>
```
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
# binlog的两类文件
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)可以通过show master logs来查询binlog的日志信息
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
```python
mysql
```
```python
>
```
```python
show
```
```python
master logs
```
```python
;
```
```python
+
```
```python
-----------+-----------+
```
```python
|
```
```python
Log_name
```
```python
|
```
```python
File_size
```
```python
|
```
```python
+
```
```python
-----------+-----------+
```
```python
|
```
```python
ON
```
```python
.000001
```
```python
|
```
```python
154
```
```python
|
```
```python
+
```
```python
-----------+-----------+
```
```python
1
```
```python
row
```
```python
in
```
```python
set
```
```python
(
```
```python
0.00
```
```python
sec
```
```python
)
```
```python
mysql
```
```python
>
```
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)可以看到当前日志名称为ON.000001，此文件在/var/lib/mysql下，详细信息如下
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)`# pwd
/var/lib/mysql
# ls ON.*
ON.000001  ON.index
#`[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)这里可以看到有两类文件：
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)文件后缀为.index的文件：二进制日志索引文件
文件猴嘴为.00000*的文件：二进制日志文件，记录所有的DDL和DML语句事件。
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
# 查看master状态
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)使用show master status可以查看master状态：
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
```python
mysql
```
```python
>
```
```python
show
```
```python
master
```
```python
status
```
```python
;
```
```python
+
```
```python
-----------+----------+--------------+------------------+-------------------+
```
```python
|
```
```python
File
```
```python
|
```
```python
Position
```
```python
|
```
```python
Binlog_Do_DB
```
```python
|
```
```python
Binlog_Ignore_DB
```
```python
|
```
```python
Executed_Gtid_Set
```
```python
|
```
```python
+
```
```python
-----------+----------+--------------+------------------+-------------------+
```
```python
|
```
```python
ON
```
```python
.000001
```
```python
|
```
```python
154
```
```python
|
```
```python
|
```
```python
|
```
```python
|
```
```python
+
```
```python
-----------+----------+--------------+------------------+-------------------+
```
```python
1
```
```python
row
```
```python
in
```
```python
set
```
```python
(
```
```python
0.00
```
```python
sec
```
```python
)
```
```python
mysql
```
```python
>
```
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)此命令会显示最新的binlog日志的编号名称（File）以及Postion（最后一个操作事件的结束值）
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
# 刷新日志
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)使用flush logs可以进行日志的刷新，此时会产生一个新的编号的日志文件
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
```python
mysql
```
```python
>
```
```python
flush logs
```
```python
;
```
```python
Query OK
```
```python
,
```
```python
0
```
```python
rows
```
```python
affected
```
```python
(
```
```python
0.02
```
```python
sec
```
```python
)
```
```python
mysql
```
```python
>
```
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)结果信息确认如下
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
```python
mysql
```
```python
>
```
```python
show
```
```python
master logs
```
```python
;
```
```python
+
```
```python
-----------+-----------+
```
```python
|
```
```python
Log_name
```
```python
|
```
```python
File_size
```
```python
|
```
```python
+
```
```python
-----------+-----------+
```
```python
|
```
```python
ON
```
```python
.000001
```
```python
|
```
```python
194
```
```python
|
```
```python
|
```
```python
ON
```
```python
.000002
```
```python
|
```
```python
154
```
```python
|
```
```python
+
```
```python
-----------+-----------+
```
```python
2
```
```python
rows
```
```python
in
```
```python
set
```
```python
(
```
```python
0.00
```
```python
sec
```
```python
)
```
```python
mysql
```
```python
>
```
```python
show
```
```python
master
```
```python
status
```
```python
;
```
```python
+
```
```python
-----------+----------+--------------+------------------+-------------------+
```
```python
|
```
```python
File
```
```python
|
```
```python
Position
```
```python
|
```
```python
Binlog_Do_DB
```
```python
|
```
```python
Binlog_Ignore_DB
```
```python
|
```
```python
Executed_Gtid_Set
```
```python
|
```
```python
+
```
```python
-----------+----------+--------------+------------------+-------------------+
```
```python
|
```
```python
ON
```
```python
.000002
```
```python
|
```
```python
154
```
```python
|
```
```python
|
```
```python
|
```
```python
|
```
```python
+
```
```python
-----------+----------+--------------+------------------+-------------------+
```
```python
1
```
```python
row
```
```python
in
```
```python
set
```
```python
(
```
```python
0.00
```
```python
sec
```
```python
)
```
```python
mysql
```
```python
>
```
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)文件信息如下所示
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)`# pwd
/var/lib/mysql
# ls ON.*     
ON.000001  ON.000002  ON.index
#`[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
# 查询binlog的事件信息
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)可以使用show binlog events来查询事件信息
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
```python
mysql
```
```python
>
```
```python
show
```
```python
binlog events
```
```python
;
```
```python
+
```
```python
-----------+-----+----------------+-----------+-------------+---------------------------------------+
```
```python
|
```
```python
Log_name
```
```python
|
```
```python
Pos
```
```python
|
```
```python
Event_type
```
```python
|
```
```python
Server_id
```
```python
|
```
```python
End_log_pos
```
```python
|
```
```python
Info
```
```python
|
```
```python
+
```
```python
-----------+-----+----------------+-----------+-------------+---------------------------------------+
```
```python
|
```
```python
ON
```
```python
.000001
```
```python
|
```
```python
4
```
```python
|
```
```python
Format_desc
```
```python
|
```
```python
1001
```
```python
|
```
```python
123
```
```python
|
```
```python
Server ver:
```
```python
5.7
```
```python
.16
```
```python
-
```
```python
log
```
```python
,
```
```python
Binlog ver:
```
```python
4
```
```python
|
```
```python
|
```
```python
ON
```
```python
.000001
```
```python
|
```
```python
123
```
```python
|
```
```python
Previous_gtids
```
```python
|
```
```python
1001
```
```python
|
```
```python
154
```
```python
|
```
```python
|
```
```python
|
```
```python
ON
```
```python
.000001
```
```python
|
```
```python
154
```
```python
|
```
```python
Rotate
```
```python
|
```
```python
1001
```
```python
|
```
```python
194
```
```python
|
```
```python
ON
```
```python
.000002
```
```python
;
```
```python
pos
```
```python
=
```
```python
4
```
```python
|
```
```python
+
```
```python
-----------+-----+----------------+-----------+-------------+---------------------------------------+
```
```python
3
```
```python
rows
```
```python
in
```
```python
set
```
```python
(
```
```python
0.00
```
```python
sec
```
```python
)
```
```python
mysql
```
```python
>
```
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
# 使用mysqlbinlog来查看日志内容
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)使用自带的命令mysqlbinlog可以查看日志内容，同样也可使用show binlog events in 'ON.00002’¥G;命令进行查询。
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
```python
# pwd
```
```python
/
```
```python
var
```
```python
/
```
```python
lib
```
```python
/
```
```python
mysql
```
```python
# ls ON.*
```
```python
ON
```
```python
.000001
```
```python
ON
```
```python
.000002
```
```python
ON
```
```python
.
```
```python
index
```
```python
# mysqlbinlog ON.000002
```
```python
/*!50530 SET @@SESSION.PSEUDO_SLAVE_MODE=1*/
```
```python
;
```
```python
/*!50003 SET @OLD_COMPLETION_TYPE=@@COMPLETION_TYPE,COMPLETION_TYPE=0*/
```
```python
;
```
```python
DELIMITER
```
```python
/*!*/
```
```python
;
```
```python
# at 4
```
```python
#190307 14:51:58 server id 1001  end_log_pos 123 CRC32 0x805f2f4b 	Start: binlog v 4, server v 5.7.16-log created 190307 14:51:58
```
```python
# Warning: this binlog is either in use or was not closed properly.
```
```python
BINLOG
```
```python
'
DjCBXA/pAwAAdwAAAHsAAAABAAQANS43LjE2LWxvZwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAEzgNAAgAEgAEBAQEEgAAXwAEGggAAAAICAgCAAAACgoKKioAEjQA
AUsvX4A=
'
```
```python
/*!*/
```
```python
;
```
```python
# at 123
```
```python
#190307 14:51:58 server id 1001  end_log_pos 154 CRC32 0x0e5d49ca 	Previous-GTIDs
```
```python
# [empty]
```
```python
SET
```
```python
@
```
```python
@SESSION.GTID_NEXT
```
```python
=
```
```python
'AUTOMATIC'
```
```python
/* added by mysqlbinlog */
```
```python
/*!*/
```
```python
;
```
```python
DELIMITER
```
```python
;
```
```python
# End of log file
```
```python
/*!50003 SET COMPLETION_TYPE=@OLD_COMPLETION_TYPE*/
```
```python
;
```
```python
/*!50530 SET @@SESSION.PSEUDO_SLAVE_MODE=0*/
```
```python
;
```
```python
#
```
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)也可以使用如下命令:
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
```python
mysql
```
```python
>
```
```python
show
```
```python
binlog events
```
```python
in
```
```python
'ON.000002'
```
```python
\G
```
```python
;
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
1.
```
```python
row
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
Log_name:
```
```python
ON
```
```python
.000002
```
```python
Pos:
```
```python
4
```
```python
Event_type: Format_desc
  Server_id:
```
```python
1001
```
```python
End_log_pos:
```
```python
123
```
```python
Info: Server ver:
```
```python
5.7
```
```python
.16
```
```python
-
```
```python
log
```
```python
,
```
```python
Binlog ver:
```
```python
4
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
2.
```
```python
row
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
*
```
```python
Log_name:
```
```python
ON
```
```python
.000002
```
```python
Pos:
```
```python
123
```
```python
Event_type: Previous_gtids
  Server_id:
```
```python
1001
```
```python
End_log_pos:
```
```python
154
```
```python
Info:
```
```python
2
```
```python
rows
```
```python
in
```
```python
set
```
```python
(
```
```python
0.00
```
```python
sec
```
```python
)
```
```python
ERROR:
```
```python
No
```
```python
query specified
mysql
```
```python
>
```
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
# 总结
[
](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)这篇文章介绍了如何设定binlog以及常见的命令的使用方法，接下来介绍drop table或者drop table的恢复方法和示例。
[
            ](https://img-blog.csdn.net/20170222150651784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1bWlhb2Nu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)

