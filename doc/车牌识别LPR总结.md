# 车牌识别LPR总结



# （一）-- 研究背景



　　在年尾用了几天的时间将2014年的所有工作都总结了一遍，将之前的文档综合了下。

　　以下是LPR系统，车牌识别的一些总结资料。

## 第一篇：LPR研究背景

　　汽车的出现改变了以往出行徒步和以马代步的时代，极大地改变了人们的生活方式，扩大了人们的活动范围，加强了人与人之间的交流。全世界的汽车拥有量呈爆炸性增长，汽车虽方便了我们的出行，但同时也造成了城市交通压力，应用现代科技解决汽车不断增长而出现的交通问题已经成为一项重要的研究课题，智能交通系统应孕而出。

　　智能交通系统(Intelligent Transportation System，简称 ITS)是一种充分利用各种先进的高新技术来实现实吋、准确、高效的交通管理系统，使交通更畅通更安全，它也是一种交通信息服务系统，使人们出行更方便更快捷。随着智能交通系统的快速发展，智能交通系统已经融入人们的日常生活，使人们的生活越来越方便。车辆是智能交通系统中的重点研究对象，每辆车都有自身唯一的车牌号码，车牌号码反映了车辆信息以及关联着车主信息，通过车牌号码可以记录对应车辆的交通行为，因此，车牌识别技术是智能交通系统中最核心最基础的技术之一，决定着智能交通系统的发展速度和技术水平。

　　它能够实时地对城市的车辆进行检测、监控和管理，实现智能交通的实时性和高效性；它不仅可以有效地减少人工操作的参与，节约成本；还可以在一定程度上杜绝一些交通工作人员的违规、舞弊操作，解决收费流失等问题；它还可以对城市的过往车流量进行检测、指导相关工作，减少交通拥堵现象。

　　在这个大力倡导智慧型城市概念的社会，随着互联网技术的提升，网络的发展，智能的车牌识别系统早已经深入人们的生活中，监测车流量等。

　　电子警察系统：一种抓拍车辆违章违规行为的智能系统，大大降低了交通管理压力。

　　卡口系统：对监控路段的机动车辆进行全天候的图像抓拍，自动识别车牌号码，通过公安专网与卡口系统控制中心的黑名单数据库进行比对，当发现结果相符合时，系统自动向相关人员发出警报信号。

　　高速公路收费系统：自动化管理，当车辆在高速公路收费入口站时，系统进行车牌识别，保存车牌信息，当车辆在高速公路收费出口站时，系统再次进行车牌识别，与进入车辆的车牌信息进行比对，只有进站和出站的车牌一致方可让车辆通行。

　　停车场收费系统：随处可见，收费系统抓拍车辆图片进行车牌识别，保存车辆信息和进入时间,并语音播报空闲车位，当车辆离幵停车场时，收费系统自动识别出该车的车牌号码和保存车辆离幵的时间，并在数据库中查找该车的进入时间，计算出该车的停车费周，车主交完费用后，收费系统自动放行。

　　智能公交报站：当公交车进入和离开公交站台时，报站系统对其进行车牌识别，然后与数据库中的车牌进行比对，语音报读车牌结果和公交线路。

　　车牌识别技术应用广泛，当然，上面所指的应用只是其中的一小部分。随着智能交通的迅猛发展，社会对车牌自动识别的需求量会越来越高多，技术上也会越来越高。

　　车牌自动识别系统也叫做LPR（License Plate Recognition）系统，目前国内做的比较成熟的产品有北京汉王科技有限公司开发的“汉王眼”车牌识别系统，厦门宸天电子科技有限公司研发的 Supplate系列，深圳吉通电子有限公司研发的“车牌通”车牌识别产品、亚洲视觉科技有限公司研发的 VECON-VIS 自动识别系统等。也有很多高校在研究这个课题。国外相对的在这个方面开始的比较早，同时他们的车牌种类单一，字符简单，容易定位识别有关，取得不错的成就。

　　关于车牌识别的研究，虽然国内外学者已经作了大量的工作，但仍然存在一些问题。在车辆还比较新的时候，车牌上的字迹清晰，较容易识别，随着车龄越来越大，车子经过风吹雨淋，车牌难免受到一定程度的磨损，这样就会造成识别的难度。比如车牌图像的倾斜、车牌自身的磨损、光线的干扰都会影响到定位的精度。

　　车牌字符识别是在车牌准确定位的基础上，对车牌上的汉字、字母、数字进行有效确认的过程。目前已有的方法很多，但其效果与实际的要求相差很远，难以适应现代化交通系统高速度、快节奏的要求。因而对字符识别的进一步研究也同样具有紧迫性和必要性。

　　**我们实验室的所做的工作就是基于Linux实现一个具有可视化界面的车牌识别系统。重点在于针对特点的环境改善现有的车牌定位、检测和识别的算法，对其进行优化，实现车牌识别的准确率和精确度。**







# [（二）-- 车牌特征及难点](https://www.cnblogs.com/silence-hust/p/4191700.html)



## 第二篇：车牌的特征及难点

### 2.1  对我国车牌的认识

　　我国目前使用的汽车牌号标准是 2007 年开始实施的《中华人民共和国机动车号牌》GA36-2007（2010 年修订）。根据 GA36-2007 对机动车牌号编排规则规定，我国汽车的车牌构造特点如下：

　　汽车车牌号的编排规则：我国的标准车辆车牌是由一个省份汉字（军警车牌为其他汉字）后跟字母或阿拉伯数字组成的 7 个字序列。标准车牌的的具体排列格式是：X1X2·X3X4X5X6X7，X1是各省、直辖市的简称或军警，X2是英文字母，代表该汽车所在地的地市代码，比如 A 代表省会，B 代表该省的第二大城市，C 代表该省的第三大城市，X3X4X5X6X7为英文字母或阿拉伯数字，2010年以前车牌号码的分布规律是，前面是字母，后面是数字。但是，随着车辆保有量的增加，每个字母所属号段越来越不够用。按照新《中华人民共和国机动车号牌》（2010 年修订）标准，将允许字母在后五位编码中任意一位出现，但不能超过两个。除了第一个汉字外，字母和数字的笔画在竖直方向都是联通的。

牌照类型如下图：

![img](http://7te8s4.com1.z0.glb.clouddn.com/lpr1.jpg)

 

　　绝大部分的汽车牌照的宽度为1100px，高度为350px，牌照上一共有7个或8个字符，其中，每个字符的宽度为45mm，高度为90mm，间隔符的宽度为10mm，除了第二个和第三个字符之间的间距为 34mm 外，字符之间的间隔宽度12mm。民用的汽车牌照上有所属省、自治区或直辖市的简称(军用、警察牌为其他汉字)，监督机关及发证照的代号(大写的英文字母)后跟阿拉伯数字或英文字母组成的7个字符序列。

![img](http://7te8s4.com1.z0.glb.clouddn.com/lpr2.jpg)

 

　　可以简单的归纳为以下特征：

　　1、颜色特征：即前面的六种类型，采用了对比度较为强烈的两种颜色的组合使车牌能明显区分于其它物体，而且车牌边框为白色或黑色两种颜色。使领馆车牌中的“使”和“领”字为红色，港澳出入境车牌中的“港”和“澳“两字为白色。警用汽车摩托车为白底黑字组合，其中”警“字为红色。

　　2、车牌具有统一的标准尺寸，这便于字符的分割和车牌的定位。

　　3、边缘特征：汽车的车牌边框是有规则的边缘，由于汽车车牌的字符排列规则，汽车车牌的垂直边缘比水平边缘更为丰富，而汽车的车身却有丰富的水平边缘，垂直边缘不明显。

　　4、黑白跳变特征：车牌区域二值化后，字符和背景为一黑一白，存在明显的黑白跳变，且跳变的次数在一定范围内。

　　5、投影特征：汽车车牌图像进行垂直投影后的图像是由波峰、波谷交替组成的连续分布图，垂直投影后的图像会有约七个波峰或波谷区；汽车车牌图像进行水平投影后的图像中灰度跳变的像素点数累加值很大。

　　了解我国车牌的特征，有利于后续对车牌进行的各种操作，在项目步骤中，这属于对需求目标的全面了解。对车牌的了解不能跳过，因清楚的知道我们所要处理的的目标的各个特性，这样才有利于我们利用这些特性来操作车票图像。

### 2.2 技术难点

#### 2.2.1、车牌定位中的难点

　　从环境等客观因素上来说，汽车的类型有很多且构造不同，使得不同汽车上的悬挂车牌的位置就会不同。这样，汽车车身与车牌区域出现相似的颜色、纹理，就很可能会造成车牌定位出错或需更长的时间才能定位出车牌。

　　车牌定位是指从拍摄的含有车牌的图像中定位出车牌的淮确位置，然后进一步的提取出车牌图像。其主要的难点有：

- 周围环境因素，比如随机噪声，天气气候(雪天，雨天，雾天等)，光线(白天强光，晚上漆黑等)等。
- 车牌自身因素，比如车牌倾斜，字迹模糊，车牌乱挂装饰物，车牌周围广告标语覆盖或干扰等。

#### 2.2.2、字符分割中的难点

   　字符分割是指从含有字符的车牌图像中将字符分割出来，字符分割的好坏会直接

　　影响到下一步的字符识别。其主要的难点有：

-  光照影响，不的照射光源(车灯，太阳光或辅助光源)，不同的气候条件(雨雪阴晴)，不同的光照角度。
-  汽车由于长途奔袭，再加上风吹日晒等各种原因，车牌上的字符可能会粘连，缺损或断裂，这会给字符分割带来一定的麻烦。
-  缺乏统一的车牌标准，车牌主要包括普通车牌，外事车牌和军用车牌等，这些车牌的规格，适用范围和颜色各有不同。

　　实际应用中，摄像设备所放的方位和角度有可能造成拍摄出来的车牌图像倾斜、畸变或部分被遮挡；当汽车处于高速行驶时，所拍摄的车辆图像清晰度不高；背景复杂的车辆图像，定位会有一定的困难，对后续的字符分割和字符识别带来严重的困难。

#### 2.2.3、字符识别中的难点

　　字符识别是指将分割好的字符图像送到分类器中，对图像中的字符进行识别。字符识别是整个车牌识别系统中的最后一步，也是最为关键的一步。主要的难点有：

- 车牌汉字中繁多的字符笔画，汉字较字母和数字的识别难度较大。
- 字符图像的分辨率较低时使得字符笔画结构特征不明显，特征难以提取。
-  相似字符的识别(B和8，D和0等)。

　　从算法上来说，由于采集到的车辆图像质量不高，存在噪声、图像模糊失真、车牌污损、其它字符区域干扰等情况，车牌识别技术中定位、分割、识别实现起来都有很多困难。算法的简捷、实用、快速往往和算法的速度形成冲突。怎样提高现有算法的识别率和速度，如何利用车牌的彩色信息进行车牌识别，一幅图像中多个车牌的情况怎样识别，怎样满足系统实时性要求等，这些都是车牌识别有待研究和解决的问题。



# [（三）-- LPR系统整体结构](https://www.cnblogs.com/silence-hust/p/4191732.html)



## 第三篇：系统的整体架构

　　LPR系统大体上可由图像采集系统，图像处理系统，数据库管理系统三个子系统组成。它综合了通讯、信息、控制、传感、计算机等各种先进技术，构成一个智能电子系统。

![img](http://7te8s4.com1.z0.glb.clouddn.com/lpr3.jpg)

 

　　**图像采集系统**：图像采集系统主要由传感器、辅助照明设备和图像采集设备组成，主要功能是采集车辆图像。当有车辆经过时会触发感应装置，感应装置一般为地感线圈，触发成功后摄像机或照相机会自动采集当前的图像，最后将采集到的图像传送到计算机或手持的嵌入式系统进行处理。

　　**图像处理系统**：图像处理系统即为本文主要讨论的算法处理模块，为整个系统的软件部分。它主要包括图像预处理、车牌定位、字符分割和字符识别四个部分，它的任务是运用数字图像处理、模式识别等学科对获得的车辆图像进行处理以获得车牌上的字符内容信息，后面章节讲对它每一个部分做一个粗略的介绍。

　　**数据管理系统**：数据管理系统是一个后端管理数据库，它包含了几乎所有的图像输入是指利用摄像机或者数码相机采集到的车牌图像。车牌图像的质量与采集图像的设备和实际环境有关。性能好的摄像机能够得到质量更好的车牌图像，有利于识别车牌图像中的字符。在光照不均、恶劣天气的环境下，采集到的车牌图像的像质较差，导致车牌识别系统的性能降低。车牌登记信息，车牌中的字符信息被识别出来后就输入到这个系统进行查找对比，以方便公安机关追查被盗车辆，打击犯罪分子。

　　其中**图像处理模块**主要包括六个部分：预处理、车牌定位、倾斜校正、字符分割、字符识别。其中，车牌定位、字符分割、字符识别是车牌识别的关键技术。流程图如下：

![img](http://7te8s4.com1.z0.glb.clouddn.com/lpr4.jpg)

 

　　**图像预处理**是指对采集到的图像进行二值化、边缘检测、去除噪声、图像灰度化等操作。经过预处理的车牌图像增能够强目标图像，提高目标和背景图像的对比度，方便车牌识别的后续工作。

　　**车牌定位**是从一幅拍摄到的图片中定位出车牌的位置，并从图片中提取出车牌图像。车牌定位正确与否直接影响到字符分割和识别的工作，是所有关键技术中的第一步。

　　**倾斜校正**是指检测车牌图像的倾斜角度，并校正车牌图像。倾斜的车牌图像会导致车牌中的字符倾斜，直接影响到车牌字符的分割和识别，因此必须对倾斜的车牌图像进行校正。

　　**字符分割**是对提取出的车牌图像进行切割，从车牌图像中提取出单个车牌字符的图像。由于字符识别是以分割出的单个字符为输入，所以字符分割的准确与否直接影响到字符识别。

　　**字符识别**是指对分割出的字符进行处理，识别出车牌中的字符。因为我国的车牌号码的字符包含：汉字、英文字母、数字，增加了对字符识别的难度。字符识别直接影响到整个车牌识别系统结果的准确性。

　　这是一个LPR系统最基本的结构组成，每个模块的功能也清晰的给出来了，这对于后续我们的分工有很大的帮助，模块与模块之间耦合度也比较小。

　　*基于Linux的车牌识别系统，界面基于qt开发，图像处理模块基于opencv，数据库使用的mysql，基本上是在原有的系统上进行修改。原有的系统是在window平台下，使用MFC，opencv的版本是之前的C版本，按照新的架构重新修改代码，数据库部分基本没变，重点更新的是图像处理部分。*

　　最后，在开发 LPR 算法之前，**要确定算法的目的和要求**。LPR 算法的最终目的是识别车辆的车牌号码，所以识别正确率自然是系统设计中应该首要考虑的因素。影响识别正确率的因素有很多，主要的有以下几点：一是定位的准确性；二是识别前字符的预处理；三是字符识别的算法。为了提高识别正确率，需要对现有的车牌字符识别算法进行改进，在后面的章节中会有详细的介绍。

　　其次，LPR 算法在工作时需要实时处理交通流量信息，所以系统的工作效率——即识别时间也是系统设计时必须要考虑的因素，一般要求在 1s 内能够完成识别，这就要求识别算法的复杂度、运算量不能太大。

　　除了算法识别正确率和识别时间外，算法软件的操作界面应尽量简单、友好，还要考虑系统的无故障运行时间，系统体积的大小等因素。最后，算法设计要面向现场、面向终端客户的需求，考虑到 LPR 系统在户外工作，所以要克服外面环境的复杂性及光照条件的变化，设计出一套适应性较强的算法。





# [（四）-- 车牌定位](https://www.cnblogs.com/silence-hust/p/4191771.html)



## 第四篇：车牌定位　　

　　车牌定位就是采用一系列图像处理或者数学的方法从一幅图像中将车牌准确地定位出来。车牌定位提取出的车牌是整个车牌识别系统的数据来源，它的效果的好坏直接影响到整个系统的表现，只有准确地定位出车牌，才会有后续的车牌分割与字符识别。

　　目前车牌定位有两大类、基于灰度、基于彩色。

## 基于灰度：

​       我们采用的是**基于灰度的形态学的车牌定位**：首先根据车牌区域中丰富的纹理特征，提取车牌图像中垂直方向的边缘并二值化。然后对得到的二值图像进行数学形态学(膨胀、腐烛、幵闭运算等)的运算，使得车牌区域形成一个闭合的连通区域。最后通过车牌的几何特征(高、宽、宽高比等)对得到的候选区域进行筛选，最终得到车牌图像。

　　**基于灰度的还有边缘检测的车牌定位**：由于车牌字符的灰度值与车牌底色的灰度值相差较大，字符与底色的交界处就有灰度突变，灰度突变处就会产生边缘，这是车牌定位技术中非常重要的特征。也可以通过检测车牌的外边框来定位车牌，由于外边框的上下左右四边都为直线，而且有明显的边缘特征，所以首先利用边缘检测算法提取车牌边框位置，然后，用Hough变换算法检测直线，确认外边框的上下左右四条边位置就确定了车牌在图像中的位置。

　　**基于投影法的车牌定位方法**：首先对车牌图像进行二值化，由于车牌区域存在明显的剧烈的字符与背景的灰度跳变，将跳变次数投影到垂直轴上，那么车牌区域对应的垂直轴上会有一个明显的峰值，这样可以得到车牌的上下边界。然后对上下边界内的区域进行水平投影，字符区域会出现明显的峰值，这样可以得到车牌的左右边界。这种方法比较理想化。

　　**基于纹理分析的车牌定位方法**：所谓的纹理特征是指对图像进行扫描得到的灰度变化曲线，由于扫描经过车牌得到的变化曲线明显不同于经过非车牌得到的曲线，根据这个特点再结合形态学操作和其它先验知识就能从图像中提取出车牌。

### 基于彩色的：

　　从颜色空间的角度来看，HSV (Hue色调，Saturation饱和度，Value亮度)颜色空间具有线性伸缩性，比RGB颜色空间更容易区分色彩。HSV车牌定位典型的思路是首先将车牌图像从RGB空间转换到HSV空间，然后寻找图像中含有蓝白相间、黄黑相间、白红相间和白黑相间的地方，对得到的候选区域进一步用字符颜色提取车牌字符，最后用车牌的字符特征确定车牌位置。基于彩色图像的车牌定位方法对字符颜色和背景颜色固定的车牌可以取得较好的效果。

　　**基于彩色图像的边缘检测和区域生长相结合的车牌定位**：实现该方法的基本思想是：首先可以利用边緣检测算子对原始彩色(RGB空问)图像进行边缘检测，使得车牌区域的纵向纹理特征得到增强；接着利用数学形态学中的膨胀算法实现区域的连通，然后采用区域生长的方法对候选区域进行标记，最后利用车牌具有的特征和字符排列的频率特点，去除伪车牌区域，得到车牌区域。

　　**基于纹理和颜色综合特征的车牌定位**：首先将原始彩色图像M0的颜色空间转化到HSV颜色空间Ml；接着对Ml进行色彩分割，把所需要的颜色的区域设置为前景白色，其他区域设为背景黑色，此时得到图像M2，其次对M2采用区域生长的方法进行处理，并生成连通区域，得到车牌区域的集合A，然后若集合A中不包含车牌，则继续对Ml进行色彩分割，提取下一块前景颜色区域，并对该区域进行车牌特征分析，重复上述过程。

　　车牌轮廓特征判断条件：

（1）外接轮廓的高度大于5个像素或小于25个像素

（2）外接轮廓的宽度大于20个像素或小于80个像素

（3）外接轮廓的宽高比大于2或小于10

 

 　　由于我国车牌种类繁多，颜色组合不一致，会遇到以下问题：一方面各地发放的车牌的底色色调会有所不同，另一方面受自然光照变化影响，采集到车牌图像的色度的变化范围也很大。因此，定位我国车牌的方法不适宜直接利用颜色信息进行定位。

　　其实，还有一些文献里提出支持向量机和adaboost等分级分类的定位方法，虽然使用训练的方法可以很准确的得到车牌图像，但是实际中由于环境的复杂性，单纯的一种方法并不不能得到很好的结果。对图像进行预处理，结合三次定位，像素统计粗定位，颜色阈值定位，文理特征定位，一次次的精确定位结果，调整参数，知道得到正确的车牌图像。

　　这里有涉及到边缘检测的应用，其中边缘检测就有几种常用的算子方法。还涉及颜色空间的转换，这里不做具体展开。







# （五）-- 一种车牌定位法



**该方法是某个文章中看到的，有点忘了是那一篇了，看的太多也太久了。**

Step1、把采集到的RGB图像转换为HSI图像。

　　HSI模型能反映人对色彩的感知和鉴别能力，非常适合基于色彩的图像的相似比较，故采用HSI模型。假设HSI颜色模型各分量为H、S、I ，RGB 彩色模型的各个分量为 R,  G ,B ，则 RGB 转换 HSI 的公式为：

![img](http://7te8s4.com1.z0.glb.clouddn.com/lpr5.1.jpg)

 

　　其中H 表示色调，如红色、绿色、蓝色等，色调的取值范围为 [0 , 360]，其对应颜色轮的角度。S表示饱和度，其意义是颜色的鲜艳度，可以用百分比来表示，从0%到完全饱和100%。 I表示亮度，是指颜色的明亮程度，通常用百分比表示，从黑0%到白100%。

　　通过式把 RGB 彩色图像转换为 HSI 彩色模型的图像，HSI 彩色模型的图像，左侧为 RGB 彩色图像。从 HSI 颜色的图像中可以看出，高亮部分为车牌的蓝色区域。

Step2、提取 HSI 图像中的 H、S 分量。

（1）利用 H 分量进行图像颜色分割。由于蓝色的 H 分量值为 240 º，并且图像可能受到噪声污染，所以蓝色的 H 分量值有一定的波动。经过实验可得到蓝色分量 H 的最小值blue_MinH 为 220º，最大值 blue_MaxH 为 245º。假设二值图像为 Bw，Bw 和 HSI 图像具有相同的大小，Bw 中的所有元素都为 0。利用下式把满足蓝色区域条件的设为前景白色，即 Bw = 1；不满足条件的设为背景黑色，即Bw = 0。

![img](http://7te8s4.com1.z0.glb.clouddn.com/lpr5.2.jpg)

 

（2）利用S分量对图像处理。因为受到天气、光照等条件的影响，非牌照区域也会和牌照区域的色调特征相同，因此可以利用 S 分量去掉饱和度小且满足蓝色色调范围的区域。设饱和度的阈值为 threshS，利用去掉满足蓝色色调条件但非车牌的区域。

![img](http://7te8s4.com1.z0.glb.clouddn.com/lpr5.3.jpg)

 

Step3、利用车牌的几何特征去除候选区域中的非牌照部分。

　　由于天气、光线等因素导致采集到的图像受到噪声的干扰，所以即使经过 Step1、Step2 的处理，仍然可能存在多个车牌的候选区域。利用车牌的几何特征可以过滤掉部分不符合条件的候选区域。常用的车牌几何特征有：候选区域的面积、外接矩形的宽度和高度、外接矩形的长宽比，本文采用候选区域的高度。具体做法如下：通过对 Step2 得到的二值图像 Bw 水平投影，得到水平投影图，其中水平投影值是同一行中的像素点的个数。基于车牌区域存在一定的高度的事实，设定车牌高度的最小值为 Height_Min,最大值为 Height_Max,候选区域的高度为 Heigh。当满足 Height_Min ≤ Height ≤ Height_Max 时，从图像中提取出高度为 Height 的候选区域。

Step4、为处理车辆和车牌颜色特征相同的情况，可以通过特征颜色边缘检测去除和车牌颜色特征相同的伪车牌区域。

　　设图像 K(i,j)= (H(i,j),S(i,j), I(i,j))，其中 H(i,j),S(i,j), I(i,j)分别表示 K(i,j)的 H、S、I 分量。二维数组 K2(i,j)是边缘检测后的图像。采用以 K(i,j)为中心的 3×3窗口检测特定的颜色边缘。

![img](http://7te8s4.com1.z0.glb.clouddn.com/lpr5.4.jpg)

 

（1）在 HSI 彩色模型中，满足式前两式时判为蓝色；满足式（2.4）则为白色。

![img](http://7te8s4.com1.z0.glb.clouddn.com/lpr5.5.jpg)

 

（2）获取蓝白边缘图像。判断蓝白边缘的条件为：（a）K(i-1,j-1)、K(i,j-1)、K(i+1,j-1)都为蓝色像素点，K(i-1,j+1)、K(i,j+1)、K(i+1,j+1)均为白色像素点；（b）K(i-1,j-1)、K(i,j-1)、K(i+1,j-1)都为白色像素点，K(i-1,j+1)、K(i,j+1)、K(i+1,j+1)均为蓝色像素点。若满足（a）、（b）中的任意一个条件，则 K(i-1,j)、K(i,j)、K(i+1,j)为蓝白边缘点，令 K2(i-1,j)= K2(i,j) = K2(i+1,j) = 1，并将该窗口中的 K2 其它像素设为 0；若以上条件均不满足，则将该窗口位置的 K2 中的所有像素值置为 0。同时将窗口遍历整幅图像，得到蓝白边缘图。

（3）利用车牌的几何特征去掉不符合条件的候选区域。面积大小的计算定义为：蓝白边缘图像中白色的像素点的总数，即为 white_CountTotal。设车牌区域面积的最小值为 min_Area，最大值为 max_Area。当 min_Area ≤ white_CountTotal 并且 white_CountTotal ≤ max_Area,则认为是车牌区域。

Step5、确定车牌区域的宽度。

　　经过前面的步骤已得到车牌区域，确切的说应该是车牌的高度，所以还需得到车牌的宽度。本文采用垂直投影的方法确定车牌的宽度。对车牌区域进行垂直投影。垂直投影值定义为图像中同一列为白色像素点的个数，记为vertical_Count，令垂直投影值的阈值为 verticalValue_Thresh。

　　具体过程如下：

- 　　首先从图像的最左边扫描图像的垂直投影值，当 vertical_Count ≥verticalValue_Thresh 时，该位置即为车牌区域的起点 wide_Start ；
- 　　然后继续扫描直到vertical_Count ≤ verticalValue_Thresh 时，此位置则为车牌区域的终点 wide_End；
- 　　最后得到车牌区域的宽度 wide = wide_End – wide_Start。







# （六）-- 字符分割



## 第六篇：字符分割

　　在知道了车牌字符的规律之后，可以根据车牌的特点对字符进行分割。一般最容易想到的方法就是根据车牌投影、像素统计特征对车牌图像进行字符分割的方法。是一种最常用的、最基本的、最简单的车牌字符分割方法。它的精髓是对车牌图像进行逐列扫描，统计车牌字符的每列像素点个数，并得到投影图，根据车牌字符像素统计特点（投影图中的波峰或者波谷），把车牌分割成单个独立的字符。

　　图像的边缘信息一般都是高频信息，所以在水平、垂直方向上对车牌图像进行小波变换，对其高频信息进行重构，获得相应的高频信息方面的子图，在车牌垂直投影图像中找到每个车牌字符的边界所在位置，并记下边界位置的横坐标；同理在水平投影图像中找到相应的边界的纵坐标，再根据相应的字符坐标值将字符分割出来。

　　一般在进行分割之前需要对车牌进行预处理：**倾斜校正和去噪处理**。

　　在进行分割之后需要统一字符大小，对其进行归一化和去边框处理。

（1）统一车牌底色：

　　对不同类型的车牌灰度图像进行二位化以后，有的呈现的是黑底白字，而有的则是白底黑字，为了便于对字符进行分割，需首先将不同种类车牌的二值化结果进行景颜色和目标颜色的统一，然后再用相关字符分割的方法对车牌屮的字符进行切分和提収。统一车牌底色可以有两种方法：

　　基于颜色分量的判断，但由于我国车牌种类太多，这个方法并不能完全区分，但是区分两种车牌类型还是可以的，例如蓝底白字车牌中的R<B，而黄底黑字中的B>R，在考虑到光照影响和使用已久褪色车牌上这种方法就不好了。

　　基于二值图像中像素比例特征的车牌底色判断：一般情况下，二值化后的车牌图像中字符笔画的像素个数在整个车牌的像素数目中所占的比例要小于50%。因此，可以通过分别计算二值化后的车牌中两种像素值的像素个数的大小来判断是否需要反色，若目标像素的比例大于50%，则将图像进行反色，否则不进行处理。这种方法的优点是算法简单，适用各种底色类型的车牌。缺点是若车牌中含有的字符的笔画较粗或者是车牌上存在较多污点或者是有装饰物等因素影响时，往往不能准确的判断底色。

（2）图像去噪

　　采集的图像总是会受到各种噪声的影响。为了保证后续处理的精确度，需要抑制图像中的噪声。对二值化后的车牌图像进行中值滤波处理，它是一种常见的非线性滤波方法，是一种局部平均的图像平滑技术，也是一种低通滤波。经典的中值滤波算法步骤如下：

　　1、令一个 3*3模板沿行或者列方向的移动；

　　2、每次移动后，对模板覆盖区域的像素灰度值进行排序；

　　3、用排序得到的中值代替模板内中心位置的原始图像像素灰度值。

　　通过以上步骤可以看出，中值滤波的主要功能就是让与周围像素灰度值的绝对差较大的像素改为与周围像素灰度值接近的灰度值，去除那些相对于其领域像素更亮或更暗的灰度。一般来说，小于中值滤波器模板面积一半的亮或暗区域会被滤掉，而较大的物体则会几乎原封不动的保留下来。

（3）倾斜校正

　　通常车牌区域的上下沿是两条明显的平行直线，一般都采用Hough 变换，检测出这两条直线的倾斜角，然后对车牌进行校正。然而传统的 Hough变换是对整幅图像的每个像素进行计算，以求出图像中可能存在的直线。

　　要想使用 Hough 变换计算车牌的倾斜角度，必须先确定进行 Hough 变换所需要的数据，即车牌的边缘点。如果图像包含完整的车牌，一般采用检测车牌的上下边框边缘点来作为 Hough 变换的数据，但由于实际得到的车牌不一定含有边框或者只有极少量的边框，所以最常用的是直接检测车牌每个字符上下边缘点作为Hough 变换的数据来源，但是由于实际中得到的车牌含有噪声、污损等原因，用这种方法会产生大量的干扰点，影响校正效果。

　　方法：对车牌图像在垂直方向进行投影并用高斯滤波器进行平滑，定位投影曲线中的所有波谷点，然后在相应的二值图中，查找所有波谷点之间最高的连通区域，得到的各个区域大部分就是车牌中的各个字符，最终选取各个连通域中即字符的最高和最低点作为 Hough 变换的检测点。对图像进行旋转时采用双线性插值。 

（4）去边框

　　定位出来的车牌图像往往会包含车牌的部分或者全部边框，甚至还包含部分车身，为车牌字符分割带来了不利影响。因此就需要先对车牌图像进行去边框处理，其原理如下：采用水平投影得到上下边界。

（5）字符分割

　　采用一种**基于相邻字符最大间隔宽度的方法**来对车牌中的字符进行分割。由单行车牌的特点可以知道，在第二个字符和第三个字符之间存在一个圆形的间隔符，且该间隔符在每个单行车牌中有且仅有一个，还有一个重要的特点就是此间隔符所在的间隙约是其他相邻字符之间间隙的2.6倍，是整个车牌图像中相邻字符的最大间隙，根据这一先验知识首先确定了第二个字符右边缘和第三个字符左边缘的位置，然后由二值图像的垂直投影及单个字符的高宽比确定后5个和前2个字符的精确位置，因此，该方法的最为关键的部分是寻找图像中间隔符所在的空隙。

　　采用连通域和投影相结合的方法来对车牌图像进行字符分割，采用四连通标记法对车牌字符边界进行标记，形成连通域；然后判断各个区域的高宽是否基本等于车牌字符区域的高宽（去边框时已经求出），若相差较大时，就进行垂直投影，把宽小于车牌字符宽的相邻区域进行合并，把宽大于车牌字符宽的相邻区域进行进一步分割；最后对各个区域加矩形边框，提取单个车牌字符。

![img](http://7te8s4.com1.z0.glb.clouddn.com/lpr6.jpg)

 

　　在理想的情况下，波谷的值应该为零，并且两个字符之间应该存在波谷，但是由于受到噪声的干扰，使得波谷的值为非零。常见的字符分割的问题有：字符粘连、字符断裂、数字“1”。字符粘连是指两个以上的字符连在一起，在垂直投影上的表现是原本应该为波谷的地方，现在却为非零的垂直投影值；字符断裂是一个字符分裂为几部分，在垂直投影上的表现为几段垂直投影；数字“1”的垂直投影值比较小，容易误判为噪声。可以结合车牌中字符的几何特征解决上述问题。设车牌中字符的宽度为 Width。

　　1）字符粘连

　　当 Width< charWdith < 1.5*Width，其中 charWidth 为粘连字符的宽度。此时为两个字符粘连的情形。可取 charWidth / 2 作为单个字符的宽度，以此来分割两个粘连的字符；若 1.5*Width< charWidth< 2*Width，此时为三个字符粘连的情况。通过单个字符具有固定的宽高比的先验知识，利用字符的高度求出字符的宽度。然后根据字符的宽度对粘连的字符进行分割。

　　2）字符断裂

　　若 charWidthi< 0.5*Width 且 0.5*Width > charWidthi+1。其中 charWidthi为当前字符的宽度，charWidthi+1为下一个字符的宽度。此时把当前字符和下一个字符合并。

　　3）数字“1”

　　当 charWidthi< 0.5*Width 且 0.5*Width < charWidthi+1时，统计区间宽度 charWidthi内的投影值大于 0.8*Height 的个数 nums，其中 Height 为车牌图像的高度。当符合条件 nums ≥ Thresh 时，其中 Thresh 为阈值，此时判定为数字“1”，否则为噪声。

　　*采用的车牌字符分割方法；对车牌图像进行灰度化处理，去除颜色信息，使后面的字符分割算法运行速度更快；对灰度车牌图像进行二值化处理（otsu），并统一车牌图像的背景和字符的颜色；对有一定倾斜角度的车牌图像进行倾斜校正处理，对车牌图像进行去边框处理；采用连通域与投影法相结合的方法对车牌图像进行字符分割，为后面的单个字符识别做准备。*







# [（七）-- 字符特征](https://www.cnblogs.com/silence-hust/p/4191942.html)



## 第七篇：字符特征

选择的字符特征应该满足以下条件：

　　（1）选取的字符特征具有较强的鲁棒性，不受字符变形、弯曲等影响。

　　（2）两个字符的字符特征不能完全相同，但部分相同是允许的，即选择的字符特征是唯一的，但是不能重复。

　　（3）选取的字符特征要尽可能的提供字符的信息。

　　（4）选择的字符特征提取方法易于实现，能够减少计算时间。

　　一般采用**纹理、边缘特征**。纹理特征是表示图像的另一种重要的视觉特征，纹理结构反映图像亮度的空间变化情况，具有局部与整体的自相似性。纹理是有纹理基元按某种确定性的规律或某种统计规律排列组成的，在纹理区域内各部分具有大致相同的结构。

### **提取特征的的方法：**

　　（1）逐像素特征提取是指对整幅二值图像进行扫描，若图像中的像素点为黑色像素点时，则令特征值为 1，否则特征值为 0。经过该方法提取的特征向量的维数与图像中的像素点的个数相同。

　　（2）骨架特征提取是先细化字符图像，然后从细化后的字符图像中逐像素地提取特征。

此方法适用不同大小的字符。

　　（3）垂直方法数据统计特征提取是首先对字符图像进行水平投影，统计水平投影值，此处的水平投影值为黑色像素的数目；然后通过对字符图像进行垂直投影，统计垂直投影值，此处的垂直投影值仍为黑色像素的个数；最后将水平和垂直投影值作为字符的特征向量。

　　（4）13 点特征提取方法的总体思路是：首先把字符平均分成 8 份，统计每一份黑色

　　像素点的个数作为 8 个特征。分别统计这 8 个区域中的黑色像素的数目，就可以得到 8 个特征；然后统计水平方向中间两行和垂直方向中间两列的黑色像素点的个数作为 4 个特征；最后统计所有黑色像素点的个数作为 13 个特征。

### **常用的特征求取：**

#### 一、粗网格特征：

　　将归一化后的字符图像等分成 8×8 网格，统计各网格内黑像素的数量，取得一个 64 维的网格特征。

　　外围特征：提取字符外围特征的步骤为：

　　① 把归一化后的点阵图形等分为 8 行。

　　② 计算每一行中点从图像左边缘至第一项由白变黑的长度（如果没有由白变黑的点，则默认为零）。

　　③ 再计算每一行中点从图像左边缘至第二项由白变黑的长度（如果没有由白变黑的点，则默认为零）。

　　④ 仿照上面 3 个步骤，提取其它 3 个边缘的特征。

　　采用上述方法可以提取另一个 4×2×8=64 维的外围特征。

　　通过采用基于像素数量的粗网格特征与外围特征相结合方法可以提取字符的128 维特征，用以字符识别。

#### 二、PCA进行汉字识别，网格特征进行数字和字母的提取。

　　网格特征是指通过把二值化后的字符分成M×N个网格，统计每一个网格中的字符像素数量，把各个网格中的像素数量组合起来作为字符的网格特征来识别字符。字母数字相对于汉字来说笔画简单，也极少出现字符轮廓模糊的现象。因此，字母数字的识别相对来说比较简单。但是，字母数字之间存在相似字符的比例较高，而且相似字符之间的差异又比较小，很容易识别错。对字母数字的识别论文采用了二次识别的思想。

#### 三、均匀网格特征

　　统计黑像素点在每个网格中所占的比例，属于统计特征中局部特征的一种，体现了文字点阵的整体形状的分布。它将字符图像二值化以后，再把样本字符图像分成mxn个M格，并统计每个网格中属于文字点阵的像数量，记为i；统计整个图像巾屈于文字点阵的像素数量，记为j；计算各个网格中的文字点阵的像素数量整个像中文字点阵的像素数量之比P=i/j将每个网格统汁的百分比P組合起来作为字符的统计特征，用以实现对字符的识别。好个网格屮的文字点阵比例反映了文字笔画在二维平面空间的分布特征。

　　网格特征的统计是以网格为单位进行的,即使个别像素点的统计有误差也不会对识别结果造成很大的影响，该特征还具有较强的区分相似字符的能力。此特征提取算法比较简单，计算速率很快,且易于实现,但其对字符图像配准要求较高，故需要在提取字符图像的特征之前，对图像进行去边框等预处理操作。此算法更适合印刷体等较规则的字体，而不适用于手写体。

#### 四、LBP特征进行汉字识别

　　预处理模块对图像进行归一化操作；第二个模块计算出图像中每个像素点的LBP值；第三个模块用于将图像平均分割为MxN个网格；最后一个模块用于计算各块的LBP特征。

　　1、传统的LBP算法是基于3 X 3的窗口的，对应于9个灰度值。将该窗口的8邻域的灰度值与中心像素的灰度值比较，小于中心灰度值的像素点的置为0，反之将其置为1；然后，通过逆吋针或者顺时针将这8个二进制数转化为一个二进制序列，并求出其对应的十进制值，作为这个3X3窗口的中心像素点的特征值。即各像素点的LBP值。

　　2、将每个像素点的LBP值齊代它的灰度值,得到LBP阁像。并将LBP图像分块，对每个分块进行直方图统计。如,将LBP图像分为4*8块，每块大小为8*8。在每个分块内，将0-255的LBP值量化为32级，并进行直方图统计。即每个分块的LBP特征为32维。

　　3、将各个小块的LBP特征连起来，获得(4*8)*32=1024维的一个矢量，该矢量即为字符图像的LBP特征。

　　改进的LBP特征：

　　均匀模式：它们有一个共同点，即在LBP二值编码序列巾，最多有两个0到1或1到0的变化。LBP二值编码序列为11000001，从1到0的变化为1次,从0到1的变化为1次，即它的均匀性U(LBP)=2。满足U(LBP)<=2的所有模式称为均匀模式。在8邻域中，满足U(LBP)<=2的所有模式的个数为8*(8-1)+2，具体的LBP二值编码序列与i/(Z及TMH]对应图见图2-16。再进一步将它们旋转到最小值后，具有旋转不变性的均勾模式(Rotation Invariant Uniform Pattern)的个数则为8+1。

　　模式对应的LBP二进制中从0变化为1和从1变化为0的次数之和小于等于两次，则该模式就是均匀模式。再根据顺时针或逆时针方向读出8个二进制数作为一个二进制序列,计算其对应的十进制值，作为该3X 3矩形的中心元的特征值。反之，则该模式就不是均匀模式，它们的LBP值均为8+1。

　　由于改进的LBP特征是用58种均匀模式和统一后的一种非均匀模式来表示的。即在每个分块内，将0-255的LBP倍转化为59级。将这59级量化到0-63、64-127、128-191、192-255这四个区间中，并进行直方图统计。即每个分块的LBP特征为4维。

　　将各个小块的LBP特征连起来，获得(4*8) *4=128维的一个矢量，矢量即为字符图像的LBP特征。均匀模式时的LBP特征向量维数=图像分块数*59，改进的LBP特征向量维数=图像分块数*4，大大地提高了识别速率。







# [（八）-- 字符识别](https://www.cnblogs.com/silence-hust/p/4191984.html)



第八篇：字符识别

　　车牌定位、车牌倾斜校正、车牌字符分割都是为车牌字符识别做的前提工作，这些前提工作直接关系到车牌识别系统的性能。车牌字符识别是车牌识别系统的核心部分，车牌字符识别的准确率是衡量车牌识别系统的一个很重要的指标。

　　一般字符识别的方法就是采用模式识别方法，简单的来说模式识别就是先通过提取输入模板的特征，然后通过模板的特征对样本进行分类，从而识别出样本。模式识别主要包括：数据采集、预处理、特征提取、特征匹配，其结构框架如图：

　　字符识别是模式识别的一个重要应用，首先提取待识别字符的特征；然后对提取出来的特征跟字符模板的特征匹配；最后根据准则判定该字符所属的类别。不同的训练方法，不同的特征提取， 不同的匹配规则，就相应的有不同的字符识别方法，基本上很多就是在这些地方做改进，或者是采用新的规则。但是万变不离其宗。

**（1）模板匹配字符识别算法。**

　　模板匹配字符识别算法是图像识别中的经典算法之一，该算法的核心思想是：通过比较待识别字符图像的字符特征和标准模板的字符特征，计算两者之间的相似性，相似性最大的标准模板的字符即为待识别的字符。该方法首先要建立标准模板库，其中标准模板库中的字符的大小是一样的；然后将待识别的字符规格化，其大小应该和模板库中的字符一样；最后将待识别的字符和标准模板库中的所有字符进行匹配，计算相似度。模板匹配字符识别算法适用于印刷字体、字体规范的字符等，但是对字符变形、弯曲、字符旋转等情况的抗干扰能力差。

**（2）神经网络字符识别算法**

　　主要思想是：通过神经网络学习大量字符样本，从而得到字符的样本特征。当对待识别的字符进行识别时，神经网络就会将待识别字符的特征和之前得到的样本特征匹配，从而识别出字符。该算法主要利用神经网络的学习和记忆功能。神经网络虽然有其优点，但是由于采用神经网络识别字符依赖于初始的样本的选择，并且容易陷入局部最优和收敛速度慢，因此采用神经网络识别字符的算法仍需要改进。

**（3）支持向量机**

　　主要思想：同上，都是先得到样本特征，进行训练，然后再分类。SVM应该算是用的的最多的分类方法，一般大多适合于二分类问题，在这里就需要使用多分类器来构造。

字符识别步骤：

1、归一化

　　主要包括位置归一化和大小归一化。由于本文处理的车牌字符都是标准的印刷体字符，且都进行过倾斜校正，所以不需要对其进行位置归一化。但由于摄像距离大小不一样，导致拍摄到的车辆图像中的车牌字符大小不一，为了达到更好的识别效果，就需要对分割出来的单个车牌字符进行大小归一化。常用的归一化方法有两种：一种是将字符图像的外边框按比例线性放大或缩小到规定尺寸；另一种是根据水平和垂直两个方向像素的分布进行大小归一化。一般用第一种。当映射到原图像的点的坐标不是整数，即位于几个像素之间，这就需要利用插值算法来决定该像素的值。使用常见的双线性插值法。将图像归一化为32*64的。

2、特征

​     根据上一篇的介绍，采用LBP特征来识别汉字，均匀网格特征来识别字母和数字。

3、分类器

　　SVM作为分类器。支持向量机的原理，其所涉及到的数学知识比较复杂，自己编程实现的话有一定难度。采用现成的支持 SVM 的工具箱，公认做的比较好的是台湾大学林智仁(Chih-Jen Lin)教授开发的 LibSVM，支持 SVM 的各种算法，可以解决回归和分类识别问题。LibSVM 不但提供了 Windows 系统的可执行文件，还提供了 C 语言的源代码，方便科研工作者根据自己的需要进行改进，而且还提供了 Java、Matlab、C#、Ruthon 等语言的接口。当然可以直接调用opencv中的SVM工具。 

　　汉字的笔画很稠密，字符分辨率非常低:如果对车牌汉字字符进行二值化，将会丢失汉字的很多重要的结构信息，产生不必要的噪声，导致笔画断裂和笔画粘连等。

4、二次识别

　　总的来说，单个字符的识别率比较高，容易识别错的主要是相近字符，解决这类问题的最佳办法就是二次识别。将相似字符中的一个识别出来后，便能确定其属于哪一类相近字符类别,利用区分相近字符的细节特征，将这个字符到专门识别这类相近字符的分类器中进行二次识别。车牌字符中相近字符主要有5类，分为为“0”、“D”、“Q”，“B”、“8”，“2”、"Z"，“5”、"S"和“A”、“4”。

　　(1) “0”、“D、“Q”

　　从字符图像中可以看出,它们的区分在左侧和右下角，其中“D”的左边为直线，黑色像素点较多，而“0”和“Q”的左边均为弧线,黑色像素点相对较少；字符“Q”的右下角的笔画丰富，黑色像素较多。具体局部特征如图5.9：

 

![img](http://7te8s4.com1.z0.glb.clouddn.com/lpr8.1.png)

　　(2)“B、8“

　　它们的区别在字符的左侧,“8”的左侧为弧线,而“B”的左侧为直线。具体局部

 

![img](http://7te8s4.com1.z0.glb.clouddn.com/lpr8.2.png)

　　(3) “2、Z"

　　它们的区别在字符的上方,“2”的上方为弧线,“Z”的上方为直线,具体局部特征

 ![img](http://7te8s4.com1.z0.glb.clouddn.com/lpr8.3.png)

　　(4)“5、S"

　　它们的区别在字符的上半部分，“5”的上半部分中，上方和左侧均为直线,而"S”的上半部分为弧线。

 

![img](http://7te8s4.com1.z0.glb.clouddn.com/lpr8.4.png)

 　　(5)“A、4"

　　由于存在倾斜等情况,仅仅通过基本特征会出现误识别,它们的区别在左下角。

 

![img](http://7te8s4.com1.z0.glb.clouddn.com/lpr8.5.png)

 



