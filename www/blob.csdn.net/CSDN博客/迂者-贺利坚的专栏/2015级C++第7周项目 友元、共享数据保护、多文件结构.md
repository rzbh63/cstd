
# 2015级C++第7周项目 友元、共享数据保护、多文件结构 - 迂者-贺利坚的专栏 - CSDN博客

2016年04月08日 11:23:00[迂者-贺利坚](https://me.csdn.net/sxhelijian)阅读数：1364


【项目1-成员函数、友元函数和一般函数有区别】[参考解答](http://blog.csdn.net/sxhelijian/article/details/44920915)
（1）阅读下面的程序，体会注释中的说明(要运行程序，请找到课程主页并复制代码)
```python
//例：使用成员函数、友元函数和一般函数的区别
```
```python
#include <iostream>
```
```python
using
```
```python
namespace
```
```python
std
```
```python
;
```
```python
class
```
```python
Time
{
```
```python
public
```
```python
:
    Time(
```
```python
int
```
```python
h,
```
```python
int
```
```python
m,
```
```python
int
```
```python
s):hour(h),minute(m),sec(s) {}
```
```python
void
```
```python
display1();
```
```python
//display1是成员函数
```
```python
friend
```
```python
void
```
```python
display2(Time &);
```
```python
//display2是友元函数
```
```python
int
```
```python
getHour(){
```
```python
return
```
```python
hour;}
```
```python
int
```
```python
getMinute(){
```
```python
return
```
```python
minute;}
```
```python
int
```
```python
getSec(){
```
```python
return
```
```python
sec;}
```
```python
private
```
```python
:
```
```python
int
```
```python
hour;
```
```python
int
```
```python
minute;
```
```python
int
```
```python
sec;
};
```
```python
void
```
```python
Time::display1()
```
```python
//成员函数display1的实现，dispaly1前加Time::
```
```python
{
```
```python
//以hour形式直接访问私有数据成员，实质是this->hour形式
```
```python
cout
```
```python
<<hour<<
```
```python
":"
```
```python
<<minute<<
```
```python
":"
```
```python
<<sec<<endl;
}
```
```python
void
```
```python
display2(Time &t)
```
```python
//友元函数dispaly2的实现，不加Time::，友元并不是类的成员
```
```python
{
```
```python
//虽然不是类的成员函数，却可以用t.hour的形式直接访问私有数据成员——这就是友元
```
```python
cout
```
```python
<<t.hour<<
```
```python
":"
```
```python
<<t.minute<<
```
```python
":"
```
```python
<<t.sec<<endl;
}
```
```python
void
```
```python
display3(Time &t)
```
```python
//display3是一般函数，dispaly3前不加Time::
```
```python
{
```
```python
//不能直接访问，只能用公共接口t.getHour()形式访问私有数据成员
```
```python
cout
```
```python
<<t.getHour()<<
```
```python
":"
```
```python
<<t.getMinute()<<
```
```python
":"
```
```python
<<t.getSec()<<endl;
}
```
```python
int
```
```python
main()
{
    Time t1(
```
```python
10
```
```python
,
```
```python
13
```
```python
,
```
```python
56
```
```python
);
    t1.display1();
```
```python
//成员函数这样调用：对象名.函数名()
```
```python
display2(t1);
```
```python
//友员函数的调用和一般函数无异（但实现中可以不同）
```
```python
display3(t1);
```
```python
//一般函数的调用
```
```python
return
```
```python
0
```
```python
;
}
```
（2）模仿上面的示例，完成求点类中距离的任务。你需要实现求距离函数的三种版本：分别利用成员函数、友元函数和一般函数求两点间距离的函数，并设计main()函数完成测试。
> 提示：此项目和例子的区别在于“距离是一个点和另外一个点的距离”，不同版本在参数上有体现。三个版本建议分开测试，也可以如示例，放在一个程序中完成。
下面是点类的部分代码。
```python
class CPoint  
{
```
```python
private
```
```python
:
```
```python
double
```
```python
x;
```
```python
// 横坐标
```
```python
double
```
```python
y;
```
```python
// 纵坐标
```
```python
public
```
```python
:
```
```python
CPoint
```
```python
(
```
```python
double
```
```python
xx=
```
```python
0
```
```python
,
```
```python
double
```
```python
yy=
```
```python
0
```
```python
):x(xx),y(yy){}  
    ……
```
```python
//请继续写需要的代码
```
```python
};
```
【项目2-友元类】[参考解答](http://blog.csdn.net/sxhelijian/article/details/44920921)
定义下面两个类的成员函数（为体验友元类，实际上本例并不一定是一个好的设计，将两个类的合并为一个DateTime，日期、时间都处理更好）
```python
class Date;
```
```python
//对Date类的提前引用声明
```
```python
class Time
{
```
```python
public
```
```python
:
```
```python
Time
```
```python
(
```
```python
int
```
```python
,
```
```python
int
```
```python
,
```
```python
int
```
```python
);
```
```python
void
```
```python
add_a_second(Date &);
```
```python
//增加1秒，1秒后可能会到了下一天，乃到下一月、下一年
```
```python
void
```
```python
display(Date &);
```
```python
//显示时间，格式：月/日/年 时:分:秒
```
```python
private
```
```python
:
```
```python
int
```
```python
hour;
```
```python
int
```
```python
minute;
```
```python
int
```
```python
sec;
};
class Date
{
```
```python
public
```
```python
:
```
```python
Date
```
```python
(
```
```python
int
```
```python
,
```
```python
int
```
```python
,
```
```python
int
```
```python
);
    friend class Time;
```
```python
//Time为Date的友元类
```
```python
private
```
```python
:
```
```python
int
```
```python
month;
```
```python
int
```
```python
day;
```
```python
int
```
```python
year;
};
```
```python
int
```
```python
main( )
{
    Time t1(
```
```python
23
```
```python
,
```
```python
59
```
```python
,
```
```python
32
```
```python
);
    Date d1(
```
```python
12
```
```python
,
```
```python
31
```
```python
,
```
```python
2013
```
```python
);
```
```python
//测试时，再试试Date d1(2,28,2013)会如何
```
```python
for
```
```python
(
```
```python
int
```
```python
i=
```
```python
0
```
```python
; i<=
```
```python
100
```
```python
; i++)
    {
        t1.add_a_second(d1);
        t1.display(d1);
    }
```
```python
return
```
```python
0
```
```python
;
}
```
```python
//下面定义两个类中的成员函数，要求不得再增加成员函数
```
```python
//注意体会在Time的成员函数中可以调用Date类的私有数据成员
```
【项目3-用多文件组织多个类的程序】[参考解答](http://blog.csdn.net/sxhelijian/article/details/51114854)
将上一周“项目2-带武器的游戏角色”用“一个项目多个文件”的方式实现，其中两个类的声明放在一个.h文件中，每个类的成员函数分别放一个文件，main()函数用一个文件。体会这样安排的优点。

