
# 数据结构实践——排队看病模拟(队列) - 迂者-贺利坚的专栏 - CSDN博客

2015年10月05日 20:57:57[迂者-贺利坚](https://me.csdn.net/sxhelijian)阅读数：12028


本文是针对[数据结构基础系列网络课程(3)：栈和队列](http://edu.csdn.net/course/detail/1405)的实践项目。
【项目 - 排队看病模拟】
编写一个程序，反映病人到医院看病，排队看医生的情况。在病人排队过程中，主要重复两件事：
（1）病人到达诊室，将病历本交给护士，排到等待队列中候诊。
（2）护士从等待队列中取出下一位病人的病历，该病人进入诊室就诊。
要求模拟病人等待就诊这一过程。程序采用菜单方式，其选项及功能说明如下：
（1）排队——输入排队病人的病历号，加入到病人排队队列中。
（2）就诊——病人排队队列中最前面的病人就诊，并将其从队列中删除。
（3）查看排队——从队首到队尾列出所有的排队病人的病历号。
（4）不再排队，余下顺序就诊——从队首到队尾列出所有的排队病人的病历号，并退出运行。
（5）下班——退出运行，提示未就诊的病人明天再来。
运行结果可以如下图所示：
![这里写图片描述](https://img-blog.csdn.net/20151005204412854)
[参考解答]
```python
#include
```
```python
<
```
```python
stdio
```
```python
.
```
```python
h
```
```python
>
```
```python
#include
```
```python
<
```
```python
malloc
```
```python
.
```
```python
h
```
```python
>
```
```python
typedef struct qnode
{
    int
```
```python
data
```
```python
;
    struct qnode
```
```python
*
```
```python
next;
} QNode;
```
```python
/*链队结点类型*/
```
```python
typedef struct
{
    QNode
```
```python
*
```
```python
front,
```
```python
*
```
```python
rear;
} QuType;
```
```python
/*链队类型*/
```
```python
void
```
```python
SeeDoctor()
{
    int sel,flag
```
```python
=
```
```python
1
```
```python
,find,no;
    QuType
```
```python
*
```
```python
qu;
    QNode
```
```python
*
```
```python
p;
    qu
```
```python
=
```
```python
(QuType
```
```python
*
```
```python
)malloc(sizeof(QuType));
```
```python
/*创建空队*/
```
```python
qu
```
```python
->
```
```python
front
```
```python
=
```
```python
qu
```
```python
->
```
```python
rear
```
```python
=
```
```python
NULL
```
```python
;
```
```python
while
```
```python
(flag
```
```python
==
```
```python
1
```
```python
)
```
```python
/*循环执行*/
```
```python
{
        printf(
```
```python
"1:排队 2:就诊 3:查看排队 4.不再排队,余下依次就诊 5:下班  请选择:"
```
```python
);
        scanf(
```
```python
"%d"
```
```python
,
```
```python
&
```
```python
sel);
        switch(sel)
        {
```
```python
case
```
```python
1
```
```python
:
            printf(
```
```python
"  >>输入病历号:"
```
```python
);
```
```python
do
```
```python
{
                scanf(
```
```python
"%d"
```
```python
,
```
```python
&
```
```python
no);
                find
```
```python
=
```
```python
0
```
```python
;
                p
```
```python
=
```
```python
qu
```
```python
->
```
```python
front;
```
```python
while
```
```python
(p
```
```python
!=
```
```python
NULL
```
```python
&&
```
```python
!
```
```python
find)
                {
```
```python
if
```
```python
(p
```
```python
->
```
```python
data
```
```python
==
```
```python
no)
                        find
```
```python
=
```
```python
1
```
```python
;
```
```python
else
```
```python
p
```
```python
=
```
```python
p
```
```python
->
```
```python
next;
                }
```
```python
if
```
```python
(find)
                    printf(
```
```python
"  >>输入的病历号重复,重新输入:"
```
```python
);
            }
```
```python
while
```
```python
(find
```
```python
==
```
```python
1
```
```python
);
            p
```
```python
=
```
```python
(QNode
```
```python
*
```
```python
)malloc(sizeof(QNode));
```
```python
/*创建结点*/
```
```python
p
```
```python
->
```
```python
data
```
```python
=
```
```python
no;
            p
```
```python
->
```
```python
next
```
```python
=
```
```python
NULL
```
```python
;
```
```python
if
```
```python
(qu
```
```python
->
```
```python
rear
```
```python
==
```
```python
NULL
```
```python
)
```
```python
/*第一个病人排队*/
```
```python
{
                qu
```
```python
->
```
```python
front
```
```python
=
```
```python
qu
```
```python
->
```
```python
rear
```
```python
=
```
```python
p;
            }
```
```python
else
```
```python
{
                qu
```
```python
->
```
```python
rear
```
```python
->
```
```python
next
```
```python
=
```
```python
p;
                qu
```
```python
->
```
```python
rear
```
```python
=
```
```python
p;
```
```python
/*将*p结点入队*/
```
```python
}
            break;
```
```python
case
```
```python
2
```
```python
:
```
```python
if
```
```python
(qu
```
```python
->
```
```python
front
```
```python
==
```
```python
NULL
```
```python
)
```
```python
/*队空*/
```
```python
printf(
```
```python
"  >>没有排队的病人!\n"
```
```python
);
```
```python
else
```
```python
/*队不空*/
```
```python
{
                p
```
```python
=
```
```python
qu
```
```python
->
```
```python
front;
                printf(
```
```python
"  >>病人%d就诊\n"
```
```python
,p
```
```python
->
```
```python
data
```
```python
);
```
```python
if
```
```python
(qu
```
```python
->
```
```python
rear
```
```python
==
```
```python
p)
```
```python
/*只有一个病人排队的情况*/
```
```python
{
                    qu
```
```python
->
```
```python
front
```
```python
=
```
```python
qu
```
```python
->
```
```python
rear
```
```python
=
```
```python
NULL
```
```python
;
                }
```
```python
else
```
```python
qu
```
```python
->
```
```python
front
```
```python
=
```
```python
p
```
```python
->
```
```python
next;
                free(p);
            }
            break;
```
```python
case
```
```python
3
```
```python
:
```
```python
if
```
```python
(qu
```
```python
->
```
```python
front
```
```python
==
```
```python
NULL
```
```python
)
```
```python
/*队空*/
```
```python
printf(
```
```python
"  >>没有排列的病人!\n"
```
```python
);
```
```python
else
```
```python
/*队不空*/
```
```python
{
                p
```
```python
=
```
```python
qu
```
```python
->
```
```python
front;
                printf(
```
```python
"  >>排队病人:"
```
```python
);
```
```python
while
```
```python
(p
```
```python
!=
```
```python
NULL
```
```python
)
                {
                    printf(
```
```python
"%d "
```
```python
,p
```
```python
->
```
```python
data
```
```python
);
                    p
```
```python
=
```
```python
p
```
```python
->
```
```python
next;
                }
                printf(
```
```python
"\n"
```
```python
);
            }
            break;
```
```python
case
```
```python
4
```
```python
:
```
```python
if
```
```python
(qu
```
```python
->
```
```python
front
```
```python
==
```
```python
NULL
```
```python
)
```
```python
/*队空*/
```
```python
printf(
```
```python
"  >>没有排列的病人!\n"
```
```python
);
```
```python
else
```
```python
/*队不空*/
```
```python
{
                p
```
```python
=
```
```python
qu
```
```python
->
```
```python
front;
                printf(
```
```python
"  >>病人按以下顺序就诊:"
```
```python
);
```
```python
while
```
```python
(p
```
```python
!=
```
```python
NULL
```
```python
)
                {
                    printf(
```
```python
"%d "
```
```python
,p
```
```python
->
```
```python
data
```
```python
);
                    p
```
```python
=
```
```python
p
```
```python
->
```
```python
next;
                }
                printf(
```
```python
"\n"
```
```python
);
            }
            flag
```
```python
=
```
```python
0
```
```python
;
```
```python
/*退出*/
```
```python
break;
```
```python
case
```
```python
5
```
```python
:
```
```python
if
```
```python
(qu
```
```python
->
```
```python
front
```
```python
!=
```
```python
NULL
```
```python
)
```
```python
/*队不空*/
```
```python
printf(
```
```python
"  >>请排队的病人明天就医!\n"
```
```python
);
            flag
```
```python
=
```
```python
0
```
```python
;
```
```python
/*退出*/
```
```python
break;
        }
    }
    p
```
```python
=
```
```python
qu
```
```python
->
```
```python
front;
```
```python
//销毁队列
```
```python
while
```
```python
(p
```
```python
!=
```
```python
NULL
```
```python
)
    {
        q
```
```python
=
```
```python
p
```
```python
->
```
```python
next;
        free(p);
        p
```
```python
=
```
```python
q;
    }
}
int main()
{
    SeeDoctor();
```
```python
return
```
```python
0
```
```python
;
}
```
点评：如果使用算法库中的基本运算构造，程序的结构将更优秀。

