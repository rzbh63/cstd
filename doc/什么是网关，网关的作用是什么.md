# 什么是网关，网关的作用是什么？

![96](https://upload.jianshu.io/users/upload_avatars/7240015/26c0bdb2-2375-41b5-9292-5b5256f57114.jpg?imageMogr2/auto-orient/strip|imageView2/1/w/96/h/96)

 

[CatherinePlans](https://www.jianshu.com/u/f796a54054d1)

 

关注

2017.11.05 00:42* 字数 1683 阅读 2489评论 0喜欢 5

网关(Gateway)又称网间连接器、协议转换器。网关在传输层上以实现网络互连，是最复杂的网络互连设备，仅用于两个高层协议不同的网络互连。网关的结构也和路由器类似，不同的是互连层。网关既可以用于广域网互连，也可以用于局域网互连。 网关是一种充当转换重任的计算机系统或设备。在使用不同的通信协议、数据格式或语言，甚至体系结构完全不同的两种系统之间，网关是一个翻译器。与网桥只是简单地传达信息不同，网关对收到的信息要重新打包，以适应目的系统的需求。同时，网关也可以提供过滤和安全功能。大多数网关运行在OSI 7层协议的顶层--应用层。

顾名思义，网关(Gateway)就是一个网络连接到另一个网络的“关口”。在OSI中，网关有两种：一种是面向连接的网关，一种是无连接的网关。当两个子网之间有一定距离时，往往将一个网关分成两半，中间用一条链路连接起来，我们称之为半网关。

按照不同的分类标准，网关也有不同种类。TCP/IP协议里的网关是最常用的，在这里我们所讲的“网关”均指TCP/IP协议下的网关。



![img](https://upload-images.jianshu.io/upload_images/7240015-4db45880436a4544?imageMogr2/auto-orient/strip%7CimageView2/2/w/600/format/webp)

外部网关协议（EGP）

外部网关协议用于在非核心的相邻网关之间传输信息。非核心网关包含互联网络上所有与其直接相邻的网关的路由信息及其所连机器信息，但是它们不包含Internet上其他网关的信息。对绝大多数EGP而言，只限制维护其服务的局域网或广域网信息。这样可以防止过多的路由信息在局域网或广域网之间传输。EGP强制在非核心网关之间交流路由信息。

由于核心网关使用GGP，非核心网关使用EGP，而二者都应用在Internet上，所以必须有某些方法使二者彼此之间能够通信。Internet使任何自治（非核心）网关给其他系统发送“可达”信息，这些信息至少要送到一个核心网关。如果有一个更大的自治网络，常常认为有一个网关来处理这些可达信息。

和GGP一样，EGP使用一个查询过程来让网关清楚它的相邻网关并不断地与其相邻者交换路由和状态信息。EGP是状态驱动的协议，意思是说它依赖于一个反映网关情况的状态表和一组当状态表项变化时必须执行的一组操作。



![img](https://upload-images.jianshu.io/upload_images/7240015-fdecff825f10d8c9?imageMogr2/auto-orient/strip%7CimageView2/2/w/640/format/webp)

内部网关协议（IGP）

有几种内部网关协议可用，最流行的是RIP和HELLO，另一个协议称为开放式最短路径优先协议（OSPF），这些协议没有一个是占主导地位的，但是RIP可能是最常见的IGP协议。选择特定的IGP以网络体系结构为基础。RIP和HELLO协议都是计算到目的地的距离，它们的消息包括机器标识和到机器的距离。

一般来讲，由于它们的路由表包含很多项，因此消息比较长。RIP和HELLO一直维护相邻网关之间的连接性以确保机器是活跃的。路由信息协议使用广播技术。意思是说网关每隔一定时间要把路由表广播给其他网关。这也是RIP的一个问题，因为这会增加网络流量，降低网络性能。HELLO协议与RIP的不同之处在于HELLO使用时间而不是距离作为路由因素。这要求网关对每条路由有合理的准确时间信息。由于这个原因，所以HELLO协议依赖于时钟同步消息。

开放式最短路径优先协议是由Internet工程任务组开发的协议，希望它能成为居于主导地位的IGP。用“最短路径”来描述协议的路由过程不准确。更好一些的名字是“最优路径”， 这其中要考虑许多因素来决定到达目的地的最佳路由。



![img](https://upload-images.jianshu.io/upload_images/7240015-e62f2146f949ca83?imageMogr2/auto-orient/strip%7CimageView2/2/w/632/format/webp)

网关实质上是一个网络通向其他网络的IP地址。比如有网络A和网络B，网络A的IP地址范围为“192.168.1.1~192. 168.1.254”，子网掩码为255.255.255.0；网络B的IP地址范围为“192.168.2.1~192.168.2.254”，子网掩码为255.255.255.0。在没有路由器的情况下，两个网络之间是不能进行TCP/IP通信的，即使是两个网络连接在同一台交换机(或集线器)上，TCP/IP协议也会根据子网掩码(255.255.255.0)判定两个网络中的主机处在不同的网络里。而要实现这两个网络之间的通信，则必须通过网关。如果网络A中的主机发现数据包的目的主机不在本地网络中，就把数据包转发给它自己的网关，再由网关转发给网络B的网关，网络B的网关再转发给网络B的某个主机。网络B向网络A转发数据包的过程。

对默认网关，其意思是一台主机如果找不到可用的网关，就把数据包发给默认指定的网关，由这个网关来处理数据包。现在主机使用的网关，一般指的是默认网关。



![img](https://upload-images.jianshu.io/upload_images/7240015-e7a62f3f8db68b24?imageMogr2/auto-orient/strip%7CimageView2/2/w/640/format/webp)

所以说，只有设置好网关的IP地址，TCP/IP协议才能实现不同网络之间的相互通信。在和 Novell NetWare 网络交互操作的上下文中，网关在 Windows 网络中使用的服务器信息块 (SMB) 协议以及 NetWare 网络使用的 NetWare 核心协议 (NCP) 之间起着桥梁的作用。网关也被称为 IP 路由器。

小礼物走一走，来简书关注我